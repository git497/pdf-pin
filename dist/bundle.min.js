!function t(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("bundle",[],r):"object"==typeof exports?exports.bundle=r():e.bundle=r()}(this,function(){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r=window.webpackJsonpbundle;window.webpackJsonpbundle=function e(i,o,a){for(var s,c,l=0,h=[],u;l<i.length;l++)c=i[l],n[c]&&h.push(n[c][0]),n[c]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);for(r&&r(i,o,a);h.length;)h.shift()()};var i={},n={1:0};return e.e=function t(r){function i(){c.onerror=c.onload=null,clearTimeout(l);var t=n[r];0!==t&&(t&&t[1](new Error("Loading chunk "+r+" failed.")),n[r]=void 0)}var o=n[r];if(0===o)return new Promise(function(t){t()});if(o)return o[2];var a=new Promise(function(t,e){o=n[r]=[t,e]});o[2]=a;var s=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript",c.charset="utf-8",c.async=!0,c.timeout=12e4,e.nc&&c.setAttribute("nonce",e.nc),c.src=e.p+""+r+".bundle.min.js";var l=setTimeout(i,12e4);return c.onerror=c.onload=i,s.appendChild(c),a},e.m=t,e.c=i,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function e(){return t.default}:function e(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e.oe=function(t){throw console.error(t),t},e(e.s=29)}([function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function n(t){if(u===setTimeout)return setTimeout(t,0);if((u===r||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){p&&g&&(p=!1,g.length?d=g.concat(d):v=-1,d.length&&s())}function s(){if(!p){var t=n(a);p=!0;for(var e=d.length;e;){for(g=d,d=[];++v<e;)g&&g[v].run();v=-1,e=d.length}g=null,p=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var h=t.exports={},u,f;!function(){try{u="function"==typeof setTimeout?setTimeout:r}catch(t){u=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var d=[],p=!1,g,v=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new c(t,e)),1!==d.length||p||n(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,r){"use strict";(function(t){function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function n(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,r){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return s(this,t,e,r)}function s(t,e,r,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?d(t,e,r,i):"string"==typeof e?u(t,e,r):p(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,r,i){return c(e),e<=0?o(t,e):void 0!==r?"string"==typeof i?o(t,e).fill(r,i):o(t,e).fill(r):o(t,e)}function h(t,e){if(c(e),t=o(t,e<0?0:0|g(e)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function u(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!a.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(e,r);t=o(t,i);var n=t.write(e,r);return n!==i&&(t=t.slice(0,n)),t}function f(t,e){var r=e.length<0?0:0|g(e.length);t=o(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function d(t,e,r,i){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,r):new Uint8Array(e,r,i),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=f(t,e),t}function p(t,e){if(a.isBuffer(e)){var r=0|g(e.length);return t=o(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||J(e.length)?o(t,0):f(t,e);if("Buffer"===e.type&&$(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),a.alloc(+t)}function m(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(t).length;default:if(i)return G(t).length;e=(""+e).toLowerCase(),i=!0}}function b(t,e,r){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return R(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function y(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function _(t,e,r,i,n){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=a.from(e,i)),a.isBuffer(e))return 0===e.length?-1:w(t,e,r,i,n);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):w(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function w(t,e,r,i,n){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,r/=2}var l;if(n){var h=-1;for(l=r;l<s;l++)if(o(t,l)===o(e,-1===h?0:l-h)){if(-1===h&&(h=l),l-h+1===c)return h*a}else-1!==h&&(l-=l-h),h=-1}else for(r+c>s&&(r=s-c),l=r;l>=0;l--){for(var u=!0,f=0;f<c;f++)if(o(t,l+f)!==o(e,f)){u=!1;break}if(u)return l}return-1}function S(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function x(t,e,r,i){return Z(G(e,t.length-r),t,r,i)}function C(t,e,r,i){return Z(H(e),t,r,i)}function A(t,e,r,i){return C(t,e,r,i)}function T(t,e,r,i){return Z(V(e),t,r,i)}function k(t,e,r,i){return Z(Y(e,t.length-r),t,r,i)}function P(t,e,r){return 0===e&&r===t.length?K.fromByteArray(t):K.fromByteArray(t.slice(e,r))}function E(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var o=t[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n+s<=r){var c,l,h,u;switch(s){case 1:o<128&&(a=o);break;case 2:c=t[n+1],128==(192&c)&&(u=(31&o)<<6|63&c)>127&&(a=u);break;case 3:c=t[n+1],l=t[n+2],128==(192&c)&&128==(192&l)&&(u=(15&o)<<12|(63&c)<<6|63&l)>2047&&(u<55296||u>57343)&&(a=u);break;case 4:c=t[n+1],l=t[n+2],h=t[n+3],128==(192&c)&&128==(192&l)&&128==(192&h)&&(u=(15&o)<<18|(63&c)<<12|(63&l)<<6|63&h)>65535&&u<1114112&&(a=u)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),n+=s}return O(i)}function O(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var r="",i=0;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=tt));return r}function R(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}function L(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function D(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=e;o<r;++o)n+=X(t[o]);return n}function I(t,e,r){for(var i=t.slice(e,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function j(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,r,i,n,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function F(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-r,2);n<o;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function N(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-r,4);n<o;++n)t[r+n]=e>>>8*(i?n:3-n)&255}function B(t,e,r,i,n,o){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,i,n){return n||B(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,r,i,23,4),r+4}function z(t,e,r,i,n){return n||B(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,r,i,52,8),r+8}function W(t){if(t=q(t).replace(et,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function X(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){e=e||1/0;for(var r,i=t.length,n=null,o=[],a=0;a<i;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function H(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function Y(t,e){for(var r,i,n,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),i=r>>8,n=r%256,o.push(n),o.push(i);return o}function V(t){return K.toByteArray(W(t))}function Z(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function J(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var K=r(40),Q=r(41),$=r(13);e.Buffer=a,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),e.kMaxLength=n(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,r){return s(null,t,e,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,r){return l(null,t,e,r)},a.allocUnsafe=function(t){return h(null,t)},a.allocUnsafeSlow=function(t){return h(null,t)},a.isBuffer=function t(e){return!(null==e||!e._isBuffer)},a.compare=function t(e,r){if(!a.isBuffer(e)||!a.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var i=e.length,n=r.length,o=0,s=Math.min(i,n);o<s;++o)if(e[o]!==r[o]){i=e[o],n=r[o];break}return i<n?-1:n<i?1:0},a.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function t(e,r){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var i;if(void 0===r)for(r=0,i=0;i<e.length;++i)r+=e[i].length;var n=a.allocUnsafe(r),o=0;for(i=0;i<e.length;++i){var s=e[i];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},a.byteLength=m,a.prototype._isBuffer=!0,a.prototype.swap16=function t(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)y(this,r,r+1);return this},a.prototype.swap32=function t(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)y(this,r,r+3),y(this,r+1,r+2);return this},a.prototype.swap64=function t(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)y(this,r,r+7),y(this,r+1,r+6),y(this,r+2,r+5),y(this,r+3,r+4);return this},a.prototype.toString=function t(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):b.apply(this,arguments)},a.prototype.equals=function t(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function t(){var r="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(r=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(r+=" ... ")),"<Buffer "+r+">"},a.prototype.compare=function t(e,r,i,n,o){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),r<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&r>=i)return 0;if(n>=o)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var s=o-n,c=i-r,l=Math.min(s,c),h=this.slice(n,o),u=e.slice(r,i),f=0;f<l;++f)if(h[f]!==u[f]){s=h[f],c=u[f];break}return s<c?-1:c<s?1:0},a.prototype.includes=function t(e,r,i){return-1!==this.indexOf(e,r,i)},a.prototype.indexOf=function t(e,r,i){return _(this,e,r,i,!0)},a.prototype.lastIndexOf=function t(e,r,i){return _(this,e,r,i,!1)},a.prototype.write=function t(e,r,i,n){if(void 0===r)n="utf8",i=this.length,r=0;else if(void 0===i&&"string"==typeof r)n=r,i=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var o=this.length-r;if((void 0===i||i>o)&&(i=o),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return S(this,e,r,i);case"utf8":case"utf-8":return x(this,e,r,i);case"ascii":return C(this,e,r,i);case"latin1":case"binary":return A(this,e,r,i);case"base64":return T(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,r,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},a.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;a.prototype.slice=function t(e,r){var i=this.length;e=~~e,r=void 0===r?i:~~r,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),r<0?(r+=i)<0&&(r=0):r>i&&(r=i),r<e&&(r=e);var n;if(a.TYPED_ARRAY_SUPPORT)n=this.subarray(e,r),n.__proto__=a.prototype;else{var o=r-e;n=new a(o,void 0);for(var s=0;s<o;++s)n[s]=this[s+e]}return n},a.prototype.readUIntLE=function t(e,r,i){e|=0,r|=0,i||j(e,r,this.length);for(var n=this[e],o=1,a=0;++a<r&&(o*=256);)n+=this[e+a]*o;return n},a.prototype.readUIntBE=function t(e,r,i){e|=0,r|=0,i||j(e,r,this.length);for(var n=this[e+--r],o=1;r>0&&(o*=256);)n+=this[e+--r]*o;return n},a.prototype.readUInt8=function t(e,r){return r||j(e,1,this.length),this[e]},a.prototype.readUInt16LE=function t(e,r){return r||j(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function t(e,r){return r||j(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function t(e,r){return r||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function t(e,r){return r||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function t(e,r,i){e|=0,r|=0,i||j(e,r,this.length);for(var n=this[e],o=1,a=0;++a<r&&(o*=256);)n+=this[e+a]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*r)),n},a.prototype.readIntBE=function t(e,r,i){e|=0,r|=0,i||j(e,r,this.length);for(var n=r,o=1,a=this[e+--n];n>0&&(o*=256);)a+=this[e+--n]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*r)),a},a.prototype.readInt8=function t(e,r){return r||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function t(e,r){r||j(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},a.prototype.readInt16BE=function t(e,r){r||j(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},a.prototype.readInt32LE=function t(e,r){return r||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function t(e,r){return r||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function t(e,r){return r||j(e,4,this.length),Q.read(this,e,!0,23,4)},a.prototype.readFloatBE=function t(e,r){return r||j(e,4,this.length),Q.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function t(e,r){return r||j(e,8,this.length),Q.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function t(e,r){return r||j(e,8,this.length),Q.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function t(e,r,i,n){if(e=+e,r|=0,i|=0,!n){M(this,e,r,i,Math.pow(2,8*i)-1,0)}var o=1,a=0;for(this[r]=255&e;++a<i&&(o*=256);)this[r+a]=e/o&255;return r+i},a.prototype.writeUIntBE=function t(e,r,i,n){if(e=+e,r|=0,i|=0,!n){M(this,e,r,i,Math.pow(2,8*i)-1,0)}var o=i-1,a=1;for(this[r+o]=255&e;--o>=0&&(a*=256);)this[r+o]=e/a&255;return r+i},a.prototype.writeUInt8=function t(e,r,i){return e=+e,r|=0,i||M(this,e,r,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},a.prototype.writeUInt16LE=function t(e,r,i){return e=+e,r|=0,i||M(this,e,r,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):F(this,e,r,!0),r+2},a.prototype.writeUInt16BE=function t(e,r,i){return e=+e,r|=0,i||M(this,e,r,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):F(this,e,r,!1),r+2},a.prototype.writeUInt32LE=function t(e,r,i){return e=+e,r|=0,i||M(this,e,r,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):N(this,e,r,!0),r+4},a.prototype.writeUInt32BE=function t(e,r,i){return e=+e,r|=0,i||M(this,e,r,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):N(this,e,r,!1),r+4},a.prototype.writeIntLE=function t(e,r,i,n){if(e=+e,r|=0,!n){var o=Math.pow(2,8*i-1);M(this,e,r,i,o-1,-o)}var a=0,s=1,c=0;for(this[r]=255&e;++a<i&&(s*=256);)e<0&&0===c&&0!==this[r+a-1]&&(c=1),this[r+a]=(e/s>>0)-c&255;return r+i},a.prototype.writeIntBE=function t(e,r,i,n){if(e=+e,r|=0,!n){var o=Math.pow(2,8*i-1);M(this,e,r,i,o-1,-o)}var a=i-1,s=1,c=0;for(this[r+a]=255&e;--a>=0&&(s*=256);)e<0&&0===c&&0!==this[r+a+1]&&(c=1),this[r+a]=(e/s>>0)-c&255;return r+i},a.prototype.writeInt8=function t(e,r,i){return e=+e,r|=0,i||M(this,e,r,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},a.prototype.writeInt16LE=function t(e,r,i){return e=+e,r|=0,i||M(this,e,r,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):F(this,e,r,!0),r+2},a.prototype.writeInt16BE=function t(e,r,i){return e=+e,r|=0,i||M(this,e,r,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):F(this,e,r,!1),r+2},a.prototype.writeInt32LE=function t(e,r,i){return e=+e,r|=0,i||M(this,e,r,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):N(this,e,r,!0),r+4},a.prototype.writeInt32BE=function t(e,r,i){return e=+e,r|=0,i||M(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):N(this,e,r,!1),r+4},a.prototype.writeFloatLE=function t(e,r,i){return U(this,e,r,!0,i)},a.prototype.writeFloatBE=function t(e,r,i){return U(this,e,r,!1,i)},a.prototype.writeDoubleLE=function t(e,r,i){return z(this,e,r,!0,i)},a.prototype.writeDoubleBE=function t(e,r,i){return z(this,e,r,!1,i)},a.prototype.copy=function t(e,r,i,n){if(i||(i=0),n||0===n||(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);var o=n-i,s;if(this===e&&i<r&&r<n)for(s=o-1;s>=0;--s)e[s+r]=this[s+i];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(s=0;s<o;++s)e[s+r]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),r);return o},a.prototype.fill=function t(e,r,i,n){if("string"==typeof e){if("string"==typeof r?(n=r,r=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0);var s;if("number"==typeof e)for(s=r;s<i;++s)this[s]=e;else{var c=a.isBuffer(e)?e:G(new a(e,n).toString()),l=c.length;for(s=0;s<i-r;++s)this[s+r]=c[s%l]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,r(0))},function(t,e){"function"==typeof Object.create?t.exports=function t(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function t(e,r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}},function(t,e,r){"use strict";function i(t){if(!(this instanceof i))return new i(t);h.call(this,t),u.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",n)}function n(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(t){t.end()}function a(t,e){for(var r=0,i=t.length;r<i;r++)e(t[r],r)}var s=r(7),c=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=i;var l=r(5);l.inherits=r(3);var h=r(14),u=r(18);l.inherits(i,h);for(var f=c(u.prototype),d=0;d<f.length;d++){var p=f[d];i.prototype[p]||(i.prototype[p]=u.prototype[p])}Object.defineProperty(i.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),i.prototype._destroy=function(t,e){this.push(null),this.end(),s(e,t)}},function(t,e,r){(function(t){function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===v(t)}function i(t){return"boolean"==typeof t}function n(t){return null===t}function o(t){return null==t}function a(t){return"number"==typeof t}function s(t){return"string"==typeof t}function c(t){return"symbol"==typeof t}function l(t){return void 0===t}function h(t){return"[object RegExp]"===v(t)}function u(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===v(t)}function d(t){return"[object Error]"===v(t)||t instanceof Error}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function v(t){return Object.prototype.toString.call(t)}e.isArray=r,e.isBoolean=i,e.isNull=n,e.isNullOrUndefined=o,e.isNumber=a,e.isString=s,e.isSymbol=c,e.isUndefined=l,e.isRegExp=h,e.isObject=u,e.isDate=f,e.isError=d,e.isFunction=p,e.isPrimitive=g,e.isBuffer=t.isBuffer}).call(e,r(2).Buffer)},function(t,e,r){"use strict";function i(){p=!1}function n(t){if(!t)return void(f!==u&&(f=u,i()));if(t!==f){if(t.length!==u.length)throw new Error("Custom alphabet for shortid must be "+u.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(t,e,r){return e!==r.lastIndexOf(t)});if(e.length)throw new Error("Custom alphabet for shortid must be "+u.length+" unique characters. These characters were not unique: "+e.join(", "));f=t,i()}}function o(t){return n(t),f}function a(t){h.seed(t),d!==t&&(i(),d=t)}function s(){f||n(u);for(var t=f.split(""),e=[],r=h.nextValue(),i;t.length>0;)r=h.nextValue(),i=Math.floor(r*t.length),e.push(t.splice(i,1)[0]);return e.join("")}function c(){return p||(p=s())}function l(t){return c()[t]}var h=r(32),u="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",f,d,p;t.exports={characters:o,seed:a,lookup:l,shuffled:c}},function(t,e,r){"use strict";(function(e){function r(t,r,i,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o=arguments.length,a,s;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function e(){t.call(null,r)});case 3:return e.nextTick(function e(){t.call(null,r,i)});case 4:return e.nextTick(function e(){t.call(null,r,i,n)});default:for(a=new Array(o-1),s=0;s<a.length;)a[s++]=arguments[s];return e.nextTick(function e(){t.apply(null,a)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=r:t.exports=e.nextTick}).call(e,r(1))},function(t,e,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+i),n);for(var o=0;o<i;o++)t[n+o]=e[r+o]},flattenChunks:function(t){var e,r,i,n,o,a;for(i=0,e=0,r=t.length;e<r;e++)i+=t[e].length;for(a=new Uint8Array(i),n=0,e=0,r=t.length;e<r;e++)o=t[e],a.set(o,n),n+=o.length;return a}},o={arraySet:function(t,e,r,i,n){for(var o=0;o<i;o++)t[n+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},function(t,e,r){e=t.exports=r(14),e.Stream=e,e.Readable=e,e.Writable=r(18),e.Duplex=r(4),e.Transform=r(20),e.PassThrough=r(49)},function(t,e,r){function i(t,e){for(var r in t)e[r]=t[r]}function n(t,e,r){return a(t,e,r)}var o=r(2),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(i(o,e),e.Buffer=n),i(a,n),n.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return a(t,e,r)},n.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=a(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},n.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a(t)},n.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},function(t,e,r){"use strict";function i(t,e){for(var r=0,i,o="";!i;)o+=t(e>>4*r&15|n()),i=e<Math.pow(16,r+1),r++;return o}var n=r(33);t.exports=i},function(t,e,r){(function(e,i,n){!function e(r,i){t.exports=i()}(this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function e(){return t.default}:function e(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=13)}([function(t,r,n){"use strict";function o(t){lt=t}function a(){return lt}function s(t){lt>=at.infos&&console.log("Info: "+t)}function c(t){lt>=at.warnings&&console.log("Warning: "+t)}function l(t){console.log("Deprecated API usage: "+t)}function h(t){throw new Error(t)}function u(t,e){t||h(e)}function f(t,e){try{var r=new URL(t);if(!r.origin||"null"===r.origin)return!1}catch(t){return!1}var i=new URL(e,r);return r.origin===i.origin}function d(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function p(t,e){if(!t)return null;try{var r=e?new URL(t,e):new URL(t);if(d(r))return r}catch(t){}return null}function g(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}function v(t){var e;return function(){return t&&(e=Object.create(null),t(e),t=null),e}}function m(t){return"string"!=typeof t?(c("The argument for removeNullCharacters must be a string."),t):t.replace(wt,"")}function b(t){u(null!==t&&"object"===(void 0===t?"undefined":Y(t))&&void 0!==t.length,"Invalid argument for bytesToString");var e=t.length,r=8192;if(e<8192)return String.fromCharCode.apply(null,t);for(var i=[],n=0;n<e;n+=8192){var o=Math.min(n+8192,e),a=t.subarray(n,o);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function y(t){u("string"==typeof t,"Invalid argument for stringToBytes");for(var e=t.length,r=new Uint8Array(e),i=0;i<e;++i)r[i]=255&t.charCodeAt(i);return r}function _(t){return void 0!==t.length?t.length:(u(void 0!==t.byteLength),t.byteLength)}function w(t){if(1===t.length&&t[0]instanceof Uint8Array)return t[0];var e=0,r,i=t.length,n,o;for(r=0;r<i;r++)n=t[r],o=_(n),e+=o;var a=0,s=new Uint8Array(e);for(r=0;r<i;r++)n=t[r],n instanceof Uint8Array||(n="string"==typeof n?y(n):new Uint8Array(n)),o=n.byteLength,s.set(n,a),a+=o;return s}function S(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)}function x(t){for(var e=1,r=0;t>e;)e<<=1,r++;return r}function C(t,e){return t[e]<<24>>24}function A(t,e){return t[e]<<8|t[e+1]}function T(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function k(){var t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}function P(){try{return new Function(""),!0}catch(t){return!1}}function E(t){var e,r=t.length,i=[];if("þ"===t[0]&&"ÿ"===t[1])for(e=2;e<r;e+=2)i.push(String.fromCharCode(t.charCodeAt(e)<<8|t.charCodeAt(e+1)));else for(e=0;e<r;++e){var n=At[t.charCodeAt(e)];i.push(n?String.fromCharCode(n):t.charAt(e))}return i.join("")}function O(t){return decodeURIComponent(escape(t))}function R(t){return unescape(encodeURIComponent(t))}function L(t){for(var e in t)return!1;return!0}function D(t){return"boolean"==typeof t}function I(t){return"number"==typeof t&&(0|t)===t}function j(t){return"number"==typeof t}function M(t){return"string"==typeof t}function F(t){return t instanceof Array}function N(t){return"object"===(void 0===t?"undefined":Y(t))&&null!==t&&void 0!==t.byteLength}function B(t){return 32===t||9===t||13===t||10===t}function U(){return"object"===(void 0===i?"undefined":Y(i))&&i+""=="[object process]"}function z(){var t={};return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t}function W(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t?new Promise(function(i,n){i(t.apply(r,e))}):Promise.resolve(void 0)}function q(t,e,r){e?t.resolve():t.reject(r)}function X(t){return Promise.resolve(t).catch(function(){})}function G(t,e,r){var i=this;this.sourceName=t,this.targetName=e,this.comObj=r,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null);var n=this.callbacksCapabilities=Object.create(null),o=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(t){var e=t.data;if(e.targetName===i.sourceName)if(e.stream)i._processStreamMessage(e);else if(e.isReply){var a=e.callbackId;if(!(e.callbackId in n))throw new Error("Cannot resolve callback "+a);var s=n[a];delete n[a],"error"in e?s.reject(e.error):s.resolve(e.data)}else{if(!(e.action in o))throw new Error("Unknown action from worker: "+e.action);var c=o[e.action];if(e.callbackId){var l=i.sourceName,h=e.sourceName;Promise.resolve().then(function(){return c[0].call(c[1],e.data)}).then(function(t){r.postMessage({sourceName:l,targetName:h,isReply:!0,callbackId:e.callbackId,data:t})},function(t){t instanceof Error&&(t+=""),r.postMessage({sourceName:l,targetName:h,isReply:!0,callbackId:e.callbackId,error:t})})}else e.streamId?i._createStreamSink(e):c[0].call(c[1],e.data)}},r.addEventListener("message",this._onComObjOnMessage)}function H(t,e,r){var i=new Image;i.onload=function e(){r.resolve(t,i)},i.onerror=function e(){r.resolve(t,null),c("Error during JPEG image loading")},i.src=e}Object.defineProperty(r,"__esModule",{value:!0}),r.unreachable=r.warn=r.utf8StringToString=r.stringToUTF8String=r.stringToPDFString=r.stringToBytes=r.string32=r.shadow=r.setVerbosityLevel=r.ReadableStream=r.removeNullCharacters=r.readUint32=r.readUint16=r.readInt8=r.log2=r.loadJpegStream=r.isEvalSupported=r.isLittleEndian=r.createValidAbsoluteUrl=r.isSameOrigin=r.isNodeJS=r.isSpace=r.isString=r.isNum=r.isInt=r.isEmptyObj=r.isBool=r.isArrayBuffer=r.isArray=r.info=r.globalScope=r.getVerbosityLevel=r.getLookupTableFactory=r.deprecated=r.createObjectURL=r.createPromiseCapability=r.createBlob=r.bytesToString=r.assert=r.arraysToBytes=r.arrayByteLength=r.FormatError=r.XRefParseException=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.StreamType=r.StatTimer=r.PasswordResponses=r.PasswordException=r.PageViewport=r.NotImplementedException=r.NativeImageDecoding=r.MissingPDFException=r.MissingDataException=r.MessageHandler=r.InvalidPDFException=r.CMapCompressionType=r.ImageKind=r.FontType=r.AnnotationType=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationBorderStyleType=r.UNSUPPORTED_FEATURES=r.VERBOSITY_LEVELS=r.OPS=r.IDENTITY_MATRIX=r.FONT_IDENTITY_MATRIX=void 0;var Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n(14);var V=n(9),Z="undefined"!=typeof window&&window.Math===Math?window:void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:void 0,J=[.001,0,0,.001,0,0],K={NONE:"none",DECODE:"decode",DISPLAY:"display"},Q={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},$={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},tt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},et={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},rt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},it={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},nt={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},ot={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10},at={errors:0,warnings:1,infos:5},st={NONE:0,BINARY:1,STREAM:2},ct={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},lt=at.warnings,ht={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},ut={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},ft=function t(){function e(t,e){this.name="PasswordException",this.message=t,this.code=e}return e.prototype=new Error,e.constructor=e,e}(),dt=function t(){function e(t,e){this.name="UnknownErrorException",this.message=t,this.details=e}return e.prototype=new Error,e.constructor=e,e}(),pt=function t(){function e(t){this.name="InvalidPDFException",this.message=t}return e.prototype=new Error,e.constructor=e,e}(),gt=function t(){function e(t){this.name="MissingPDFException",this.message=t}return e.prototype=new Error,e.constructor=e,e}(),vt=function t(){function e(t,e){this.name="UnexpectedResponseException",this.message=t,this.status=e}return e.prototype=new Error,e.constructor=e,e}(),mt=function t(){function e(t){this.message=t}return e.prototype=new Error,e.prototype.name="NotImplementedException",e.constructor=e,e}(),bt=function t(){function e(t,e){this.begin=t,this.end=e,this.message="Missing data ["+t+", "+e+")"}return e.prototype=new Error,e.prototype.name="MissingDataException",e.constructor=e,e}(),yt=function t(){function e(t){this.message=t}return e.prototype=new Error,e.prototype.name="XRefParseException",e.constructor=e,e}(),_t=function t(){function e(t){this.message=t}return e.prototype=new Error,e.prototype.name="FormatError",e.constructor=e,e}(),wt=/\x00/g,St=[1,0,0,1,0,0],xt=function t(){function e(){}var r=["rgb(",0,",",0,",",0,")"];e.makeCssRgb=function t(e,i,n){return r[1]=e,r[3]=i,r[5]=n,r.join("")},e.transform=function t(e,r){return[e[0]*r[0]+e[2]*r[1],e[1]*r[0]+e[3]*r[1],e[0]*r[2]+e[2]*r[3],e[1]*r[2]+e[3]*r[3],e[0]*r[4]+e[2]*r[5]+e[4],e[1]*r[4]+e[3]*r[5]+e[5]]},e.applyTransform=function t(e,r){return[e[0]*r[0]+e[1]*r[2]+r[4],e[0]*r[1]+e[1]*r[3]+r[5]]},e.applyInverseTransform=function t(e,r){var i=r[0]*r[3]-r[1]*r[2];return[(e[0]*r[3]-e[1]*r[2]+r[2]*r[5]-r[4]*r[3])/i,(-e[0]*r[1]+e[1]*r[0]+r[4]*r[1]-r[5]*r[0])/i]},e.getAxialAlignedBoundingBox=function t(r,i){var n=e.applyTransform(r,i),o=e.applyTransform(r.slice(2,4),i),a=e.applyTransform([r[0],r[3]],i),s=e.applyTransform([r[2],r[1]],i);return[Math.min(n[0],o[0],a[0],s[0]),Math.min(n[1],o[1],a[1],s[1]),Math.max(n[0],o[0],a[0],s[0]),Math.max(n[1],o[1],a[1],s[1])]},e.inverseTransform=function t(e){var r=e[0]*e[3]-e[1]*e[2];return[e[3]/r,-e[1]/r,-e[2]/r,e[0]/r,(e[2]*e[5]-e[4]*e[3])/r,(e[4]*e[1]-e[5]*e[0])/r]},e.apply3dTransform=function t(e,r){return[e[0]*r[0]+e[1]*r[1]+e[2]*r[2],e[3]*r[0]+e[4]*r[1]+e[5]*r[2],e[6]*r[0]+e[7]*r[1]+e[8]*r[2]]},e.singularValueDecompose2dScale=function t(e){var r=[e[0],e[2],e[1],e[3]],i=e[0]*r[0]+e[1]*r[2],n=e[0]*r[1]+e[1]*r[3],o=e[2]*r[0]+e[3]*r[2],a=e[2]*r[1]+e[3]*r[3],s=(i+a)/2,c=Math.sqrt((i+a)*(i+a)-4*(i*a-o*n))/2,l=s+c||1,h=s-c||1;return[Math.sqrt(l),Math.sqrt(h)]},e.normalizeRect=function t(e){var r=e.slice(0);return e[0]>e[2]&&(r[0]=e[2],r[2]=e[0]),e[1]>e[3]&&(r[1]=e[3],r[3]=e[1]),r},e.intersect=function t(r,i){function n(t,e){return t-e}var o=[r[0],r[2],i[0],i[2]].sort(n),a=[r[1],r[3],i[1],i[3]].sort(n),s=[];return r=e.normalizeRect(r),i=e.normalizeRect(i),(o[0]===r[0]&&o[1]===i[0]||o[0]===i[0]&&o[1]===r[0])&&(s[0]=o[1],s[2]=o[2],(a[0]===r[1]&&a[1]===i[1]||a[0]===i[1]&&a[1]===r[1])&&(s[1]=a[1],s[3]=a[2],s))},e.sign=function t(e){return e<0?-1:1};var i=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];return e.toRoman=function t(e,r){u(I(e)&&e>0,"The number should be a positive integer.");for(var n,o=[];e>=1e3;)e-=1e3,o.push("M");n=e/100|0,e%=100,o.push(i[n]),n=e/10|0,e%=10,o.push(i[10+n]),o.push(i[20+e]);var a=o.join("");return r?a.toLowerCase():a},e.appendToArray=function t(e,r){Array.prototype.push.apply(e,r)},e.prependToArray=function t(e,r){Array.prototype.unshift.apply(e,r)},e.extendObj=function t(e,r){for(var i in r)e[i]=r[i]},e.getInheritableProperty=function t(e,r,i){for(;e&&!e.has(r);)e=e.get("Parent");return e?i?e.getArray(r):e.get(r):null},e.inherit=function t(e,r,i){e.prototype=Object.create(r.prototype),e.prototype.constructor=e;for(var n in i)e.prototype[n]=i[n]},e.loadScript=function t(e,r){var i=document.createElement("script"),n=!1;i.setAttribute("src",e),r&&(i.onload=function(){n||r(),n=!0}),document.getElementsByTagName("head")[0].appendChild(i)},e}(),Ct=function t(){function e(t,e,r,i,n,o){this.viewBox=t,this.scale=e,this.rotation=r,this.offsetX=i,this.offsetY=n;var a=(t[2]+t[0])/2,s=(t[3]+t[1])/2,c,l,h,u;switch(r%=360,r=r<0?r+360:r){case 180:c=-1,l=0,h=0,u=1;break;case 90:c=0,l=1,h=1,u=0;break;case 270:c=0,l=-1,h=-1,u=0;break;default:c=1,l=0,h=0,u=-1}o&&(h=-h,u=-u);var f,d,p,g;0===c?(f=Math.abs(s-t[1])*e+i,d=Math.abs(a-t[0])*e+n,p=Math.abs(t[3]-t[1])*e,g=Math.abs(t[2]-t[0])*e):(f=Math.abs(a-t[0])*e+i,d=Math.abs(s-t[1])*e+n,p=Math.abs(t[2]-t[0])*e,g=Math.abs(t[3]-t[1])*e),this.transform=[c*e,l*e,h*e,u*e,f-c*e*a-h*e*s,d-l*e*a-u*e*s],this.width=p,this.height=g,this.fontScale=e}return e.prototype={clone:function t(r){r=r||{};var i="scale"in r?r.scale:this.scale,n="rotation"in r?r.rotation:this.rotation;return new e(this.viewBox.slice(),i,n,this.offsetX,this.offsetY,r.dontFlip)},convertToViewportPoint:function t(e,r){return xt.applyTransform([e,r],this.transform)},convertToViewportRectangle:function t(e){var r=xt.applyTransform([e[0],e[1]],this.transform),i=xt.applyTransform([e[2],e[3]],this.transform);return[r[0],r[1],i[0],i[1]]},convertToPdfPoint:function t(e,r){return xt.applyInverseTransform([e,r],this.transform)}},e}(),At=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],Tt=function t(){function e(t,e,r){for(;t.length<r;)t+=e;return t}function r(){this.started=Object.create(null),this.times=[],this.enabled=!0}return r.prototype={time:function t(e){this.enabled&&(e in this.started&&c("Timer is already running for "+e),this.started[e]=Date.now())},timeEnd:function t(e){this.enabled&&(e in this.started||c("Timer has not been started for "+e),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e])},toString:function t(){var r,i,n=this.times,o="",a=0;for(r=0,i=n.length;r<i;++r){var s=n[r].name;s.length>a&&(a=s.length)}for(r=0,i=n.length;r<i;++r){var c=n[r],l=c.end-c.start;o+=e(c.name," ",a)+" "+l+"ms\n"}return o}},r}(),kt=function t(e,r){if("undefined"!=typeof Blob)return new Blob([e],{type:r});throw new Error('The "Blob" constructor is not supported.')},Pt=function t(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function t(r,i){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&URL.createObjectURL){var n=kt(r,i);return URL.createObjectURL(n)}for(var o="data:"+i+";base64,",a=0,s=r.length;a<s;a+=3){var c=255&r[a],l=255&r[a+1],h=255&r[a+2];o+=e[c>>2]+e[(3&c)<<4|l>>4]+e[a+1<s?(15&l)<<2|h>>6:64]+e[a+2<s?63&h:64]}return o}}();G.prototype={on:function t(e,r,i){var n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'+e+'"');n[e]=[r,i]},send:function t(e,r,i){var n={sourceName:this.sourceName,targetName:this.targetName,action:e,data:r};this.postMessage(n,i)},sendWithPromise:function t(e,r,i){var n=this.callbackId++,o={sourceName:this.sourceName,targetName:this.targetName,action:e,data:r,callbackId:n},a=z();this.callbacksCapabilities[n]=a;try{this.postMessage(o,i)}catch(t){a.reject(t)}return a.promise},sendWithStream:function t(e,r,i,n){var o=this,a=this.streamId++,s=this.sourceName,c=this.targetName;return new V.ReadableStream({start:function t(i){var n=z();return o.streamControllers[a]={controller:i,startCall:n,isClosed:!1},o.postMessage({sourceName:s,targetName:c,action:e,streamId:a,data:r,desiredSize:i.desiredSize}),n.promise},pull:function t(e){var r=z();return o.streamControllers[a].pullCall=r,o.postMessage({sourceName:s,targetName:c,stream:"pull",streamId:a,desiredSize:e.desiredSize}),r.promise},cancel:function t(e){var r=z();return o.streamControllers[a].cancelCall=r,o.streamControllers[a].isClosed=!0,o.postMessage({sourceName:s,targetName:c,stream:"cancel",reason:e,streamId:a}),r.promise}},i)},_createStreamSink:function t(e){var r=this,i=this,n=this.actionHandler[e.action],o=e.streamId,a=e.desiredSize,s=this.sourceName,c=e.sourceName,l=z(),h=function t(e){var i=e.stream,n=e.chunk,a=e.success,l=e.reason;r.comObj.postMessage({sourceName:s,targetName:c,stream:i,streamId:o,chunk:n,success:a,reason:l})},u={enqueue:function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this.isCancelled){var i=this.desiredSize;this.desiredSize-=r,i>0&&this.desiredSize<=0&&(this.sinkCapability=z(),this.ready=this.sinkCapability.promise),h({stream:"enqueue",chunk:e})}},close:function t(){this.isCancelled||(h({stream:"close"}),delete i.streamSinks[o])},error:function t(e){h({stream:"error",reason:e})},sinkCapability:l,onPull:null,onCancel:null,isCancelled:!1,desiredSize:a,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[o]=u,W(n[0],[e.data,u],n[1]).then(function(){h({stream:"start_complete",success:!0})},function(t){h({stream:"start_complete",success:!1,reason:t})})},_processStreamMessage:function t(e){var r=this,i=this.sourceName,n=e.sourceName,o=e.streamId,a=function t(e){var a=e.stream,s=e.success,c=e.reason;r.comObj.postMessage({sourceName:i,targetName:n,stream:a,success:s,streamId:o,reason:c})},s=function t(){Promise.all([r.streamControllers[e.streamId].startCall,r.streamControllers[e.streamId].pullCall,r.streamControllers[e.streamId].cancelCall].map(function(t){return t&&X(t.promise)})).then(function(){delete r.streamControllers[e.streamId]})};switch(e.stream){case"start_complete":q(this.streamControllers[e.streamId].startCall,e.success,e.reason);break;case"pull_complete":q(this.streamControllers[e.streamId].pullCall,e.success,e.reason);break;case"pull":if(!this.streamSinks[e.streamId]){a({stream:"pull_complete",success:!0});break}this.streamSinks[e.streamId].desiredSize<=0&&e.desiredSize>0&&this.streamSinks[e.streamId].sinkCapability.resolve(),this.streamSinks[e.streamId].desiredSize=e.desiredSize,W(this.streamSinks[e.streamId].onPull).then(function(){a({stream:"pull_complete",success:!0})},function(t){a({stream:"pull_complete",success:!1,reason:t})});break;case"enqueue":this.streamControllers[e.streamId].isClosed||this.streamControllers[e.streamId].controller.enqueue(e.chunk);break;case"close":if(this.streamControllers[e.streamId].isClosed)break;this.streamControllers[e.streamId].isClosed=!0,this.streamControllers[e.streamId].controller.close(),s();break;case"error":this.streamControllers[e.streamId].controller.error(e.reason),s();break;case"cancel_complete":q(this.streamControllers[e.streamId].cancelCall,e.success,e.reason),s();break;case"cancel":if(!this.streamSinks[e.streamId])break;W(this.streamSinks[e.streamId].onCancel,[e.reason]).then(function(){a({stream:"cancel_complete",success:!0})},function(t){a({stream:"cancel_complete",success:!1,reason:t})}),this.streamSinks[e.streamId].sinkCapability.reject(e.reason),this.streamSinks[e.streamId].isCancelled=!0,delete this.streamSinks[e.streamId];break;default:throw new Error("Unexpected stream case")}},postMessage:function t(e,r){r&&this.postMessageTransfers?this.comObj.postMessage(e,r):this.comObj.postMessage(e)},destroy:function t(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}},r.FONT_IDENTITY_MATRIX=J,r.IDENTITY_MATRIX=St,r.OPS=ct,r.VERBOSITY_LEVELS=at,r.UNSUPPORTED_FEATURES=ht,r.AnnotationBorderStyleType=it,r.AnnotationFieldFlag=rt,r.AnnotationFlag=et,r.AnnotationType=tt,r.FontType=ot,r.ImageKind=$,r.CMapCompressionType=st,r.InvalidPDFException=pt,r.MessageHandler=G,r.MissingDataException=bt,r.MissingPDFException=gt,r.NativeImageDecoding=K,r.NotImplementedException=mt,r.PageViewport=Ct,r.PasswordException=ft,r.PasswordResponses=ut,r.StatTimer=Tt,r.StreamType=nt,r.TextRenderingMode=Q,r.UnexpectedResponseException=vt,r.UnknownErrorException=dt,r.Util=xt,r.XRefParseException=yt,r.FormatError=_t,r.arrayByteLength=_,r.arraysToBytes=w,r.assert=u,r.bytesToString=b,r.createBlob=kt,r.createPromiseCapability=z,r.createObjectURL=Pt,r.deprecated=l,r.getLookupTableFactory=v,r.getVerbosityLevel=a,r.globalScope=Z,r.info=s,r.isArray=F,r.isArrayBuffer=N,r.isBool=D,r.isEmptyObj=L,r.isInt=I,r.isNum=j,r.isString=M,r.isSpace=B,r.isNodeJS=U,r.isSameOrigin=f,r.createValidAbsoluteUrl=p,r.isLittleEndian=k,r.isEvalSupported=P,r.loadJpegStream=H,r.log2=x,r.readInt8=C,r.readUint16=A,r.readUint32=T,r.removeNullCharacters=m,r.ReadableStream=V.ReadableStream,r.setVerbosityLevel=o,r.shadow=g,r.string32=S,r.stringToBytes=y,r.stringToPDFString=E,r.stringToUTF8String=O,r.utf8StringToString=R,r.warn=c,r.unreachable=h},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){var r=e&&e.url;if(t.href=t.title=r?(0,h.removeNullCharacters)(r):"",r){var i=e.target;void 0===i&&(i=a("externalLinkTarget")),t.target=m[i];var n=e.rel;void 0===n&&(n=a("externalLinkRel")),t.rel=n}}function o(t){var e=t.indexOf("#"),r=t.indexOf("?"),i=Math.min(e>0?e:t.length,r>0?r:t.length);return t.substring(t.lastIndexOf("/",i)+1,i)}function a(t){var e=h.globalScope.PDFJS;switch(t){case"pdfBug":return!!e&&e.pdfBug;case"disableAutoFetch":return!!e&&e.disableAutoFetch;case"disableStream":return!!e&&e.disableStream;case"disableRange":return!!e&&e.disableRange;case"disableFontFace":return!!e&&e.disableFontFace;case"disableCreateObjectURL":return!!e&&e.disableCreateObjectURL;case"disableWebGL":return!e||e.disableWebGL;case"cMapUrl":return e?e.cMapUrl:null;case"cMapPacked":return!!e&&e.cMapPacked;case"postMessageTransfers":return!e||e.postMessageTransfers;case"workerPort":return e?e.workerPort:null;case"workerSrc":return e?e.workerSrc:null;case"disableWorker":return!!e&&e.disableWorker;case"maxImageSize":return e?e.maxImageSize:-1;case"imageResourcesPath":return e?e.imageResourcesPath:"";case"isEvalSupported":return!e||e.isEvalSupported;case"externalLinkTarget":if(!e)return v.NONE;switch(e.externalLinkTarget){case v.NONE:case v.SELF:case v.BLANK:case v.PARENT:case v.TOP:return e.externalLinkTarget}return(0,h.warn)("PDFJS.externalLinkTarget is invalid: "+e.externalLinkTarget),e.externalLinkTarget=v.NONE,v.NONE;case"externalLinkRel":return e?e.externalLinkRel:u;case"enableStats":return!(!e||!e.enableStats);case"pdfjsNext":return!(!e||!e.pdfjsNext);default:throw new Error("Unknown default setting: "+t)}}function s(){switch(a("externalLinkTarget")){case v.NONE:return!1;case v.SELF:case v.BLANK:case v.PARENT:case v.TOP:return!0}}function c(t,e){(0,h.deprecated)("isValidUrl(), please use createValidAbsoluteUrl() instead.");var r=e?"http://example.com":null;return null!==(0,h.createValidAbsoluteUrl)(t,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.DOMCMapReaderFactory=e.DOMCanvasFactory=e.DEFAULT_LINK_REL=e.getDefaultSetting=e.LinkTarget=e.getFilenameFromUrl=e.isValidUrl=e.isExternalLinkTargetSet=e.addLinkAttributes=e.RenderingCancelledException=e.CustomStyle=void 0;var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),h=r(0),u="noopener noreferrer nofollow",f=function(){function t(){i(this,t)}return l(t,[{key:"create",value:function t(e,r){if(e<=0||r<=0)throw new Error("invalid canvas size");var i=document.createElement("canvas"),n=i.getContext("2d");return i.width=e,i.height=r,{canvas:i,context:n}}},{key:"reset",value:function t(e,r,i){if(!e.canvas)throw new Error("canvas is not specified");if(r<=0||i<=0)throw new Error("invalid canvas size");e.canvas.width=r,e.canvas.height=i}},{key:"destroy",value:function t(e){if(!e.canvas)throw new Error("canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}}]),t}(),d=function(){function t(e){var r=e.baseUrl,n=void 0===r?null:r,o=e.isCompressed,a=void 0!==o&&o;i(this,t),this.baseUrl=n,this.isCompressed=a}return l(t,[{key:"fetch",value:function t(e){var r=this,i=e.name;return i?new Promise(function(t,e){var n=r.baseUrl+i+(r.isCompressed?".bcmap":""),o=new XMLHttpRequest;o.open("GET",n,!0),r.isCompressed&&(o.responseType="arraybuffer"),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE){if(200===o.status||0===o.status){var i=void 0;if(r.isCompressed&&o.response?i=new Uint8Array(o.response):!r.isCompressed&&o.responseText&&(i=(0,h.stringToBytes)(o.responseText)),i)return void t({cMapData:i,compressionType:r.isCompressed?h.CMapCompressionType.BINARY:h.CMapCompressionType.NONE})}e(new Error("Unable to load "+(r.isCompressed?"binary ":"")+"CMap at: "+n))}},o.send(null)}):Promise.reject(new Error("CMap name must be specified."))}}]),t}(),p=function t(){function e(){}var r=["ms","Moz","Webkit","O"],i=Object.create(null);return e.getProp=function t(e,n){if(1===arguments.length&&"string"==typeof i[e])return i[e];n=n||document.documentElement;var o=n.style,a,s;if("string"==typeof o[e])return i[e]=e;s=e.charAt(0).toUpperCase()+e.slice(1);for(var c=0,l=r.length;c<l;c++)if(a=r[c]+s,"string"==typeof o[a])return i[e]=a;return i[e]="undefined"},e.setProp=function t(e,r,i){var n=this.getProp(e);"undefined"!==n&&(r.style[n]=i)},e}(),g=function t(){function t(t,e){this.message=t,this.type=e}return t.prototype=new Error,t.prototype.name="RenderingCancelledException",t.constructor=t,t}(),v={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},m=["","_self","_blank","_parent","_top"];e.CustomStyle=p,e.RenderingCancelledException=g,e.addLinkAttributes=n,e.isExternalLinkTargetSet=s,e.isValidUrl=c,e.getFilenameFromUrl=o,e.LinkTarget=v,e.getDefaultSetting=a,e.DEFAULT_LINK_REL=u,e.DOMCanvasFactory=f,e.DOMCMapReaderFactory=d},function(t,e,r){"use strict";function i(){}Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=r(1),o=r(0);i.prototype={create:function t(e){switch(e.data.annotationType){case o.AnnotationType.LINK:return new s(e);case o.AnnotationType.TEXT:return new c(e);case o.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new h(e);case"Btn":if(e.data.radioButton)return new f(e);if(e.data.checkBox)return new u(e);(0,o.warn)("Unimplemented button widget annotation: pushbutton");break;case"Ch":return new d(e)}return new l(e);case o.AnnotationType.POPUP:return new p(e);case o.AnnotationType.LINE:return new v(e);case o.AnnotationType.HIGHLIGHT:return new m(e);case o.AnnotationType.UNDERLINE:return new b(e);case o.AnnotationType.SQUIGGLY:return new y(e);case o.AnnotationType.STRIKEOUT:return new _(e);case o.AnnotationType.FILEATTACHMENT:return new w(e);default:return new a(e)}}};var a=function t(){function e(t,e,r){this.isRenderable=e||!1,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderInteractiveForms=t.renderInteractiveForms,e&&(this.container=this._createContainer(r))}return e.prototype={_createContainer:function t(e){var r=this.data,i=this.page,a=this.viewport,s=document.createElement("section"),c=r.rect[2]-r.rect[0],l=r.rect[3]-r.rect[1];s.setAttribute("data-annotation-id",r.id);var h=o.Util.normalizeRect([r.rect[0],i.view[3]-r.rect[1]+i.view[1],r.rect[2],i.view[3]-r.rect[3]+i.view[1]]);if(n.CustomStyle.setProp("transform",s,"matrix("+a.transform.join(",")+")"),n.CustomStyle.setProp("transformOrigin",s,-h[0]+"px "+-h[1]+"px"),!e&&r.borderStyle.width>0){s.style.borderWidth=r.borderStyle.width+"px",r.borderStyle.style!==o.AnnotationBorderStyleType.UNDERLINE&&(c-=2*r.borderStyle.width,l-=2*r.borderStyle.width);var u=r.borderStyle.horizontalCornerRadius,f=r.borderStyle.verticalCornerRadius;if(u>0||f>0){var d=u+"px / "+f+"px";n.CustomStyle.setProp("borderRadius",s,d)}switch(r.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:s.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:s.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:s.style.borderBottomStyle="solid"}r.color?s.style.borderColor=o.Util.makeCssRgb(0|r.color[0],0|r.color[1],0|r.color[2]):s.style.borderWidth=0}return s.style.left=h[0]+"px",s.style.top=h[1]+"px",s.style.width=c+"px",s.style.height=l+"px",s},_createPopup:function t(e,r,i){r||(r=document.createElement("div"),r.style.height=e.style.height,r.style.width=e.style.width,e.appendChild(r));var n=new g({container:e,trigger:r,color:i.color,title:i.title,contents:i.contents,hideWrapper:!0}),o=n.render();o.style.left=e.style.width,e.appendChild(o)},render:function t(){throw new Error("Abstract method AnnotationElement.render called")}},e}(),s=function t(){function e(t){a.call(this,t,!0)}return o.Util.inherit(e,a,{render:function t(){this.container.className="linkAnnotation";var e=document.createElement("a");return(0,n.addLinkAttributes)(e,{url:this.data.url,target:this.data.newWindow?n.LinkTarget.BLANK:void 0}),this.data.url||(this.data.action?this._bindNamedAction(e,this.data.action):this._bindLink(e,this.data.dest)),this.container.appendChild(e),this.container},_bindLink:function t(e,r){var i=this;e.href=this.linkService.getDestinationHash(r),e.onclick=function(){return r&&i.linkService.navigateTo(r),!1},r&&(e.className="internalLink")},_bindNamedAction:function t(e,r){var i=this;e.href=this.linkService.getAnchorUrl(""),e.onclick=function(){return i.linkService.executeNamedAction(r),!1},e.className="internalLink"}}),e}(),c=function t(){function e(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);a.call(this,t,e)}return o.Util.inherit(e,a,{render:function t(){this.container.className="textAnnotation";var e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}}),e}(),l=function t(){function e(t,e){a.call(this,t,e)}return o.Util.inherit(e,a,{render:function t(){return this.container}}),e}(),h=function t(){function e(t){var e=t.renderInteractiveForms||!t.data.hasAppearance&&!!t.data.fieldValue;l.call(this,t,e)}var r=["left","center","right"];return o.Util.inherit(e,l,{render:function t(){this.container.className="textWidgetAnnotation";var e=null;if(this.renderInteractiveForms){if(this.data.multiLine?(e=document.createElement("textarea"),e.textContent=this.data.fieldValue):(e=document.createElement("input"),e.type="text",e.setAttribute("value",this.data.fieldValue)),e.disabled=this.data.readOnly,null!==this.data.maxLen&&(e.maxLength=this.data.maxLen),this.data.comb){var i=this.data.rect[2]-this.data.rect[0],n=i/this.data.maxLen;e.classList.add("comb"),e.style.letterSpacing="calc("+n+"px - 1ch)"}}else{e=document.createElement("div"),e.textContent=this.data.fieldValue,e.style.verticalAlign="middle",e.style.display="table-cell";var o=null;this.data.fontRefName&&(o=this.page.commonObjs.getData(this.data.fontRefName)),this._setTextStyle(e,o)}return null!==this.data.textAlignment&&(e.style.textAlign=r[this.data.textAlignment]),this.container.appendChild(e),this.container},_setTextStyle:function t(e,r){var i=e.style;if(i.fontSize=this.data.fontSize+"px",i.direction=this.data.fontDirection<0?"rtl":"ltr",r){i.fontWeight=r.black?r.bold?"900":"bold":r.bold?"bold":"normal",i.fontStyle=r.italic?"italic":"normal";var n=r.loadedName?'"'+r.loadedName+'", ':"",o=r.fallbackName||"Helvetica, sans-serif";i.fontFamily=n+o}}}),e}(),u=function t(){function e(t){l.call(this,t,t.renderInteractiveForms)}return o.Util.inherit(e,l,{render:function t(){this.container.className="buttonWidgetAnnotation checkBox";var e=document.createElement("input");return e.disabled=this.data.readOnly,e.type="checkbox",this.data.fieldValue&&"Off"!==this.data.fieldValue&&e.setAttribute("checked",!0),this.container.appendChild(e),this.container}}),e}(),f=function t(){function e(t){l.call(this,t,t.renderInteractiveForms)}return o.Util.inherit(e,l,{render:function t(){this.container.className="buttonWidgetAnnotation radioButton";var e=document.createElement("input");return e.disabled=this.data.readOnly,e.type="radio",e.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&e.setAttribute("checked",!0),this.container.appendChild(e),this.container}}),e}(),d=function t(){function e(t){l.call(this,t,t.renderInteractiveForms)}return o.Util.inherit(e,l,{render:function t(){this.container.className="choiceWidgetAnnotation";var e=document.createElement("select");e.disabled=this.data.readOnly,this.data.combo||(e.size=this.data.options.length,this.data.multiSelect&&(e.multiple=!0));for(var r=0,i=this.data.options.length;r<i;r++){var n=this.data.options[r],o=document.createElement("option");o.textContent=n.displayValue,o.value=n.exportValue,this.data.fieldValue.indexOf(n.displayValue)>=0&&o.setAttribute("selected",!0),e.appendChild(o)}return this.container.appendChild(e),this.container}}),e}(),p=function t(){function e(t){var e=!(!t.data.title&&!t.data.contents);a.call(this,t,e)}var r=["Line"];return o.Util.inherit(e,a,{render:function t(){if(this.container.className="popupAnnotation",r.indexOf(this.data.parentType)>=0)return this.container;var e='[data-annotation-id="'+this.data.parentId+'"]',i=this.layer.querySelector(e);if(!i)return this.container;var o=new g({container:this.container,trigger:i,color:this.data.color,title:this.data.title,contents:this.data.contents}),a=parseFloat(i.style.left),s=parseFloat(i.style.width);return n.CustomStyle.setProp("transformOrigin",this.container,-(a+s)+"px -"+i.style.top),this.container.style.left=a+s+"px",this.container.appendChild(o.render()),this.container}}),e}(),g=function t(){function e(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.title=t.title,this.contents=t.contents,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}var r=.7;return e.prototype={render:function t(){var e=document.createElement("div");e.className="popupWrapper",this.hideElement=this.hideWrapper?e:this.container,this.hideElement.setAttribute("hidden",!0);var r=document.createElement("div");r.className="popup";var i=this.color;if(i){var n=.7*(255-i[0])+i[0],a=.7*(255-i[1])+i[1],s=.7*(255-i[2])+i[2];r.style.backgroundColor=o.Util.makeCssRgb(0|n,0|a,0|s)}var c=this._formatContents(this.contents),l=document.createElement("h1");return l.textContent=this.title,this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),r.addEventListener("click",this._hide.bind(this,!0)),r.appendChild(l),r.appendChild(c),e.appendChild(r),e},_formatContents:function t(e){for(var r=document.createElement("p"),i=e.split(/(?:\r\n?|\n)/),n=0,o=i.length;n<o;++n){var a=i[n];r.appendChild(document.createTextNode(a)),n<o-1&&r.appendChild(document.createElement("br"))}return r},_toggle:function t(){this.pinned?this._hide(!0):this._show(!0)},_show:function t(e){e&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)},_hide:function t(e){e&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}},e}(),v=function t(){function e(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);a.call(this,t,e,!0)}var r="http://www.w3.org/2000/svg";return o.Util.inherit(e,a,{render:function t(){this.container.className="lineAnnotation";var e=this.data,i=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],o=document.createElementNS(r,"svg:svg");o.setAttributeNS(null,"version","1.1"),o.setAttributeNS(null,"width",i+"px"),o.setAttributeNS(null,"height",n+"px"),o.setAttributeNS(null,"preserveAspectRatio","none"),o.setAttributeNS(null,"viewBox","0 0 "+i+" "+n);var a=document.createElementNS(r,"svg:line");return a.setAttributeNS(null,"x1",e.rect[2]-e.lineCoordinates[0]),a.setAttributeNS(null,"y1",e.rect[3]-e.lineCoordinates[1]),a.setAttributeNS(null,"x2",e.rect[2]-e.lineCoordinates[2]),a.setAttributeNS(null,"y2",e.rect[3]-e.lineCoordinates[3]),a.setAttributeNS(null,"stroke-width",e.borderStyle.width),a.setAttributeNS(null,"stroke","transparent"),o.appendChild(a),this.container.append(o),this._createPopup(this.container,a,this.data),this.container}}),e}(),m=function t(){function e(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);a.call(this,t,e,!0)}return o.Util.inherit(e,a,{render:function t(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),e}(),b=function t(){function e(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);a.call(this,t,e,!0)}return o.Util.inherit(e,a,{render:function t(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),e}(),y=function t(){function e(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);a.call(this,t,e,!0)}return o.Util.inherit(e,a,{render:function t(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),e}(),_=function t(){function e(t){var e=!!(t.data.hasPopup||t.data.title||t.data.contents);a.call(this,t,e,!0)}return o.Util.inherit(e,a,{render:function t(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}),e}(),w=function t(){function e(t){a.call(this,t,!0);var e=this.data.file;this.filename=(0,n.getFilenameFromUrl)(e.filename),this.content=e.content,this.linkService.onFileAttachmentAnnotation({id:(0,o.stringToPDFString)(e.filename),filename:e.filename,content:e.content})}return o.Util.inherit(e,a,{render:function t(){this.container.className="fileAttachmentAnnotation";var e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container},_download:function t(){if(!this.downloadManager)return void(0,o.warn)("Download cannot be started due to unavailable download manager");this.downloadManager.downloadData(this.content,this.filename,"")}}),e}(),S=function t(){return{render:function t(e){for(var r=new i,o=0,a=e.annotations.length;o<a;o++){var s=e.annotations[o];if(s){var c=r.create({data:s,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||(0,n.getDefaultSetting)("imageResourcesPath"),renderInteractiveForms:e.renderInteractiveForms||!1});c.isRenderable&&e.div.appendChild(c.render())}}},update:function t(e){for(var r=0,i=e.annotations.length;r<i;r++){var o=e.annotations[r],a=e.div.querySelector('[data-annotation-id="'+o.id+'"]');a&&n.CustomStyle.setProp("transform",a,"matrix("+e.viewport.transform.join(",")+")")}e.div.removeAttribute("hidden")}}}();e.AnnotationLayer=S},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,r,i){var n=new S;arguments.length>1&&(0,l.deprecated)("getDocument is called with pdfDataRangeTransport, passwordCallback or progressCallback argument"),e&&(e instanceof x||(e=Object.create(e),e.length=t.length,e.initialData=t.initialData,e.abort||(e.abort=function(){})),t=Object.create(t),t.range=e),n.onPassword=r||null,n.onProgress=i||null;var o;if("string"==typeof t)o={url:t};else if((0,l.isArrayBuffer)(t))o={data:t};else if(t instanceof x)o={range:t};else{if("object"!==(void 0===t?"undefined":c(t)))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");o=t}var s={},u=null,f=null,d=h.DOMCMapReaderFactory;for(var g in o)if("url"!==g||"undefined"==typeof window)if("range"!==g)if("worker"!==g)if("data"!==g||o[g]instanceof Uint8Array)"CMapReaderFactory"!==g?s[g]=o[g]:d=o[g];else{var v=o[g];if("string"==typeof v)s[g]=(0,l.stringToBytes)(v);else if("object"!==(void 0===v?"undefined":c(v))||null===v||isNaN(v.length)){if(!(0,l.isArrayBuffer)(v))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");s[g]=new Uint8Array(v)}else s[g]=new Uint8Array(v)}else f=o[g];else u=o[g];else s[g]=new URL(o[g],window.location).href;if(s.rangeChunkSize=s.rangeChunkSize||p,s.ignoreErrors=!0!==s.stopAtErrors,void 0!==s.disableNativeImageDecoder&&(0,l.deprecated)("parameter disableNativeImageDecoder, use nativeImageDecoderSupport instead"),s.nativeImageDecoderSupport=s.nativeImageDecoderSupport||(!0===s.disableNativeImageDecoder?l.NativeImageDecoding.NONE:l.NativeImageDecoding.DECODE),s.nativeImageDecoderSupport!==l.NativeImageDecoding.DECODE&&s.nativeImageDecoderSupport!==l.NativeImageDecoding.NONE&&s.nativeImageDecoderSupport!==l.NativeImageDecoding.DISPLAY&&((0,l.warn)("Invalid parameter nativeImageDecoderSupport: need a state of enum {NativeImageDecoding}"),s.nativeImageDecoderSupport=l.NativeImageDecoding.DECODE),!f){var m=(0,h.getDefaultSetting)("workerPort");f=m?k.fromPort(m):new k,n._worker=f}var b=n.docId;return f.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");return a(f,s,u,b).then(function(t){if(n.destroyed)throw new Error("Loading aborted");var e=new l.MessageHandler(b,t,f.port),r=new P(e,n,u,d);n._transport=r,e.send("Ready",null)})}).catch(n._capability.reject),n}function a(t,e,r,i){return t.destroyed?Promise.reject(new Error("Worker was destroyed")):(e.disableAutoFetch=(0,h.getDefaultSetting)("disableAutoFetch"),e.disableStream=(0,h.getDefaultSetting)("disableStream"),e.chunkedViewerLoading=!!r,r&&(e.length=r.length,e.initialData=r.initialData),t.messageHandler.sendWithPromise("GetDocRequest",{docId:i,source:e,disableRange:(0,h.getDefaultSetting)("disableRange"),maxImageSize:(0,h.getDefaultSetting)("maxImageSize"),disableFontFace:(0,h.getDefaultSetting)("disableFontFace"),disableCreateObjectURL:(0,h.getDefaultSetting)("disableCreateObjectURL"),postMessageTransfers:(0,h.getDefaultSetting)("postMessageTransfers")&&!m,docBaseUrl:e.docBaseUrl,nativeImageDecoderSupport:e.nativeImageDecoderSupport,ignoreErrors:e.ignoreErrors}).then(function(e){if(t.destroyed)throw new Error("Worker was destroyed");return e}))}Object.defineProperty(e,"__esModule",{value:!0}),e.build=e.version=e._UnsupportedManager=e.PDFPageProxy=e.PDFDocumentProxy=e.PDFWorker=e.PDFDataRangeTransport=e.LoopbackPort=e.getDocument=void 0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=i(0),h=i(1),u=i(11),f=i(10),d=i(6),p=65536,g=!1,v,m=!1,b="undefined"!=typeof document&&document.currentScript?document.currentScript.src:null,y=null,_=!1;"undefined"==typeof window?(g=!0,_=!0):_=!0,"undefined"!=typeof requirejs&&requirejs.toUrl&&(v=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));var w="undefined"!=typeof requirejs&&requirejs.load;y=_?function(t){r.e(0).then(function(){var e;e=r(81),t(e.WorkerMessageHandler)}.bind(null,r)).catch(r.oe)}:w?function(t){requirejs(["pdfjs-dist/build/pdf.worker"],function(e){t(e.WorkerMessageHandler)})}:null;var S=function t(){function e(){this._capability=(0,l.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+r++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}var r=0;return e.prototype={get promise(){return this._capability.promise},destroy:function t(){var e=this;return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then(function(){e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)})},then:function t(e,r){return this.promise.then.apply(this.promise,arguments)}},e}(),x=function t(){function e(t,e){this.length=t,this.initialData=e,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._readyCapability=(0,l.createPromiseCapability)()}return e.prototype={addRangeListener:function t(e){this._rangeListeners.push(e)},addProgressListener:function t(e){this._progressListeners.push(e)},addProgressiveReadListener:function t(e){this._progressiveReadListeners.push(e)},onDataRange:function t(e,r){for(var i=this._rangeListeners,n=0,o=i.length;n<o;++n)i[n](e,r)},onDataProgress:function t(e){var r=this;this._readyCapability.promise.then(function(){for(var t=r._progressListeners,i=0,n=t.length;i<n;++i)t[i](e)})},onDataProgressiveRead:function t(e){var r=this;this._readyCapability.promise.then(function(){for(var t=r._progressiveReadListeners,i=0,n=t.length;i<n;++i)t[i](e)})},transportReady:function t(){this._readyCapability.resolve()},requestDataRange:function t(e,r){throw new Error("Abstract method PDFDataRangeTransport.requestDataRange")},abort:function t(){}},e}(),C=function t(){function e(t,e,r){this.pdfInfo=t,this.transport=e,this.loadingTask=r}return e.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function t(e){return this.transport.getPage(e)},getPageIndex:function t(e){return this.transport.getPageIndex(e)},getDestinations:function t(){return this.transport.getDestinations()},getDestination:function t(e){return this.transport.getDestination(e)},getPageLabels:function t(){return this.transport.getPageLabels()},getPageMode:function t(){return this.transport.getPageMode()},getAttachments:function t(){return this.transport.getAttachments()},getJavaScript:function t(){return this.transport.getJavaScript()},getOutline:function t(){return this.transport.getOutline()},getMetadata:function t(){return this.transport.getMetadata()},getData:function t(){return this.transport.getData()},getDownloadInfo:function t(){return this.transport.downloadInfoCapability.promise},getStats:function t(){return this.transport.getStats()},cleanup:function t(){this.transport.startCleanup()},destroy:function t(){return this.loadingTask.destroy()}},e}(),A=function t(){function e(t,e,r){this.pageIndex=t,this.pageInfo=e,this.transport=r,this.stats=new l.StatTimer,this.stats.enabled=(0,h.getDefaultSetting)("enableStats"),this.commonObjs=r.commonObjs,this.objs=new E,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}return e.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get userUnit(){return this.pageInfo.userUnit},get view(){return this.pageInfo.view},getViewport:function t(e,r){return arguments.length<2&&(r=this.rotate),new l.PageViewport(this.view,e,r,0,0)},getAnnotations:function t(e){var r=e&&e.intent||null;return this.annotationsPromise&&this.annotationsIntent===r||(this.annotationsPromise=this.transport.getAnnotations(this.pageIndex,r),this.annotationsIntent=r),this.annotationsPromise},render:function t(e){var r=this,i=this.stats;i.time("Overall"),this.pendingCleanup=!1;var n="print"===e.intent?"print":"display",o=e.canvasFactory||new h.DOMCanvasFactory;this.intentStates[n]||(this.intentStates[n]=Object.create(null));var a=this.intentStates[n];a.displayReadyCapability||(a.receivingOperatorList=!0,a.displayReadyCapability=(0,l.createPromiseCapability)(),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.stats.time("Page Request"),this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:n,renderInteractiveForms:!0===e.renderInteractiveForms}));var s=function t(e){var n=a.renderTasks.indexOf(c);n>=0&&a.renderTasks.splice(n,1),r.cleanupAfterRender&&(r.pendingCleanup=!0),r._tryCleanup(),e?c.capability.reject(e):c.capability.resolve(),i.timeEnd("Rendering"),i.timeEnd("Overall")},c=new R(s,e,this.objs,this.commonObjs,a.operatorList,this.pageNumber,o);c.useRequestAnimationFrame="print"!==n,a.renderTasks||(a.renderTasks=[]),a.renderTasks.push(c);var u=c.task;return e.continueCallback&&((0,l.deprecated)("render is used with continueCallback parameter"),u.onContinue=e.continueCallback),a.displayReadyCapability.promise.then(function(t){if(r.pendingCleanup)return void s();i.time("Rendering"),c.initializeGraphics(t),c.operatorListChanged()}).catch(s),u},getOperatorList:function t(){function e(){if(i.operatorList.lastChunk){i.opListReadCapability.resolve(i.operatorList);var t=i.renderTasks.indexOf(n);t>=0&&i.renderTasks.splice(t,1)}}var r="oplist";this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var i=this.intentStates.oplist,n;return i.opListReadCapability||(n={},n.operatorListChanged=e,i.receivingOperatorList=!0,i.opListReadCapability=(0,l.createPromiseCapability)(),i.renderTasks=[],i.renderTasks.push(n),i.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:"oplist"})),i.opListReadCapability.promise},streamTextContent:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=100;return this.transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:!0===e.normalizeWhitespace,combineTextItems:!0!==e.disableCombineTextItems},{highWaterMark:100,size:function t(e){return e.items.length}})},getTextContent:function t(e){e=e||{};var r=this.streamTextContent(e);return new Promise(function(t,e){function i(){n.read().then(function(e){var r=e.value;if(e.done)return void t(o);l.Util.extendObj(o.styles,r.styles),l.Util.appendToArray(o.items,r.items),i()},e)}var n=r.getReader(),o={items:[],styles:Object.create(null)};i()})},_destroy:function t(){this.destroyed=!0,this.transport.pageCache[this.pageIndex]=null;var e=[];return Object.keys(this.intentStates).forEach(function(t){if("oplist"!==t){this.intentStates[t].renderTasks.forEach(function(t){var r=t.capability.promise.catch(function(){});e.push(r),t.cancel()})}},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(e)},destroy:function t(){(0,l.deprecated)("page destroy method, use cleanup() instead"),this.cleanup()},cleanup:function t(){this.pendingCleanup=!0,this._tryCleanup()},_tryCleanup:function t(){this.pendingCleanup&&!Object.keys(this.intentStates).some(function(t){var e=this.intentStates[t];return 0!==e.renderTasks.length||e.receivingOperatorList},this)&&(Object.keys(this.intentStates).forEach(function(t){delete this.intentStates[t]},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1)},_startRenderPage:function t(e,r){var i=this.intentStates[r];i.displayReadyCapability&&i.displayReadyCapability.resolve(e)},_renderPageChunk:function t(e,r){var i=this.intentStates[r],n,o;for(n=0,o=e.length;n<o;n++)i.operatorList.fnArray.push(e.fnArray[n]),i.operatorList.argsArray.push(e.argsArray[n]);for(i.operatorList.lastChunk=e.lastChunk,n=0;n<i.renderTasks.length;n++)i.renderTasks[n].operatorListChanged();e.lastChunk&&(i.receivingOperatorList=!1,this._tryCleanup())}},e}(),T=function(){function t(e){n(this,t),this._listeners=[],this._defer=e,this._deferred=Promise.resolve(void 0)}return s(t,[{key:"postMessage",value:function t(e,r){function i(t){if("object"!==(void 0===t?"undefined":c(t))||null===t)return t;if(o.has(t))return o.get(t);var e,n;if((n=t.buffer)&&(0,l.isArrayBuffer)(n)){var a=r&&r.indexOf(n)>=0;return e=t===n?t:a?new t.constructor(n,t.byteOffset,t.byteLength):new t.constructor(t),o.set(t,e),e}e=(0,l.isArray)(t)?[]:{},o.set(t,e);for(var s in t){for(var h,u=t;!(h=Object.getOwnPropertyDescriptor(u,s));)u=Object.getPrototypeOf(u);void 0!==h.value&&"function"!=typeof h.value&&(e[s]=i(h.value))}return e}var n=this;if(!this._defer)return void this._listeners.forEach(function(t){t.call(this,{data:e})},this);var o=new WeakMap,a={data:i(e)};this._deferred.then(function(){n._listeners.forEach(function(t){t.call(this,a)},n)})}},{key:"addEventListener",value:function t(e,r){this._listeners.push(r)}},{key:"removeEventListener",value:function t(e,r){var i=this._listeners.indexOf(r);this._listeners.splice(i,1)}},{key:"terminate",value:function t(){this._listeners=[]}}]),t}(),k=function t(){function e(){if(void 0!==v)return v;if((0,h.getDefaultSetting)("workerSrc"))return(0,h.getDefaultSetting)("workerSrc");if(b)return b.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2");throw new Error("No PDFJS.workerSrc specified")}function r(){var t;return a?a.promise:(a=(0,l.createPromiseCapability)(),(y||function(t){l.Util.loadScript(e(),function(){t(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler)})})(a.resolve),a.promise)}function i(t){var e="importScripts('"+t+"');";return URL.createObjectURL(new Blob([e]))}function n(t,e){if(e&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=t,this.destroyed=!1,this._readyCapability=(0,l.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return s.set(e,this),void this._initializeFromPort(e);this._initialize()}var o=0,a=void 0,s=new WeakMap;return n.prototype={get promise(){return this._readyCapability.promise},get port(){return this._port},get messageHandler(){return this._messageHandler},_initializeFromPort:function t(e){this._port=e,this._messageHandler=new l.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()},_initialize:function t(){var r=this;if(!g&&!(0,h.getDefaultSetting)("disableWorker")&&"undefined"!=typeof Worker){var n=e();try{(0,l.isSameOrigin)(window.location.href,n)||(n=i(new URL(n,window.location).href));var o=new Worker(n),a=new l.MessageHandler("main","worker",o),s=function t(){o.removeEventListener("error",c),a.destroy(),o.terminate(),r.destroyed?r._readyCapability.reject(new Error("Worker was destroyed")):r._setupFakeWorker()},c=function t(){r._webWorker||s()};o.addEventListener("error",c),a.on("test",function(t){if(o.removeEventListener("error",c),r.destroyed)return void s();t&&t.supportTypedArray?(r._messageHandler=a,r._port=o,r._webWorker=o,t.supportTransfers||(m=!0),r._readyCapability.resolve(),a.send("configure",{verbosity:(0,l.getVerbosityLevel)()})):(r._setupFakeWorker(),a.destroy(),o.terminate())}),a.on("console_log",function(t){console.log.apply(console,t)}),a.on("console_error",function(t){console.error.apply(console,t)}),a.on("ready",function(t){if(o.removeEventListener("error",c),r.destroyed)return void s();try{u()}catch(t){r._setupFakeWorker()}});var u=function t(){var e=(0,h.getDefaultSetting)("postMessageTransfers")&&!m,r=new Uint8Array([e?255:0]);try{a.send("test",r,[r.buffer])}catch(t){(0,l.info)("Cannot use postMessage transfers"),r[0]=0,a.send("test",r)}};return void u()}catch(t){(0,l.info)("The worker has been disabled.")}}this._setupFakeWorker()},_setupFakeWorker:function t(){var e=this;g||(0,h.getDefaultSetting)("disableWorker")||((0,l.warn)("Setting up fake worker."),g=!0),r().then(function(t){if(e.destroyed)return void e._readyCapability.reject(new Error("Worker was destroyed"));var r=Uint8Array!==Float32Array,i=new T(r);e._port=i;var n="fake"+o++,a=new l.MessageHandler(n+"_worker",n,i);t.setup(a,i);var s=new l.MessageHandler(n,n+"_worker",i);e._messageHandler=s,e._readyCapability.resolve()})},destroy:function t(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},n.fromPort=function(t){return s.has(t)?s.get(t):new n(null,t)},n}(),P=function t(){function e(t,e,r,i){this.messageHandler=t,this.loadingTask=e,this.pdfDataRangeTransport=r,this.commonObjs=new E,this.fontLoader=new u.FontLoader(e.docId),this.CMapReaderFactory=new i({baseUrl:(0,h.getDefaultSetting)("cMapUrl"),isCompressed:(0,h.getDefaultSetting)("cMapPacked")}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,l.createPromiseCapability)(),this.setupMessageHandler()}return e.prototype={destroy:function t(){var e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,l.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var r=[];this.pageCache.forEach(function(t){t&&r.push(t._destroy())}),this.pageCache=[],this.pagePromises=[];var i=this.messageHandler.sendWithPromise("Terminate",null);return r.push(i),Promise.all(r).then(function(){e.fontLoader.clear(),e.pdfDataRangeTransport&&(e.pdfDataRangeTransport.abort(),e.pdfDataRangeTransport=null),e.messageHandler&&(e.messageHandler.destroy(),e.messageHandler=null),e.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise},setupMessageHandler:function t(){var e=this.messageHandler,r=this.loadingTask,i=this.pdfDataRangeTransport;i&&(i.addRangeListener(function(t,r){e.send("OnDataRange",{begin:t,chunk:r})}),i.addProgressListener(function(t){e.send("OnDataProgress",{loaded:t})}),i.addProgressiveReadListener(function(t){e.send("OnDataRange",{chunk:t})}),e.on("RequestDataRange",function t(e){i.requestDataRange(e.begin,e.end)},this)),e.on("GetDoc",function t(e){var r=e.pdfInfo;this.numPages=e.pdfInfo.numPages;var i=this.loadingTask,n=new C(r,this,i);this.pdfDocument=n,i._capability.resolve(n)},this),e.on("PasswordRequest",function t(e){var i=this;if(this._passwordCapability=(0,l.createPromiseCapability)(),r.onPassword){var n=function t(e){i._passwordCapability.resolve({password:e})};r.onPassword(n,e.code)}else this._passwordCapability.reject(new l.PasswordException(e.message,e.code));return this._passwordCapability.promise},this),e.on("PasswordException",function t(e){r._capability.reject(new l.PasswordException(e.message,e.code))},this),e.on("InvalidPDF",function t(e){this.loadingTask._capability.reject(new l.InvalidPDFException(e.message))},this),e.on("MissingPDF",function t(e){this.loadingTask._capability.reject(new l.MissingPDFException(e.message))},this),e.on("UnexpectedResponse",function t(e){this.loadingTask._capability.reject(new l.UnexpectedResponseException(e.message,e.status))},this),e.on("UnknownError",function t(e){this.loadingTask._capability.reject(new l.UnknownErrorException(e.message,e.details))},this),e.on("DataLoaded",function t(e){this.downloadInfoCapability.resolve(e)},this),e.on("PDFManagerReady",function t(e){this.pdfDataRangeTransport&&this.pdfDataRangeTransport.transportReady()},this),e.on("StartRenderPage",function t(e){if(!this.destroyed){var r=this.pageCache[e.pageIndex];r.stats.timeEnd("Page Request"),r._startRenderPage(e.transparency,e.intent)}},this),e.on("RenderPageChunk",function t(e){if(!this.destroyed){this.pageCache[e.pageIndex]._renderPageChunk(e.operatorList,e.intent)}},this),e.on("commonobj",function t(e){var r=this;if(!this.destroyed){var i=e[0],n=e[1];if(!this.commonObjs.hasData(i))switch(n){case"Font":var o=e[2];if("error"in o){var a=o.error;(0,l.warn)("Error during font loading: "+a),this.commonObjs.resolve(i,a);break}var s=null;(0,h.getDefaultSetting)("pdfBug")&&l.globalScope.FontInspector&&l.globalScope.FontInspector.enabled&&(s={registerFont:function t(e,r){l.globalScope.FontInspector.fontAdded(e,r)}});var c=new u.FontFaceObject(o,{isEvalSuported:(0,h.getDefaultSetting)("isEvalSupported"),disableFontFace:(0,h.getDefaultSetting)("disableFontFace"),fontRegistry:s}),f=function t(e){r.commonObjs.resolve(i,c)};this.fontLoader.bind([c],f);break;case"FontPath":this.commonObjs.resolve(i,e[2]);break;default:throw new Error("Got unknown common object type "+n)}}},this),e.on("obj",function t(e){if(!this.destroyed){var r=e[0],i=e[1],n=e[2],o=this.pageCache[i],a;if(!o.objs.hasData(r))switch(n){case"JpegStream":a=e[3],(0,l.loadJpegStream)(r,a,o.objs);break;case"Image":a=e[3],o.objs.resolve(r,a);var s=8e6;a&&"data"in a&&a.data.length>8e6&&(o.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type "+n)}}},this),e.on("DocProgress",function t(e){if(!this.destroyed){var r=this.loadingTask;r.onProgress&&r.onProgress({loaded:e.loaded,total:e.total})}},this),e.on("PageError",function t(e){if(!this.destroyed){var r=this.pageCache[e.pageNum-1],i=r.intentStates[e.intent];if(!i.displayReadyCapability)throw new Error(e.error);if(i.displayReadyCapability.reject(e.error),i.operatorList){i.operatorList.lastChunk=!0;for(var n=0;n<i.renderTasks.length;n++)i.renderTasks[n].operatorListChanged()}}},this),e.on("UnsupportedFeature",function t(e){if(!this.destroyed){var r=e.featureId,i=this.loadingTask;i.onUnsupportedFeature&&i.onUnsupportedFeature(r),L.notify(r)}},this),e.on("JpegDecode",function(t){if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if("undefined"==typeof document)return Promise.reject(new Error('"document" is not defined.'));var e=t[0],r=t[1];return 3!==r&&1!==r?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise(function(t,i){var n=new Image;n.onload=function(){var e=n.width,i=n.height,o=e*i,a=4*o,s=new Uint8Array(o*r),c=document.createElement("canvas");c.width=e,c.height=i;var l=c.getContext("2d");l.drawImage(n,0,0);var h=l.getImageData(0,0,e,i).data,u,f;if(3===r)for(u=0,f=0;u<a;u+=4,f+=3)s[f]=h[u],s[f+1]=h[u+1],s[f+2]=h[u+2];else if(1===r)for(u=0,f=0;u<a;u+=4,f++)s[f]=h[u];t({data:s,width:e,height:i})},n.onerror=function(){i(new Error("JpegDecode failed to load image"))},n.src=e})},this),e.on("FetchBuiltInCMap",function(t){return this.destroyed?Promise.reject(new Error("Worker was destroyed")):this.CMapReaderFactory.fetch({name:t.name})},this)},getData:function t(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function t(e,r){var i=this;if(!(0,l.isInt)(e)||e<=0||e>this.numPages)return Promise.reject(new Error("Invalid page request"));var n=e-1;if(n in this.pagePromises)return this.pagePromises[n];var o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(function(t){if(i.destroyed)throw new Error("Transport destroyed");var e=new A(n,t,i);return i.pageCache[n]=e,e});return this.pagePromises[n]=o,o},getPageIndex:function t(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e}).catch(function(t){return Promise.reject(new Error(t))})},getAnnotations:function t(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})},getDestinations:function t(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getDestination:function t(e){return this.messageHandler.sendWithPromise("GetDestination",{id:e})},getPageLabels:function t(){return this.messageHandler.sendWithPromise("GetPageLabels",null)},getPageMode:function t(){return this.messageHandler.sendWithPromise("GetPageMode",null)},getAttachments:function t(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function t(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function t(){return this.messageHandler.sendWithPromise("GetOutline",null)},getMetadata:function t(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(function t(e){return{info:e[0],metadata:e[1]?new d.Metadata(e[1]):null}})},getStats:function t(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function t(){var e=this;this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var t=0,r=e.pageCache.length;t<r;t++){var i=e.pageCache[t];i&&i.cleanup()}e.commonObjs.clear(),e.fontLoader.clear()})}},e}(),E=function t(){function e(){this.objs=Object.create(null)}return e.prototype={ensureObj:function t(e){if(this.objs[e])return this.objs[e];var r={capability:(0,l.createPromiseCapability)(),data:null,resolved:!1};return this.objs[e]=r,r},get:function t(e,r){if(r)return this.ensureObj(e).capability.promise.then(r),null;var i=this.objs[e];if(!i||!i.resolved)throw new Error("Requesting object that isn't resolved yet "+e);return i.data},resolve:function t(e,r){var i=this.ensureObj(e);i.resolved=!0,i.data=r,i.capability.resolve(r)},isResolved:function t(e){var r=this.objs;return!!r[e]&&r[e].resolved},hasData:function t(e){return this.isResolved(e)},getData:function t(e){var r=this.objs;return r[e]&&r[e].resolved?r[e].data:null},clear:function t(){this.objs=Object.create(null)}},e}(),O=function t(){function e(t){this._internalRenderTask=t,this.onContinue=null}return e.prototype={get promise(){return this._internalRenderTask.capability.promise},cancel:function t(){this._internalRenderTask.cancel()},then:function t(e,r){return this.promise.then.apply(this.promise,arguments)}},e}(),R=function t(){function e(t,e,r,i,n,o,a){this.callback=t,this.params=e,this.objs=r,this.commonObjs=i,this.operatorListIdx=null,this.operatorList=n,this.pageNumber=o,this.canvasFactory=a,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this.useRequestAnimationFrame=!1,this.cancelled=!1,this.capability=(0,l.createPromiseCapability)(),this.task=new O(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}var r=new WeakMap;return e.prototype={initializeGraphics:function t(e){if(this._canvas){if(r.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r.set(this._canvas,this)}if(!this.cancelled){(0,h.getDefaultSetting)("pdfBug")&&l.globalScope.StepperManager&&l.globalScope.StepperManager.enabled&&(this.stepper=l.globalScope.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var i=this.params;this.gfx=new f.CanvasGraphics(i.canvasContext,this.commonObjs,this.objs,this.canvasFactory,i.imageLayer),this.gfx.beginDrawing({transform:i.transform,viewport:i.viewport,transparency:e,background:i.background}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}},cancel:function t(){this.running=!1,this.cancelled=!0,this._canvas&&r.delete(this._canvas),(0,h.getDefaultSetting)("pdfjsNext")?this.callback(new h.RenderingCancelledException("Rendering cancelled, page "+this.pageNumber,"canvas")):this.callback("cancelled")},operatorListChanged:function t(){if(!this.graphicsReady)return void(this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound));this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()},_continue:function t(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())},_scheduleNext:function t(){this.useRequestAnimationFrame&&"undefined"!=typeof window?window.requestAnimationFrame(this._nextBound):Promise.resolve(void 0).then(this._nextBound)},_next:function t(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&r.delete(this._canvas),this.callback())))}},e}(),L=function t(){var e=[];return{listen:function t(r){(0,l.deprecated)("Global UnsupportedManager.listen is used:  use PDFDocumentLoadingTask.onUnsupportedFeature instead"),e.push(r)},notify:function t(r){for(var i=0,n=e.length;i<n;i++)e[i](r)}}}(),D,I;e.version=D="1.8.575",e.build=I="bd8c1211",e.getDocument=o,e.LoopbackPort=T,e.PDFDataRangeTransport=x,e.PDFWorker=k,e.PDFDocumentProxy=C,e.PDFPageProxy=A,e._UnsupportedManager=L,e.version=D,e.build=I},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var a=o(0),s=function t(){throw new Error("Not implemented: SVGGraphics")},c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},l=function t(){function e(t,e,r){for(var i=-1,n=e;n<r;n++){var o=255&(i^t[n]);i=i>>>8^d[o]}return-1^i}function o(t,r,i,n){var o=n,a=r.length;i[o]=a>>24&255,i[o+1]=a>>16&255,i[o+2]=a>>8&255,i[o+3]=255&a,o+=4,i[o]=255&t.charCodeAt(0),i[o+1]=255&t.charCodeAt(1),i[o+2]=255&t.charCodeAt(2),i[o+3]=255&t.charCodeAt(3),o+=4,i.set(r,o),o+=r.length;var s=e(i,n+4,o);i[o]=s>>24&255,i[o+1]=s>>16&255,i[o+2]=s>>8&255,i[o+3]=255&s}function s(t,e,r){for(var i=1,n=0,o=e;o<r;++o)i=(i+(255&t[o]))%65521,n=(n+i)%65521;return n<<16|i}function c(t){if(!(0,a.isNodeJS)())return l(t);try{var e;e=parseInt(i.versions.node)>=8?t:new n(t);var o=r(42).deflateSync(e,{level:9});return o instanceof Uint8Array?o:new Uint8Array(o)}catch(t){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return l(t)}function l(t){var e=t.length,r=65535,i=Math.ceil(e/65535),n=new Uint8Array(2+e+5*i+4),o=0;n[o++]=120,n[o++]=156;for(var a=0;e>65535;)n[o++]=0,n[o++]=255,n[o++]=255,n[o++]=0,n[o++]=0,n.set(t.subarray(a,a+65535),o),o+=65535,a+=65535,e-=65535;n[o++]=1,n[o++]=255&e,n[o++]=e>>8&255,n[o++]=255&~e,n[o++]=(65535&~e)>>8&255,n.set(t.subarray(a),o),o+=t.length-a;var c=s(t,0,t.length);return n[o++]=c>>24&255,n[o++]=c>>16&255,n[o++]=c>>8&255,n[o++]=255&c,n}function h(t,e,r){var i=t.width,n=t.height,s,l,h,d=t.data;switch(e){case a.ImageKind.GRAYSCALE_1BPP:l=0,s=1,h=i+7>>3;break;case a.ImageKind.RGB_24BPP:l=2,s=8,h=3*i;break;case a.ImageKind.RGBA_32BPP:l=6,s=8,h=4*i;break;default:throw new Error("invalid format")}var p=new Uint8Array((1+h)*n),g=0,v=0,m,b;for(m=0;m<n;++m)p[g++]=0,p.set(d.subarray(v,v+h),g),v+=h,g+=h;if(e===a.ImageKind.GRAYSCALE_1BPP)for(g=0,m=0;m<n;m++)for(g++,b=0;b<h;b++)p[g++]^=255;var y=new Uint8Array([i>>24&255,i>>16&255,i>>8&255,255&i,n>>24&255,n>>16&255,n>>8&255,255&n,s,l,0,0,0]),_=c(p),w=u.length+3*f+y.length+_.length,S=new Uint8Array(w),x=0;return S.set(u,x),x+=u.length,o("IHDR",y,S,x),x+=f+y.length,o("IDATA",_,S,x),x+=f+_.length,o("IEND",new Uint8Array(0),S,x),(0,a.createObjectURL)(S,"image/png",r)}for(var u=new Uint8Array([137,80,78,71,13,10,26,10]),f=12,d=new Int32Array(256),p=0;p<256;p++){for(var g=p,v=0;v<8;v++)g=1&g?3988292384^g>>1&2147483647:g>>1&2147483647;d[p]=g}return function t(e,r){return h(e,void 0===e.kind?a.ImageKind.GRAYSCALE_1BPP:e.kind,r)}}(),h=function t(){function e(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return e.prototype={clone:function t(){return Object.create(this)},setCurrentPoint:function t(e,r){this.x=e,this.y=r}},e}();e.SVGGraphics=s=function t(){function e(t){for(var e=[],r=[],i=t.length,n=0;n<i;n++)"save"!==t[n].fn?"restore"===t[n].fn?e=r.pop():e.push(t[n]):(e.push({fnId:92,fn:"group",items:[]}),r.push(e),e=e[e.length-1].items);return e}function r(t){if(t===(0|t))return t.toString();var e=t.toFixed(10),r=e.length-1;if("0"!==e[r])return e;do{r--}while("0"===e[r]);return e.substr(0,"."===e[r]?r:r+1)}function i(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":"scale("+r(t[0])+" "+r(t[3])+")";if(t[0]===t[3]&&t[1]===-t[2]){return"rotate("+r(180*Math.acos(t[0])/Math.PI)+")"}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return"translate("+r(t[4])+" "+r(t[5])+")";return"matrix("+r(t[0])+" "+r(t[1])+" "+r(t[2])+" "+r(t[3])+" "+r(t[4])+" "+r(t[5])+")"}function n(t,e,r){this.current=new h,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!r}var o="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xlink",u=["butt","round","square"],f=["miter","round","bevel"],d=0,p=0;return n.prototype={save:function t(){this.transformStack.push(this.transformMatrix);var e=this.current;this.extraStack.push(e),this.current=e.clone()},restore:function t(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null},group:function t(e){this.save(),this.executeOpTree(e),this.restore()},loadDependencies:function t(e){for(var r=this,i=e.fnArray,n=i.length,o=e.argsArray,s=0;s<n;s++)if(a.OPS.dependency===i[s])for(var c=o[s],l=0,h=c.length;l<h;l++){var u=c[l],f="g_"===u.substring(0,2),d;d=f?new Promise(function(t){r.commonObjs.get(u,t)}):new Promise(function(t){r.objs.get(u,t)}),this.current.dependencies.push(d)}return Promise.all(this.current.dependencies)},transform:function t(e,r,i,n,o,s){var c=[e,r,i,n,o,s];this.transformMatrix=a.Util.transform(this.transformMatrix,c),this.tgrp=null},getSVG:function t(e,r){var i=this;this.viewport=r;var n=this._initialize(r);return this.loadDependencies(e).then(function(){i.transformMatrix=a.IDENTITY_MATRIX;var t=i.convertOpList(e);return i.executeOpTree(t),n})},convertOpList:function t(r){var i=r.argsArray,n=r.fnArray,o=n.length,s=[],c=[];for(var l in a.OPS)s[a.OPS[l]]=l;for(var h=0;h<o;h++){var u=n[h];c.push({fnId:u,fn:s[u],args:i[h]})}return e(c)},executeOpTree:function t(e){for(var r=e.length,i=0;i<r;i++){var n=e[i].fn,o=e[i].fnId,s=e[i].args;switch(0|o){case a.OPS.beginText:this.beginText();break;case a.OPS.setLeading:this.setLeading(s);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(s[0],s[1]);break;case a.OPS.setFont:this.setFont(s);break;case a.OPS.showText:case a.OPS.showSpacedText:this.showText(s[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(s[0],s[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(s[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(s[0]);break;case a.OPS.setHScale:this.setHScale(s[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(s[0],s[1],s[2],s[3],s[4],s[5]);break;case a.OPS.setLineWidth:this.setLineWidth(s[0]);break;case a.OPS.setLineJoin:this.setLineJoin(s[0]);break;case a.OPS.setLineCap:this.setLineCap(s[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(s[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(s[0],s[1],s[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(s[0],s[1],s[2]);break;case a.OPS.setDash:this.setDash(s[0],s[1]);break;case a.OPS.setGState:this.setGState(s[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintJpegXObject:this.paintJpegXObject(s[0],s[1],s[2]);break;case a.OPS.paintImageXObject:this.paintImageXObject(s[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(s[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(s[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(s[0],s[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(s[0],s[1],s[2],s[3],s[4],s[5]);break;case a.OPS.constructPath:this.constructPath(s[0],s[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(e[i].items);break;default:(0,a.warn)("Unimplemented operator "+n)}}},setWordSpacing:function t(e){this.current.wordSpacing=e},setCharSpacing:function t(e){this.current.charSpacing=e},nextLine:function t(){this.moveText(0,this.current.leading)},setTextMatrix:function t(e,i,n,a,s,c){var l=this.current;this.current.textMatrix=this.current.lineMatrix=[e,i,n,a,s,c],this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,l.xcoords=[],l.tspan=document.createElementNS(o,"svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",r(l.fontSize)+"px"),l.tspan.setAttributeNS(null,"y",r(-l.y)),l.txtElement=document.createElementNS(o,"svg:text"),l.txtElement.appendChild(l.tspan)},beginText:function t(){this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.current.textMatrix=a.IDENTITY_MATRIX,this.current.lineMatrix=a.IDENTITY_MATRIX,this.current.tspan=document.createElementNS(o,"svg:tspan"),this.current.txtElement=document.createElementNS(o,"svg:text"),this.current.txtgrp=document.createElementNS(o,"svg:g"),this.current.xcoords=[]},moveText:function t(e,i){var n=this.current;this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i,n.xcoords=[],n.tspan=document.createElementNS(o,"svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",r(n.fontSize)+"px"),n.tspan.setAttributeNS(null,"y",r(-n.y))},showText:function t(e){var n=this.current,o=n.font,s=n.fontSize;if(0!==s){var l=n.charSpacing,h=n.wordSpacing,u=n.fontDirection,f=n.textHScale*u,d=e.length,p=o.vertical,g=s*n.fontMatrix[0],v=0,m;for(m=0;m<d;++m){var b=e[m];if(null!==b)if((0,a.isNum)(b))v+=-b*s*.001;else{n.xcoords.push(n.x+v*f);var y=b.width,_=b.fontChar,w=(b.isSpace?h:0)+l,S=y*g+w*u;v+=S,n.tspan.textContent+=_}else v+=u*h}p?n.y-=v*f:n.x+=v*f,n.tspan.setAttributeNS(null,"x",n.xcoords.map(r).join(" ")),n.tspan.setAttributeNS(null,"y",r(-n.y)),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",r(n.fontSize)+"px"),n.fontStyle!==c.fontStyle&&n.tspan.setAttributeNS(null,"font-style",n.fontStyle),n.fontWeight!==c.fontWeight&&n.tspan.setAttributeNS(null,"font-weight",n.fontWeight),n.fillColor!==c.fillColor&&n.tspan.setAttributeNS(null,"fill",n.fillColor),n.txtElement.setAttributeNS(null,"transform",i(n.textMatrix)+" scale(1, -1)"),n.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.txtElement.appendChild(n.tspan),n.txtgrp.appendChild(n.txtElement),this._ensureTransformGroup().appendChild(n.txtElement)}},setLeadingMoveText:function t(e,r){this.setLeading(-r),this.moveText(e,r)},addFontStyle:function t(e){this.cssStyle||(this.cssStyle=document.createElementNS(o,"svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var r=(0,a.createObjectURL)(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+e.loadedName+'"; src: url('+r+"); }\n"},setFont:function t(e){var i=this.current,n=this.commonObjs.get(e[0]),s=e[1];this.current.font=n,this.embedFonts&&n.data&&!this.embeddedFonts[n.loadedName]&&(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),i.fontMatrix=n.fontMatrix?n.fontMatrix:a.FONT_IDENTITY_MATRIX;var c=n.black?n.bold?"bolder":"bold":n.bold?"bold":"normal",l=n.italic?"italic":"normal";s<0?(s=-s,i.fontDirection=-1):i.fontDirection=1,i.fontSize=s,i.fontFamily=n.loadedName,i.fontWeight=c,i.fontStyle=l,i.tspan=document.createElementNS(o,"svg:tspan"),i.tspan.setAttributeNS(null,"y",r(-i.y)),i.xcoords=[]},endText:function t(){},setLineWidth:function t(e){this.current.lineWidth=e},setLineCap:function t(e){this.current.lineCap=u[e]},setLineJoin:function t(e){this.current.lineJoin=f[e]},setMiterLimit:function t(e){this.current.miterLimit=e},setStrokeAlpha:function t(e){this.current.strokeAlpha=e},setStrokeRGBColor:function t(e,r,i){var n=a.Util.makeCssRgb(e,r,i);this.current.strokeColor=n},setFillAlpha:function t(e){this.current.fillAlpha=e},setFillRGBColor:function t(e,r,i){var n=a.Util.makeCssRgb(e,r,i);this.current.fillColor=n,this.current.tspan=document.createElementNS(o,"svg:tspan"),this.current.xcoords=[]},setDash:function t(e,r){this.current.dashArray=e,this.current.dashPhase=r},constructPath:function t(e,i){var n=this.current,s=n.x,c=n.y;n.path=document.createElementNS(o,"svg:path");for(var l=[],h=e.length,u=0,f=0;u<h;u++)switch(0|e[u]){case a.OPS.rectangle:s=i[f++],c=i[f++];var d=i[f++],p=i[f++],g=s+d,v=c+p;l.push("M",r(s),r(c),"L",r(g),r(c),"L",r(g),r(v),"L",r(s),r(v),"Z");break;case a.OPS.moveTo:s=i[f++],c=i[f++],l.push("M",r(s),r(c));break;case a.OPS.lineTo:s=i[f++],c=i[f++],l.push("L",r(s),r(c));break;case a.OPS.curveTo:s=i[f+4],c=i[f+5],l.push("C",r(i[f]),r(i[f+1]),r(i[f+2]),r(i[f+3]),r(s),r(c)),f+=6;break;case a.OPS.curveTo2:s=i[f+2],c=i[f+3],l.push("C",r(s),r(c),r(i[f]),r(i[f+1]),r(i[f+2]),r(i[f+3])),f+=4;break;case a.OPS.curveTo3:s=i[f+2],c=i[f+3],l.push("C",r(i[f]),r(i[f+1]),r(s),r(c),r(s),r(c)),f+=4;break;case a.OPS.closePath:l.push("Z")}n.path.setAttributeNS(null,"d",l.join(" ")),n.path.setAttributeNS(null,"fill","none"),this._ensureTransformGroup().appendChild(n.path),n.element=n.path,n.setCurrentPoint(s,c)},endPath:function t(){if(this.pendingClip){var e=this.current,r="clippath"+d;d++;var n=document.createElementNS(o,"svg:clipPath");n.setAttributeNS(null,"id",r),n.setAttributeNS(null,"transform",i(this.transformMatrix));var a=e.element.cloneNode();"evenodd"===this.pendingClip?a.setAttributeNS(null,"clip-rule","evenodd"):a.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.appendChild(a),this.defs.appendChild(n),e.activeClipUrl&&(e.clipGroup=null,this.extraStack.forEach(function(t){t.clipGroup=null})),e.activeClipUrl="url(#"+r+")",this.tgrp=null}},clip:function t(e){this.pendingClip=e},closePath:function t(){var e=this.current,r=e.path.getAttributeNS(null,"d");r+="Z",e.path.setAttributeNS(null,"d",r)},setLeading:function t(e){this.current.leading=-e},setTextRise:function t(e){this.current.textRise=e},setHScale:function t(e){this.current.textHScale=e/100},setGState:function t(e){for(var r=0,i=e.length;r<i;r++){var n=e[r],o=n[0],s=n[1];switch(o){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"Font":this.setFont(s);break;case"CA":this.setStrokeAlpha(s);break;case"ca":this.setFillAlpha(s);break;default:(0,a.warn)("Unimplemented graphic state "+o)}}},fill:function t(){var e=this.current;e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha)},stroke:function t(){var e=this.current;e.element.setAttributeNS(null,"stroke",e.strokeColor),e.element.setAttributeNS(null,"stroke-opacity",e.strokeAlpha),e.element.setAttributeNS(null,"stroke-miterlimit",r(e.miterLimit)),e.element.setAttributeNS(null,"stroke-linecap",e.lineCap),e.element.setAttributeNS(null,"stroke-linejoin",e.lineJoin),e.element.setAttributeNS(null,"stroke-width",r(e.lineWidth)+"px"),e.element.setAttributeNS(null,"stroke-dasharray",e.dashArray.map(r).join(" ")),e.element.setAttributeNS(null,"stroke-dashoffset",r(e.dashPhase)+"px"),e.element.setAttributeNS(null,"fill","none")},eoFill:function t(){this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()},fillStroke:function t(){this.stroke(),this.fill()},eoFillStroke:function t(){this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()},closeStroke:function t(){this.closePath(),this.stroke()},closeFillStroke:function t(){this.closePath(),this.fillStroke()},paintSolidColorImageMask:function t(){var e=this.current,r=document.createElementNS(o,"svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","1px"),r.setAttributeNS(null,"height","1px"),r.setAttributeNS(null,"fill",e.fillColor),this._ensureTransformGroup().appendChild(r)},paintJpegXObject:function t(e,i,n){var a=this.objs.get(e),c=document.createElementNS(o,"svg:image");c.setAttributeNS(s,"xlink:href",a.src),c.setAttributeNS(null,"width",r(i)),c.setAttributeNS(null,"height",r(n)),c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y",r(-n)),c.setAttributeNS(null,"transform","scale("+r(1/i)+" "+r(-1/n)+")"),this._ensureTransformGroup().appendChild(c)},paintImageXObject:function t(e){var r=this.objs.get(e);if(!r)return void(0,a.warn)("Dependent image isn't ready yet");this.paintInlineImageXObject(r)},paintInlineImageXObject:function t(e,i){var n=e.width,a=e.height,c=l(e,this.forceDataSchema),h=document.createElementNS(o,"svg:rect");h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y","0"),h.setAttributeNS(null,"width",r(n)),h.setAttributeNS(null,"height",r(a)),this.current.element=h,this.clip("nonzero");var u=document.createElementNS(o,"svg:image");u.setAttributeNS(s,"xlink:href",c),u.setAttributeNS(null,"x","0"),u.setAttributeNS(null,"y",r(-a)),u.setAttributeNS(null,"width",r(n)+"px"),u.setAttributeNS(null,"height",r(a)+"px"),u.setAttributeNS(null,"transform","scale("+r(1/n)+" "+r(-1/a)+")"),i?i.appendChild(u):this._ensureTransformGroup().appendChild(u)},paintImageMaskXObject:function t(e){var i=this.current,n=e.width,a=e.height,s=i.fillColor;i.maskId="mask"+p++;var c=document.createElementNS(o,"svg:mask");c.setAttributeNS(null,"id",i.maskId);var l=document.createElementNS(o,"svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",r(n)),l.setAttributeNS(null,"height",r(a)),l.setAttributeNS(null,"fill",s),l.setAttributeNS(null,"mask","url(#"+i.maskId+")"),this.defs.appendChild(c),this._ensureTransformGroup().appendChild(l),this.paintInlineImageXObject(e,c)},paintFormXObjectBegin:function t(e,i){if((0,a.isArray)(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),(0,a.isArray)(i)&&4===i.length){var n=i[2]-i[0],s=i[3]-i[1],c=document.createElementNS(o,"svg:rect");c.setAttributeNS(null,"x",i[0]),c.setAttributeNS(null,"y",i[1]),c.setAttributeNS(null,"width",r(n)),c.setAttributeNS(null,"height",r(s)),this.current.element=c,this.clip("nonzero"),this.endPath()}},paintFormXObjectEnd:function t(){},_initialize:function t(e){var r=document.createElementNS(o,"svg:svg");r.setAttributeNS(null,"version","1.1"),r.setAttributeNS(null,"width",e.width+"px"),r.setAttributeNS(null,"height",e.height+"px"),r.setAttributeNS(null,"preserveAspectRatio","none"),r.setAttributeNS(null,"viewBox","0 0 "+e.width+" "+e.height);var n=document.createElementNS(o,"svg:defs");r.appendChild(n),this.defs=n;var a=document.createElementNS(o,"svg:g");return a.setAttributeNS(null,"transform",i(e.transform)),r.appendChild(a),this.svg=a,r},_ensureClipGroup:function t(){if(!this.current.clipGroup){var e=document.createElementNS(o,"svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup},_ensureTransformGroup:function t(){return this.tgrp||(this.tgrp=document.createElementNS(o,"svg:g"),this.tgrp.setAttributeNS(null,"transform",i(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}},n}(),e.SVGGraphics=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=void 0;var i=r(0),n=r(1),o=function t(){function e(t){return!f.test(t)}function r(t,r,o){var a=document.createElement("div"),s={style:null,angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(t._textDivs.push(a),e(r.str))return s.isWhitespace=!0,void t._textDivProperties.set(a,s);var c=i.Util.transform(t._viewport.transform,r.transform),l=Math.atan2(c[1],c[0]),h=o[r.fontName];h.vertical&&(l+=Math.PI/2);var u=Math.sqrt(c[2]*c[2]+c[3]*c[3]),f=u;h.ascent?f=h.ascent*f:h.descent&&(f=(1+h.descent)*f);var p,g;if(0===l?(p=c[4],g=c[5]-f):(p=c[4]+f*Math.sin(l),g=c[5]-f*Math.cos(l)),d[1]=p,d[3]=g,d[5]=u,d[7]=h.fontFamily,s.style=d.join(""),a.setAttribute("style",s.style),a.textContent=r.str,(0,n.getDefaultSetting)("pdfBug")&&(a.dataset.fontName=r.fontName),0!==l&&(s.angle=l*(180/Math.PI)),r.str.length>1&&(h.vertical?s.canvasWidth=r.height*t._viewport.scale:s.canvasWidth=r.width*t._viewport.scale),t._textDivProperties.set(a,s),t._textContentStream&&t._layoutText(a),t._enhanceTextSelection){var v=1,m=0;0!==l&&(v=Math.cos(l),m=Math.sin(l));var b=(h.vertical?r.height:r.width)*t._viewport.scale,y=u,_,w;0!==l?(_=[v,m,-m,v,p,g],w=i.Util.getAxialAlignedBoundingBox([0,0,b,y],_)):w=[p,g,p+b,g+y],t._bounds.push({left:w[0],top:w[1],right:w[2],bottom:w[3],div:a,size:[b,y],m:_})}}function o(t){if(!t._canceled){var e=t._textDivs,r=t._capability,i=e.length;if(i>u)return t._renderingDone=!0,void r.resolve();if(!t._textContentStream)for(var n=0;n<i;n++)t._layoutText(e[n]);t._renderingDone=!0,r.resolve()}}function a(t){for(var e=t._bounds,r=t._viewport,n=s(r.width,r.height,e),o=0;o<n.length;o++){var a=e[o].div,c=t._textDivProperties.get(a);if(0!==c.angle){var l=n[o],h=e[o],u=h.m,f=u[0],d=u[1],p=[[0,0],[0,h.size[1]],[h.size[0],0],h.size],g=new Float64Array(64);p.forEach(function(t,e){var r=i.Util.applyTransform(t,u);g[e+0]=f&&(l.left-r[0])/f,g[e+4]=d&&(l.top-r[1])/d,g[e+8]=f&&(l.right-r[0])/f,g[e+12]=d&&(l.bottom-r[1])/d,g[e+16]=d&&(l.left-r[0])/-d,g[e+20]=f&&(l.top-r[1])/f,g[e+24]=d&&(l.right-r[0])/-d,g[e+28]=f&&(l.bottom-r[1])/f,g[e+32]=f&&(l.left-r[0])/-f,g[e+36]=d&&(l.top-r[1])/-d,g[e+40]=f&&(l.right-r[0])/-f,g[e+44]=d&&(l.bottom-r[1])/-d,g[e+48]=d&&(l.left-r[0])/d,g[e+52]=f&&(l.top-r[1])/-f,g[e+56]=d&&(l.right-r[0])/d,g[e+60]=f&&(l.bottom-r[1])/-f});var v=function t(e,r,i){for(var n=0,o=0;o<i;o++){var a=e[r++];a>0&&(n=n?Math.min(a,n):a)}return n},m=1+Math.min(Math.abs(f),Math.abs(d));c.paddingLeft=v(g,32,16)/m,c.paddingTop=v(g,48,16)/m,c.paddingRight=v(g,0,16)/m,c.paddingBottom=v(g,16,16)/m,t._textDivProperties.set(a,c)}else c.paddingLeft=e[o].left-n[o].left,c.paddingTop=e[o].top-n[o].top,c.paddingRight=n[o].right-e[o].right,c.paddingBottom=n[o].bottom-e[o].bottom,t._textDivProperties.set(a,c)}}function s(t,e,r){var i=r.map(function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}});c(t,i);var n=new Array(r.length);return i.forEach(function(t){var e=t.index;n[e]={left:t.x1New,top:0,right:t.x2New,bottom:0}}),r.map(function(e,r){var o=n[r],a=i[r];a.x1=e.top,a.y1=t-o.right,a.x2=e.bottom,a.y2=t-o.left,a.index=r,a.x1New=void 0,a.x2New=void 0}),c(e,i),i.forEach(function(t){var e=t.index;n[e].top=t.x1New,n[e].bottom=t.x2New}),n}function c(t,e){e.sort(function(t,e){return t.x1-e.x1||t.index-e.index});var r={x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},i=[{start:-1/0,end:1/0,boundary:r}];e.forEach(function(t){for(var e=0;e<i.length&&i[e].end<=t.y1;)e++;for(var r=i.length-1;r>=0&&i[r].start>=t.y2;)r--;var n,o,a,s,c=-1/0;for(a=e;a<=r;a++){n=i[a],o=n.boundary;var l;l=o.x2>t.x1?o.index>t.index?o.x1New:t.x1:void 0===o.x2New?(o.x2+t.x1)/2:o.x2New,l>c&&(c=l)}for(t.x1New=c,a=e;a<=r;a++)n=i[a],o=n.boundary,void 0===o.x2New?o.x2>t.x1?o.index>t.index&&(o.x2New=o.x2):o.x2New=c:o.x2New>c&&(o.x2New=Math.max(c,o.x2));var h=[],u=null;for(a=e;a<=r;a++){n=i[a],o=n.boundary;var f=o.x2>t.x2?o:t;u===f?h[h.length-1].end=n.end:(h.push({start:n.start,end:n.end,boundary:f}),u=f)}for(i[e].start<t.y1&&(h[0].start=t.y1,h.unshift({start:i[e].start,end:t.y1,boundary:i[e].boundary})),t.y2<i[r].end&&(h[h.length-1].end=t.y2,h.push({start:t.y2,end:i[r].end,boundary:i[r].boundary})),a=e;a<=r;a++)if(n=i[a],o=n.boundary,void 0===o.x2New){var d=!1;for(s=e-1;!d&&s>=0&&i[s].start>=o.y1;s--)d=i[s].boundary===o;for(s=r+1;!d&&s<i.length&&i[s].end<=o.y2;s++)d=i[s].boundary===o;for(s=0;!d&&s<h.length;s++)d=h[s].boundary===o;d||(o.x2New=c)}Array.prototype.splice.apply(i,[e,r-e+1].concat(h))}),i.forEach(function(e){var r=e.boundary;void 0===r.x2New&&(r.x2New=Math.max(t,r.x2))})}function l(t){var e=t.textContent,r=t.textContentStream,n=t.container,o=t.viewport,a=t.textDivs,s=t.textContentItemsStr,c=t.enhanceTextSelection;this._textContent=e,this._textContentStream=r,this._container=n,this._viewport=o,this._textDivs=a||[],this._textContentItemsStr=s||[],this._enhanceTextSelection=!!c,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[]}function h(t){var e=new l({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e}var u=1e5,f=/\S/,d=["left: ",0,"px; top: ",0,"px; font-size: ",0,"px; font-family: ","",";"];return l.prototype={get promise(){return this._capability.promise},cancel:function t(){this._reader&&(this._reader.cancel(),this._reader=null),this._canceled=!0,null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject("canceled")},_processItems:function t(e,i){for(var n=0,o=e.length;n<o;n++)this._textContentItemsStr.push(e[n].str),r(this,e[n],i)},_layoutText:function t(e){var r=this._container,i=this._textDivProperties.get(e);if(!i.isWhitespace){var o=e.style.fontSize,a=e.style.fontFamily;o===this._layoutTextLastFontSize&&a===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=o+" "+a,this._lastFontSize=o,this._lastFontFamily=a);var s=this._layoutTextCtx.measureText(e.textContent).width,c="";0!==i.canvasWidth&&s>0&&(i.scale=i.canvasWidth/s,c="scaleX("+i.scale+")"),0!==i.angle&&(c="rotate("+i.angle+"deg) "+c),""!==c&&(i.originalTransform=c,n.CustomStyle.setProp("transform",e,c)),this._textDivProperties.set(e,i),r.appendChild(e)}},_render:function t(e){var r=this,n=(0,i.createPromiseCapability)(),a=Object.create(null),s=document.createElement("canvas");if(s.mozOpaque=!0,this._layoutTextCtx=s.getContext("2d",{alpha:!1}),this._textContent){var c=this._textContent.items,l=this._textContent.styles;this._processItems(c,l),n.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');var h=function t(){r._reader.read().then(function(e){var o=e.value;if(e.done)return void n.resolve();i.Util.extendObj(a,o.styles),r._processItems(o.items,a),t()},n.reject)};this._reader=this._textContentStream.getReader(),h()}n.promise.then(function(){a=null,e?r._renderTimer=setTimeout(function(){o(r),r._renderTimer=null},e):o(r)},this._capability.reject)},expandTextDivs:function t(e){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(a(this),this._bounds=null);for(var r=0,i=this._textDivs.length;r<i;r++){var o=this._textDivs[r],s=this._textDivProperties.get(o);if(!s.isWhitespace)if(e){var c="",l="";1!==s.scale&&(c="scaleX("+s.scale+")"),0!==s.angle&&(c="rotate("+s.angle+"deg) "+c),0!==s.paddingLeft&&(l+=" padding-left: "+s.paddingLeft/s.scale+"px;",c+=" translateX("+-s.paddingLeft/s.scale+"px)"),0!==s.paddingTop&&(l+=" padding-top: "+s.paddingTop+"px;",c+=" translateY("+-s.paddingTop+"px)"),0!==s.paddingRight&&(l+=" padding-right: "+s.paddingRight/s.scale+"px;"),0!==s.paddingBottom&&(l+=" padding-bottom: "+s.paddingBottom+"px;"),""!==l&&o.setAttribute("style",s.style+l),""!==c&&n.CustomStyle.setProp("transform",o,c)}else o.style.padding=0,n.CustomStyle.setProp("transform",o,s.originalTransform||"")}}}},h}();e.renderTextLayer=o},function(t,e,r){"use strict";function i(t){return t.replace(/>\\376\\377([^<]+)/g,function(t,e){for(var r=e.replace(/\\([0-3])([0-7])([0-7])/g,function(t,e,r,i){return String.fromCharCode(64*e+8*r+1*i)}),i="",n=0;n<r.length;n+=2){var o=256*r.charCodeAt(n)+r.charCodeAt(n+1);i+=o>=32&&o<127&&60!==o&&62!==o&&38!==o?String.fromCharCode(o):"&#x"+(65536+o).toString(16).substring(1)+";"}return">"+i})}function n(t){if("string"==typeof t){t=i(t);t=(new DOMParser).parseFromString(t,"application/xml")}else if(!(t instanceof Document))throw new Error("Metadata: Invalid metadata object");this.metaDocument=t,this.metadata=Object.create(null),this.parse()}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype={parse:function t(){var e=this.metaDocument,r=e.documentElement;if("rdf:rdf"!==r.nodeName.toLowerCase())for(r=r.firstChild;r&&"rdf:rdf"!==r.nodeName.toLowerCase();)r=r.nextSibling;var i=r?r.nodeName.toLowerCase():null;if(r&&"rdf:rdf"===i&&r.hasChildNodes()){var n=r.childNodes,o,a,s,c,l,h,u;for(c=0,h=n.length;c<h;c++)if(o=n[c],"rdf:description"===o.nodeName.toLowerCase())for(l=0,u=o.childNodes.length;l<u;l++)"#text"!==o.childNodes[l].nodeName.toLowerCase()&&(a=o.childNodes[l],s=a.nodeName.toLowerCase(),this.metadata[s]=a.textContent.trim())}},get:function t(e){return this.metadata[e]||null},has:function t(e){return void 0!==this.metadata[e]}},e.Metadata=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLUtils=void 0;var i=r(1),n=r(0),o=function t(){function e(t,e,r){var i=t.createShader(r);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var n=t.getShaderInfoLog(i);throw new Error("Error during shader compilation: "+n)}return i}function r(t,r){return e(t,r,t.VERTEX_SHADER)}function o(t,r){return e(t,r,t.FRAGMENT_SHADER)}function a(t,e){for(var r=t.createProgram(),i=0,n=e.length;i<n;++i)t.attachShader(r,e[i]);if(t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var o=t.getProgramInfoLog(r);throw new Error("Error during program linking: "+o)}return r}function s(t,e,r){t.activeTexture(r);var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),i}function c(){p||(g=document.createElement("canvas"),p=g.getContext("webgl",{premultipliedalpha:!1}))}function l(){var t,e;c(),t=g,g=null,e=p,p=null;var i=r(e,v),n=o(e,m),s=a(e,[i,n]);e.useProgram(s);var l={};l.gl=e,l.canvas=t,l.resolutionLocation=e.getUniformLocation(s,"u_resolution"),l.positionLocation=e.getAttribLocation(s,"a_position"),l.backdropLocation=e.getUniformLocation(s,"u_backdrop"),l.subtypeLocation=e.getUniformLocation(s,"u_subtype");var h=e.getAttribLocation(s,"a_texCoord"),u=e.getUniformLocation(s,"u_image"),f=e.getUniformLocation(s,"u_mask"),d=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,d),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(h),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.uniform1i(u,0),e.uniform1i(f,1),b=l}function h(t,e,r){var i=t.width,n=t.height;b||l();var o=b,a=o.canvas,c=o.gl;a.width=i,a.height=n,c.viewport(0,0,c.drawingBufferWidth,c.drawingBufferHeight),c.uniform2f(o.resolutionLocation,i,n),r.backdrop?c.uniform4f(o.resolutionLocation,r.backdrop[0],r.backdrop[1],r.backdrop[2],1):c.uniform4f(o.resolutionLocation,0,0,0,0),c.uniform1i(o.subtypeLocation,"Luminosity"===r.subtype?1:0);var h=s(c,t,c.TEXTURE0),u=s(c,e,c.TEXTURE1),f=c.createBuffer();return c.bindBuffer(c.ARRAY_BUFFER,f),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,i,0,0,n,0,n,i,0,i,n]),c.STATIC_DRAW),c.enableVertexAttribArray(o.positionLocation),c.vertexAttribPointer(o.positionLocation,2,c.FLOAT,!1,0,0),c.clearColor(0,0,0,0),c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),c.clear(c.COLOR_BUFFER_BIT),c.drawArrays(c.TRIANGLES,0,6),c.flush(),c.deleteTexture(h),c.deleteTexture(u),c.deleteBuffer(f),a}function u(){var t,e;c(),t=g,g=null,e=p,p=null;var i=r(e,y),n=o(e,_),s=a(e,[i,n]);e.useProgram(s);var l={};l.gl=e,l.canvas=t,l.resolutionLocation=e.getUniformLocation(s,"u_resolution"),l.scaleLocation=e.getUniformLocation(s,"u_scale"),l.offsetLocation=e.getUniformLocation(s,"u_offset"),l.positionLocation=e.getAttribLocation(s,"a_position"),l.colorLocation=e.getAttribLocation(s,"a_color"),w=l}function f(t,e,r,i,n){w||u();var o=w,a=o.canvas,s=o.gl;a.width=t,a.height=e,s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.uniform2f(o.resolutionLocation,t,e);var c=0,l,h,f;for(l=0,h=i.length;l<h;l++)switch(i[l].type){case"lattice":f=i[l].coords.length/i[l].verticesPerRow|0,c+=(f-1)*(i[l].verticesPerRow-1)*6;break;case"triangles":c+=i[l].coords.length}var d=new Float32Array(2*c),p=new Uint8Array(3*c),g=n.coords,v=n.colors,m=0,b=0;for(l=0,h=i.length;l<h;l++){var y=i[l],_=y.coords,S=y.colors;switch(y.type){case"lattice":var x=y.verticesPerRow;f=_.length/x|0;for(var C=1;C<f;C++)for(var A=C*x+1,T=1;T<x;T++,A++)d[m]=g[_[A-x-1]],d[m+1]=g[_[A-x-1]+1],d[m+2]=g[_[A-x]],d[m+3]=g[_[A-x]+1],d[m+4]=g[_[A-1]],d[m+5]=g[_[A-1]+1],p[b]=v[S[A-x-1]],p[b+1]=v[S[A-x-1]+1],p[b+2]=v[S[A-x-1]+2],p[b+3]=v[S[A-x]],p[b+4]=v[S[A-x]+1],p[b+5]=v[S[A-x]+2],p[b+6]=v[S[A-1]],p[b+7]=v[S[A-1]+1],p[b+8]=v[S[A-1]+2],d[m+6]=d[m+2],d[m+7]=d[m+3],d[m+8]=d[m+4],d[m+9]=d[m+5],d[m+10]=g[_[A]],d[m+11]=g[_[A]+1],p[b+9]=p[b+3],p[b+10]=p[b+4],p[b+11]=p[b+5],p[b+12]=p[b+6],p[b+13]=p[b+7],p[b+14]=p[b+8],p[b+15]=v[S[A]],p[b+16]=v[S[A]+1],p[b+17]=v[S[A]+2],m+=12,b+=18;break;case"triangles":for(var k=0,P=_.length;k<P;k++)d[m]=g[_[k]],d[m+1]=g[_[k]+1],p[b]=v[S[k]],p[b+1]=v[S[k]+1],p[b+2]=v[S[k]+2],m+=2,b+=3}}r?s.clearColor(r[0]/255,r[1]/255,r[2]/255,1):s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT);var E=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,E),s.bufferData(s.ARRAY_BUFFER,d,s.STATIC_DRAW),s.enableVertexAttribArray(o.positionLocation),s.vertexAttribPointer(o.positionLocation,2,s.FLOAT,!1,0,0);var O=s.createBuffer();return s.bindBuffer(s.ARRAY_BUFFER,O),s.bufferData(s.ARRAY_BUFFER,p,s.STATIC_DRAW),s.enableVertexAttribArray(o.colorLocation),s.vertexAttribPointer(o.colorLocation,3,s.UNSIGNED_BYTE,!1,0,0),s.uniform2f(o.scaleLocation,n.scaleX,n.scaleY),s.uniform2f(o.offsetLocation,n.offsetX,n.offsetY),s.drawArrays(s.TRIANGLES,0,c),s.flush(),s.deleteBuffer(E),s.deleteBuffer(O),a}function d(){b&&b.canvas&&(b.canvas.width=0,b.canvas.height=0),w&&w.canvas&&(w.canvas.width=0,w.canvas.height=0),b=null,w=null}var p,g,v="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",m="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",b=null,y="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",_="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",w=null;return{get isEnabled(){if((0,i.getDefaultSetting)("disableWebGL"))return!1;var t=!1;try{c(),t=!!p}catch(t){}return(0,n.shadow)(this,"isEnabled",t)},composeSMask:h,drawFigures:f,clear:d}}();e.WebGLUtils=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFJS=e.isWorker=e.globalScope=void 0;var i=r(3),n=r(1),o=r(0),a=r(2),s=r(6),c=r(5),l=r(4),h="undefined"==typeof window;o.globalScope.PDFJS||(o.globalScope.PDFJS={});var u=o.globalScope.PDFJS;u.version="1.8.575",u.build="bd8c1211",u.pdfBug=!1,void 0!==u.verbosity&&(0,o.setVerbosityLevel)(u.verbosity),delete u.verbosity,Object.defineProperty(u,"verbosity",{get:function t(){return(0,o.getVerbosityLevel)()},set:function t(e){(0,o.setVerbosityLevel)(e)},enumerable:!0,configurable:!0}),u.VERBOSITY_LEVELS=o.VERBOSITY_LEVELS,u.OPS=o.OPS,u.UNSUPPORTED_FEATURES=o.UNSUPPORTED_FEATURES,u.isValidUrl=n.isValidUrl,u.shadow=o.shadow,u.createBlob=o.createBlob,u.createObjectURL=function t(e,r){return(0,o.createObjectURL)(e,r,u.disableCreateObjectURL)},Object.defineProperty(u,"isLittleEndian",{configurable:!0,get:function t(){return(0,o.shadow)(u,"isLittleEndian",(0,o.isLittleEndian)())}}),u.removeNullCharacters=o.removeNullCharacters,u.PasswordResponses=o.PasswordResponses,u.PasswordException=o.PasswordException,u.UnknownErrorException=o.UnknownErrorException,u.InvalidPDFException=o.InvalidPDFException,u.MissingPDFException=o.MissingPDFException,u.UnexpectedResponseException=o.UnexpectedResponseException,u.Util=o.Util,u.PageViewport=o.PageViewport,u.createPromiseCapability=o.createPromiseCapability,u.maxImageSize=void 0===u.maxImageSize?-1:u.maxImageSize,u.cMapUrl=void 0===u.cMapUrl?null:u.cMapUrl,u.cMapPacked=void 0!==u.cMapPacked&&u.cMapPacked,u.disableFontFace=void 0!==u.disableFontFace&&u.disableFontFace,u.imageResourcesPath=void 0===u.imageResourcesPath?"":u.imageResourcesPath,u.disableWorker=void 0!==u.disableWorker&&u.disableWorker,u.workerSrc=void 0===u.workerSrc?null:u.workerSrc,u.workerPort=void 0===u.workerPort?null:u.workerPort,u.disableRange=void 0!==u.disableRange&&u.disableRange,u.disableStream=void 0!==u.disableStream&&u.disableStream,u.disableAutoFetch=void 0!==u.disableAutoFetch&&u.disableAutoFetch,u.pdfBug=void 0!==u.pdfBug&&u.pdfBug,u.postMessageTransfers=void 0===u.postMessageTransfers||u.postMessageTransfers,u.disableCreateObjectURL=void 0!==u.disableCreateObjectURL&&u.disableCreateObjectURL,u.disableWebGL=void 0===u.disableWebGL||u.disableWebGL,u.externalLinkTarget=void 0===u.externalLinkTarget?n.LinkTarget.NONE:u.externalLinkTarget,u.externalLinkRel=void 0===u.externalLinkRel?n.DEFAULT_LINK_REL:u.externalLinkRel,u.isEvalSupported=void 0===u.isEvalSupported||u.isEvalSupported,u.pdfjsNext=void 0!==u.pdfjsNext&&u.pdfjsNext;var f=u.openExternalLinksInNewWindow;delete u.openExternalLinksInNewWindow,Object.defineProperty(u,"openExternalLinksInNewWindow",{get:function t(){return u.externalLinkTarget===n.LinkTarget.BLANK},set:function t(e){if(e&&(0,o.deprecated)('PDFJS.openExternalLinksInNewWindow, please use "PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK" instead.'),u.externalLinkTarget!==n.LinkTarget.NONE)return void(0,o.warn)("PDFJS.externalLinkTarget is already initialized");u.externalLinkTarget=e?n.LinkTarget.BLANK:n.LinkTarget.NONE},enumerable:!0,configurable:!0}),f&&(u.openExternalLinksInNewWindow=f),u.getDocument=i.getDocument,u.LoopbackPort=i.LoopbackPort,u.PDFDataRangeTransport=i.PDFDataRangeTransport,u.PDFWorker=i.PDFWorker,u.hasCanvasTypedArrays=!0,u.CustomStyle=n.CustomStyle,u.LinkTarget=n.LinkTarget,u.addLinkAttributes=n.addLinkAttributes,u.getFilenameFromUrl=n.getFilenameFromUrl,u.isExternalLinkTargetSet=n.isExternalLinkTargetSet,u.AnnotationLayer=a.AnnotationLayer,u.renderTextLayer=c.renderTextLayer,u.Metadata=s.Metadata,u.SVGGraphics=l.SVGGraphics,u.UnsupportedManager=i._UnsupportedManager,e.globalScope=o.globalScope,e.isWorker=h,e.PDFJS=u},function(t,e,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){for(var r in e)t[r]=e[r]}(e,function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function e(){return t.default}:function e(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,r){function n(t){return"string"==typeof t||"symbol"===(void 0===t?"undefined":a(t))}function o(t,e,r){if("function"!=typeof t)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,e,r)}var a="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":i(t)},s=r(1),c=s.assert;e.typeIsObject=function(t){return"object"===(void 0===t?"undefined":a(t))&&null!==t||"function"==typeof t},e.createDataProperty=function(t,r,i){c(e.typeIsObject(t)),Object.defineProperty(t,r,{value:i,writable:!0,enumerable:!0,configurable:!0})},e.createArrayFromList=function(t){return t.slice()},e.ArrayBufferCopy=function(t,e,r,i,n){new Uint8Array(t).set(new Uint8Array(r,i,n),e)},e.CreateIterResultObject=function(t,e){c("boolean"==typeof e);var r={};return Object.defineProperty(r,"value",{value:t,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(r,"done",{value:e,enumerable:!0,writable:!0,configurable:!0}),r},e.IsFiniteNonNegativeNumber=function(t){return!Number.isNaN(t)&&(t!==1/0&&!(t<0))},e.InvokeOrNoop=function(t,e,r){c(void 0!==t),c(n(e)),c(Array.isArray(r));var i=t[e];if(void 0!==i)return o(i,t,r)},e.PromiseInvokeOrNoop=function(t,r,i){c(void 0!==t),c(n(r)),c(Array.isArray(i));try{return Promise.resolve(e.InvokeOrNoop(t,r,i))}catch(t){return Promise.reject(t)}},e.PromiseInvokeOrPerformFallback=function(t,e,r,i,a){c(void 0!==t),c(n(e)),c(Array.isArray(r)),c(Array.isArray(a));var s=void 0;try{s=t[e]}catch(t){return Promise.reject(t)}if(void 0===s)return i.apply(null,a);try{return Promise.resolve(o(s,t,r))}catch(t){return Promise.reject(t)}},e.TransferArrayBuffer=function(t){return t.slice()},e.ValidateAndNormalizeHighWaterMark=function(t){if(t=Number(t),Number.isNaN(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t},e.ValidateAndNormalizeQueuingStrategy=function(t,r){if(void 0!==t&&"function"!=typeof t)throw new TypeError("size property of a queuing strategy must be a function");return r=e.ValidateAndNormalizeHighWaterMark(r),{size:t,highWaterMark:r}}},function(t,e,r){function i(t){t&&t.constructor===n&&setTimeout(function(){throw t},0)}function n(t){this.name="AssertionError",this.message=t||"",this.stack=(new Error).stack}function o(t,e){if(!t)throw new n(e)}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,t.exports={rethrowAssertionErrorRejection:i,AssertionError:n,assert:o}},function(t,e,r){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){return new yt(t)}function o(t){return!!lt(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")}function a(t){return ut(!0===o(t),"IsWritableStreamLocked should only be used on known writable streams"),void 0!==t._writer}function s(t,e){var r=t._state;if("closed"===r)return Promise.resolve(void 0);if("errored"===r)return Promise.reject(t._storedError);var i=new TypeError("Requested to abort");if(void 0!==t._pendingAbortRequest)return Promise.reject(i);ut("writable"===r||"erroring"===r,"state must be writable or erroring");var n=!1;"erroring"===r&&(n=!0,e=void 0);var o=new Promise(function(r,i){t._pendingAbortRequest={_resolve:r,_reject:i,_reason:e,_wasAlreadyErroring:n}});return!1===n&&h(t,i),o}function c(t){return ut(!0===a(t)),ut("writable"===t._state),new Promise(function(e,r){var i={_resolve:e,_reject:r};t._writeRequests.push(i)})}function l(t,e){var r=t._state;if("writable"===r)return void h(t,e);ut("erroring"===r),u(t)}function h(t,e){ut(void 0===t._storedError,"stream._storedError === undefined"),ut("writable"===t._state,"state must be writable");var r=t._writableStreamController;ut(void 0!==r,"controller must not be undefined"),t._state="erroring",t._storedError=e;var i=t._writer;void 0!==i&&k(i,e),!1===m(t)&&!0===r._started&&u(t)}function u(t){ut("erroring"===t._state,"stream._state === erroring"),ut(!1===m(t),"WritableStreamHasOperationMarkedInFlight(stream) === false"),t._state="errored",t._writableStreamController.__errorSteps();for(var e=t._storedError,r=0;r<t._writeRequests.length;r++){t._writeRequests[r]._reject(e)}if(t._writeRequests=[],void 0===t._pendingAbortRequest)return void _(t);var i=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,!0===i._wasAlreadyErroring)return i._reject(e),void _(t);t._writableStreamController.__abortSteps(i._reason).then(function(){i._resolve(),_(t)},function(e){i._reject(e),_(t)})}function f(t){ut(void 0!==t._inFlightWriteRequest),t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}function d(t,e){ut(void 0!==t._inFlightWriteRequest),t._inFlightWriteRequest._reject(e),t._inFlightWriteRequest=void 0,ut("writable"===t._state||"erroring"===t._state),l(t,e)}function p(t){ut(void 0!==t._inFlightCloseRequest),t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0;var e=t._state;ut("writable"===e||"erroring"===e),"erroring"===e&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";var r=t._writer;void 0!==r&&J(r),ut(void 0===t._pendingAbortRequest,"stream._pendingAbortRequest === undefined"),ut(void 0===t._storedError,"stream._storedError === undefined")}function g(t,e){ut(void 0!==t._inFlightCloseRequest),t._inFlightCloseRequest._reject(e),t._inFlightCloseRequest=void 0,ut("writable"===t._state||"erroring"===t._state),void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(e),t._pendingAbortRequest=void 0),l(t,e)}function v(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function m(t){return void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest}function b(t){ut(void 0===t._inFlightCloseRequest),ut(void 0!==t._closeRequest),t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0}function y(t){ut(void 0===t._inFlightWriteRequest,"there must be no pending write request"),ut(0!==t._writeRequests.length,"writeRequests must not be empty"),t._inFlightWriteRequest=t._writeRequests.shift()}function _(t){ut("errored"===t._state,'_stream_.[[state]] is `"errored"`'),void 0!==t._closeRequest&&(ut(void 0===t._inFlightCloseRequest),t._closeRequest._reject(t._storedError),t._closeRequest=void 0);var e=t._writer;void 0!==e&&(V(e,t._storedError),e._closedPromise.catch(function(){}))}function w(t,e){ut("writable"===t._state),ut(!1===v(t));var r=t._writer;void 0!==r&&e!==t._backpressure&&(!0===e?et(r):(ut(!1===e),it(r))),t._backpressure=e}function S(t){return!!lt(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")}function x(t,e){var r=t._ownerWritableStream;return ut(void 0!==r),s(r,e)}function C(t){var e=t._ownerWritableStream;ut(void 0!==e);var r=e._state;if("closed"===r||"errored"===r)return Promise.reject(new TypeError("The stream (in "+r+" state) is not in the writable state and cannot be closed"));ut("writable"===r||"erroring"===r),ut(!1===v(e));var i=new Promise(function(t,r){var i={_resolve:t,_reject:r};e._closeRequest=i});return!0===e._backpressure&&"writable"===r&&it(t),R(e._writableStreamController),i}function A(t){var e=t._ownerWritableStream;ut(void 0!==e);var r=e._state;return!0===v(e)||"closed"===r?Promise.resolve():"errored"===r?Promise.reject(e._storedError):(ut("writable"===r||"erroring"===r),C(t))}function T(t,e){"pending"===t._closedPromiseState?V(t,e):Z(t,e),t._closedPromise.catch(function(){})}function k(t,e){"pending"===t._readyPromiseState?tt(t,e):rt(t,e),t._readyPromise.catch(function(){})}function P(t){var e=t._ownerWritableStream,r=e._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:D(e._writableStreamController)}function E(t){var e=t._ownerWritableStream;ut(void 0!==e),ut(e._writer===t);var r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");k(t,r),T(t,r),e._writer=void 0,t._ownerWritableStream=void 0}function O(t,e){var r=t._ownerWritableStream;ut(void 0!==r);var i=r._writableStreamController,n=L(i,e);if(r!==t._ownerWritableStream)return Promise.reject(X("write to"));var o=r._state;if("errored"===o)return Promise.reject(r._storedError);if(!0===v(r)||"closed"===o)return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===o)return Promise.reject(r._storedError);ut("writable"===o);var a=c(r);return I(i,e,n),a}function R(t){gt(t,"close",0),M(t)}function L(t,e){var r=t._strategySize;if(void 0===r)return 1;try{return r(e)}catch(e){return F(t,e),1}}function D(t){return t._strategyHWM-t._queueTotalSize}function I(t,e,r){var i={chunk:e};try{gt(t,i,r)}catch(e){return void F(t,e)}var n=t._controlledWritableStream;if(!1===v(n)&&"writable"===n._state){w(n,U(t))}M(t)}function j(t){return!!lt(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingSink")}function M(t){var e=t._controlledWritableStream;if(!1!==t._started&&void 0===e._inFlightWriteRequest){var r=e._state;if("closed"!==r&&"errored"!==r){if("erroring"===r)return void u(e);if(0!==t._queue.length){var i=vt(t);"close"===i?N(t):B(t,i.chunk)}}}}function F(t,e){"writable"===t._controlledWritableStream._state&&z(t,e)}function N(t){var e=t._controlledWritableStream;b(e),pt(t),ut(0===t._queue.length,"queue must be empty once the final write record is dequeued"),st(t._underlyingSink,"close",[]).then(function(){p(e)},function(t){g(e,t)}).catch(ft)}function B(t,e){var r=t._controlledWritableStream;y(r),st(t._underlyingSink,"write",[e,t]).then(function(){f(r);var e=r._state;if(ut("writable"===e||"erroring"===e),pt(t),!1===v(r)&&"writable"===e){var i=U(t);w(r,i)}M(t)},function(t){d(r,t)}).catch(ft)}function U(t){return D(t)<=0}function z(t,e){var r=t._controlledWritableStream;ut("writable"===r._state),h(r,e)}function W(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function q(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function X(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function G(t){t._closedPromise=new Promise(function(e,r){t._closedPromise_resolve=e,t._closedPromise_reject=r,t._closedPromiseState="pending"})}function H(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}function Y(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}function V(t,e){ut(void 0!==t._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),ut(void 0!==t._closedPromise_reject,"writer._closedPromise_reject !== undefined"),ut("pending"===t._closedPromiseState,"writer._closedPromiseState is pending"),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}function Z(t,e){ut(void 0===t._closedPromise_resolve,"writer._closedPromise_resolve === undefined"),ut(void 0===t._closedPromise_reject,"writer._closedPromise_reject === undefined"),ut("pending"!==t._closedPromiseState,"writer._closedPromiseState is not pending"),t._closedPromise=Promise.reject(e),t._closedPromiseState="rejected"}function J(t){ut(void 0!==t._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),ut(void 0!==t._closedPromise_reject,"writer._closedPromise_reject !== undefined"),ut("pending"===t._closedPromiseState,"writer._closedPromiseState is pending"),t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}function K(t){t._readyPromise=new Promise(function(e,r){t._readyPromise_resolve=e,t._readyPromise_reject=r}),t._readyPromiseState="pending"}function Q(t,e){t._readyPromise=Promise.reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}function $(t){t._readyPromise=Promise.resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}function tt(t,e){ut(void 0!==t._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),ut(void 0!==t._readyPromise_reject,"writer._readyPromise_reject !== undefined"),t._readyPromise_reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}function et(t){ut(void 0===t._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),ut(void 0===t._readyPromise_reject,"writer._readyPromise_reject === undefined"),t._readyPromise=new Promise(function(e,r){t._readyPromise_resolve=e,t._readyPromise_reject=r}),t._readyPromiseState="pending"}function rt(t,e){ut(void 0===t._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),ut(void 0===t._readyPromise_reject,"writer._readyPromise_reject === undefined"),t._readyPromise=Promise.reject(e),t._readyPromiseState="rejected"}function it(t){ut(void 0!==t._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),ut(void 0!==t._readyPromise_reject,"writer._readyPromise_reject !== undefined"),t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}var nt=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),ot=r(0),at=ot.InvokeOrNoop,st=ot.PromiseInvokeOrNoop,ct=ot.ValidateAndNormalizeQueuingStrategy,lt=ot.typeIsObject,ht=r(1),ut=ht.assert,ft=ht.rethrowAssertionErrorRejection,dt=r(3),pt=dt.DequeueValue,gt=dt.EnqueueValueWithSize,vt=dt.PeekQueueValue,mt=dt.ResetQueue,bt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size,o=r.highWaterMark,a=void 0===o?1:o;if(i(this,t),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1,void 0!==e.type)throw new RangeError("Invalid type is specified");this._writableStreamController=new _t(this,e,n,a),this._writableStreamController.__startSteps()}return nt(t,[{key:"abort",value:function t(e){return!1===o(this)?Promise.reject(W("abort")):!0===a(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):s(this,e)}},{key:"getWriter",value:function t(){if(!1===o(this))throw W("getWriter");return n(this)}},{key:"locked",get:function t(){if(!1===o(this))throw W("locked");return a(this)}}]),t}();t.exports={AcquireWritableStreamDefaultWriter:n,IsWritableStream:o,IsWritableStreamLocked:a,WritableStream:bt,WritableStreamAbort:s,WritableStreamDefaultControllerError:z,WritableStreamDefaultWriterCloseWithErrorPropagation:A,WritableStreamDefaultWriterRelease:E,WritableStreamDefaultWriterWrite:O,WritableStreamCloseQueuedOrInFlight:v};var yt=function(){function t(e){if(i(this,t),!1===o(e))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===a(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var r=e._state;if("writable"===r)!1===v(e)&&!0===e._backpressure?K(this):$(this),G(this);else if("erroring"===r)Q(this,e._storedError),this._readyPromise.catch(function(){}),G(this);else if("closed"===r)$(this),Y(this);else{ut("errored"===r,"state must be errored");var n=e._storedError;Q(this,n),this._readyPromise.catch(function(){}),H(this,n),this._closedPromise.catch(function(){})}}return nt(t,[{key:"abort",value:function t(e){return!1===S(this)?Promise.reject(q("abort")):void 0===this._ownerWritableStream?Promise.reject(X("abort")):x(this,e)}},{key:"close",value:function t(){if(!1===S(this))return Promise.reject(q("close"));var e=this._ownerWritableStream;return void 0===e?Promise.reject(X("close")):!0===v(e)?Promise.reject(new TypeError("cannot close an already-closing stream")):C(this)}},{key:"releaseLock",value:function t(){if(!1===S(this))throw q("releaseLock");var e=this._ownerWritableStream;void 0!==e&&(ut(void 0!==e._writer),E(this))}},{key:"write",value:function t(e){return!1===S(this)?Promise.reject(q("write")):void 0===this._ownerWritableStream?Promise.reject(X("write to")):O(this,e)}},{key:"closed",get:function t(){return!1===S(this)?Promise.reject(q("closed")):this._closedPromise}},{key:"desiredSize",get:function t(){if(!1===S(this))throw q("desiredSize");if(void 0===this._ownerWritableStream)throw X("desiredSize");return P(this)}},{key:"ready",get:function t(){return!1===S(this)?Promise.reject(q("ready")):this._readyPromise}}]),t}(),_t=function(){function t(e,r,n,a){if(i(this,t),!1===o(e))throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(void 0!==e._writableStreamController)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=e,this._underlyingSink=r,this._queue=void 0,this._queueTotalSize=void 0,mt(this),this._started=!1;var s=ct(n,a);this._strategySize=s.size,this._strategyHWM=s.highWaterMark,w(e,U(this))}return nt(t,[{key:"error",value:function t(e){if(!1===j(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this._controlledWritableStream._state&&z(this,e)}},{key:"__abortSteps",value:function t(e){return st(this._underlyingSink,"abort",[e])}},{key:"__errorSteps",value:function t(){mt(this)}},{key:"__startSteps",value:function t(){var e=this,r=at(this._underlyingSink,"start",[this]),i=this._controlledWritableStream;Promise.resolve(r).then(function(){ut("writable"===i._state||"erroring"===i._state),e._started=!0,M(e)},function(t){ut("writable"===i._state||"erroring"===i._state),e._started=!0,l(i,t)}).catch(ft)}}]),t}()},function(t,e,r){var i=r(0),n=i.IsFiniteNonNegativeNumber,o=r(1),a=o.assert;e.DequeueValue=function(t){a("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),a(t._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var e=t._queue.shift();return t._queueTotalSize-=e.size,t._queueTotalSize<0&&(t._queueTotalSize=0),e.value},e.EnqueueValueWithSize=function(t,e,r){if(a("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),r=Number(r),!n(r))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:e,size:r}),t._queueTotalSize+=r},e.PeekQueueValue=function(t){return a("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),a(t._queue.length>0,"Spec-level failure: should never peek at an empty queue."),t._queue[0].value},e.ResetQueue=function(t){a("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),t._queue=[],t._queueTotalSize=0}},function(t,e,r){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){return new ee(t)}function o(t){return new te(t)}function a(t){return!!Mt(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")}function s(t){return Nt(!0===a(t),"IsReadableStreamDisturbed should only be used on known readable streams"),t._disturbed}function c(t){return Nt(!0===a(t),"IsReadableStreamLocked should only be used on known readable streams"),void 0!==t._reader}function l(t,e){Nt(!0===a(t)),Nt("boolean"==typeof e);var r=o(t),i={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};i.promise=new Promise(function(t){i._resolve=t});var n=h();n._reader=r,n._teeState=i,n._cloneForBranch2=e;var s=u();s._stream=t,s._teeState=i;var c=f();c._stream=t,c._teeState=i;var l=Object.create(Object.prototype);jt(l,"pull",n),jt(l,"cancel",s);var d=new $t(l),p=Object.create(Object.prototype);jt(p,"pull",n),jt(p,"cancel",c);var g=new $t(p);return n._branch1=d._readableStreamController,n._branch2=g._readableStreamController,r._closedPromise.catch(function(t){!0!==i.closedOrErrored&&(M(n._branch1,t),M(n._branch2,t),i.closedOrErrored=!0)}),[d,g]}function h(){function t(){var e=t._reader,r=t._branch1,i=t._branch2,n=t._teeState;return O(e).then(function(t){Nt(Mt(t));var e=t.value,o=t.done;if(Nt("boolean"==typeof o),!0===o&&!1===n.closedOrErrored&&(!1===n.canceled1&&I(r),!1===n.canceled2&&I(i),n.closedOrErrored=!0),!0!==n.closedOrErrored){var a=e,s=e;!1===n.canceled1&&j(r,a),!1===n.canceled2&&j(i,s)}})}return t}function u(){function t(e){var r=t._stream,i=t._teeState;if(i.canceled1=!0,i.reason1=e,!0===i.canceled2){var n=It([i.reason1,i.reason2]),o=g(r,n);i._resolve(o)}return i.promise}return t}function f(){function t(e){var r=t._stream,i=t._teeState;if(i.canceled2=!0,i.reason2=e,!0===i.canceled1){var n=It([i.reason1,i.reason2]),o=g(r,n);i._resolve(o)}return i.promise}return t}function d(t){return Nt(!0===C(t._reader)),Nt("readable"===t._state||"closed"===t._state),new Promise(function(e,r){var i={_resolve:e,_reject:r};t._reader._readIntoRequests.push(i)})}function p(t){return Nt(!0===A(t._reader)),Nt("readable"===t._state),new Promise(function(e,r){var i={_resolve:e,_reject:r};t._reader._readRequests.push(i)})}function g(t,e){return t._disturbed=!0,"closed"===t._state?Promise.resolve(void 0):"errored"===t._state?Promise.reject(t._storedError):(v(t),t._readableStreamController.__cancelSteps(e).then(function(){}))}function v(t){Nt("readable"===t._state),t._state="closed";var e=t._reader;if(void 0!==e){if(!0===A(e)){for(var r=0;r<e._readRequests.length;r++){(0,e._readRequests[r]._resolve)(Tt(void 0,!0))}e._readRequests=[]}mt(e)}}function m(t,e){Nt(!0===a(t),"stream must be ReadableStream"),Nt("readable"===t._state,"state must be readable"),t._state="errored",t._storedError=e;var r=t._reader;if(void 0!==r){if(!0===A(r)){for(var i=0;i<r._readRequests.length;i++){r._readRequests[i]._reject(e)}r._readRequests=[]}else{Nt(C(r),"reader must be ReadableStreamBYOBReader");for(var n=0;n<r._readIntoRequests.length;n++){r._readIntoRequests[n]._reject(e)}r._readIntoRequests=[]}gt(r,e),r._closedPromise.catch(function(){})}}function b(t,e,r){var i=t._reader;Nt(i._readIntoRequests.length>0),i._readIntoRequests.shift()._resolve(Tt(e,r))}function y(t,e,r){var i=t._reader;Nt(i._readRequests.length>0),i._readRequests.shift()._resolve(Tt(e,r))}function _(t){return t._reader._readIntoRequests.length}function w(t){return t._reader._readRequests.length}function S(t){var e=t._reader;return void 0!==e&&!1!==C(e)}function x(t){var e=t._reader;return void 0!==e&&!1!==A(e)}function C(t){return!!Mt(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")}function A(t){return!!Mt(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")}function T(t,e){t._ownerReadableStream=e,e._reader=t,"readable"===e._state?ft(t):"closed"===e._state?pt(t):(Nt("errored"===e._state,"state must be errored"),dt(t,e._storedError),t._closedPromise.catch(function(){}))}function k(t,e){var r=t._ownerReadableStream;return Nt(void 0!==r),g(r,e)}function P(t){Nt(void 0!==t._ownerReadableStream),Nt(t._ownerReadableStream._reader===t),"readable"===t._ownerReadableStream._state?gt(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):vt(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._closedPromise.catch(function(){}),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function E(t,e){var r=t._ownerReadableStream;return Nt(void 0!==r),r._disturbed=!0,"errored"===r._state?Promise.reject(r._storedError):K(r._readableStreamController,e)}function O(t){var e=t._ownerReadableStream;return Nt(void 0!==e),e._disturbed=!0,"closed"===e._state?Promise.resolve(Tt(void 0,!0)):"errored"===e._state?Promise.reject(e._storedError):(Nt("readable"===e._state),e._readableStreamController.__pullSteps())}function R(t){return!!Mt(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingSource")}function L(t){if(!1!==D(t)){if(!0===t._pulling)return void(t._pullAgain=!0);Nt(!1===t._pullAgain),t._pulling=!0,Et(t._underlyingSource,"pull",[t]).then(function(){if(t._pulling=!1,!0===t._pullAgain)return t._pullAgain=!1,L(t)},function(e){F(t,e)}).catch(Bt)}}function D(t){var e=t._controlledReadableStream;return"closed"!==e._state&&"errored"!==e._state&&(!0!==t._closeRequested&&(!1!==t._started&&(!0===c(e)&&w(e)>0||N(t)>0)))}function I(t){var e=t._controlledReadableStream;Nt(!1===t._closeRequested),Nt("readable"===e._state),t._closeRequested=!0,0===t._queue.length&&v(e)}function j(t,e){var r=t._controlledReadableStream;if(Nt(!1===t._closeRequested),Nt("readable"===r._state),!0===c(r)&&w(r)>0)y(r,e,!1);else{var i=1;if(void 0!==t._strategySize){var n=t._strategySize;try{i=n(e)}catch(e){throw F(t,e),e}}try{Wt(t,e,i)}catch(e){throw F(t,e),e}}L(t)}function M(t,e){var r=t._controlledReadableStream;Nt("readable"===r._state),qt(t),m(r,e)}function F(t,e){"readable"===t._controlledReadableStream._state&&M(t,e)}function N(t){var e=t._controlledReadableStream,r=e._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function B(t){return!!Mt(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingByteSource")}function U(t){return!!Mt(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")}function z(t){if(!1!==rt(t)){if(!0===t._pulling)return void(t._pullAgain=!0);Nt(!1===t._pullAgain),t._pulling=!0,Et(t._underlyingByteSource,"pull",[t]).then(function(){t._pulling=!1,!0===t._pullAgain&&(t._pullAgain=!1,z(t))},function(e){"readable"===t._controlledReadableStream._state&&ot(t,e)}).catch(Bt)}}function W(t){Z(t),t._pendingPullIntos=[]}function q(t,e){Nt("errored"!==t._state,"state must not be errored");var r=!1;"closed"===t._state&&(Nt(0===e.bytesFilled),r=!0);var i=X(e);"default"===e.readerType?y(t,i,r):(Nt("byob"===e.readerType),b(t,i,r))}function X(t){var e=t.bytesFilled,r=t.elementSize;return Nt(e<=t.byteLength),Nt(e%r==0),new t.ctor(t.buffer,t.byteOffset,e/r)}function G(t,e,r,i){t._queue.push({buffer:e,byteOffset:r,byteLength:i}),t._queueTotalSize+=i}function H(t,e){var r=e.elementSize,i=e.bytesFilled-e.bytesFilled%r,n=Math.min(t._queueTotalSize,e.byteLength-e.bytesFilled),o=e.bytesFilled+n,a=o-o%r,s=n,c=!1;a>i&&(s=a-e.bytesFilled,c=!0);for(var l=t._queue;s>0;){var h=l[0],u=Math.min(s,h.byteLength),f=e.byteOffset+e.bytesFilled;At(e.buffer,f,h.buffer,h.byteOffset,u),h.byteLength===u?l.shift():(h.byteOffset+=u,h.byteLength-=u),t._queueTotalSize-=u,Y(t,u,e),s-=u}return!1===c&&(Nt(0===t._queueTotalSize,"queue must be empty"),Nt(e.bytesFilled>0),Nt(e.bytesFilled<e.elementSize)),c}function Y(t,e,r){Nt(0===t._pendingPullIntos.length||t._pendingPullIntos[0]===r),Z(t),r.bytesFilled+=e}function V(t){Nt("readable"===t._controlledReadableStream._state),0===t._queueTotalSize&&!0===t._closeRequested?v(t._controlledReadableStream):z(t)}function Z(t){void 0!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=void 0,t._byobRequest=void 0)}function J(t){for(Nt(!1===t._closeRequested);t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;var e=t._pendingPullIntos[0];!0===H(t,e)&&(et(t),q(t._controlledReadableStream,e))}}function K(t,e){var r=t._controlledReadableStream,i=1;e.constructor!==DataView&&(i=e.constructor.BYTES_PER_ELEMENT);var n=e.constructor,o={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:i,ctor:n,readerType:"byob"};if(t._pendingPullIntos.length>0)return o.buffer=Ot(o.buffer),t._pendingPullIntos.push(o),d(r);if("closed"===r._state){var a=new e.constructor(o.buffer,o.byteOffset,0);return Promise.resolve(Tt(a,!0))}if(t._queueTotalSize>0){if(!0===H(t,o)){var s=X(o);return V(t),Promise.resolve(Tt(s,!1))}if(!0===t._closeRequested){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");return ot(t,c),Promise.reject(c)}}o.buffer=Ot(o.buffer),t._pendingPullIntos.push(o);var l=d(r);return z(t),l}function Q(t,e){e.buffer=Ot(e.buffer),Nt(0===e.bytesFilled,"bytesFilled must be 0");var r=t._controlledReadableStream;if(!0===S(r))for(;_(r)>0;){var i=et(t);q(r,i)}}function $(t,e,r){if(r.bytesFilled+e>r.byteLength)throw new RangeError("bytesWritten out of range");if(Y(t,e,r),!(r.bytesFilled<r.elementSize)){et(t);var i=r.bytesFilled%r.elementSize;if(i>0){var n=r.byteOffset+r.bytesFilled,o=r.buffer.slice(n-i,n);G(t,o,0,o.byteLength)}r.buffer=Ot(r.buffer),r.bytesFilled-=i,q(t._controlledReadableStream,r),J(t)}}function tt(t,e){var r=t._pendingPullIntos[0],i=t._controlledReadableStream;if("closed"===i._state){if(0!==e)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");Q(t,r)}else Nt("readable"===i._state),$(t,e,r)}function et(t){var e=t._pendingPullIntos.shift();return Z(t),e}function rt(t){var e=t._controlledReadableStream;return"readable"===e._state&&(!0!==t._closeRequested&&(!1!==t._started&&(!0===x(e)&&w(e)>0||(!0===S(e)&&_(e)>0||at(t)>0))))}function it(t){var e=t._controlledReadableStream;if(Nt(!1===t._closeRequested),Nt("readable"===e._state),t._queueTotalSize>0)return void(t._closeRequested=!0);if(t._pendingPullIntos.length>0){if(t._pendingPullIntos[0].bytesFilled>0){var r=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ot(t,r),r}}v(e)}function nt(t,e){var r=t._controlledReadableStream;Nt(!1===t._closeRequested),Nt("readable"===r._state);var i=e.buffer,n=e.byteOffset,o=e.byteLength,a=Ot(i);if(!0===x(r))if(0===w(r))G(t,a,n,o);else{Nt(0===t._queue.length);var s=new Uint8Array(a,n,o);y(r,s,!1)}else!0===S(r)?(G(t,a,n,o),J(t)):(Nt(!1===c(r),"stream must not be locked"),G(t,a,n,o))}function ot(t,e){var r=t._controlledReadableStream;Nt("readable"===r._state),W(t),qt(t),m(r,e)}function at(t){var e=t._controlledReadableStream,r=e._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function st(t,e){if(e=Number(e),!1===kt(e))throw new RangeError("bytesWritten must be a finite");Nt(t._pendingPullIntos.length>0),tt(t,e)}function ct(t,e){Nt(t._pendingPullIntos.length>0);var r=t._pendingPullIntos[0];if(r.byteOffset+r.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");r.buffer=e.buffer,tt(t,e.byteLength)}function lt(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function ht(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function ut(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}function ft(t){t._closedPromise=new Promise(function(e,r){t._closedPromise_resolve=e,t._closedPromise_reject=r})}function dt(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function pt(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function gt(t,e){Nt(void 0!==t._closedPromise_resolve),Nt(void 0!==t._closedPromise_reject),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function vt(t,e){Nt(void 0===t._closedPromise_resolve),Nt(void 0===t._closedPromise_reject),t._closedPromise=Promise.reject(e)}function mt(t){Nt(void 0!==t._closedPromise_resolve),Nt(void 0!==t._closedPromise_reject),t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function bt(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function yt(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function _t(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function wt(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function St(t){try{Promise.prototype.then.call(t,void 0,function(){})}catch(t){}}var xt=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Ct=r(0),At=Ct.ArrayBufferCopy,Tt=Ct.CreateIterResultObject,kt=Ct.IsFiniteNonNegativeNumber,Pt=Ct.InvokeOrNoop,Et=Ct.PromiseInvokeOrNoop,Ot=Ct.TransferArrayBuffer,Rt=Ct.ValidateAndNormalizeQueuingStrategy,Lt=Ct.ValidateAndNormalizeHighWaterMark,Dt=r(0),It=Dt.createArrayFromList,jt=Dt.createDataProperty,Mt=Dt.typeIsObject,Ft=r(1),Nt=Ft.assert,Bt=Ft.rethrowAssertionErrorRejection,Ut=r(3),zt=Ut.DequeueValue,Wt=Ut.EnqueueValueWithSize,qt=Ut.ResetQueue,Xt=r(2),Gt=Xt.AcquireWritableStreamDefaultWriter,Ht=Xt.IsWritableStream,Yt=Xt.IsWritableStreamLocked,Vt=Xt.WritableStreamAbort,Zt=Xt.WritableStreamDefaultWriterCloseWithErrorPropagation,Jt=Xt.WritableStreamDefaultWriterRelease,Kt=Xt.WritableStreamDefaultWriterWrite,Qt=Xt.WritableStreamCloseQueuedOrInFlight,$t=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size,o=r.highWaterMark;i(this,t),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var a=e.type;if("bytes"===String(a))void 0===o&&(o=0),this._readableStreamController=new ne(this,e,o);else{if(void 0!==a)throw new RangeError("Invalid type is specified");void 0===o&&(o=1),this._readableStreamController=new re(this,e,n,o)}}return xt(t,[{key:"cancel",value:function t(e){return!1===a(this)?Promise.reject(lt("cancel")):!0===c(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):g(this,e)}},{key:"getReader",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.mode;if(!1===a(this))throw lt("getReader");if(void 0===r)return o(this);if("byob"===(r=String(r)))return n(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function t(e,r){var i=e.writable,n=e.readable;return St(this.pipeTo(i,r)),n}},{key:"pipeTo",value:function t(e){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.preventClose,s=i.preventAbort,l=i.preventCancel;if(!1===a(this))return Promise.reject(lt("pipeTo"));if(!1===Ht(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(n=Boolean(n),s=Boolean(s),l=Boolean(l),!0===c(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===Yt(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var h=o(this),u=Gt(e),f=!1,d=Promise.resolve();return new Promise(function(t,i){function o(){return d=Promise.resolve(),!0===f?Promise.resolve():u._readyPromise.then(function(){return O(h).then(function(t){var e=t.value;!0!==t.done&&(d=Kt(u,e).catch(function(){}))})}).then(o)}function a(){var t=d;return d.then(function(){return t!==d?a():void 0})}function c(t,e,r){"errored"===t._state?r(t._storedError):e.catch(r).catch(Bt)}function p(t,e,r){"closed"===t._state?r():e.then(r).catch(Bt)}function v(t,r,i){function n(){t().then(function(){return b(r,i)},function(t){return b(!0,t)}).catch(Bt)}!0!==f&&(f=!0,"writable"===e._state&&!1===Qt(e)?a().then(n):n())}function m(t,r){!0!==f&&(f=!0,"writable"===e._state&&!1===Qt(e)?a().then(function(){return b(t,r)}).catch(Bt):b(t,r))}function b(e,r){Jt(u),P(h),e?i(r):t(void 0)}if(c(r,h._closedPromise,function(t){!1===s?v(function(){return Vt(e,t)},!0,t):m(!0,t)}),c(e,u._closedPromise,function(t){!1===l?v(function(){return g(r,t)},!0,t):m(!0,t)}),p(r,h._closedPromise,function(){!1===n?v(function(){return Zt(u)}):m()}),!0===Qt(e)||"closed"===e._state){var y=new TypeError("the destination writable stream closed before all data could be piped to it");!1===l?v(function(){return g(r,y)},!0,y):m(!0,y)}o().catch(function(t){d=Promise.resolve(),Bt(t)})})}},{key:"tee",value:function t(){if(!1===a(this))throw lt("tee");var e=l(this,!1);return It(e)}},{key:"locked",get:function t(){if(!1===a(this))throw lt("locked");return c(this)}}]),t}();t.exports={ReadableStream:$t,IsReadableStreamDisturbed:s,ReadableStreamDefaultControllerClose:I,ReadableStreamDefaultControllerEnqueue:j,ReadableStreamDefaultControllerError:M,ReadableStreamDefaultControllerGetDesiredSize:N};var te=function(){function t(e){if(i(this,t),!1===a(e))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===c(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");T(this,e),this._readRequests=[]}return xt(t,[{key:"cancel",value:function t(e){return!1===A(this)?Promise.reject(ut("cancel")):void 0===this._ownerReadableStream?Promise.reject(ht("cancel")):k(this,e)}},{key:"read",value:function t(){return!1===A(this)?Promise.reject(ut("read")):void 0===this._ownerReadableStream?Promise.reject(ht("read from")):O(this)}},{key:"releaseLock",value:function t(){if(!1===A(this))throw ut("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");P(this)}}},{key:"closed",get:function t(){return!1===A(this)?Promise.reject(ut("closed")):this._closedPromise}}]),t}(),ee=function(){function t(e){if(i(this,t),!a(e))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===B(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(c(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");T(this,e),this._readIntoRequests=[]}return xt(t,[{key:"cancel",value:function t(e){return C(this)?void 0===this._ownerReadableStream?Promise.reject(ht("cancel")):k(this,e):Promise.reject(bt("cancel"))}},{key:"read",value:function t(e){return C(this)?void 0===this._ownerReadableStream?Promise.reject(ht("read from")):ArrayBuffer.isView(e)?0===e.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):E(this,e):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(bt("read"))}},{key:"releaseLock",value:function t(){if(!C(this))throw bt("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");P(this)}}},{key:"closed",get:function t(){return C(this)?this._closedPromise:Promise.reject(bt("closed"))}}]),t}(),re=function(){function t(e,r,n,o){if(i(this,t),!1===a(e))throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(void 0!==e._readableStreamController)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=e,this._underlyingSource=r,this._queue=void 0,this._queueTotalSize=void 0,qt(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var s=Rt(n,o);this._strategySize=s.size,this._strategyHWM=s.highWaterMark;var c=this,l=Pt(r,"start",[this]);Promise.resolve(l).then(function(){c._started=!0,Nt(!1===c._pulling),Nt(!1===c._pullAgain),L(c)},function(t){F(c,t)}).catch(Bt)}return xt(t,[{key:"close",value:function t(){if(!1===R(this))throw yt("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");I(this)}},{key:"enqueue",value:function t(e){if(!1===R(this))throw yt("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var r=this._controlledReadableStream._state;if("readable"!==r)throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be enqueued to");return j(this,e)}},{key:"error",value:function t(e){if(!1===R(this))throw yt("error");var r=this._controlledReadableStream;if("readable"!==r._state)throw new TypeError("The stream is "+r._state+" and so cannot be errored");M(this,e)}},{key:"__cancelSteps",value:function t(e){return qt(this),Et(this._underlyingSource,"cancel",[e])}},{key:"__pullSteps",value:function t(){var e=this._controlledReadableStream;if(this._queue.length>0){var r=zt(this);return!0===this._closeRequested&&0===this._queue.length?v(e):L(this),Promise.resolve(Tt(r,!1))}var i=p(e);return L(this),i}},{key:"desiredSize",get:function t(){if(!1===R(this))throw yt("desiredSize");return N(this)}}]),t}(),ie=function(){function t(e,r){i(this,t),this._associatedReadableByteStreamController=e,this._view=r}return xt(t,[{key:"respond",value:function t(e){if(!1===U(this))throw _t("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");st(this._associatedReadableByteStreamController,e)}},{key:"respondWithNewView",value:function t(e){if(!1===U(this))throw _t("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");ct(this._associatedReadableByteStreamController,e)}},{key:"view",get:function t(){return this._view}}]),t}(),ne=function(){function t(e,r,n){if(i(this,t),!1===a(e))throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(void 0!==e._readableStreamController)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=e,this._underlyingByteSource=r,this._pullAgain=!1,this._pulling=!1,W(this),this._queue=this._queueTotalSize=void 0,qt(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=Lt(n);var o=r.autoAllocateChunkSize;if(void 0!==o&&(!1===Number.isInteger(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=o,this._pendingPullIntos=[];var s=this,c=Pt(r,"start",[this]);Promise.resolve(c).then(function(){s._started=!0,Nt(!1===s._pulling),Nt(!1===s._pullAgain),z(s)},function(t){"readable"===e._state&&ot(s,t)}).catch(Bt)}return xt(t,[{key:"close",value:function t(){if(!1===B(this))throw wt("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");it(this)}},{key:"enqueue",value:function t(e){if(!1===B(this))throw wt("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var r=this._controlledReadableStream._state;if("readable"!==r)throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(e))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");nt(this,e)}},{key:"error",value:function t(e){if(!1===B(this))throw wt("error");var r=this._controlledReadableStream;if("readable"!==r._state)throw new TypeError("The stream is "+r._state+" and so cannot be errored");ot(this,e)}},{key:"__cancelSteps",value:function t(e){if(this._pendingPullIntos.length>0){this._pendingPullIntos[0].bytesFilled=0}return qt(this),Et(this._underlyingByteSource,"cancel",[e])}},{key:"__pullSteps",value:function t(){var e=this._controlledReadableStream;if(Nt(!0===x(e)),this._queueTotalSize>0){Nt(0===w(e));var r=this._queue.shift();this._queueTotalSize-=r.byteLength,V(this);var i=void 0;try{i=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}catch(t){return Promise.reject(t)}return Promise.resolve(Tt(i,!1))}var n=this._autoAllocateChunkSize;if(void 0!==n){var o=void 0;try{o=new ArrayBuffer(n)}catch(t){return Promise.reject(t)}var a={buffer:o,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}var s=p(e);return z(this),s}},{key:"byobRequest",get:function t(){if(!1===B(this))throw wt("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var e=this._pendingPullIntos[0],r=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled);this._byobRequest=new ie(this,r)}return this._byobRequest}},{key:"desiredSize",get:function t(){if(!1===B(this))throw wt("desiredSize");return at(this)}}]),t}()},function(t,e,r){var i=r(6),n=r(4),o=r(2);e.TransformStream=i.TransformStream,e.ReadableStream=n.ReadableStream,e.IsReadableStreamDisturbed=n.IsReadableStreamDisturbed,e.ReadableStreamDefaultControllerClose=n.ReadableStreamDefaultControllerClose,e.ReadableStreamDefaultControllerEnqueue=n.ReadableStreamDefaultControllerEnqueue,e.ReadableStreamDefaultControllerError=n.ReadableStreamDefaultControllerError,e.ReadableStreamDefaultControllerGetDesiredSize=n.ReadableStreamDefaultControllerGetDesiredSize,e.AcquireWritableStreamDefaultWriter=o.AcquireWritableStreamDefaultWriter,e.IsWritableStream=o.IsWritableStream,e.IsWritableStreamLocked=o.IsWritableStreamLocked,e.WritableStream=o.WritableStream,e.WritableStreamAbort=o.WritableStreamAbort,e.WritableStreamDefaultControllerError=o.WritableStreamDefaultControllerError,e.WritableStreamDefaultWriterCloseWithErrorPropagation=o.WritableStreamDefaultWriterCloseWithErrorPropagation,e.WritableStreamDefaultWriterRelease=o.WritableStreamDefaultWriterRelease,e.WritableStreamDefaultWriterWrite=o.WritableStreamDefaultWriterWrite},function(t,e,r){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){if(!0===t._errored)throw new TypeError("TransformStream is already errored");if(!0===t._readableClosed)throw new TypeError("Readable side is already closed");s(t)}function o(t,e){if(!0===t._errored)throw new TypeError("TransformStream is already errored");if(!0===t._readableClosed)throw new TypeError("Readable side is already closed");var r=t._readableController;try{E(r,e)}catch(e){throw t._readableClosed=!0,c(t,e),t._storedError}!0==R(r)<=0&&!1===t._backpressure&&u(t,!0)}function a(t,e){if(!0===t._errored)throw new TypeError("TransformStream is already errored");l(t,e)}function s(t){_(!1===t._errored),_(!1===t._readableClosed);try{P(t._readableController)}catch(t){_(!1)}t._readableClosed=!0}function c(t,e){!1===t._errored&&l(t,e)}function l(t,e){_(!1===t._errored),t._errored=!0,t._storedError=e,!1===t._writableDone&&I(t._writableController,e),!1===t._readableClosed&&O(t._readableController,e)}function h(t){return _(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!1===t._backpressure?Promise.resolve():(_(!0===t._backpressure,"_backpressure should have been initialized"),t._backpressureChangePromise)}function u(t,e){_(t._backpressure!==e,"TransformStreamSetBackpressure() should be called only when backpressure is changed"),void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(e),t._backpressureChangePromise=new Promise(function(e){t._backpressureChangePromise_resolve=e}),t._backpressureChangePromise.then(function(t){_(t!==e,"_backpressureChangePromise should be fulfilled only when backpressure is changed")}),t._backpressure=e}function f(t,e){return o(e._controlledTransformStream,t),Promise.resolve()}function d(t,e){_(!1===t._errored),_(!1===t._transforming),_(!1===t._backpressure),t._transforming=!0;var r=t._transformer,i=t._transformStreamController;return x(r,"transform",[e,i],f,[e,i]).then(function(){return t._transforming=!1,h(t)},function(e){return c(t,e),Promise.reject(e)})}function p(t){return!!A(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")}function g(t){return!!A(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")}function v(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function m(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}var b=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),y=r(1),_=y.assert,w=r(0),S=w.InvokeOrNoop,x=w.PromiseInvokeOrPerformFallback,C=w.PromiseInvokeOrNoop,A=w.typeIsObject,T=r(4),k=T.ReadableStream,P=T.ReadableStreamDefaultControllerClose,E=T.ReadableStreamDefaultControllerEnqueue,O=T.ReadableStreamDefaultControllerError,R=T.ReadableStreamDefaultControllerGetDesiredSize,L=r(2),D=L.WritableStream,I=L.WritableStreamDefaultControllerError,j=function(){function t(e,r){i(this,t),this._transformStream=e,this._startPromise=r}return b(t,[{key:"start",value:function t(e){var r=this._transformStream;return r._writableController=e,this._startPromise.then(function(){return h(r)})}},{key:"write",value:function t(e){return d(this._transformStream,e)}},{key:"abort",value:function t(){var e=this._transformStream;e._writableDone=!0,l(e,new TypeError("Writable side aborted"))}},{key:"close",value:function t(){var e=this._transformStream;return _(!1===e._transforming),e._writableDone=!0,C(e._transformer,"flush",[e._transformStreamController]).then(function(){return!0===e._errored?Promise.reject(e._storedError):(!1===e._readableClosed&&s(e),Promise.resolve())}).catch(function(t){return c(e,t),Promise.reject(e._storedError)})}}]),t}(),M=function(){function t(e,r){i(this,t),this._transformStream=e,this._startPromise=r}return b(t,[{key:"start",value:function t(e){var r=this._transformStream;return r._readableController=e,this._startPromise.then(function(){return _(void 0!==r._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!0===r._backpressure?Promise.resolve():(_(!1===r._backpressure,"_backpressure should have been initialized"),r._backpressureChangePromise)})}},{key:"pull",value:function t(){var e=this._transformStream;return _(!0===e._backpressure,"pull() should be never called while _backpressure is false"),_(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),u(e,!1),e._backpressureChangePromise}},{key:"cancel",value:function t(){var e=this._transformStream;e._readableClosed=!0,l(e,new TypeError("Readable side canceled"))}}]),t}(),F=function(){function t(e){if(i(this,t),!1===g(e))throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(void 0!==e._transformStreamController)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=e}return b(t,[{key:"enqueue",value:function t(e){if(!1===p(this))throw v("enqueue");o(this._controlledTransformStream,e)}},{key:"close",value:function t(){if(!1===p(this))throw v("close");n(this._controlledTransformStream)}},{key:"error",value:function t(e){if(!1===p(this))throw v("error");a(this._controlledTransformStream,e)}},{key:"desiredSize",get:function t(){if(!1===p(this))throw v("desiredSize");var e=this._controlledTransformStream,r=e._readableController;return R(r)}}]),t}(),N=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this._transformer=e;var r=e.readableStrategy,n=e.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new F(this);var o=void 0,a=new Promise(function(t){o=t}),s=new M(this,a);this._readable=new k(s,r);var c=new j(this,a);this._writable=new D(c,n),_(void 0!==this._writableController),_(void 0!==this._readableController),u(this,R(this._readableController)<=0);var l=this,h=S(e,"start",[l._transformStreamController]);o(h),a.catch(function(t){!1===l._errored&&(l._errored=!0,l._storedError=t)})}return b(t,[{key:"readable",get:function t(){if(!1===g(this))throw m("readable");return this._readable}},{key:"writable",get:function t(){if(!1===g(this))throw m("writable");return this._writable}}]),t}();t.exports={TransformStream:N}},function(t,e,r){t.exports=r(5)}]))},function(t,e,r){"use strict";function i(t){t.mozCurrentTransform||(t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[],Object.defineProperty(t,"mozCurrentTransform",{get:function t(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function t(){var e=this._transformMatrix,r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5],c=r*o-i*n,l=i*n-r*o;return[o/c,i/l,n/l,r/c,(o*a-n*s)/l,(i*a-r*s)/c]}}),t.save=function t(){var e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},t.restore=function t(){var e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},t.translate=function t(e,r){var i=this._transformMatrix;i[4]=i[0]*e+i[2]*r+i[4],i[5]=i[1]*e+i[3]*r+i[5],this._originalTranslate(e,r)},t.scale=function t(e,r){var i=this._transformMatrix;i[0]=i[0]*e,i[1]=i[1]*e,i[2]=i[2]*r,i[3]=i[3]*r,this._originalScale(e,r)},t.transform=function e(r,i,n,o,a,s){var c=this._transformMatrix;this._transformMatrix=[c[0]*r+c[2]*i,c[1]*r+c[3]*i,c[0]*n+c[2]*o,c[1]*n+c[3]*o,c[0]*a+c[2]*s+c[4],c[1]*a+c[3]*s+c[5]],t._originalTransform(r,i,n,o,a,s)},t.setTransform=function e(r,i,n,o,a,s){this._transformMatrix=[r,i,n,o,a,s],t._originalSetTransform(r,i,n,o,a,s)},t.rotate=function t(e){var r=Math.cos(e),i=Math.sin(e),n=this._transformMatrix;this._transformMatrix=[n[0]*r+n[2]*i,n[1]*r+n[3]*i,n[0]*-i+n[2]*r,n[1]*-i+n[3]*r,n[4],n[5]],this._originalRotate(e)})}function n(t){var e=1e3,r=t.width,i=t.height,n,o,a,s=r+1,c=new Uint8Array(s*(i+1)),l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),h=r+7&-8,u=t.data,f=new Uint8Array(h*i),d=0,p;for(n=0,p=u.length;n<p;n++)for(var g=128,v=u[n];g>0;)f[d++]=v&g?0:255,g>>=1;var m=0;for(d=0,0!==f[d]&&(c[0]=1,++m),o=1;o<r;o++)f[d]!==f[d+1]&&(c[o]=f[d]?2:1,++m),d++;for(0!==f[d]&&(c[o]=2,++m),n=1;n<i;n++){d=n*h,a=n*s,f[d-h]!==f[d]&&(c[a]=f[d]?1:8,++m);var b=(f[d]?4:0)+(f[d-h]?8:0);for(o=1;o<r;o++)b=(b>>2)+(f[d+1]?4:0)+(f[d-h+1]?8:0),l[b]&&(c[a+o]=l[b],++m),d++;if(f[d-h]!==f[d]&&(c[a+o]=f[d]?2:4,++m),m>1e3)return null}for(d=h*(i-1),a=n*s,0!==f[d]&&(c[a]=8,++m),o=1;o<r;o++)f[d]!==f[d+1]&&(c[a+o]=f[d]?4:8,++m),d++;if(0!==f[d]&&(c[a+o]=4,++m),m>1e3)return null;var y=new Int32Array([0,s,-1,0,-s,0,0,0,1]),_=[];for(n=0;m&&n<=i;n++){for(var w=n*s,S=w+r;w<S&&!c[w];)w++;if(w!==S){var x=[w%s,n],C=c[w],A=w,T;do{var k=y[C];do{w+=k}while(!c[w]);T=c[w],5!==T&&10!==T?(C=T,c[w]=0):(C=T&51*C>>4,c[w]&=C>>2|C<<2),x.push(w%s),x.push(w/s|0),--m}while(A!==w);_.push(x),--n}}return function t(e){e.save(),e.scale(1/r,-1/i),e.translate(0,-i),e.beginPath();for(var n=0,o=_.length;n<o;n++){var a=_[n];e.moveTo(a[0],a[1]);for(var s=2,c=a.length;s<c;s+=2)e.lineTo(a[s],a[s+1])}e.fill(),e.beginPath(),e.restore()}}Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var o=r(0),a=r(12),s=r(7),c=16,l=100,h=4096,u=.65,f=!0,d=1e3,p=16,g={get value(){return(0,o.shadow)(g,"value",(0,o.isLittleEndian)())}},v=function t(){function e(t){this.canvasFactory=t,this.cache=Object.create(null)}return e.prototype={getCanvas:function t(e,r,n,o){var a;return void 0!==this.cache[e]?(a=this.cache[e],this.canvasFactory.reset(a,r,n),a.context.setTransform(1,0,0,1,0,0)):(a=this.canvasFactory.create(r,n),this.cache[e]=a),o&&i(a.context),a},clear:function t(){for(var e in this.cache){var r=this.cache[e];this.canvasFactory.destroy(r),delete this.cache[e]}}},e}(),m=function t(){function e(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return e.prototype={clone:function t(){return Object.create(this)},setCurrentPoint:function t(e,r){this.x=e,this.y=r}},e}(),b=function t(){function e(t,e,r,n,o){this.ctx=t,this.current=new m,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=r,this.canvasFactory=n,this.imageLayer=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new v(this.canvasFactory),t&&i(t),this.cachedGetSinglePixelWidth=null}function r(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);var r=e.height,i=e.width,n=r%p,a=(r-n)/p,s=0===n?a:a+1,c=t.createImageData(i,p),l=0,h,u=e.data,f=c.data,d,v,m,b;if(e.kind===o.ImageKind.GRAYSCALE_1BPP){var y=u.byteLength,_=new Uint32Array(f.buffer,0,f.byteLength>>2),w=_.length,S=i+7>>3,x=4294967295,C=g.value?4278190080:255;for(d=0;d<s;d++){for(m=d<a?p:n,h=0,v=0;v<m;v++){for(var A=y-l,T=0,k=A>S?i:8*A-7,P=-8&k,E=0,O=0;T<P;T+=8)O=u[l++],_[h++]=128&O?x:C,_[h++]=64&O?x:C,_[h++]=32&O?x:C,_[h++]=16&O?x:C,_[h++]=8&O?x:C,_[h++]=4&O?x:C,_[h++]=2&O?x:C,_[h++]=1&O?x:C;for(;T<k;T++)0===E&&(O=u[l++],E=128),_[h++]=O&E?x:C,E>>=1}for(;h<w;)_[h++]=0;t.putImageData(c,0,d*p)}}else if(e.kind===o.ImageKind.RGBA_32BPP){for(v=0,b=i*p*4,d=0;d<a;d++)f.set(u.subarray(l,l+b)),l+=b,t.putImageData(c,0,v),v+=p;d<s&&(b=i*n*4,f.set(u.subarray(l,l+b)),t.putImageData(c,0,v))}else{if(e.kind!==o.ImageKind.RGB_24BPP)throw new Error("bad image kind: "+e.kind);for(m=p,b=i*m,d=0;d<s;d++){for(d>=a&&(m=n,b=i*m),h=0,v=b;v--;)f[h++]=u[l++],f[h++]=u[l++],f[h++]=u[l++],f[h++]=255;t.putImageData(c,0,d*p)}}}function c(t,e){for(var r=e.height,i=e.width,n=r%p,o=(r-n)/p,a=0===n?o:o+1,s=t.createImageData(i,p),c=0,l=e.data,h=s.data,u=0;u<a;u++){for(var f=u<o?p:n,d=3,g=0;g<f;g++)for(var v=0,m=0;m<i;m++){if(!v){var b=l[c++];v=128}h[d]=b&v?0:255,d+=4,v>>=1}t.putImageData(s,0,u*p)}}function l(t,e){for(var r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],i=0,n=r.length;i<n;i++){var o=r[i];void 0!==t[o]&&(e[o]=t[o])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function h(t){t.strokeStyle="#000000",t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function u(t,e,r,i){for(var n=t.length,o=3;o<n;o+=4){var a=t[o];if(0===a)t[o-3]=e,t[o-2]=r,t[o-1]=i;else if(a<255){var s=255-a;t[o-3]=t[o-3]*a+e*s>>8,t[o-2]=t[o-2]*a+r*s>>8,t[o-1]=t[o-1]*a+i*s>>8}}}function f(t,e,r){for(var i=t.length,n=1/255,o=3;o<i;o+=4){var a=r?r[t[o]]:t[o];e[o]=e[o]*a*(1/255)|0}}function d(t,e,r){for(var i=t.length,n=3;n<i;n+=4){var o=77*t[n-3]+152*t[n-2]+28*t[n-1];e[n]=r?e[n]*r[o>>8]>>8:e[n]*o>>16}}function b(t,e,r,i,n,o,a){var s=!!o,c=s?o[0]:0,l=s?o[1]:0,h=s?o[2]:0,p;p="Luminosity"===n?d:f;for(var g=1048576,v=Math.min(i,Math.ceil(1048576/r)),m=0;m<i;m+=v){var b=Math.min(v,i-m),y=t.getImageData(0,m,r,b),_=e.getImageData(0,m,r,b);s&&u(y.data,c,l,h),p(y.data,_.data,a),t.putImageData(_,0,m)}}function y(t,e,r){var i=e.canvas,n=e.context;t.setTransform(e.scaleX,0,0,e.scaleY,e.offsetX,e.offsetY);var o=e.backdrop||null;if(!e.transferMap&&s.WebGLUtils.isEnabled){var a=s.WebGLUtils.composeSMask(r.canvas,i,{subtype:e.subtype,backdrop:o});return t.setTransform(1,0,0,1,0,0),void t.drawImage(a,e.offsetX,e.offsetY)}b(n,r,i.width,i.height,e.subtype,o,e.transferMap),t.drawImage(i,0,0)}var _=15,w=10,S=["butt","round","square"],x=["miter","round","bevel"],C={},A={};e.prototype={beginDrawing:function t(e){var r=e.transform,i=e.viewport,n=e.transparency,o=e.background,a=void 0===o?null:o,s=this.ctx.canvas.width,c=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=a||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,s,c),this.ctx.restore(),n){var l=this.cachedCanvases.getCanvas("transparent",s,c,!0);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),h(this.ctx),r&&this.ctx.transform.apply(this.ctx,r),this.ctx.transform.apply(this.ctx,i.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function t(e,r,i,n){var a=e.argsArray,s=e.fnArray,c=r||0,l=a.length;if(l===c)return c;for(var h=l-c>10&&"function"==typeof i,u=h?Date.now()+15:0,f=0,d=this.commonObjs,p=this.objs,g;;){if(void 0!==n&&c===n.nextBreakPoint)return n.breakIt(c,i),c;if((g=s[c])!==o.OPS.dependency)this[g].apply(this,a[c]);else for(var v=a[c],m=0,b=v.length;m<b;m++){var y=v[m],_="g"===y[0]&&"_"===y[1],w=_?d:p;if(!w.isResolved(y))return w.get(y,i),c}if(++c===l)return c;if(h&&++f>10){if(Date.now()>u)return i(),c;f=0}}},endDrawing:function t(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),s.WebGLUtils.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function t(e){this.current.lineWidth=e,this.ctx.lineWidth=e},setLineCap:function t(e){this.ctx.lineCap=S[e]},setLineJoin:function t(e){this.ctx.lineJoin=x[e]},setMiterLimit:function t(e){this.ctx.miterLimit=e},setDash:function t(e,r){var i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(e),i.lineDashOffset=r)},setRenderingIntent:function t(e){},setFlatness:function t(e){},setGState:function t(e){for(var r=0,i=e.length;r<i;r++){var n=e[r],o=n[0],a=n[1];switch(o){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=a?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function t(){var e=this.current.activeSMask,r=e.canvas.width,i=e.canvas.height,n="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(n,r,i,!0),a=this.ctx,s=a.mozCurrentTransform;this.ctx.save();var c=o.context;c.scale(1/e.scaleX,1/e.scaleY),c.translate(-e.offsetX,-e.offsetY),c.transform.apply(c,s),e.startTransformInverse=c.mozCurrentTransformInverse,l(a,c),this.ctx=c,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++},suspendSMaskGroup:function t(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),y(this.ctx,this.current.activeSMask,e),this.ctx.restore(),this.ctx.save(),l(e,this.ctx),this.current.resumeSMaskCtx=e;var r=o.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,r),e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()},resumeSMaskGroup:function t(){var e=this.current.resumeSMaskCtx,r=this.ctx;this.ctx=e,this.groupStack.push(r),this.groupLevel++},endSMaskGroup:function t(){var e=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),y(this.ctx,this.current.activeSMask,e),this.ctx.restore(),l(e,this.ctx);var r=o.Util.transform(this.current.activeSMask.startTransformInverse,e.mozCurrentTransform);this.ctx.transform.apply(this.ctx,r)},save:function t(){this.ctx.save();var e=this.current;this.stateStack.push(e),this.current=e.clone(),this.current.resumeSMaskCtx=null},restore:function t(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this.cachedGetSinglePixelWidth=null)},transform:function t(e,r,i,n,o,a){this.ctx.transform(e,r,i,n,o,a),this.cachedGetSinglePixelWidth=null},constructPath:function t(e,r){for(var i=this.ctx,n=this.current,a=n.x,s=n.y,c=0,l=0,h=e.length;c<h;c++)switch(0|e[c]){case o.OPS.rectangle:a=r[l++],s=r[l++];var u=r[l++],f=r[l++];0===u&&(u=this.getSinglePixelWidth()),0===f&&(f=this.getSinglePixelWidth());var d=a+u,p=s+f;this.ctx.moveTo(a,s),this.ctx.lineTo(d,s),this.ctx.lineTo(d,p),this.ctx.lineTo(a,p),this.ctx.lineTo(a,s),this.ctx.closePath();break;case o.OPS.moveTo:a=r[l++],s=r[l++],i.moveTo(a,s);break;case o.OPS.lineTo:a=r[l++],s=r[l++],i.lineTo(a,s);break;case o.OPS.curveTo:a=r[l+4],s=r[l+5],i.bezierCurveTo(r[l],r[l+1],r[l+2],r[l+3],a,s),l+=6;break;case o.OPS.curveTo2:i.bezierCurveTo(a,s,r[l],r[l+1],r[l+2],r[l+3]),a=r[l+2],s=r[l+3],l+=4;break;case o.OPS.curveTo3:a=r[l+2],s=r[l+3],i.bezierCurveTo(r[l],r[l+1],a,s,a,s),l+=4;break;case o.OPS.closePath:i.closePath()}n.setCurrentPoint(a,s)},closePath:function t(){this.ctx.closePath()},stroke:function t(e){e=void 0===e||e;var r=this.ctx,i=this.current.strokeColor;r.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth),r.globalAlpha=this.current.strokeAlpha,i&&i.hasOwnProperty("type")&&"Pattern"===i.type?(r.save(),r.strokeStyle=i.getPattern(r,this),r.stroke(),r.restore()):r.stroke(),e&&this.consumePath(),r.globalAlpha=this.current.fillAlpha},closeStroke:function t(){this.closePath(),this.stroke()},fill:function t(e){e=void 0===e||e;var r=this.ctx,i=this.current.fillColor,n=this.current.patternFill,o=!1;n&&(r.save(),this.baseTransform&&r.setTransform.apply(r,this.baseTransform),r.fillStyle=i.getPattern(r,this),o=!0),this.pendingEOFill?(r.fill("evenodd"),this.pendingEOFill=!1):r.fill(),o&&r.restore(),e&&this.consumePath()},eoFill:function t(){this.pendingEOFill=!0,this.fill()},fillStroke:function t(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function t(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function t(){this.closePath(),this.fillStroke()},closeEOFillStroke:function t(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function t(){this.consumePath()},clip:function t(){this.pendingClip=C},eoClip:function t(){this.pendingClip=A},beginText:function t(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function t(){var e=this.pendingTextPaths,r=this.ctx;if(void 0===e)return void r.beginPath();r.save(),r.beginPath();for(var i=0;i<e.length;i++){var n=e[i];r.setTransform.apply(r,n.transform),r.translate(n.x,n.y),n.addToPath(r,n.fontSize)}r.restore(),r.clip(),r.beginPath(),delete this.pendingTextPaths},setCharSpacing:function t(e){this.current.charSpacing=e},setWordSpacing:function t(e){this.current.wordSpacing=e},setHScale:function t(e){this.current.textHScale=e/100},setLeading:function t(e){this.current.leading=-e},setFont:function t(e,r){var i=this.commonObjs.get(e),n=this.current;if(!i)throw new Error("Can't find font for "+e);if(n.fontMatrix=i.fontMatrix?i.fontMatrix:o.FONT_IDENTITY_MATRIX,0!==n.fontMatrix[0]&&0!==n.fontMatrix[3]||(0,o.warn)("Invalid font matrix for font "+e),r<0?(r=-r,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=r,!i.isType3Font){var a=i.loadedName||"sans-serif",s=i.black?"900":i.bold?"bold":"normal",c=i.italic?"italic":"normal",l='"'+a+'", '+i.fallbackName,h=r<16?16:r>100?100:r;this.current.fontSizeScale=r/h;var u=c+" "+s+" "+h+"px "+l;this.ctx.font=u}},setTextRenderingMode:function t(e){this.current.textRenderingMode=e},setTextRise:function t(e){this.current.textRise=e},moveText:function t(e,r){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=r},setLeadingMoveText:function t(e,r){this.setLeading(-r),this.moveText(e,r)},setTextMatrix:function t(e,r,i,n,o,a){this.current.textMatrix=[e,r,i,n,o,a],this.current.textMatrixScale=Math.sqrt(e*e+r*r),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function t(){this.moveText(0,this.current.leading)},paintChar:function t(e,r,i){var n=this.ctx,a=this.current,s=a.font,c=a.textRenderingMode,l=a.fontSize/a.fontSizeScale,h=c&o.TextRenderingMode.FILL_STROKE_MASK,u=!!(c&o.TextRenderingMode.ADD_TO_PATH_FLAG),f;if((s.disableFontFace||u)&&(f=s.getPathGenerator(this.commonObjs,e)),s.disableFontFace?(n.save(),n.translate(r,i),n.beginPath(),f(n,l),h!==o.TextRenderingMode.FILL&&h!==o.TextRenderingMode.FILL_STROKE||n.fill(),h!==o.TextRenderingMode.STROKE&&h!==o.TextRenderingMode.FILL_STROKE||n.stroke(),n.restore()):(h!==o.TextRenderingMode.FILL&&h!==o.TextRenderingMode.FILL_STROKE||n.fillText(e,r,i),h!==o.TextRenderingMode.STROKE&&h!==o.TextRenderingMode.FILL_STROKE||n.strokeText(e,r,i)),u){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:n.mozCurrentTransform,x:r,y:i,fontSize:l,addToPath:f})}},get isFontSubpixelAAEnabled(){var t=this.canvasFactory.create(10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,r=!1,i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){r=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",r)},showText:function t(e){var r=this.current,i=r.font;if(i.isType3Font)return this.showType3Text(e);var n=r.fontSize;if(0!==n){var a=this.ctx,s=r.fontSizeScale,c=r.charSpacing,l=r.wordSpacing,h=r.fontDirection,u=r.textHScale*h,f=e.length,d=i.vertical,p=d?1:-1,g=i.defaultVMetrics,v=n*r.fontMatrix[0],m=r.textRenderingMode===o.TextRenderingMode.FILL&&!i.disableFontFace;a.save(),a.transform.apply(a,r.textMatrix),a.translate(r.x,r.y+r.textRise),r.patternFill&&(a.fillStyle=r.fillColor.getPattern(a,this)),h>0?a.scale(u,-1):a.scale(u,1);var b=r.lineWidth,y=r.textMatrixScale;if(0===y||0===b){var _=r.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;_!==o.TextRenderingMode.STROKE&&_!==o.TextRenderingMode.FILL_STROKE||(this.cachedGetSinglePixelWidth=null,b=.65*this.getSinglePixelWidth())}else b/=y;1!==s&&(a.scale(s,s),b/=s),a.lineWidth=b;var w=0,S;for(S=0;S<f;++S){var x=e[S];if((0,o.isNum)(x))w+=p*x*n/1e3;else{var C=!1,A=(x.isSpace?l:0)+c,T=x.fontChar,k=x.accent,P,E,O,R,L=x.width;if(d){var D,I,j;D=x.vmetric||g,I=x.vmetric?D[1]:.5*L,I=-I*v,j=D[2]*v,L=D?-D[0]:L,P=I/s,E=(w+j)/s}else P=w/s,E=0;if(i.remeasure&&L>0){var M=1e3*a.measureText(T).width/n*s;if(L<M&&this.isFontSubpixelAAEnabled){var F=L/M;C=!0,a.save(),a.scale(F,1),P/=F}else L!==M&&(P+=(L-M)/2e3*n/s)}(x.isInFont||i.missingFile)&&(m&&!k?a.fillText(T,P,E):(this.paintChar(T,P,E),k&&(O=P+k.offset.x/s,R=E-k.offset.y/s,this.paintChar(k.fontChar,O,R))));w+=L*v+A*h,C&&a.restore()}}d?r.y-=w*u:r.x+=w*u,a.restore()}},showType3Text:function t(e){var r=this.ctx,i=this.current,n=i.font,a=i.fontSize,s=i.fontDirection,c=n.vertical?1:-1,l=i.charSpacing,h=i.wordSpacing,u=i.textHScale*s,f=i.fontMatrix||o.FONT_IDENTITY_MATRIX,d=e.length,p=i.textRenderingMode===o.TextRenderingMode.INVISIBLE,g,v,m,b;if(!p&&0!==a){for(this.cachedGetSinglePixelWidth=null,r.save(),r.transform.apply(r,i.textMatrix),r.translate(i.x,i.y),r.scale(u,s),g=0;g<d;++g)if(v=e[g],(0,o.isNum)(v))b=c*v*a/1e3,this.ctx.translate(b,0),i.x+=b*u;else{var y=(v.isSpace?h:0)+l,_=n.charProcOperatorList[v.operatorListId];if(_){this.processingType3=v,this.save(),r.scale(a,a),r.transform.apply(r,f),this.executeOperatorList(_),this.restore();var w=o.Util.applyTransform([v.width,0],f);m=w[0]*a+y,r.translate(m,0),i.x+=m*u}else(0,o.warn)('Type3 character "'+v.operatorListId+'" is not available.')}r.restore(),this.processingType3=null}},setCharWidth:function t(e,r){},setCharWidthAndBounds:function t(e,r,i,n,o,a){this.ctx.rect(i,n,o-i,a-n),this.clip(),this.endPath()},getColorN_Pattern:function t(r){var i=this,n;if("TilingPattern"===r[0]){var o=r[1],s=this.baseTransform||this.ctx.mozCurrentTransform.slice(),c={createCanvasGraphics:function t(r){return new e(r,i.commonObjs,i.objs,i.canvasFactory)}};n=new a.TilingPattern(r,o,this.ctx,c,s)}else n=(0,a.getShadingPatternFromIR)(r);return n},setStrokeColorN:function t(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function t(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function t(e,r,i){var n=o.Util.makeCssRgb(e,r,i);this.ctx.strokeStyle=n,this.current.strokeColor=n},setFillRGBColor:function t(e,r,i){var n=o.Util.makeCssRgb(e,r,i);this.ctx.fillStyle=n,this.current.fillColor=n,this.current.patternFill=!1},shadingFill:function t(e){var r=this.ctx;this.save();var i=(0,a.getShadingPatternFromIR)(e);r.fillStyle=i.getPattern(r,this,!0);var n=r.mozCurrentTransformInverse;if(n){var s=r.canvas,c=s.width,l=s.height,h=o.Util.applyTransform([0,0],n),u=o.Util.applyTransform([0,l],n),f=o.Util.applyTransform([c,0],n),d=o.Util.applyTransform([c,l],n),p=Math.min(h[0],u[0],f[0],d[0]),g=Math.min(h[1],u[1],f[1],d[1]),v=Math.max(h[0],u[0],f[0],d[0]),m=Math.max(h[1],u[1],f[1],d[1]);this.ctx.fillRect(p,g,v-p,m-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function t(){throw new Error("Should not call beginInlineImage")},beginImageData:function t(){throw new Error("Should not call beginImageData")},paintFormXObjectBegin:function t(e,r){if(this.save(),this.baseTransformStack.push(this.baseTransform),(0,o.isArray)(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,(0,o.isArray)(r)&&4===r.length){var i=r[2]-r[0],n=r[3]-r[1];this.ctx.rect(r[0],r[1],i,n),this.clip(),this.endPath()}},paintFormXObjectEnd:function t(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function t(e){this.save();var r=this.ctx;e.isolated||(0,o.info)("TODO: Support non-isolated groups."),e.knockout&&(0,o.warn)("Knockout groups not supported.");var i=r.mozCurrentTransform;if(e.matrix&&r.transform.apply(r,e.matrix),!e.bbox)throw new Error("Bounding box is required.");var n=o.Util.getAxialAlignedBoundingBox(e.bbox,r.mozCurrentTransform),a=[0,0,r.canvas.width,r.canvas.height];n=o.Util.intersect(n,a)||[0,0,0,0];var s=Math.floor(n[0]),c=Math.floor(n[1]),h=Math.max(Math.ceil(n[2])-s,1),u=Math.max(Math.ceil(n[3])-c,1),f=1,d=1;h>4096&&(f=h/4096,h=4096),u>4096&&(d=u/4096,u=4096);var p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);var g=this.cachedCanvases.getCanvas(p,h,u,!0),v=g.context;v.scale(1/f,1/d),v.translate(-s,-c),v.transform.apply(v,i),e.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:s,offsetY:c,scaleX:f,scaleY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(s,c),r.scale(f,d)),l(r,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++,this.current.activeSMask=null},endGroup:function t(e){this.groupLevel--;var r=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,e.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(r.canvas,0,0),this.restore()},beginAnnotations:function t(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function t(){this.restore()},beginAnnotation:function t(e,r,i){if(this.save(),h(this.ctx),this.current=new m,(0,o.isArray)(e)&&4===e.length){var n=e[2]-e[0],a=e[3]-e[1];this.ctx.rect(e[0],e[1],n,a),this.clip(),this.endPath()}this.transform.apply(this,r),this.transform.apply(this,i)},endAnnotation:function t(){this.restore()},paintJpegXObject:function t(e,r,i){var n=this.objs.get(e);if(!n)return void(0,o.warn)("Dependent image isn't ready yet");this.save();var a=this.ctx;if(a.scale(1/r,-1/i),a.drawImage(n,0,0,n.width,n.height,0,-i,r,i),this.imageLayer){var s=a.mozCurrentTransformInverse,c=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:e,left:c[0],top:c[1],width:r/s[0],height:i/s[3]})}this.restore()},paintImageMaskXObject:function t(e){var r=this.ctx,i=e.width,o=e.height,a=this.current.fillColor,s=this.current.patternFill,l=this.processingType3;if(l&&void 0===l.compiled&&(l.compiled=i<=1e3&&o<=1e3?n({data:e.data,width:i,height:o}):null),l&&l.compiled)return void l.compiled(r);var h=this.cachedCanvases.getCanvas("maskCanvas",i,o),u=h.context;u.save(),c(u,e),u.globalCompositeOperation="source-in",u.fillStyle=s?a.getPattern(u,this):a,u.fillRect(0,0,i,o),u.restore(),this.paintInlineImageXObject(h.canvas)},paintImageMaskXObjectRepeat:function t(e,r,i,n){var o=e.width,a=e.height,s=this.current.fillColor,l=this.current.patternFill,h=this.cachedCanvases.getCanvas("maskCanvas",o,a),u=h.context;u.save(),c(u,e),u.globalCompositeOperation="source-in",u.fillStyle=l?s.getPattern(u,this):s,u.fillRect(0,0,o,a),u.restore();for(var f=this.ctx,d=0,p=n.length;d<p;d+=2)f.save(),f.transform(r,0,0,i,n[d],n[d+1]),f.scale(1,-1),f.drawImage(h.canvas,0,0,o,a,0,-1,1,1),f.restore()},paintImageMaskXObjectGroup:function t(e){for(var r=this.ctx,i=this.current.fillColor,n=this.current.patternFill,o=0,a=e.length;o<a;o++){var s=e[o],l=s.width,h=s.height,u=this.cachedCanvases.getCanvas("maskCanvas",l,h),f=u.context;f.save(),c(f,s),f.globalCompositeOperation="source-in",f.fillStyle=n?i.getPattern(f,this):i,f.fillRect(0,0,l,h),f.restore(),r.save(),r.transform.apply(r,s.transform),r.scale(1,-1),r.drawImage(u.canvas,0,0,l,h,0,-1,1,1),r.restore()}},paintImageXObject:function t(e){var r=this.objs.get(e);if(!r)return void(0,o.warn)("Dependent image isn't ready yet");this.paintInlineImageXObject(r)},paintImageXObjectRepeat:function t(e,r,i,n){var a=this.objs.get(e);if(!a)return void(0,o.warn)("Dependent image isn't ready yet");for(var s=a.width,c=a.height,l=[],h=0,u=n.length;h<u;h+=2)l.push({transform:[r,0,0,i,n[h],n[h+1]],x:0,y:0,w:s,h:c});this.paintInlineImageXObjectGroup(a,l)},paintInlineImageXObject:function t(e){var i=e.width,n=e.height,o=this.ctx;this.save(),o.scale(1/i,-1/n);var a=o.mozCurrentTransformInverse,s=a[0],c=a[1],l=Math.max(Math.sqrt(s*s+c*c),1),h=a[2],u=a[3],f=Math.max(Math.sqrt(h*h+u*u),1),d,p;if(e instanceof HTMLElement||!e.data)d=e;else{p=this.cachedCanvases.getCanvas("inlineImage",i,n);var g=p.context;r(g,e),d=p.canvas}for(var v=i,m=n,b="prescale1";l>2&&v>1||f>2&&m>1;){var y=v,_=m;l>2&&v>1&&(y=Math.ceil(v/2),l/=v/y),f>2&&m>1&&(_=Math.ceil(m/2),f/=m/_),p=this.cachedCanvases.getCanvas(b,y,_),g=p.context,g.clearRect(0,0,y,_),g.drawImage(d,0,0,v,m,0,0,y,_),d=p.canvas,v=y,m=_,b="prescale1"===b?"prescale2":"prescale1"}if(o.drawImage(d,0,0,v,m,0,-n,i,n),this.imageLayer){var w=this.getCanvasPosition(0,-n);this.imageLayer.appendImage({imgData:e,left:w[0],top:w[1],width:i/a[0],height:n/a[3]})}this.restore()},paintInlineImageXObjectGroup:function t(e,i){var n=this.ctx,o=e.width,a=e.height,s=this.cachedCanvases.getCanvas("inlineImage",o,a);r(s.context,e);for(var c=0,l=i.length;c<l;c++){var h=i[c];if(n.save(),n.transform.apply(n,h.transform),n.scale(1,-1),n.drawImage(s.canvas,h.x,h.y,h.w,h.h,0,-1,1,1),this.imageLayer){var u=this.getCanvasPosition(h.x,h.y);this.imageLayer.appendImage({imgData:e,left:u[0],top:u[1],width:o,height:a})}n.restore()}},paintSolidColorImageMask:function t(){this.ctx.fillRect(0,0,1,1)},paintXObject:function t(){(0,o.warn)("Unsupported 'paintXObject' command.")},markPoint:function t(e){},markPointProps:function t(e,r){},beginMarkedContent:function t(e){},beginMarkedContentProps:function t(e,r){},endMarkedContent:function t(){},beginCompat:function t(){},endCompat:function t(){},consumePath:function t(){var e=this.ctx;this.pendingClip&&(this.pendingClip===A?e.clip("evenodd"):e.clip(),this.pendingClip=null),e.beginPath()},getSinglePixelWidth:function t(e){if(null===this.cachedGetSinglePixelWidth){this.ctx.save();var r=this.ctx.mozCurrentTransformInverse;this.ctx.restore(),this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(r[0]*r[0]+r[1]*r[1],r[2]*r[2]+r[3]*r[3]))}return this.cachedGetSinglePixelWidth},getCanvasPosition:function t(e,r){var i=this.ctx.mozCurrentTransform;return[i[0]*e+i[2]*r+i[4],i[1]*e+i[3]*r+i[5]]}};for(var T in o.OPS)e.prototype[o.OPS[T]]=e.prototype[T];return e}();e.CanvasGraphics=b},function(t,e,r){"use strict";function i(t){this.docId=t,this.styleElement=null,this.nativeFontFaces=[],this.loadTestFontId=0,this.loadingContext={requests:[],nextRequestId:0}}Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=r(0);i.prototype={insertRule:function t(e){var r=this.styleElement;r||(r=this.styleElement=document.createElement("style"),r.id="PDFJS_FONT_STYLE_TAG_"+this.docId,document.documentElement.getElementsByTagName("head")[0].appendChild(r));var i=r.sheet;i.insertRule(e,i.cssRules.length)},clear:function t(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null),this.nativeFontFaces.forEach(function(t){document.fonts.delete(t)}),this.nativeFontFaces.length=0}};var o=function t(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};Object.defineProperty(i.prototype,"loadTestFont",{get:function t(){return(0,n.shadow)(this,"loadTestFont",o())},configurable:!0}),i.prototype.addNativeFontFace=function t(e){this.nativeFontFaces.push(e),document.fonts.add(e)},i.prototype.bind=function t(e,r){for(var o=[],a=[],s=[],c=function t(e){return e.loaded.catch(function(t){(0,n.warn)('Failed to load font "'+e.family+'": '+t)})},l=i.isFontLoadingAPISupported&&!i.isSyncFontLoadingSupported,h=0,u=e.length;h<u;h++){var f=e[h];if(!f.attached&&!1!==f.loading)if(f.attached=!0,l){var d=f.createNativeFontFace();d&&(this.addNativeFontFace(d),s.push(c(d)))}else{var p=f.createFontFaceRule();p&&(this.insertRule(p),o.push(p),a.push(f))}}var g=this.queueLoadingCallback(r);l?Promise.all(s).then(function(){g.complete()}):o.length>0&&!i.isSyncFontLoadingSupported?this.prepareFontLoadEvent(o,a,g):g.complete()},i.prototype.queueLoadingCallback=function t(e){function r(){for((0,n.assert)(!a.end,"completeRequest() cannot be called twice"),a.end=Date.now();i.requests.length>0&&i.requests[0].end;){var t=i.requests.shift();setTimeout(t.callback,0)}}var i=this.loadingContext,o="pdfjs-font-loading-"+i.nextRequestId++,a={id:o,complete:r,callback:e,started:Date.now()};return i.requests.push(a),a},i.prototype.prepareFontLoadEvent=function t(e,r,i){function o(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function a(t,e,r,i){return t.substr(0,e)+i+t.substr(e+r)}function s(t,e){return++f>30?((0,n.warn)("Load test font never loaded."),void e()):(u.font="30px "+t,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0?void e():void setTimeout(s.bind(null,t,e)))}var c,l,h=document.createElement("canvas");h.width=1,h.height=1;var u=h.getContext("2d"),f=0,d="lt"+Date.now()+this.loadTestFontId++,p=this.loadTestFont,g=976;p=a(p,976,d.length,d);var v=16,m=1482184792,b=o(p,16);for(c=0,l=d.length-3;c<l;c+=4)b=b-1482184792+o(d,c)|0;c<d.length&&(b=b-1482184792+o(d+"XXX",c)|0),p=a(p,16,4,(0,n.string32)(b));var y="url(data:font/opentype;base64,"+btoa(p)+");",_='@font-face { font-family:"'+d+'";src:'+y+"}";this.insertRule(_);var w=[];for(c=0,l=r.length;c<l;c++)w.push(r[c].loadedName);w.push(d);var S=document.createElement("div");for(S.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"),c=0,l=w.length;c<l;++c){var x=document.createElement("span");x.textContent="Hi",x.style.fontFamily=w[c],S.appendChild(x)}document.body.appendChild(S),s(d,function(){document.body.removeChild(S),i.complete()})},i.isFontLoadingAPISupported="undefined"!=typeof document&&!!document.fonts;var a=function t(){if("undefined"==typeof navigator)return!0;var e=!1,r=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);return r&&r[1]>=14&&(e=!0),e};Object.defineProperty(i,"isSyncFontLoadingSupported",{get:function t(){return(0,n.shadow)(i,"isSyncFontLoadingSupported",a())},enumerable:!0,configurable:!0});var s={get value(){return(0,n.shadow)(this,"value",(0,n.isEvalSupported)())}},c=function t(){function e(t,e){this.compiledGlyphs=Object.create(null);for(var r in t)this[r]=t[r];this.options=e}return e.prototype={createNativeFontFace:function t(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var e=new FontFace(this.loadedName,this.data,{});return this.options.fontRegistry&&this.options.fontRegistry.registerFont(this),e},createFontFaceRule:function t(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var e=(0,n.bytesToString)(new Uint8Array(this.data)),r=this.loadedName,i="url(data:"+this.mimetype+";base64,"+btoa(e)+");",o='@font-face { font-family:"'+r+'";src:'+i+"}";return this.options.fontRegistry&&this.options.fontRegistry.registerFont(this,i),o},getPathGenerator:function t(e,r){if(!(r in this.compiledGlyphs)){var i=e.get(this.loadedName+"_path_"+r),n,o,a;if(this.options.isEvalSupported&&s.value){var c,l="";for(o=0,a=i.length;o<a;o++)n=i[o],c=void 0!==n.args?n.args.join(","):"",l+="c."+n.cmd+"("+c+");\n";this.compiledGlyphs[r]=new Function("c","size",l)}else this.compiledGlyphs[r]=function(t,e){for(o=0,a=i.length;o<a;o++)n=i[o],"scale"===n.cmd&&(n.args=[e,-e]),t[n.cmd].apply(t,n.args)}}return this.compiledGlyphs[r]}},e}();e.FontFaceObject=c,e.FontLoader=i},function(t,e,r){"use strict";function i(t){var e=a[t[0]];if(!e)throw new Error("Unknown IR type: "+t[0]);return e.fromIR(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.getShadingPatternFromIR=void 0;var n=r(0),o=r(7),a={};a.RadialAxial={fromIR:function t(e){var r=e[1],i=e[2],n=e[3],o=e[4],a=e[5],s=e[6];return{type:"Pattern",getPattern:function t(e){var c;"axial"===r?c=e.createLinearGradient(n[0],n[1],o[0],o[1]):"radial"===r&&(c=e.createRadialGradient(n[0],n[1],a,o[0],o[1],s));for(var l=0,h=i.length;l<h;++l){var u=i[l];c.addColorStop(u[0],u[1])}return c}}}};var s=function t(){function e(t,e,r,i,n,o,a,s){var c=e.coords,l=e.colors,h=t.data,u=4*t.width,f;c[r+1]>c[i+1]&&(f=r,r=i,i=f,f=o,o=a,a=f),c[i+1]>c[n+1]&&(f=i,i=n,n=f,f=a,a=s,s=f),c[r+1]>c[i+1]&&(f=r,r=i,i=f,f=o,o=a,a=f);var d=(c[r]+e.offsetX)*e.scaleX,p=(c[r+1]+e.offsetY)*e.scaleY,g=(c[i]+e.offsetX)*e.scaleX,v=(c[i+1]+e.offsetY)*e.scaleY,m=(c[n]+e.offsetX)*e.scaleX,b=(c[n+1]+e.offsetY)*e.scaleY;if(!(p>=b))for(var y=l[o],_=l[o+1],w=l[o+2],S=l[a],x=l[a+1],C=l[a+2],A=l[s],T=l[s+1],k=l[s+2],P=Math.round(p),E=Math.round(b),O,R,L,D,I,j,M,F,N,B=P;B<=E;B++){B<v?(N=B<p?0:p===v?1:(p-B)/(p-v),O=d-(d-g)*N,R=y-(y-S)*N,L=_-(_-x)*N,D=w-(w-C)*N):(N=B>b?1:v===b?0:(v-B)/(v-b),O=g-(g-m)*N,R=S-(S-A)*N,L=x-(x-T)*N,D=C-(C-k)*N),N=B<p?0:B>b?1:(p-B)/(p-b),I=d-(d-m)*N,j=y-(y-A)*N,M=_-(_-T)*N,F=w-(w-k)*N;for(var U=Math.round(Math.min(O,I)),z=Math.round(Math.max(O,I)),W=u*B+4*U,q=U;q<=z;q++)N=(O-q)/(O-I),N=N<0?0:N>1?1:N,h[W++]=R-(R-j)*N|0,h[W++]=L-(L-M)*N|0,h[W++]=D-(D-F)*N|0,h[W++]=255}}function r(t,r,i){var n=r.coords,o=r.colors,a,s;switch(r.type){case"lattice":var c=r.verticesPerRow,l=Math.floor(n.length/c)-1,h=c-1;for(a=0;a<l;a++)for(var u=a*c,f=0;f<h;f++,u++)e(t,i,n[u],n[u+1],n[u+c],o[u],o[u+1],o[u+c]),e(t,i,n[u+c+1],n[u+1],n[u+c],o[u+c+1],o[u+1],o[u+c]);break;case"triangles":for(a=0,s=n.length;a<s;a+=3)e(t,i,n[a],n[a+1],n[a+2],o[a],o[a+1],o[a+2]);break;default:throw new Error("illegal figure")}}function i(t,e,i,n,a,s,c){var l=1.1,h=3e3,u=2,f=Math.floor(t[0]),d=Math.floor(t[1]),p=Math.ceil(t[2])-f,g=Math.ceil(t[3])-d,v=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),b=p/v,y=g/m,_={coords:i,colors:n,offsetX:-f,offsetY:-d,scaleX:1/b,scaleY:1/y},w=v+4,S=m+4,x,C,A,T;if(o.WebGLUtils.isEnabled)x=o.WebGLUtils.drawFigures(v,m,s,a,_),C=c.getCanvas("mesh",w,S,!1),C.context.drawImage(x,2,2),x=C.canvas;else{C=c.getCanvas("mesh",w,S,!1);var k=C.context,P=k.createImageData(v,m);if(s){var E=P.data;for(A=0,T=E.length;A<T;A+=4)E[A]=s[0],E[A+1]=s[1],E[A+2]=s[2],E[A+3]=255}for(A=0;A<a.length;A++)r(P,a[A],_);k.putImageData(P,2,2),x=C.canvas}return{canvas:x,offsetX:f-2*b,offsetY:d-2*y,scaleX:b,scaleY:y}}return i}();a.Mesh={fromIR:function t(e){var r=e[2],i=e[3],o=e[4],a=e[5],c=e[6],l=e[8];return{type:"Pattern",getPattern:function t(e,h,u){var f;if(u)f=n.Util.singularValueDecompose2dScale(e.mozCurrentTransform);else if(f=n.Util.singularValueDecompose2dScale(h.baseTransform),c){var d=n.Util.singularValueDecompose2dScale(c);f=[f[0]*d[0],f[1]*d[1]]}var p=s(a,f,r,i,o,u?null:l,h.cachedCanvases);return u||(e.setTransform.apply(e,h.baseTransform),c&&e.transform.apply(e,c)),e.translate(p.offsetX,p.offsetY),e.scale(p.scaleX,p.scaleY),e.createPattern(p.canvas,"no-repeat")}}}},a.Dummy={fromIR:function t(){return{type:"Pattern",getPattern:function t(){return"hotpink"}}}};var c=function t(){function e(t,e,r,i,n){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.canvasGraphicsFactory=i,this.baseTransform=n,this.type="Pattern",this.ctx=r}var r={COLORED:1,UNCOLORED:2},i=3e3;return e.prototype={createPatternCanvas:function t(e){var r=this.operatorList,i=this.bbox,o=this.xstep,a=this.ystep,s=this.paintType,c=this.tilingType,l=this.color,h=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+c);var u=i[0],f=i[1],d=i[2],p=i[3],g=[u,f],v=[u+o,f+a],m=v[0]-g[0],b=v[1]-g[1],y=n.Util.singularValueDecompose2dScale(this.matrix),_=n.Util.singularValueDecompose2dScale(this.baseTransform),w=[y[0]*_[0],y[1]*_[1]];m=Math.min(Math.ceil(Math.abs(m*w[0])),3e3),b=Math.min(Math.ceil(Math.abs(b*w[1])),3e3);var S=e.cachedCanvases.getCanvas("pattern",m,b,!0),x=S.context,C=h.createCanvasGraphics(x);C.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(x,s,l),this.setScale(m,b,o,a),this.transformToScale(C);var A=[1,0,0,1,-g[0],-g[1]];return C.transform.apply(C,A),this.clipBbox(C,i,u,f,d,p),C.executeOperatorList(r),S.canvas},setScale:function t(e,r,i,n){this.scale=[e/i,r/n]},transformToScale:function t(e){var r=this.scale,i=[r[0],0,0,r[1],0,0];e.transform.apply(e,i)},scaleToContext:function t(){var e=this.scale;this.ctx.scale(1/e[0],1/e[1])},clipBbox:function t(e,r,i,o,a,s){if((0,n.isArray)(r)&&4===r.length){var c=a-i,l=s-o;e.ctx.rect(i,o,c,l),e.clip(),e.endPath()}},setFillAndStrokeStyleToContext:function t(e,i,o){switch(i){case r.COLORED:var a=this.ctx;e.fillStyle=a.fillStyle,e.strokeStyle=a.strokeStyle;break;case r.UNCOLORED:var s=n.Util.makeCssRgb(o[0],o[1],o[2]);e.fillStyle=s,e.strokeStyle=s;break;default:throw new n.FormatError("Unsupported paint type: "+i)}},getPattern:function t(e,r){var i=this.createPatternCanvas(r);return e=this.ctx,e.setTransform.apply(e,this.baseTransform),e.transform.apply(e,this.matrix),this.scaleToContext(),e.createPattern(i,"repeat")}},e}();e.getShadingPatternFromIR=i,e.TilingPattern=c},function(t,e,r){"use strict";var i="1.8.575",n="bd8c1211",o=r(0),a=r(8),s=r(3),c=r(5),l=r(2),h=r(1),u=r(4);e.PDFJS=a.PDFJS,e.build=s.build,e.version=s.version,e.getDocument=s.getDocument,e.LoopbackPort=s.LoopbackPort,e.PDFDataRangeTransport=s.PDFDataRangeTransport,e.PDFWorker=s.PDFWorker,e.renderTextLayer=c.renderTextLayer,e.AnnotationLayer=l.AnnotationLayer,e.CustomStyle=h.CustomStyle,e.createPromiseCapability=o.createPromiseCapability,e.PasswordResponses=o.PasswordResponses,e.InvalidPDFException=o.InvalidPDFException,e.MissingPDFException=o.MissingPDFException,e.SVGGraphics=u.SVGGraphics,e.NativeImageDecoding=o.NativeImageDecoding,e.UnexpectedResponseException=o.UnexpectedResponseException,e.OPS=o.OPS,e.UNSUPPORTED_FEATURES=o.UNSUPPORTED_FEATURES,e.isValidUrl=h.isValidUrl,e.createValidAbsoluteUrl=o.createValidAbsoluteUrl,e.createObjectURL=o.createObjectURL,e.removeNullCharacters=o.removeNullCharacters,e.shadow=o.shadow,e.createBlob=o.createBlob,e.RenderingCancelledException=h.RenderingCancelledException,e.getFilenameFromUrl=h.getFilenameFromUrl,e.addLinkAttributes=h.addLinkAttributes,e.StatTimer=o.StatTimer},function(t,r,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if("undefined"==typeof PDFJS||!PDFJS.compatibilityChecked){var o="undefined"!=typeof window&&window.Math===Math?window:void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:void 0,a="undefined"!=typeof navigator&&navigator.userAgent||"",s=/Android/.test(a),c=/Android\s[0-2][^\d]/.test(a),l=/Android\s[0-4][^\d]/.test(a),h=a.indexOf("Chrom")>=0,u=/Chrome\/(39|40)\./.test(a),f=a.indexOf("CriOS")>=0,d=a.indexOf("Trident")>=0,p=/\b(iPad|iPhone|iPod)(?=;)/.test(a),g=a.indexOf("Opera")>=0,v=/Safari\//.test(a)&&!/(Chrome\/|Android\s)/.test(a),m="object"===("undefined"==typeof window?"undefined":n(window))&&"object"===("undefined"==typeof document?"undefined":n(document));"undefined"==typeof PDFJS&&(o.PDFJS={}),PDFJS.compatibilityChecked=!0,function t(){function e(t,e){return new c(this.slice(t,e))}function r(t,e){arguments.length<2&&(e=0);for(var r=0,i=t.length;r<i;++r,++e)this[e]=255&t[r]}function i(t,e){this.buffer=t,this.byteLength=t.length,this.length=e,s(this.length)}function a(t){return{get:function e(){var r=this.buffer,i=t<<2;return(r[i]|r[i+1]<<8|r[i+2]<<16|r[i+3]<<24)>>>0},set:function e(r){var i=this.buffer,n=t<<2;i[n]=255&r,i[n+1]=r>>8&255,i[n+2]=r>>16&255,i[n+3]=r>>>24&255}}}function s(t){for(;l<t;)Object.defineProperty(i.prototype,l,a(l)),l++}function c(t){var i,o,a;if("number"==typeof t)for(i=[],o=0;o<t;++o)i[o]=0;else if("slice"in t)i=t.slice(0);else for(i=[],o=0,a=t.length;o<a;++o)i[o]=t[o];return i.subarray=e,i.buffer=i,i.byteLength=i.length,i.set=r,"object"===(void 0===t?"undefined":n(t))&&t.buffer&&(i.buffer=t.buffer),i}if("undefined"!=typeof Uint8Array)return void 0===Uint8Array.prototype.subarray&&(Uint8Array.prototype.subarray=function t(e,r){return new Uint8Array(this.slice(e,r))},Float32Array.prototype.subarray=function t(e,r){return new Float32Array(this.slice(e,r))}),void("undefined"==typeof Float64Array&&(o.Float64Array=Float32Array));i.prototype=Object.create(null);var l=0;o.Uint8Array=c,o.Int8Array=c,o.Int32Array=c,o.Uint16Array=c,o.Float32Array=c,o.Float64Array=c,o.Uint32Array=function(){if(3===arguments.length){if(0!==arguments[1])throw new Error("offset !== 0 is not supported");return new i(arguments[0],arguments[2])}return c.apply(this,arguments)}}(),function t(){if(m&&window.CanvasPixelArray){var e=window.CanvasPixelArray.prototype;"buffer"in e||(Object.defineProperty(e,"buffer",{get:function t(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e,"byteLength",{get:function t(){return this.length},enumerable:!1,configurable:!0}))}}(),function t(){o.URL||(o.URL=o.webkitURL)}(),function t(){if(void 0!==Object.defineProperty){var e=!0;try{m&&Object.defineProperty(new Image,"id",{value:"test"});var r=function t(){};r.prototype={get id(){}},Object.defineProperty(new r,"id",{value:"",configurable:!0,enumerable:!0,writable:!1})}catch(t){e=!1}if(e)return}Object.defineProperty=function t(e,r,i){delete e[r],"get"in i&&e.__defineGetter__(r,i.get),"set"in i&&e.__defineSetter__(r,i.set),"value"in i&&(e.__defineSetter__(r,function t(e){return this.__defineGetter__(r,function t(){return e}),e}),e[r]=i.value)}}(),function t(){if("undefined"!=typeof XMLHttpRequest){var e=XMLHttpRequest.prototype,r=new XMLHttpRequest;if("overrideMimeType"in r||Object.defineProperty(e,"overrideMimeType",{value:function t(e){}}),!("responseType"in r)){if(Object.defineProperty(e,"responseType",{get:function t(){return this._responseType||"text"},set:function t(e){"text"!==e&&"arraybuffer"!==e||(this._responseType=e,"arraybuffer"===e&&"function"==typeof this.overrideMimeType&&this.overrideMimeType("text/plain; charset=x-user-defined"))}}),"undefined"!=typeof VBArray)return void Object.defineProperty(e,"response",{get:function t(){return"arraybuffer"===this.responseType?new Uint8Array(new VBArray(this.responseBody).toArray()):this.responseText}});Object.defineProperty(e,"response",{get:function t(){if("arraybuffer"!==this.responseType)return this.responseText;var e=this.responseText,r,i=e.length,n=new Uint8Array(i);for(r=0;r<i;++r)n[r]=255&e.charCodeAt(r);return n.buffer}})}}}(),function t(){if(!("btoa"in o)){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.btoa=function(t){var r="",i,n;for(i=0,n=t.length;i<n;i+=3){var o=255&t.charCodeAt(i),a=255&t.charCodeAt(i+1),s=255&t.charCodeAt(i+2),c=o>>2,l=(3&o)<<4|a>>4,h=i+1<n?(15&a)<<2|s>>6:64,u=i+2<n?63&s:64;r+=e.charAt(c)+e.charAt(l)+e.charAt(h)+e.charAt(u)}return r}}}(),function t(){if(!("atob"in o)){o.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw new Error("bad atob input");for(var e=0,r,i,n=0,o="";i=t.charAt(n++);~i&&(r=e%4?64*r+i:i,e++%4)?o+=String.fromCharCode(255&r>>(-2*e&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return o}}}(),function t(){void 0===Function.prototype.bind&&(Function.prototype.bind=function t(e){var r=this,i=Array.prototype.slice.call(arguments,1);return function t(){var n=i.concat(Array.prototype.slice.call(arguments));return r.apply(e,n)}})}(),function t(){if(m){"dataset"in document.createElement("div")||Object.defineProperty(HTMLElement.prototype,"dataset",{get:function t(){if(this._dataset)return this._dataset;for(var e={},r=0,i=this.attributes.length;r<i;r++){var n=this.attributes[r];if("data-"===n.name.substring(0,5)){e[n.name.substring(5).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})]=n.value}}return Object.defineProperty(this,"_dataset",{value:e,writable:!1,enumerable:!1}),e},enumerable:!0})}}(),function t(){function e(t,e,r,i){var n=t.className||"",o=n.split(/\s+/g);""===o[0]&&o.shift();var a=o.indexOf(e);return a<0&&r&&o.push(e),a>=0&&i&&o.splice(a,1),t.className=o.join(" "),a>=0}if(m){if(!("classList"in document.createElement("div"))){var r={add:function t(r){e(this.element,r,!0,!1)},contains:function t(r){return e(this.element,r,!1,!1)},remove:function t(r){e(this.element,r,!1,!0)},toggle:function t(r){e(this.element,r,!0,!0)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function t(){if(this._classList)return this._classList;var e=Object.create(r,{element:{value:this,writable:!1,enumerable:!0}});return Object.defineProperty(this,"_classList",{value:e,writable:!1,enumerable:!1}),e},enumerable:!0})}}}(),function t(){if(!("undefined"==typeof importScripts||"console"in o)){var e={},r={log:function t(){var e=Array.prototype.slice.call(arguments);o.postMessage({targetName:"main",action:"console_log",data:e})},error:function t(){var e=Array.prototype.slice.call(arguments);o.postMessage({targetName:"main",action:"console_error",data:e})},time:function t(r){e[r]=Date.now()},timeEnd:function t(r){var i=e[r];if(!i)throw new Error("Unknown timer name "+r);this.log("Timer:",r,Date.now()-i)}};o.console=r}}(),function t(){if(m)"console"in window?"bind"in console.log||(console.log=function(t){return function(e){return t(e)}}(console.log),console.error=function(t){return function(e){return t(e)}}(console.error),console.warn=function(t){return function(e){return t(e)}}(console.warn)):window.console={log:function t(){},error:function t(){},warn:function t(){}}}(),function t(){function e(t){r(t.target)&&t.stopPropagation()}function r(t){return t.disabled||t.parentNode&&r(t.parentNode)}g&&document.addEventListener("click",e,!0)}(),function t(){(d||f)&&(PDFJS.disableCreateObjectURL=!0)}(),function t(){"undefined"!=typeof navigator&&("language"in navigator||(PDFJS.locale=navigator.userLanguage||"en-US"))}(),function t(){(v||c||u||p)&&(PDFJS.disableRange=!0,PDFJS.disableStream=!0)}(),function t(){m&&(history.pushState&&!c||(PDFJS.disableHistory=!0))}(),function t(){if(m)if(window.CanvasPixelArray)"function"!=typeof window.CanvasPixelArray.prototype.set&&(window.CanvasPixelArray.prototype.set=function(t){for(var e=0,r=this.length;e<r;e++)this[e]=t[e]});else{var e=!1,r;if(h?(r=a.match(/Chrom(e|ium)\/([0-9]+)\./),e=r&&parseInt(r[2])<21):s?e=l:v&&(r=a.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//),e=r&&parseInt(r[1])<6),e){var i=window.CanvasRenderingContext2D.prototype,n=i.createImageData;i.createImageData=function(t,e){var r=n.call(this,t,e);return r.data.set=function(t){for(var e=0,r=this.length;e<r;e++)this[e]=t[e]},r},i=null}}}(),function t(){function e(){window.requestAnimationFrame=function(t){return window.setTimeout(t,20)},window.cancelAnimationFrame=function(t){window.clearTimeout(t)}}if(m)p?e():"requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame||e())}(),function t(){(p||s)&&(PDFJS.maxCanvasPixels=5242880)}(),function t(){m&&d&&window.parent!==window&&(PDFJS.disableFullscreen=!0)}(),function t(){m&&("currentScript"in document||Object.defineProperty(document,"currentScript",{get:function t(){var e=document.getElementsByTagName("script");return e[e.length-1]},enumerable:!0,configurable:!0}))}(),function t(){if(m){var e=document.createElement("input");try{e.type="number"}catch(t){var r=e.constructor.prototype,i=Object.getOwnPropertyDescriptor(r,"type");Object.defineProperty(r,"type",{get:function t(){return i.get.call(this)},set:function t(e){i.set.call(this,"number"===e?"text":e)},enumerable:!0,configurable:!0})}}}(),function t(){if(m&&document.attachEvent){var e=document.constructor.prototype,r=Object.getOwnPropertyDescriptor(e,"readyState");Object.defineProperty(e,"readyState",{get:function t(){var e=r.get.call(this);return"interactive"===e?"loading":e},set:function t(e){r.set.call(this,e)},enumerable:!0,configurable:!0})}}(),function t(){m&&void 0===Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)})}(),function t(){Number.isNaN||(Number.isNaN=function(t){return"number"==typeof t&&isNaN(t)})}(),function t(){Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})}(),function t(){if(o.Promise)return"function"!=typeof o.Promise.all&&(o.Promise.all=function(t){var e=0,r=[],i,n,a=new o.Promise(function(t,e){i=t,n=e});return t.forEach(function(t,o){e++,t.then(function(t){r[o]=t,0===--e&&i(r)},n)}),0===e&&i(r),a}),"function"!=typeof o.Promise.resolve&&(o.Promise.resolve=function(t){return new o.Promise(function(e){e(t)})}),"function"!=typeof o.Promise.reject&&(o.Promise.reject=function(t){return new o.Promise(function(e,r){r(t)})}),void("function"!=typeof o.Promise.prototype.catch&&(o.Promise.prototype.catch=function(t){return o.Promise.prototype.then(void 0,t)}));var e=0,r=1,i=2,n=500,a={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function t(e){0!==e._status&&(this.handlers=this.handlers.concat(e._handlers),e._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function t(){for(var e=1,r=Date.now()+1;this.handlers.length>0;){var n=this.handlers.shift(),o=n.thisPromise._status,a=n.thisPromise._value;try{1===o?"function"==typeof n.onResolve&&(a=n.onResolve(a)):"function"==typeof n.onReject&&(a=n.onReject(a),o=1,n.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(n.thisPromise))}catch(t){o=i,a=t}if(n.nextPromise._updateStatus(o,a),Date.now()>=r)break}if(this.handlers.length>0)return void setTimeout(this.runHandlers.bind(this),0);this.running=!1},addUnhandledRejection:function t(e){this.unhandledRejections.push({promise:e,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function t(e){e._unhandledRejection=!1;for(var r=0;r<this.unhandledRejections.length;r++)this.unhandledRejections[r].promise===e&&(this.unhandledRejections.splice(r),r--)},scheduleRejectionCheck:function t(){var e=this;this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){e.pendingRejectionCheck=!1;for(var t=Date.now(),r=0;r<e.unhandledRejections.length;r++)if(t-e.unhandledRejections[r].time>500){var i=e.unhandledRejections[r].promise._value,n="Unhandled rejection: "+i;i.stack&&(n+="\n"+i.stack);try{throw new Error(n)}catch(t){console.warn(n)}e.unhandledRejections.splice(r),r--}e.unhandledRejections.length&&e.scheduleRejectionCheck()},500))}},s=function t(e){this._status=0,this._handlers=[];try{e.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(t){this._reject(t)}};s.all=function t(e){function r(t){a._status!==i&&(l=[],o(t))}var n,o,a=new s(function(t,e){n=t,o=e}),c=e.length,l=[];if(0===c)return n(l),a;for(var h=0,u=e.length;h<u;++h){var f=e[h],d=function(t){return function(e){a._status!==i&&(l[t]=e,0===--c&&n(l))}}(h);s.isPromise(f)?f.then(d,r):d(f)}return a},s.isPromise=function t(e){return e&&"function"==typeof e.then},s.resolve=function t(e){return new s(function(t){t(e)})},s.reject=function t(e){return new s(function(t,r){r(e)})},s.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function t(e,r){if(1!==this._status&&this._status!==i){if(1===e&&s.isPromise(r))return void r.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,i));this._status=e,this._value=r,e===i&&0===this._handlers.length&&(this._unhandledRejection=!0,a.addUnhandledRejection(this)),a.scheduleHandlers(this)}},_resolve:function t(e){this._updateStatus(1,e)},_reject:function t(e){this._updateStatus(i,e)},then:function t(e,r){var i=new s(function(t,e){this.resolve=t,this.reject=e});return this._handlers.push({thisPromise:this,onResolve:e,onReject:r,nextPromise:i}),a.scheduleHandlers(this),i},catch:function t(e){return this.then(void 0,e)}},o.Promise=s}(),function t(){function e(){this.id="$weakmap"+r++}if(!o.WeakMap){var r=0;e.prototype={has:function t(e){return("object"===(void 0===e?"undefined":n(e))||"function"==typeof e)&&null!==e&&!!Object.getOwnPropertyDescriptor(e,this.id)},get:function t(e){return this.has(e)?e[this.id]:void 0},set:function t(e,r){Object.defineProperty(e,this.id,{value:r,enumerable:!1,configurable:!0})},delete:function t(e){delete e[this.id]}},o.WeakMap=e}}(),function t(){function e(t){return void 0!==d[t]}function r(){l.call(this),this._isInvalid=!0}function i(t){return""===t&&r.call(this),t.toLowerCase()}function a(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,63,96].indexOf(e)?t:encodeURIComponent(t)}function s(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,96].indexOf(e)?t:encodeURIComponent(t)}function c(t,n,o){function c(t){y.push(t)}var l=n||"scheme start",h=0,u="",f=!1,b=!1,y=[];t:for(;(t[h-1]!==g||0===h)&&!this._isInvalid;){var _=t[h];switch(l){case"scheme start":if(!_||!v.test(_)){if(n){c("Invalid scheme.");break t}u="",l="no scheme";continue}u+=_.toLowerCase(),l="scheme";break;case"scheme":if(_&&m.test(_))u+=_.toLowerCase();else{if(":"!==_){if(n){if(_===g)break t;c("Code point not allowed in scheme: "+_);break t}u="",h=0,l="no scheme";continue}if(this._scheme=u,u="",n)break t;e(this._scheme)&&(this._isRelative=!0),l="file"===this._scheme?"relative":this._isRelative&&o&&o._scheme===this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"===_?(this._query="?",l="query"):"#"===_?(this._fragment="#",l="fragment"):_!==g&&"\t"!==_&&"\n"!==_&&"\r"!==_&&(this._schemeData+=a(_));break;case"no scheme":if(o&&e(o._scheme)){l="relative";continue}c("Missing scheme."),r.call(this);break;case"relative or authority":if("/"!==_||"/"!==t[h+1]){c("Expected /, got: "+_),l="relative";continue}l="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!==this._scheme&&(this._scheme=o._scheme),_===g){this._host=o._host,this._port=o._port,this._path=o._path.slice(),this._query=o._query,this._username=o._username,this._password=o._password;break t}if("/"===_||"\\"===_)"\\"===_&&c("\\ is an invalid code point."),l="relative slash";else if("?"===_)this._host=o._host,this._port=o._port,this._path=o._path.slice(),this._query="?",this._username=o._username,this._password=o._password,l="query";else{if("#"!==_){var w=t[h+1],S=t[h+2];("file"!==this._scheme||!v.test(_)||":"!==w&&"|"!==w||S!==g&&"/"!==S&&"\\"!==S&&"?"!==S&&"#"!==S)&&(this._host=o._host,this._port=o._port,this._username=o._username,this._password=o._password,this._path=o._path.slice(),this._path.pop()),l="relative path";continue}this._host=o._host,this._port=o._port,this._path=o._path.slice(),this._query=o._query,this._fragment="#",this._username=o._username,this._password=o._password,l="fragment"}break;case"relative slash":if("/"!==_&&"\\"!==_){"file"!==this._scheme&&(this._host=o._host,this._port=o._port,this._username=o._username,this._password=o._password),l="relative path";continue}"\\"===_&&c("\\ is an invalid code point."),l="file"===this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!==_){c("Expected '/', got: "+_),l="authority ignore slashes";continue}l="authority second slash";break;case"authority second slash":if(l="authority ignore slashes","/"!==_){c("Expected '/', got: "+_);continue}break;case"authority ignore slashes":if("/"!==_&&"\\"!==_){l="authority";continue}c("Expected authority, got: "+_);break;case"authority":if("@"===_){f&&(c("@ already seen."),u+="%40"),f=!0;for(var x=0;x<u.length;x++){var C=u[x];if("\t"!==C&&"\n"!==C&&"\r"!==C)if(":"!==C||null!==this._password){var A=a(C);null!==this._password?this._password+=A:this._username+=A}else this._password="";else c("Invalid whitespace in authority.")}u=""}else{if(_===g||"/"===_||"\\"===_||"?"===_||"#"===_){h-=u.length,u="",l="host";continue}u+=_}break;case"file host":if(_===g||"/"===_||"\\"===_||"?"===_||"#"===_){2!==u.length||!v.test(u[0])||":"!==u[1]&&"|"!==u[1]?0===u.length?l="relative path start":(this._host=i.call(this,u),u="",l="relative path start"):l="relative path";continue}"\t"===_||"\n"===_||"\r"===_?c("Invalid whitespace in file host."):u+=_;break;case"host":case"hostname":if(":"!==_||b){if(_===g||"/"===_||"\\"===_||"?"===_||"#"===_){if(this._host=i.call(this,u),u="",l="relative path start",n)break t;continue}"\t"!==_&&"\n"!==_&&"\r"!==_?("["===_?b=!0:"]"===_&&(b=!1),u+=_):c("Invalid code point in host/hostname: "+_)}else if(this._host=i.call(this,u),u="",l="port","hostname"===n)break t;break;case"port":if(/[0-9]/.test(_))u+=_;else{if(_===g||"/"===_||"\\"===_||"?"===_||"#"===_||n){if(""!==u){var T=parseInt(u,10);T!==d[this._scheme]&&(this._port=T+""),u=""}if(n)break t;l="relative path start";continue}"\t"===_||"\n"===_||"\r"===_?c("Invalid code point in port: "+_):r.call(this)}break;case"relative path start":if("\\"===_&&c("'\\' not allowed in path."),l="relative path","/"!==_&&"\\"!==_)continue;break;case"relative path":if(_!==g&&"/"!==_&&"\\"!==_&&(n||"?"!==_&&"#"!==_))"\t"!==_&&"\n"!==_&&"\r"!==_&&(u+=a(_));else{"\\"===_&&c("\\ not allowed in relative path.");var k;(k=p[u.toLowerCase()])&&(u=k),".."===u?(this._path.pop(),"/"!==_&&"\\"!==_&&this._path.push("")):"."===u&&"/"!==_&&"\\"!==_?this._path.push(""):"."!==u&&("file"===this._scheme&&0===this._path.length&&2===u.length&&v.test(u[0])&&"|"===u[1]&&(u=u[0]+":"),this._path.push(u)),u="","?"===_?(this._query="?",l="query"):"#"===_&&(this._fragment="#",l="fragment")}break;case"query":n||"#"!==_?_!==g&&"\t"!==_&&"\n"!==_&&"\r"!==_&&(this._query+=s(_)):(this._fragment="#",l="fragment");break;case"fragment":_!==g&&"\t"!==_&&"\n"!==_&&"\r"!==_&&(this._fragment+=_)}h++}}function l(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function h(t,e){void 0===e||e instanceof h||(e=new h(String(e))),this._url=t,l.call(this);var r=t.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");c.call(this,r,null,e)}var u=!1;try{if("function"==typeof URL&&"object"===n(URL.prototype)&&"origin"in URL.prototype){var f=new URL("b","http://a");f.pathname="c%20d",u="http://a/c%20d"===f.href}}catch(t){}if(!u){var d=Object.create(null);d.ftp=21,d.file=0,d.gopher=70,d.http=80,d.https=443,d.ws=80,d.wss=443;var p=Object.create(null);p["%2e"]=".",p[".%2e"]="..",p["%2e."]="..",p["%2e%2e"]="..";var g,v=/[a-zA-Z]/,m=/[a-zA-Z0-9\+\-\.]/;h.prototype={toString:function t(){return this.href},get href(){if(this._isInvalid)return this._url;var t="";return""===this._username&&null===this._password||(t=this._username+(null!==this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+t+this.host:"")+this.pathname+this._query+this._fragment},set href(t){l.call(this),c.call(this,t)},get protocol(){return this._scheme+":"},set protocol(t){this._isInvalid||c.call(this,t+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(t){!this._isInvalid&&this._isRelative&&c.call(this,t,"host")},get hostname(){return this._host},set hostname(t){!this._isInvalid&&this._isRelative&&c.call(this,t,"hostname")},get port(){return this._port},set port(t){!this._isInvalid&&this._isRelative&&c.call(this,t,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(t){!this._isInvalid&&this._isRelative&&(this._path=[],c.call(this,t,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"===this._query?"":this._query},set search(t){!this._isInvalid&&this._isRelative&&(this._query="?","?"===t[0]&&(t=t.slice(1)),c.call(this,t,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"===this._fragment?"":this._fragment},set hash(t){this._isInvalid||(this._fragment="#","#"===t[0]&&(t=t.slice(1)),c.call(this,t,"fragment"))},get origin(){var t;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new h(this._schemeData).origin||"null"}catch(t){}return"null"}return t=this.host,t?this._scheme+"://"+t:""}};var b=o.URL;b&&(h.createObjectURL=function(t){return b.createObjectURL.apply(b,arguments)},h.revokeObjectURL=function(t){b.revokeObjectURL(t)}),o.URL=h}}()}}])})}).call(e,r(0),r(1),r(2).Buffer)},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";(function(e,i){function n(t){return B.from(t)}function o(t){return B.isBuffer(t)||t instanceof U}function a(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?I(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}function s(t,e){j=j||r(4),t=t||{},this.objectMode=!!t.objectMode,e instanceof j&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new X,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(H||(H=r(19).StringDecoder),this.decoder=new H(t.encoding),this.encoding=t.encoding)}function c(t){if(j=j||r(4),!(this instanceof c))return new c(t);this._readableState=new s(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),N.call(this)}function l(t,e,r,i,o){var a=t._readableState;if(null===e)a.reading=!1,g(t,a);else{var s;o||(s=u(a,e)),s?t.emit("error",s):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===B.prototype||(e=n(e)),i?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):h(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?h(t,a,e,!1):b(t,a)):h(t,a,e,!1))):i||(a.reading=!1)}return f(a)}function h(t,e,r,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&v(t)),b(t,e)}function u(t,e){var r;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function d(t){return t>=V?t=V:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function p(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=d(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function g(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,v(t)}}function v(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(q("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?D(m,t):m(t))}function m(t){q("emit readable"),t.emit("readable"),C(t)}function b(t,e){e.readingMore||(e.readingMore=!0,D(y,t,e))}function y(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(q("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function _(t){return function(){var e=t._readableState;q("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&F(t,"data")&&(e.flowing=!0,C(t))}}function w(t){q("readable nexttick read 0"),t.read(0)}function S(t,e){e.resumeScheduled||(e.resumeScheduled=!0,D(x,t,e))}function x(t,e){e.reading||(q("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),C(t),e.flowing&&!e.reading&&t.read(0)}function C(t){var e=t._readableState;for(q("flow",e.flowing);e.flowing&&null!==t.read(););}function A(t,e){if(0===e.length)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=T(t,e.buffer,e.decoder),r}function T(t,e,r){var i;return t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():r?k(t,e):P(t,e),i}function k(t,e){var r=e.head,i=1,n=r.data;for(t-=n.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(a===o.length?n+=o:n+=o.slice(0,t),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}function P(t,e){var r=B.allocUnsafe(t),i=e.head,n=1;for(i.data.copy(r),t-=i.data.length;i=i.next;){var o=i.data,a=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,a),0===(t-=a)){a===o.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(a));break}++n}return e.length-=n,r}function E(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,D(O,e,t))}function O(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function R(t,e){for(var r=0,i=t.length;r<i;r++)e(t[r],r)}function L(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}var D=r(7);t.exports=c;var I=r(13),j;c.ReadableState=s;var M=r(15).EventEmitter,F=function(t,e){return t.listeners(e).length},N=r(16),B=r(10).Buffer,U=e.Uint8Array||function(){},z=r(5);z.inherits=r(3);var W=r(44),q=void 0;q=W&&W.debuglog?W.debuglog("stream"):function(){};var X=r(45),G=r(17),H;z.inherits(c,N);var Y=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),c.prototype.destroy=G.destroy,c.prototype._undestroy=G.undestroy,c.prototype._destroy=function(t,e){this.push(null),e(t)},c.prototype.push=function(t,e){var r=this._readableState,i;return r.objectMode?i=!0:"string"==typeof t&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=B.from(t,e),e=""),i=!0),l(this,t,e,!1,i)},c.prototype.unshift=function(t){return l(this,t,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(t){return H||(H=r(19).StringDecoder),this._readableState.decoder=new H(t),this._readableState.encoding=t,this};var V=8388608;c.prototype.read=function(t){q("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return q("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?E(this):v(this),null;if(0===(t=p(t,e))&&e.ended)return 0===e.length&&E(this),null;var i=e.needReadable;q("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,q("length less than watermark",i)),e.ended||e.reading?(i=!1,q("reading or ended",i)):i&&(q("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=p(r,e)));var n;return n=t>0?A(t,e):null,null===n?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&E(this)),null!==n&&this.emit("data",n),n},c.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},c.prototype.pipe=function(t,e){function r(t,e){q("onunpipe"),t===f&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,o())}function n(){q("onend"),t.end()}function o(){q("cleanup"),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("drain",v),t.removeListener("error",c),t.removeListener("unpipe",r),f.removeListener("end",n),f.removeListener("end",u),f.removeListener("data",s),m=!0,!d.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function s(e){q("ondata"),b=!1,!1!==t.write(e)||b||((1===d.pipesCount&&d.pipes===t||d.pipesCount>1&&-1!==L(d.pipes,t))&&!m&&(q("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,b=!0),f.pause())}function c(e){q("onerror",e),u(),t.removeListener("error",c),0===F(t,"error")&&t.emit("error",e)}function l(){t.removeListener("finish",h),u()}function h(){q("onfinish"),t.removeListener("close",l),u()}function u(){q("unpipe"),f.unpipe(t)}var f=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=t;break;case 1:d.pipes=[d.pipes,t];break;default:d.pipes.push(t)}d.pipesCount+=1,q("pipe count=%d opts=%j",d.pipesCount,e);var p=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr,g=p?n:u;d.endEmitted?D(g):f.once("end",g),t.on("unpipe",r);var v=_(f);t.on("drain",v);var m=!1,b=!1;return f.on("data",s),a(t,"error",c),t.once("close",l),t.once("finish",h),t.emit("pipe",f),d.flowing||(q("pipe resume"),f.resume()),t},c.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this,r);return this}var a=L(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},c.prototype.on=function(t,e){var r=N.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&v(this):D(w,this))}return r},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){var t=this._readableState;return t.flowing||(q("resume"),t.flowing=!0,S(this,t)),this},c.prototype.pause=function(){return q("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(q("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(t){var e=this._readableState,r=!1,i=this;t.on("end",function(){if(q("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(n){if(q("wrapped data"),e.decoder&&(n=e.decoder.write(n)),(!e.objectMode||null!==n&&void 0!==n)&&(e.objectMode||n&&n.length)){i.push(n)||(r=!0,t.pause())}});for(var n in t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var o=0;o<Y.length;o++)t.on(Y[o],i.emit.bind(i,Y[o]));return i._read=function(e){q("wrapped _read",e),r&&(r=!1,t.resume())},i},c._fromList=A}).call(e,r(0),r(1))},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function n(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!n(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,n,s,c,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(r=this._events[t],a(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,c=0;c<n;c++)l[c].apply(this,s);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,n,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],a=r.length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){t.exports=r(15).EventEmitter},function(t,e,r){"use strict";function i(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;if(i||n)return void(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||a(o,this,t));this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(a(o,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(t,e){t.emit("error",e)}var a=r(7);t.exports={destroy:i,undestroy:n}},function(t,e,r){"use strict";(function(e,i,n){function o(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){P(e,t)}}function s(t){return j.from(t)}function c(t){return j.isBuffer(t)||t instanceof M}function l(){}function h(t,e){R=R||r(4),t=t||{},this.objectMode=!!t.objectMode,e instanceof R&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){y(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function u(t){if(R=R||r(4),!(N.call(u,this)||this instanceof R))return new u(t);this._writableState=new h(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),I.call(this)}function f(t,e){var r=new Error("write after end");t.emit("error",r),E(e,r)}function d(t,e,r,i){var n=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),E(i,o),n=!1),n}function p(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=j.from(e,r)),e}function g(t,e,r,i,n,o){if(!r){var a=p(e,i,n);i!==a&&(r=!0,n="buffer",i=a)}var s=e.objectMode?1:i.length;e.length+=s;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,s,i,n,o);return c}function v(t,e,r,i,n,o,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(n,e.onwrite):t._write(n,o,e.onwrite),e.sync=!1}function m(t,e,r,i,n){--e.pendingcb,r?(E(n,i),E(T,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(n(i),t._writableState.errorEmitted=!0,t.emit("error",i),T(t,e))}function b(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function y(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(b(r),e)m(t,r,i,e,n);else{var o=x(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||S(t,r),i?O(_,t,r,o,n):_(t,r,o,n)}}function _(t,e,r,i){r||w(t,e),e.pendingcb--,i(),T(t,e)}function w(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function S(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),o=e.corkedRequestsFree;o.entry=r;for(var s=0,c=!0;r;)n[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;n.allBuffers=c,v(t,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e)}else{for(;r;){var l=r.chunk,h=r.encoding,u=r.callback;if(v(t,e,!1,e.objectMode?1:l.length,l,h,u),r=r.next,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function C(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),T(t,e)})}function A(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,E(C,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function T(t,e){var r=x(e);return r&&(A(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}function k(t,e,r){e.ending=!0,T(t,e),r&&(e.finished?E(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function P(t,e,r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}var E=r(7);t.exports=u;var O=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?i:E,R;u.WritableState=h;var L=r(5);L.inherits=r(3);var D={deprecate:r(48)},I=r(16),j=r(10).Buffer,M=n.Uint8Array||function(){},F=r(17);L.inherits(u,I),h.prototype.getBuffer=function t(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r},function(){try{Object.defineProperty(h.prototype,"buffer",{get:D.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var N;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(t){return!!N.call(this,t)||t&&t._writableState instanceof h}})):N=function(t){return t instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(t,e,r){var i=this._writableState,n=!1,o=c(t)&&!i.objectMode;return o&&!j.isBuffer(t)&&(t=s(t)),"function"==typeof e&&(r=e,e=null),o?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=l),i.ended?f(this,r):(o||d(this,i,t,r))&&(i.pendingcb++,n=g(this,i,o,t,e,r)),n},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||S(this,t))},u.prototype.setDefaultEncoding=function t(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},u.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(t,e,r){var i=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||k(this,i,r)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),u.prototype.destroy=F.destroy,u.prototype._undestroy=F.undestroy,u.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,r(1),r(46).setImmediate,r(0))},function(t,e,r){function i(t){if(t&&!c(t))throw new Error("Unknown encoding: "+t)}function n(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var s=r(2).Buffer,c=s.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=n)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(!(i>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var n=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,n),n-=this.charReceived),e+=t.toString(this.encoding,0,n);var n=e.length-1,i=e.charCodeAt(n);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,n)}return e},l.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e},l.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,i=this.charBuffer,n=this.encoding;e+=i.slice(0,r).toString(n)}return e}},function(t,e,r){"use strict";function i(t){this.afterTransform=function(e,r){return n(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function n(t,e,r){var i=t._transformState;i.transforming=!1;var n=i.writecb;if(!n)return t.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!==r&&void 0!==r&&t.push(r),n(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t),this._transformState=new i(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,r){a(e,t,r)}):a(e)})}function a(t,e,r){if(e)return t.emit("error",e);null!==r&&void 0!==r&&t.push(r);var i=t._writableState,n=t._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=o;var s=r(4),c=r(5);c.inherits=r(3),c.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var r=this;s.prototype._destroy.call(this,t,function(t){e(t),r.emit("close")})}},function(t,e,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,r){"use strict";function i(t,e,r,i){for(var n=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){a=r>2e3?2e3:r,r-=a;do{n=n+e[i++]|0,o=o+n|0}while(--a);n%=65521,o%=65521}return n|o<<16|0}t.exports=i},function(t,e,r){"use strict";function i(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function n(t,e,r,i){var n=o,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^n[255&(t^e[s])];return-1^t}var o=i();t.exports=n},function(t,e,r){(function(t,i){function n(t,r){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(r)?i.showHidden=r:r&&e._extend(i,r),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),c(i,t,i.depth)}function o(t,e){var r=n.styles[e];return r?"["+n.colors[r][0]+"m"+t+"["+n.colors[r][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function c(t,r,i){if(t.customInspect&&r&&T(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,t);return y(n)||(n=c(t,n,i)),n}var o=l(t,r);if(o)return o;var a=Object.keys(r),g=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),A(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(r);if(0===a.length){if(T(r)){var v=r.name?": "+r.name:"";return t.stylize("[Function"+v+"]","special")}if(S(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(C(r))return t.stylize(Date.prototype.toString.call(r),"date");if(A(r))return h(r)}var m="",b=!1,_=["{","}"];if(p(r)&&(b=!0,_=["[","]"]),T(r)){m=" [Function"+(r.name?": "+r.name:"")+"]"}if(S(r)&&(m=" "+RegExp.prototype.toString.call(r)),C(r)&&(m=" "+Date.prototype.toUTCString.call(r)),A(r)&&(m=" "+h(r)),0===a.length&&(!b||0==r.length))return _[0]+m+_[1];if(i<0)return S(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r);var w;return w=b?u(t,r,i,g,a):a.map(function(e){return f(t,r,i,g,e,b)}),t.seen.pop(),d(w,m,_)}function l(t,e){if(w(e))return t.stylize("undefined","undefined");if(y(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return b(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,e,r,i,n){for(var o=[],a=0,s=e.length;a<s;++a)R(e,String(a))?o.push(f(t,e,r,i,String(a),!0)):o.push("");return n.forEach(function(n){n.match(/^\d+$/)||o.push(f(t,e,r,i,n,!0))}),o}function f(t,e,r,i,n,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),R(i,n)||(a="["+n+"]"),s||(t.seen.indexOf(l.value)<0?(s=v(r)?c(t,l.value,null):c(t,l.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),w(a)){if(o&&n.match(/^\d+$/))return s;a=JSON.stringify(""+n),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t,e,r){var i=0;return t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function p(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return null==t}function b(t){return"number"==typeof t}function y(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function w(t){return void 0===t}function S(t){return x(t)&&"[object RegExp]"===P(t)}function x(t){return"object"==typeof t&&null!==t}function C(t){return x(t)&&"[object Date]"===P(t)}function A(t){return x(t)&&("[object Error]"===P(t)||t instanceof Error)}function T(t){return"function"==typeof t}function k(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function P(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}function O(){var t=new Date,e=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":");return[t.getDate(),j[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var L=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(n(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,o=i.length,a=String(t).replace(L,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return t}}),s=i[r];r<o;s=i[++r])v(s)||!x(s)?a+=" "+s:a+=" "+n(s);return a},e.deprecate=function(r,n){function o(){if(!a){if(i.throwDeprecation)throw new Error(n);i.traceDeprecation?console.trace(n):console.error(n),a=!0}return r.apply(this,arguments)}if(w(t.process))return function(){return e.deprecate(r,n).apply(this,arguments)};if(!0===i.noDeprecation)return r;var a=!1;return o};var D={},I;e.debuglog=function(t){if(w(I)&&(I=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var r=i.pid;D[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,i)}}else D[t]=function(){};return D[t]},e.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=g,e.isNull=v,e.isNullOrUndefined=m,e.isNumber=b,e.isString=y,e.isSymbol=_,e.isUndefined=w,e.isRegExp=S,e.isObject=x,e.isDate=C,e.isError=A,e.isFunction=T,e.isPrimitive=k,e.isBuffer=r(58);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",O(),e.format.apply(e,arguments))},e.inherits=r(59),e._extend=function(t,e){if(!e||!x(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t}}).call(e,r(0),r(1))},function(t,e,r){"use strict";function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(t,e,r){if(t&&l.isObject(t)&&t instanceof i)return t;var n=new i;return n.parse(t,e,r),n}function o(t){return l.isString(t)&&(t=n(t)),t instanceof i?t.format():i.prototype.format.call(t)}function a(t,e){return n(t,!1,!0).resolve(e)}function s(t,e){return t?n(t,!1,!0).resolveObject(e):e}var c=r(66),l=r(68);e.parse=n,e.resolve=a,e.resolveObject=s,e.format=o,e.Url=i;var h=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(d),g=["'"].concat(p),v=["%","/","?",";","#"].concat(g),m=["/","?","#"],b=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=r(69);i.prototype.parse=function(t,e,r){if(!l.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),n=-1!==i&&i<t.indexOf("#")?"?":"#",o=t.split(n),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(n);var s=t;if(s=s.trim(),!r&&1===t.split("#").length){var u=f.exec(s);if(u)return this.path=s,this.href=s,this.pathname=u[1],u[2]?(this.search=u[2],this.query=e?C.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var d=h.exec(s);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,s=s.substr(d.length)}if(r||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var b="//"===s.substr(0,2);!b||d&&S[d]||(s=s.substr(2),this.slashes=!0)}if(!S[d]&&(b||d&&!x[d])){for(var A=-1,T=0;T<m.length;T++){var k=s.indexOf(m[T]);-1!==k&&(-1===A||k<A)&&(A=k)}var P,E;E=-1===A?s.lastIndexOf("@"):s.lastIndexOf("@",A),-1!==E&&(P=s.slice(0,E),s=s.slice(E+1),this.auth=decodeURIComponent(P)),A=-1;for(var T=0;T<v.length;T++){var k=s.indexOf(v[T]);-1!==k&&(-1===A||k<A)&&(A=k)}-1===A&&(A=s.length),this.host=s.slice(0,A),s=s.slice(A),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var R=this.hostname.split(/\./),T=0,L=R.length;T<L;T++){var D=R[T];if(D&&!D.match(y)){for(var I="",j=0,M=D.length;j<M;j++)D.charCodeAt(j)>127?I+="x":I+=D[j];if(!I.match(y)){var F=R.slice(0,T),N=R.slice(T+1),B=D.match(_);B&&(F.push(B[1]),N.unshift(B[2])),N.length&&(s="/"+N.join(".")+s),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=c.toASCII(this.hostname));var U=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+U,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!w[p])for(var T=0,L=g.length;T<L;T++){var W=g[T];if(-1!==s.indexOf(W)){var q=encodeURIComponent(W);q===W&&(q=escape(W)),s=s.split(W).join(q)}}var X=s.indexOf("#");-1!==X&&(this.hash=s.substr(X),s=s.slice(0,X));var G=s.indexOf("?");if(-1!==G?(this.search=s.substr(G),this.query=s.substr(G+1),e&&(this.query=C.parse(this.query)),s=s.slice(0,G)):e&&(this.search="",this.query={}),s&&(this.pathname=s),x[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",H=this.search||"";this.path=U+H}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,o="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=C.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||x[e])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+n+r+a+i},i.prototype.resolve=function(t){return this.resolveObject(n(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(l.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var r=new i,n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),c=0;c<s.length;c++){var h=s[c];"protocol"!==h&&(r[h]=t[h])}return x[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!x[t.protocol]){for(var u=Object.keys(t),f=0;f<u.length;f++){var d=u[f];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||S[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var g=r.pathname||"",v=r.search||"";r.path=g+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=b||m||r.host&&t.pathname,_=y,w=r.pathname&&r.pathname.split("/")||[],p=t.pathname&&t.pathname.split("/")||[],C=r.protocol&&!x[r.protocol];if(C&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),y=y&&(""===p[0]||""===w[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),r.search=t.search,r.query=t.query;else if(!l.isNullOrUndefined(t.search)){if(C){r.hostname=r.host=w.shift();var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return r.search=t.search,r.query=t.query,l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var T=w.slice(-1)[0],k=(r.host||t.host||w.length>1)&&("."===T||".."===T)||""===T,P=0,E=w.length;E>=0;E--)T=w[E],"."===T?w.splice(E,1):".."===T?(w.splice(E,1),P++):P&&(w.splice(E,1),P--);if(!y&&!_)for(;P--;P)w.unshift("..");!y||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var O=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(C){r.hostname=r.host=O?"":w.length?w.shift():"";var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return y=y||r.host&&w.length,y&&!O&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){(function(t){var i=r(72),n=r(75),o=r(76),a=r(25),s=e;s.request=function(e,r){e="string"==typeof e?a.parse(e):n(e);var o=-1===t.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||o,c=e.hostname||e.host,l=e.port,h=e.path||"/";c&&-1!==c.indexOf(":")&&(c="["+c+"]"),e.url=(c?s+"//"+c:"")+(l?":"+l:"")+h,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var u=new i(e);return r&&u.on("response",r),u},s.get=function t(e,r){var i=s.request(e,r);return i.end(),i},s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.STATUS_CODES=o,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(e,r(0))},function(t,e,r){(function(t){function r(){if(void 0!==o)return o;if(t.XMLHttpRequest){o=new t.XMLHttpRequest;try{o.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){o=null}}else o=null;return o}function i(t){var e=r();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}function n(t){return"function"==typeof t}e.fetch=n(t.fetch)&&n(t.ReadableStream),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var o,a=void 0!==t.ArrayBuffer,s=a&&n(t.ArrayBuffer.prototype.slice);e.arraybuffer=e.fetch||a&&i("arraybuffer"),e.msstream=!e.fetch&&s&&i("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&a&&i("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!r()&&n(r().overrideMimeType),e.vbArray=n(t.VBArray),o=null}).call(e,r(0))},function(t,e){function r(t){throw new Error("Cannot find module '"+t+"'.")}r.keys=function(){return[]},r.resolve=r,t.exports=r,r.id=28},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){function e(e){function i(t,e){return e.getPage(1).then(function(e){return A=e,x=A.getViewport(1),t.clientWidth/(x.width*v)})}return(0,l.getDocument)(e).then(function(e){return Promise.all([i(t,e),T.setDocument(e)])}).then(function(t){var e=o(t,1),i=e[0];T.currentScale=i,x=A.getViewport(i),r(x.width*v,x.height*v)})}function r(e,r){var i=document.createElement("canvas");i.id=s.default.generate(),i.width=e,i.height=r,t.appendChild(i),C=new h.fabric.Canvas(i.id),C.selection=!1,h.fabric.util.addListener(document.getElementsByClassName("upper-canvas")[0],"contextmenu",function(t){var e=C.getPointer(t),r=C.findTarget(t);w.emit("contextmenu",t,e,r),t.preventDefault()}),C.on("mouse:dblclick",function(t){var e=C.getPointer(t.e);w.emit("mouse:dblclick",t.e,e),t.e.preventDefault()}),C.on("mouse:up",function(t){var e=C.getPointer(t.e),r=C.findTarget(t.e);w.emit("mouse:up",t.e,e,r),t.e.preventDefault()}),C.on("mouse:down",function(t){var e=C.getPointer(t.e),r=C.findTarget(t.e);w.emit("mouse:down",t.e,e,r),t.e.preventDefault()}),C.on("mouse:wheel",function(t){var e=(0,p.default)(t.e).pixelY/3600;w.emit("mouse:wheel",t.e,e),t.e.preventDefault()}),C.on("object:selected",function(t){var e=t.target;w.emit("object:selected",e)})}function i(t,e){function r(e){return new Promise(function(r){h.fabric.Image.fromURL(e,function(e){e.top=t.y-e.height,e.left=t.x-e.width/2,e.topRate=t.y/C.height,e.leftRate=t.x/C.width,e.opacity=w.pinOpacity,e.hasControls=!1,e.hasRotatingPoint=!1;var i=b(t),n=o(i,2),s=n[0],c=n[1];e.pdfPoint={x:s,y:c},e.index=C.size(),e.on("moving",function(t){return y(t,e)}),Object.assign(e,a),C.add(e),r(e)})})}var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e&&(w.pinImgURL=e),i.text?n(w.pinImgURL,i).then(r):r(w.pinImgURL)}function n(e,r){return new Promise(function(i){h.fabric.Image.fromURL(e,function(e){var n=document.createElement("canvas");n.id=s.default.generate(),n.width=e.width,n.height=e.height,n.style.display="none",t.appendChild(n);var o=new h.fabric.Canvas(n.id);e.left=0,e.top=0,o.add(e);var a=new h.fabric.Text(r.text,{fontSize:r.fontSize||20,fill:r.color||"red",fontFamily:r.fontFamily||"Comic Sans",fontWeight:r.fontWeight||"normal"});a.left=e.left+(e.width-a.width)/2,a.top=e.top+(e.height-a.height)/2.5,o.add(a),i(o.toDataURL()),o.dispose(),t.removeChild(n)})})}function a(t,e,r,n){var a=x.convertToViewportPoint(t.x,t.y),s=o(a,2);return i({x:s[0],y:s[1]},e,r,n)}function c(t,e,r,n,o){return i({x:t*C.width,y:e*C.height},r,n,o)}function u(t){var e=C.item(t);e&&(C.remove(e),e.text&&C.remove(e.text))}function d(t){}function m(t){var e=T.currentScale,r=e+t,i=r/e;T.currentScale=r,x=A.getViewport(r);var n=C.getHeight(),o=C.getWidth();C.setHeight(n*i),C.setWidth(o*i),C.getObjects().forEach(function(t){t.set("top",C.height*t.topRate-t.height),t.set("left",C.width*t.leftRate-t.width/2),t.setCoords()}),C.renderAll(),C.calcOffset()}function b(t){return x.convertToPdfPoint(t.x,t.y)}function y(t,e){e.topRate=(e.top+e.height)/C.height,e.leftRate=(e.left+e.width/2)/C.width;var r=b({x:e.left+e.width/2,y:e.top+e.height}),i=o(r,2),n=i[0],a=i[1];e.pdfPoint={x:n,y:a},e.setCoords(),w.emit("object:moving",e)}var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f.default.call(this);var w=this;w.load=e,w.addPin=i,w.addPinWithRate=c,w.addPinWithPdfPoint=a,w.removePin=u,w.zoomIn=m,w.zoomOut=d,w.pinImgURL=_.pinImgURL||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAvCAYAAABt7qMfAAAJKklEQVRYR61YfXBU1RX/nfdYEoyQooKY7AappaWDBUuKu+8ljKGVFMpQsQOCfLT8g6NQC1ItVSvy0TLaGaso2kFrrJXWqSgWYaCIpZnKvrcJRGescawoluwGUygfgkCy+947nfNyN25eNiSLPX8l+84593fPPR+/ewn9lLZx40oyJSW1xHyjRzSeiCrAfBmASwCcB3ACzCkA/yTgjY5MZvc1TU2f9sc99aXUZprDM0AtmOcCqAZQ2pcNgM8AWABeYk3bVRGPH7mQTa8gmseOHThkyJBZRLSCmccDGBBw5IFIdp8GEAIwNK8O0Axgg55Ov1jW1HQuH5i8ID6qrCwdGArdC6IfAyjJMTzhh5v5gEf0HjE3a7p+ymUeogFjGLiWmScQIKCH5diliehZraNjVVlT03+DQHqAaJ04MeLp+noQzQeQ/d4C5hcBvBo6d+7dEe+8c7a38CYNY5DO/HWX6CYA4uOarC4RvaYxryyz7fdz7buB+Lim5ksDOjqeAzCzS4n576Tr94Xj8UQ/cqGbSso0r2Pm9QCm5myoPkQ0Z4RlHe0Cl/3j4LRpRcWnTq0GsFIZuGCuC2naL3INCgVyuLp6qOY4q0F0h8odcfFk6OzZldmIdkUiaZoLwPw0gEGixcCmQZp2z7B4/EyhCwf15YiIeR0TrVAbdBhYXmHbT4quD+JQNHplSNO2A5ioHOwNEd3aWwQYoLZJk65wHGeE53mleih0Jp3JtI1qaDhGgJcPtESEXPd5Amao78060fQyyzrsg2iJxRZJ9gLQAJz2PG/WyIaGPfmc/XvSpKt0x7kdwM0ARqhm1U7AUSbarmUyG8v370/ms02ZpsHMfwEw3P/O/JNIIvEEHauqGtzBvJmZv6+O4dGj6fTKbzU1ZYKOUqY53WNeS8A3cxItqNYM5lWRRGJr8INEMBWLrQKR5J5Ifcbz5lLSMGRHzwMYDOC4zlxblki8ledcJcMlWmU5304DkJy5NNBJjzGwrMK2pay7yRHDGOMCbwAoByCNbgmlTPMRZpaEEflHUVHR9OH19dJ2uyQVjYY9TdtGwAT1YyuYn9GI9njAUdK0K9jzagDcBmCUr0P0AZinR2z7w1xffhWePLkVRN/z1Zifo2QsthdEk5XihohtLw+ibzHNJcTsZ7LkDAM/qrBtOdtu0hqLyXD7U7ZbEvP94URC+kQ3SZrmajA/qH58W47jAwCjFfplEct6PNeCZ8/WW5PJzUwkA0yS6fFwcfFPqb7eCTr3z9wwHgAgZ05g3tk+dOgPRu/a1ZGrqwqhTuXVEQEhE+4qdJbWwohty0665GA0OqSYaDeIYgDOep43dWRDw74ggOz/qerq8ey6fwNwOYD3QkSTg6WejMWmgUgiORBAhyBvY+BKAC4xzwsnEi/lLiD1rXveHmauBHBSZ74xX+JmbZLR6GhoWr1K4EPkeTeEGxqEZ3RJi2kKL3kNQJG/btIwDgL4igq1X7e5BtLtAOwA8G0AGQLmh217S2+ROByNTtE0TXYpZKcxnU7XBslNyjQXMrNUJBHwH6mO15l5ijgl5qfCicTSHolkGAJMxjqIaA8c59ZwY+PxoJ7qOc8w8xz17YWwbS8KdtEW0/wVMd+ndA7IcaxlQJJJpNHT9akj9+07mSd80nyEWzCYf8e6vjqXMX0yadIwx3HuV2B1vwcQzYtY1iu5vhRNlKOQyIpspFRV1WT2vD+rsvqUNG1qcGwfqay8xA2FNoFoQY5Dm5lf1oAUE0liy/i/IdtJGdieSacXBo8iaRjfQGezktb9GYgWkU/jSkvrwCwERErw4XAicS/5g/Rz8bkm86MA5gWOwQUgO+8SATCA6E4ZTj2O1jRXgvkh9fuOds+b7w8wlSi/VwOs1dO0746Mx4UbdpPU9ddfzpomvV96RucQ6i4nQLTVyWQeGLV/f1vw4+Hq6i9rnrcLzF/190u0tMKynvJBHKmurnBd93UAX1OGD0Zse22eRcA1NQM+aW8f5wA1BIwB0aUgErr3ITyv/vSZM2+PbW6WmdBDkoaxDMBj6kOLpmm15fH4v7pITYth/IaAu5TCu47jTMm3m6BnBrTeOESurqKOOwEY6ve6sG0vFtvPQZjmRGJ+GUAFAGnJt0dsW6bm/0VShjGbgT8AKAZwjIjmhi1rrzjvRnQD5fo+ue5N4cZGmS1fSJKGIWP71SxzY+CxiG2vyCZ/dxCdfX+XmiWycK+5UQgqlQtSWbLecSKaEbYsO+ujGwg1BUVZEkjkI0/Xa0fu23eokEVzdVuqqsrI8/4KQPqDzx/KI5HFtGWLlLYvPS4/agBJd7y2U4PWhMvL1+UaFQIoZRjLGXhElf8hnXl2cADmvQYqErNRgTzFwNwK295dyOKi2xqLVXlEkuxCiGVDP49Y1sNBP/lBSAhddyeI5E4pXfQVp7h4waj6+vb+ApF+0ppOyzBbpGwOqrnU42h7vZW3xGJziGiTIrDnifmOcCIh47df0mIYM6mzJIVAnyei5WHLkstVD+kVhOwk2dHxLAE/zO4Enjc90tAg/OOCIsSYOy9T1ynFrU5R0fzeInnBR5IjsdgEl0icddJ8oifC5eV39ZWkKdP8JTPLWBc5zpp2c0U8/mZvyC8Iwi9Z03wIzD9TDo5pwMxy25ZXmLySjEbHQdd3gDmiFJ4Oh8NLLgS8z+cif3Lq+mZ1vRe/luY4c/Nd9dS4l2k8TQF4kzxvXpBjBtH3CUIMFDEVhiQ3LamW1ZFEYk3QWUsstoKIpCeIdMhDS5BZ5Qtfv0AI8SkdPHg9E8nFSAhMijRtdi4DU4xJ5kP2ZaZOT6fv7O2dKhdMv0CIQdIwLiOibcwsL3hCu+Ku48ySce8/hLjuH7PHwMBb0LQZfb3aZYH0G4R/LN1r32/pEctarY7h1ypK7SBaHLEsyaN+SUEg/C7Y3r6BiZaId7kzeMA6DbibgavVii84RUW3FdJdCwIhi6hHErnyC7MWEWonFx3xdcB13Vuubmz8uF8hUEoFgxC7lGF8hwGpltzX3XNMNK/CsrYVAkBFtFAT4EBlZWj4wIFrCLhHveLKZfq3TlHR3YUcw0UlZi5cuUmlS0rqCLhFngC8AQMWBG9u/d3eRR1H1nkyFqsBkbzILQ3btlyaL0r+B7tw5ax4J5d3AAAAAElFTkSuQmCC",w.pinOpacity=_.pinOpacity||1;var S=document.createElement("div");S.id=s.default.generate(),S.style.position="absolute",t.appendChild(S);var x=null,C=null,A=null,T=new g({container:t,viewer:S})}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var r=[],i=!0,n=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(i=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);i=!0);}catch(t){n=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=r(30),s=i(a);r(38);var c=r(39),l=r(61),h=r(63),u=r(79),f=i(u),d=r(80),p=i(d),g=c.PDFJS.PDFViewer,v=96/72;c.PDFJS.disableTextLayer=!0,h.fabric.devicePixelRatio=1,n.prototype=Object.create(f.default.prototype),n.prototype.constructor=n,e.default=n},function(t,e,r){"use strict";t.exports=r(31)},function(t,e,r){"use strict";function i(e){return s.seed(e),t.exports}function n(e){return f=e,t.exports}function o(t){return void 0!==t&&s.characters(t),s.shuffled()}function a(){return h(f)}var s=r(6),c=r(11),l=r(34),h=r(35),u=r(36),f=r(37)||0;t.exports=a,t.exports.generate=a,t.exports.seed=i,t.exports.worker=n,t.exports.characters=o,t.exports.decode=l,t.exports.isValid=u},function(t,e,r){"use strict";function i(){return(o=(9301*o+49297)%233280)/233280}function n(t){o=t}var o=1;t.exports={nextValue:i,seed:n}},function(t,e,r){"use strict";function i(){if(!n||!n.getRandomValues)return 48&Math.floor(256*Math.random());var t=new Uint8Array(1);return n.getRandomValues(t),48&t[0]}var n="object"==typeof window&&(window.crypto||window.msCrypto);t.exports=i},function(t,e,r){"use strict";function i(t){var e=n.shuffled();return{version:15&e.indexOf(t.substr(0,1)),worker:15&e.indexOf(t.substr(1,1))}}var n=r(6);t.exports=i},function(t,e,r){"use strict";function i(t){var e="",r=Math.floor(.001*(Date.now()-a));return r===l?c++:(c=0,l=r),e+=n(o.lookup,s),e+=n(o.lookup,t),c>0&&(e+=n(o.lookup,c)),e+=n(o.lookup,r)}var n=r(11),o=r(6),a=1459707606518,s=6,c,l;t.exports=i},function(t,e,r){"use strict";function i(t){if(!t||"string"!=typeof t||t.length<6)return!1;for(var e=n.characters(),r=t.length,i=0;i<r;i++)if(-1===e.indexOf(t[i]))return!1;return!0}var n=r(6);t.exports=i},function(t,e,r){"use strict";t.exports=0},function(t,e,r){(function(e){!function e(r,i){t.exports=i()}(this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function e(){return t.default}:function e(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,r,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if("undefined"==typeof PDFJS||!PDFJS.compatibilityChecked){var o="undefined"!=typeof window&&window.Math===Math?window:void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:void 0,a="undefined"!=typeof navigator&&navigator.userAgent||"",s=/Android/.test(a),c=/Android\s[0-2][^\d]/.test(a),l=/Android\s[0-4][^\d]/.test(a),h=a.indexOf("Chrom")>=0,u=/Chrome\/(39|40)\./.test(a),f=a.indexOf("CriOS")>=0,d=a.indexOf("Trident")>=0,p=/\b(iPad|iPhone|iPod)(?=;)/.test(a),g=a.indexOf("Opera")>=0,v=/Safari\//.test(a)&&!/(Chrome\/|Android\s)/.test(a),m="object"===("undefined"==typeof window?"undefined":n(window))&&"object"===("undefined"==typeof document?"undefined":n(document));"undefined"==typeof PDFJS&&(o.PDFJS={}),PDFJS.compatibilityChecked=!0,function t(){function e(t,e){return new c(this.slice(t,e))}function r(t,e){arguments.length<2&&(e=0);for(var r=0,i=t.length;r<i;++r,++e)this[e]=255&t[r]}function i(t,e){this.buffer=t,this.byteLength=t.length,this.length=e,s(this.length)}function a(t){return{get:function e(){var r=this.buffer,i=t<<2;return(r[i]|r[i+1]<<8|r[i+2]<<16|r[i+3]<<24)>>>0},set:function e(r){var i=this.buffer,n=t<<2;i[n]=255&r,i[n+1]=r>>8&255,i[n+2]=r>>16&255,i[n+3]=r>>>24&255}}}function s(t){for(;l<t;)Object.defineProperty(i.prototype,l,a(l)),l++}function c(t){var i,o,a;if("number"==typeof t)for(i=[],o=0;o<t;++o)i[o]=0;else if("slice"in t)i=t.slice(0);else for(i=[],o=0,a=t.length;o<a;++o)i[o]=t[o];return i.subarray=e,i.buffer=i,i.byteLength=i.length,i.set=r,"object"===(void 0===t?"undefined":n(t))&&t.buffer&&(i.buffer=t.buffer),i}if("undefined"!=typeof Uint8Array)return void 0===Uint8Array.prototype.subarray&&(Uint8Array.prototype.subarray=function t(e,r){return new Uint8Array(this.slice(e,r))},Float32Array.prototype.subarray=function t(e,r){return new Float32Array(this.slice(e,r))}),void("undefined"==typeof Float64Array&&(o.Float64Array=Float32Array));i.prototype=Object.create(null);var l=0;o.Uint8Array=c,o.Int8Array=c,o.Int32Array=c,o.Uint16Array=c,o.Float32Array=c,o.Float64Array=c,o.Uint32Array=function(){if(3===arguments.length){if(0!==arguments[1])throw new Error("offset !== 0 is not supported");return new i(arguments[0],arguments[2])}return c.apply(this,arguments)}}(),function t(){if(m&&window.CanvasPixelArray){var e=window.CanvasPixelArray.prototype;"buffer"in e||(Object.defineProperty(e,"buffer",{get:function t(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e,"byteLength",{get:function t(){return this.length},enumerable:!1,configurable:!0}))}}(),function t(){o.URL||(o.URL=o.webkitURL)}(),function t(){if(void 0!==Object.defineProperty){var e=!0;try{m&&Object.defineProperty(new Image,"id",{value:"test"});var r=function t(){};r.prototype={get id(){}},Object.defineProperty(new r,"id",{value:"",configurable:!0,enumerable:!0,writable:!1})}catch(t){e=!1}if(e)return}Object.defineProperty=function t(e,r,i){delete e[r],"get"in i&&e.__defineGetter__(r,i.get),"set"in i&&e.__defineSetter__(r,i.set),"value"in i&&(e.__defineSetter__(r,function t(e){return this.__defineGetter__(r,function t(){return e}),e}),e[r]=i.value)}}(),function t(){if("undefined"!=typeof XMLHttpRequest){var e=XMLHttpRequest.prototype,r=new XMLHttpRequest;if("overrideMimeType"in r||Object.defineProperty(e,"overrideMimeType",{value:function t(e){}}),!("responseType"in r)){if(Object.defineProperty(e,"responseType",{get:function t(){return this._responseType||"text"},set:function t(e){"text"!==e&&"arraybuffer"!==e||(this._responseType=e,"arraybuffer"===e&&"function"==typeof this.overrideMimeType&&this.overrideMimeType("text/plain; charset=x-user-defined"))}}),"undefined"!=typeof VBArray)return void Object.defineProperty(e,"response",{get:function t(){return"arraybuffer"===this.responseType?new Uint8Array(new VBArray(this.responseBody).toArray()):this.responseText}});Object.defineProperty(e,"response",{get:function t(){if("arraybuffer"!==this.responseType)return this.responseText;var e=this.responseText,r,i=e.length,n=new Uint8Array(i);for(r=0;r<i;++r)n[r]=255&e.charCodeAt(r);return n.buffer}})}}}(),function t(){if(!("btoa"in o)){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.btoa=function(t){var r="",i,n;for(i=0,n=t.length;i<n;i+=3){var o=255&t.charCodeAt(i),a=255&t.charCodeAt(i+1),s=255&t.charCodeAt(i+2),c=o>>2,l=(3&o)<<4|a>>4,h=i+1<n?(15&a)<<2|s>>6:64,u=i+2<n?63&s:64;r+=e.charAt(c)+e.charAt(l)+e.charAt(h)+e.charAt(u)}return r}}}(),function t(){if(!("atob"in o)){o.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw new Error("bad atob input");for(var e=0,r,i,n=0,o="";i=t.charAt(n++);~i&&(r=e%4?64*r+i:i,e++%4)?o+=String.fromCharCode(255&r>>(-2*e&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return o}}}(),function t(){void 0===Function.prototype.bind&&(Function.prototype.bind=function t(e){var r=this,i=Array.prototype.slice.call(arguments,1);return function t(){var n=i.concat(Array.prototype.slice.call(arguments));return r.apply(e,n)}})}(),function t(){if(m){"dataset"in document.createElement("div")||Object.defineProperty(HTMLElement.prototype,"dataset",{get:function t(){if(this._dataset)return this._dataset;for(var e={},r=0,i=this.attributes.length;r<i;r++){var n=this.attributes[r];if("data-"===n.name.substring(0,5)){e[n.name.substring(5).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})]=n.value}}return Object.defineProperty(this,"_dataset",{value:e,writable:!1,enumerable:!1}),e},enumerable:!0})}}(),function t(){function e(t,e,r,i){var n=t.className||"",o=n.split(/\s+/g);""===o[0]&&o.shift();var a=o.indexOf(e);return a<0&&r&&o.push(e),a>=0&&i&&o.splice(a,1),t.className=o.join(" "),a>=0}if(m){if(!("classList"in document.createElement("div"))){var r={add:function t(r){e(this.element,r,!0,!1)},contains:function t(r){return e(this.element,r,!1,!1)},remove:function t(r){e(this.element,r,!1,!0)},toggle:function t(r){e(this.element,r,!0,!0)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function t(){if(this._classList)return this._classList;var e=Object.create(r,{element:{value:this,writable:!1,enumerable:!0}});return Object.defineProperty(this,"_classList",{value:e,writable:!1,enumerable:!1}),e},enumerable:!0})}}}(),function t(){if(!("undefined"==typeof importScripts||"console"in o)){var e={},r={log:function t(){var e=Array.prototype.slice.call(arguments);o.postMessage({targetName:"main",action:"console_log",data:e})},error:function t(){var e=Array.prototype.slice.call(arguments);o.postMessage({targetName:"main",action:"console_error",data:e})},time:function t(r){e[r]=Date.now()},timeEnd:function t(r){var i=e[r];if(!i)throw new Error("Unknown timer name "+r);this.log("Timer:",r,Date.now()-i)}};o.console=r}}(),function t(){if(m)"console"in window?"bind"in console.log||(console.log=function(t){return function(e){return t(e)}}(console.log),console.error=function(t){return function(e){return t(e)}}(console.error),console.warn=function(t){return function(e){return t(e)}}(console.warn)):window.console={log:function t(){},error:function t(){},warn:function t(){}}}(),function t(){function e(t){r(t.target)&&t.stopPropagation()}function r(t){return t.disabled||t.parentNode&&r(t.parentNode)}g&&document.addEventListener("click",e,!0)}(),function t(){(d||f)&&(PDFJS.disableCreateObjectURL=!0)}(),function t(){"undefined"!=typeof navigator&&("language"in navigator||(PDFJS.locale=navigator.userLanguage||"en-US"))}(),function t(){(v||c||u||p)&&(PDFJS.disableRange=!0,PDFJS.disableStream=!0)}(),function t(){m&&(history.pushState&&!c||(PDFJS.disableHistory=!0))}(),function t(){if(m)if(window.CanvasPixelArray)"function"!=typeof window.CanvasPixelArray.prototype.set&&(window.CanvasPixelArray.prototype.set=function(t){for(var e=0,r=this.length;e<r;e++)this[e]=t[e]});else{var e=!1,r;if(h?(r=a.match(/Chrom(e|ium)\/([0-9]+)\./),e=r&&parseInt(r[2])<21):s?e=l:v&&(r=a.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//),e=r&&parseInt(r[1])<6),e){var i=window.CanvasRenderingContext2D.prototype,n=i.createImageData;i.createImageData=function(t,e){var r=n.call(this,t,e);return r.data.set=function(t){for(var e=0,r=this.length;e<r;e++)this[e]=t[e]},r},i=null}}}(),function t(){function e(){window.requestAnimationFrame=function(t){return window.setTimeout(t,20)},window.cancelAnimationFrame=function(t){window.clearTimeout(t)}}if(m)p?e():"requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame||e())}(),function t(){(p||s)&&(PDFJS.maxCanvasPixels=5242880)}(),function t(){m&&d&&window.parent!==window&&(PDFJS.disableFullscreen=!0)}(),function t(){m&&("currentScript"in document||Object.defineProperty(document,"currentScript",{get:function t(){var e=document.getElementsByTagName("script");return e[e.length-1]},enumerable:!0,configurable:!0}))}(),function t(){if(m){var e=document.createElement("input");try{e.type="number"}catch(t){var r=e.constructor.prototype,i=Object.getOwnPropertyDescriptor(r,"type");Object.defineProperty(r,"type",{get:function t(){return i.get.call(this)},set:function t(e){i.set.call(this,"number"===e?"text":e)},enumerable:!0,configurable:!0})}}}(),function t(){if(m&&document.attachEvent){var e=document.constructor.prototype,r=Object.getOwnPropertyDescriptor(e,"readyState");Object.defineProperty(e,"readyState",{get:function t(){var e=r.get.call(this);return"interactive"===e?"loading":e},set:function t(e){r.set.call(this,e)},enumerable:!0,configurable:!0})}}(),function t(){m&&void 0===Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)})}(),function t(){Number.isNaN||(Number.isNaN=function(t){return"number"==typeof t&&isNaN(t)})}(),function t(){Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})}(),function t(){if(o.Promise)return"function"!=typeof o.Promise.all&&(o.Promise.all=function(t){var e=0,r=[],i,n,a=new o.Promise(function(t,e){i=t,n=e});return t.forEach(function(t,o){e++,t.then(function(t){r[o]=t,0===--e&&i(r)},n)}),0===e&&i(r),a}),"function"!=typeof o.Promise.resolve&&(o.Promise.resolve=function(t){return new o.Promise(function(e){e(t)})}),"function"!=typeof o.Promise.reject&&(o.Promise.reject=function(t){return new o.Promise(function(e,r){r(t)})}),void("function"!=typeof o.Promise.prototype.catch&&(o.Promise.prototype.catch=function(t){return o.Promise.prototype.then(void 0,t)}));var e=0,r=1,i=2,n=500,a={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function t(e){0!==e._status&&(this.handlers=this.handlers.concat(e._handlers),e._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function t(){for(var e=1,r=Date.now()+1;this.handlers.length>0;){var n=this.handlers.shift(),o=n.thisPromise._status,a=n.thisPromise._value;try{1===o?"function"==typeof n.onResolve&&(a=n.onResolve(a)):"function"==typeof n.onReject&&(a=n.onReject(a),o=1,n.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(n.thisPromise))}catch(t){o=i,a=t}if(n.nextPromise._updateStatus(o,a),Date.now()>=r)break}if(this.handlers.length>0)return void setTimeout(this.runHandlers.bind(this),0);this.running=!1},addUnhandledRejection:function t(e){this.unhandledRejections.push({promise:e,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function t(e){e._unhandledRejection=!1;for(var r=0;r<this.unhandledRejections.length;r++)this.unhandledRejections[r].promise===e&&(this.unhandledRejections.splice(r),r--)},scheduleRejectionCheck:function t(){var e=this;this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){e.pendingRejectionCheck=!1;for(var t=Date.now(),r=0;r<e.unhandledRejections.length;r++)if(t-e.unhandledRejections[r].time>500){var i=e.unhandledRejections[r].promise._value,n="Unhandled rejection: "+i;i.stack&&(n+="\n"+i.stack);try{throw new Error(n)}catch(t){console.warn(n)}e.unhandledRejections.splice(r),r--}e.unhandledRejections.length&&e.scheduleRejectionCheck()},500))}},s=function t(e){this._status=0,this._handlers=[];try{e.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(t){this._reject(t)}};s.all=function t(e){function r(t){a._status!==i&&(l=[],o(t))}var n,o,a=new s(function(t,e){n=t,o=e}),c=e.length,l=[];if(0===c)return n(l),a;for(var h=0,u=e.length;h<u;++h){var f=e[h],d=function(t){return function(e){a._status!==i&&(l[t]=e,0===--c&&n(l))}}(h);s.isPromise(f)?f.then(d,r):d(f)}return a},s.isPromise=function t(e){return e&&"function"==typeof e.then},s.resolve=function t(e){return new s(function(t){t(e)})},s.reject=function t(e){return new s(function(t,r){r(e)})},s.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function t(e,r){if(1!==this._status&&this._status!==i){if(1===e&&s.isPromise(r))return void r.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,i));this._status=e,this._value=r,e===i&&0===this._handlers.length&&(this._unhandledRejection=!0,a.addUnhandledRejection(this)),a.scheduleHandlers(this)}},_resolve:function t(e){this._updateStatus(1,e)},_reject:function t(e){this._updateStatus(i,e)},then:function t(e,r){var i=new s(function(t,e){this.resolve=t,this.reject=e});return this._handlers.push({thisPromise:this,onResolve:e,onReject:r,nextPromise:i}),a.scheduleHandlers(this),i},catch:function t(e){return this.then(void 0,e)}},o.Promise=s}(),function t(){function e(){this.id="$weakmap"+r++}if(!o.WeakMap){var r=0;e.prototype={has:function t(e){return("object"===(void 0===e?"undefined":n(e))||"function"==typeof e)&&null!==e&&!!Object.getOwnPropertyDescriptor(e,this.id)},get:function t(e){return this.has(e)?e[this.id]:void 0},set:function t(e,r){Object.defineProperty(e,this.id,{value:r,enumerable:!1,configurable:!0})},delete:function t(e){delete e[this.id]}},o.WeakMap=e}}(),function t(){function e(t){return void 0!==d[t]}function r(){l.call(this),this._isInvalid=!0}function i(t){return""===t&&r.call(this),t.toLowerCase()}function a(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,63,96].indexOf(e)?t:encodeURIComponent(t)}function s(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,96].indexOf(e)?t:encodeURIComponent(t)}function c(t,n,o){function c(t){y.push(t)}var l=n||"scheme start",h=0,u="",f=!1,b=!1,y=[];t:for(;(t[h-1]!==g||0===h)&&!this._isInvalid;){var _=t[h];switch(l){case"scheme start":if(!_||!v.test(_)){if(n){c("Invalid scheme.");break t}u="",l="no scheme";continue}u+=_.toLowerCase(),l="scheme";break;case"scheme":if(_&&m.test(_))u+=_.toLowerCase();else{if(":"!==_){if(n){if(_===g)break t;c("Code point not allowed in scheme: "+_);break t}u="",h=0,l="no scheme";continue}if(this._scheme=u,u="",n)break t;e(this._scheme)&&(this._isRelative=!0),l="file"===this._scheme?"relative":this._isRelative&&o&&o._scheme===this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"===_?(this._query="?",l="query"):"#"===_?(this._fragment="#",l="fragment"):_!==g&&"\t"!==_&&"\n"!==_&&"\r"!==_&&(this._schemeData+=a(_));break;case"no scheme":if(o&&e(o._scheme)){l="relative";continue}c("Missing scheme."),r.call(this);break;case"relative or authority":if("/"!==_||"/"!==t[h+1]){c("Expected /, got: "+_),l="relative";continue}l="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!==this._scheme&&(this._scheme=o._scheme),_===g){this._host=o._host,this._port=o._port,this._path=o._path.slice(),this._query=o._query,this._username=o._username,this._password=o._password;break t}if("/"===_||"\\"===_)"\\"===_&&c("\\ is an invalid code point."),l="relative slash";else if("?"===_)this._host=o._host,this._port=o._port,this._path=o._path.slice(),this._query="?",this._username=o._username,this._password=o._password,l="query";else{if("#"!==_){var w=t[h+1],S=t[h+2];("file"!==this._scheme||!v.test(_)||":"!==w&&"|"!==w||S!==g&&"/"!==S&&"\\"!==S&&"?"!==S&&"#"!==S)&&(this._host=o._host,this._port=o._port,this._username=o._username,this._password=o._password,this._path=o._path.slice(),this._path.pop()),l="relative path";continue}this._host=o._host,this._port=o._port,this._path=o._path.slice(),this._query=o._query,this._fragment="#",this._username=o._username,this._password=o._password,l="fragment"}break;case"relative slash":if("/"!==_&&"\\"!==_){"file"!==this._scheme&&(this._host=o._host,this._port=o._port,this._username=o._username,this._password=o._password),l="relative path";continue}"\\"===_&&c("\\ is an invalid code point."),l="file"===this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!==_){c("Expected '/', got: "+_),l="authority ignore slashes";continue}l="authority second slash";break;case"authority second slash":if(l="authority ignore slashes","/"!==_){c("Expected '/', got: "+_);continue}break;case"authority ignore slashes":if("/"!==_&&"\\"!==_){l="authority";continue}c("Expected authority, got: "+_);break;case"authority":if("@"===_){f&&(c("@ already seen."),u+="%40"),f=!0;for(var x=0;x<u.length;x++){var C=u[x];if("\t"!==C&&"\n"!==C&&"\r"!==C)if(":"!==C||null!==this._password){var A=a(C);null!==this._password?this._password+=A:this._username+=A}else this._password="";else c("Invalid whitespace in authority.")}u=""}else{if(_===g||"/"===_||"\\"===_||"?"===_||"#"===_){h-=u.length,u="",l="host";continue}u+=_}break;case"file host":if(_===g||"/"===_||"\\"===_||"?"===_||"#"===_){2!==u.length||!v.test(u[0])||":"!==u[1]&&"|"!==u[1]?0===u.length?l="relative path start":(this._host=i.call(this,u),u="",l="relative path start"):l="relative path";continue}"\t"===_||"\n"===_||"\r"===_?c("Invalid whitespace in file host."):u+=_;break;case"host":case"hostname":if(":"!==_||b){if(_===g||"/"===_||"\\"===_||"?"===_||"#"===_){if(this._host=i.call(this,u),u="",l="relative path start",n)break t;continue}"\t"!==_&&"\n"!==_&&"\r"!==_?("["===_?b=!0:"]"===_&&(b=!1),u+=_):c("Invalid code point in host/hostname: "+_)}else if(this._host=i.call(this,u),u="",l="port","hostname"===n)break t;break;case"port":if(/[0-9]/.test(_))u+=_;else{if(_===g||"/"===_||"\\"===_||"?"===_||"#"===_||n){if(""!==u){var T=parseInt(u,10);T!==d[this._scheme]&&(this._port=T+""),u=""}if(n)break t;l="relative path start";continue}"\t"===_||"\n"===_||"\r"===_?c("Invalid code point in port: "+_):r.call(this)}break;case"relative path start":if("\\"===_&&c("'\\' not allowed in path."),l="relative path","/"!==_&&"\\"!==_)continue;break;case"relative path":if(_!==g&&"/"!==_&&"\\"!==_&&(n||"?"!==_&&"#"!==_))"\t"!==_&&"\n"!==_&&"\r"!==_&&(u+=a(_));else{"\\"===_&&c("\\ not allowed in relative path.");var k;(k=p[u.toLowerCase()])&&(u=k),".."===u?(this._path.pop(),"/"!==_&&"\\"!==_&&this._path.push("")):"."===u&&"/"!==_&&"\\"!==_?this._path.push(""):"."!==u&&("file"===this._scheme&&0===this._path.length&&2===u.length&&v.test(u[0])&&"|"===u[1]&&(u=u[0]+":"),this._path.push(u)),u="","?"===_?(this._query="?",l="query"):"#"===_&&(this._fragment="#",l="fragment")}break;case"query":n||"#"!==_?_!==g&&"\t"!==_&&"\n"!==_&&"\r"!==_&&(this._query+=s(_)):(this._fragment="#",l="fragment");break;case"fragment":_!==g&&"\t"!==_&&"\n"!==_&&"\r"!==_&&(this._fragment+=_)}h++}}function l(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function h(t,e){void 0===e||e instanceof h||(e=new h(String(e))),this._url=t,l.call(this);var r=t.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");c.call(this,r,null,e)}var u=!1;try{if("function"==typeof URL&&"object"===n(URL.prototype)&&"origin"in URL.prototype){var f=new URL("b","http://a");f.pathname="c%20d",u="http://a/c%20d"===f.href}}catch(t){}if(!u){var d=Object.create(null);d.ftp=21,d.file=0,d.gopher=70,d.http=80,d.https=443,d.ws=80,d.wss=443;var p=Object.create(null);p["%2e"]=".",p[".%2e"]="..",p["%2e."]="..",p["%2e%2e"]="..";var g,v=/[a-zA-Z]/,m=/[a-zA-Z0-9\+\-\.]/;h.prototype={toString:function t(){return this.href},get href(){if(this._isInvalid)return this._url;var t="";return""===this._username&&null===this._password||(t=this._username+(null!==this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+t+this.host:"")+this.pathname+this._query+this._fragment},set href(t){l.call(this),c.call(this,t)},get protocol(){return this._scheme+":"},set protocol(t){this._isInvalid||c.call(this,t+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(t){!this._isInvalid&&this._isRelative&&c.call(this,t,"host")},get hostname(){return this._host},set hostname(t){!this._isInvalid&&this._isRelative&&c.call(this,t,"hostname")},get port(){return this._port},set port(t){!this._isInvalid&&this._isRelative&&c.call(this,t,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(t){!this._isInvalid&&this._isRelative&&(this._path=[],c.call(this,t,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"===this._query?"":this._query},set search(t){!this._isInvalid&&this._isRelative&&(this._query="?","?"===t[0]&&(t=t.slice(1)),c.call(this,t,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"===this._fragment?"":this._fragment},set hash(t){this._isInvalid||(this._fragment="#","#"===t[0]&&(t=t.slice(1)),c.call(this,t,"fragment"))},get origin(){var t;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new h(this._schemeData).origin||"null"}catch(t){}return"null"}return t=this.host,t?this._scheme+"://"+t:""}};var b=o.URL;b&&(h.createObjectURL=function(t){return b.createObjectURL.apply(b,arguments)},h.revokeObjectURL=function(t){b.revokeObjectURL(t)}),o.URL=h}}()}},function(t,e,r){"use strict";r(0)}])})}).call(e,r(0))},function(t,e,r){!function e(r,i){t.exports=i()}(this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function e(){return t.default}:function e(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=14)}([function(t,e,i){"use strict";var n;n="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:r(12),t.exports=n},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){return e?t.replace(/\{\{\s*(\w+)\s*\}\}/g,function(t,r){return r in e?e[r]:"{{"+r+"}}"}):t}function o(t){var e=window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i=e/r;return{sx:i,sy:i,scaled:1!==i}}function a(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.offsetParent;if(!i)return void console.error("offsetParent is not set -- cannot scroll");for(var n=t.offsetTop+t.clientTop,o=t.offsetLeft+t.clientLeft;i.clientHeight===i.scrollHeight||r&&"hidden"===getComputedStyle(i).overflow;)if(i.dataset._scaleY&&(n/=i.dataset._scaleY,o/=i.dataset._scaleX),n+=i.offsetTop,o+=i.offsetLeft,!(i=i.offsetParent))return;e&&(void 0!==e.top&&(n+=e.top),void 0!==e.left&&(o+=e.left,i.scrollLeft=o)),i.scrollTop=n}function s(t,e){var r=function r(o){n||(n=window.requestAnimationFrame(function r(){n=null;var o=t.scrollTop,a=i.lastY;o!==a&&(i.down=o>a),i.lastY=o,e(i)}))},i={down:!0,lastY:t.scrollTop,_eventHandler:r},n=null;return t.addEventListener("scroll",r,!0),i}function c(t){for(var e=t.split("&"),r=Object.create(null),i=0,n=e.length;i<n;++i){var o=e[i].split("="),a=o[0].toLowerCase(),s=o.length>1?o[1]:null;r[decodeURIComponent(a)]=decodeURIComponent(s)}return r}function l(t,e){var r=0,i=t.length-1;if(0===t.length||!e(t[i]))return t.length;if(e(t[r]))return r;for(;r<i;){var n=r+i>>1;e(t[n])?i=n:r=n+1}return r}function h(t){if(Math.floor(t)===t)return[t,1];var e=1/t,r=8;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];for(var i=t>1?e:t,n=0,o=1,a=1,s=1;;){var c=n+a,l=o+s;if(l>8)break;i<=c/l?(a=c,s=l):(n=c,o=l)}var h=void 0;return h=i-n/o<a/s-i?i===t?[n,o]:[o,n]:i===t?[a,s]:[s,a]}function u(t,e){var r=t%e;return 0===r?t:Math.round(t-r+e)}function f(t,e){function r(t){var e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>n}for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.scrollTop,o=n+t.clientHeight,a=t.scrollLeft,s=a+t.clientWidth,c=[],h=void 0,u=void 0,f=void 0,d=void 0,p=void 0,g=void 0,v=void 0,m=void 0,b=0===e.length?0:l(e,r),y=b,_=e.length;y<_&&(h=e[y],u=h.div,f=u.offsetTop+u.clientTop,d=u.clientHeight,!(f>o));y++)v=u.offsetLeft+u.clientLeft,m=u.clientWidth,v+m<a||v>s||(p=Math.max(0,n-f)+Math.max(0,f+d-o),g=100*(d-p)/d|0,c.push({id:h.id,x:v,y:f,view:h,percent:g}));var w=c[0],S=c[c.length-1];return i&&c.sort(function(t,e){var r=t.percent-e.percent;return Math.abs(r)>.001?-r:t.id-e.id}),{first:w,last:S,views:c}}function d(t){t.preventDefault()}function p(t){for(var e=0,r=t.length;e<r&&""===t[e].trim();)e++;return"data:"===t.substr(e,5).toLowerCase()}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if(p(t))return console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.'),e;var r=/^(?:(?:[^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=r.exec(t),o=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(o&&(o=o[0],-1!==o.indexOf("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch(t){}return o||e}function v(t){var e=Math.sqrt(t.deltaX*t.deltaX+t.deltaY*t.deltaY),r=Math.atan2(t.deltaY,t.deltaX);-.25*Math.PI<r&&r<.75*Math.PI&&(e=-e);var i=0,n=1,o=30,a=30;return 0===t.deltaMode?e/=900:1===t.deltaMode&&(e/=30),e}function m(t){var e=Object.create(null);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function b(t,e,r){return Math.min(Math.max(t,e),r)}Object.defineProperty(e,"__esModule",{value:!0}),e.localized=e.animationStarted=e.normalizeWheelEventDelta=e.binarySearchFirstItem=e.watchScroll=e.scrollIntoView=e.getOutputScale=e.approximateFraction=e.roundToDivide=e.getVisibleElements=e.parseQueryString=e.noContextMenuHandler=e.getPDFFileNameFromURL=e.ProgressBar=e.EventBus=e.NullL10n=e.mozL10n=e.RendererType=e.cloneObj=e.VERTICAL_PADDING=e.SCROLLBAR_PADDING=e.MAX_AUTO_SCALE=e.UNKNOWN_SCALE=e.MAX_SCALE=e.MIN_SCALE=e.DEFAULT_SCALE=e.DEFAULT_SCALE_VALUE=e.CSS_UNITS=void 0;var y=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),_=r(0),w=96/72,S="auto",x=1,C=.25,A=10,T=0,k=1.25,P=40,E=5,O={CANVAS:"canvas",SVG:"svg"},R={get:function t(e,r,i){return Promise.resolve(n(i,r))},translate:function t(e){return Promise.resolve()}};_.PDFJS.disableFullscreen=void 0!==_.PDFJS.disableFullscreen&&_.PDFJS.disableFullscreen,_.PDFJS.useOnlyCssZoom=void 0!==_.PDFJS.useOnlyCssZoom&&_.PDFJS.useOnlyCssZoom,_.PDFJS.maxCanvasPixels=void 0===_.PDFJS.maxCanvasPixels?16777216:_.PDFJS.maxCanvasPixels,_.PDFJS.disableHistory=void 0!==_.PDFJS.disableHistory&&_.PDFJS.disableHistory,_.PDFJS.disableTextLayer=void 0!==_.PDFJS.disableTextLayer&&_.PDFJS.disableTextLayer,_.PDFJS.ignoreCurrentPositionOnZoom=void 0!==_.PDFJS.ignoreCurrentPositionOnZoom&&_.PDFJS.ignoreCurrentPositionOnZoom,_.PDFJS.locale=void 0===_.PDFJS.locale&&"undefined"!=typeof navigator?navigator.language:_.PDFJS.locale;var L=new Promise(function(t){window.requestAnimationFrame(t)}),D=void 0,I=Promise.resolve(),j=function(){function t(){i(this,t),this._listeners=Object.create(null)}return y(t,[{key:"on",value:function t(e,r){var i=this._listeners[e];i||(i=[],this._listeners[e]=i),i.push(r)}},{key:"off",value:function t(e,r){var i=this._listeners[e],n=void 0;!i||(n=i.indexOf(r))<0||i.splice(n,1)}},{key:"dispatch",value:function t(e){var r=this._listeners[e];if(r&&0!==r.length){var i=Array.prototype.slice.call(arguments,1);r.slice(0).forEach(function(t){t.apply(null,i)})}}}]),t}(),M=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.height,o=r.width,a=r.units;i(this,t),this.visible=!0,this.div=document.querySelector(e+" .progress"),this.bar=this.div.parentNode,this.height=n||100,this.width=o||100,this.units=a||"%",this.div.style.height=this.height+this.units,this.percent=0}return y(t,[{key:"_updateBar",value:function t(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var e=this.width*this._percent/100;this.div.style.width=e+this.units}},{key:"setWidth",value:function t(e){if(e){var r=e.parentNode,i=r.offsetWidth-e.offsetWidth;i>0&&this.bar.setAttribute("style","width: calc(100% - "+i+"px);")}}},{key:"hide",value:function t(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))}},{key:"show",value:function t(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},{key:"percent",get:function t(){return this._percent},set:function t(e){this._indeterminate=isNaN(e),this._percent=b(e,0,100),this._updateBar()}}]),t}();e.CSS_UNITS=96/72,e.DEFAULT_SCALE_VALUE="auto",e.DEFAULT_SCALE=1,e.MIN_SCALE=.25,e.MAX_SCALE=10,e.UNKNOWN_SCALE=0,e.MAX_AUTO_SCALE=1.25,e.SCROLLBAR_PADDING=40,e.VERTICAL_PADDING=5,e.cloneObj=m,e.RendererType=O,e.mozL10n=void 0,e.NullL10n=R,e.EventBus=j,e.ProgressBar=M,e.getPDFFileNameFromURL=g,e.noContextMenuHandler=d,e.parseQueryString=c,e.getVisibleElements=f,e.roundToDivide=u,e.approximateFraction=h,e.getOutputScale=o,e.scrollIntoView=a,e.watchScroll=s,e.binarySearchFirstItem=l,e.normalizeWheelEventDelta=v,e.animationStarted=L,e.localized=I},function(t,e,r){"use strict";function i(t){t.on("documentload",function(){var t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)}),t.on("pagerendered",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagerendered",!0,!0,{pageNumber:t.pageNumber,cssTransform:t.cssTransform}),t.source.div.dispatchEvent(e)}),t.on("textlayerrendered",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t.pageNumber}),t.source.textLayerDiv.dispatchEvent(e)}),t.on("pagechange",function(t){var e=document.createEvent("UIEvents");e.initUIEvent("pagechange",!0,!0,window,0),e.pageNumber=t.pageNumber,t.source.container.dispatchEvent(e)}),t.on("pagesinit",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagesinit",!0,!0,null),t.source.container.dispatchEvent(e)}),t.on("pagesloaded",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t.pagesCount}),t.source.container.dispatchEvent(e)}),t.on("scalechange",function(t){var e=document.createEvent("UIEvents");e.initUIEvent("scalechange",!0,!0,window,0),e.scale=t.scale,e.presetValue=t.presetValue,t.source.container.dispatchEvent(e)}),t.on("updateviewarea",function(t){var e=document.createEvent("UIEvents");e.initUIEvent("updateviewarea",!0,!0,window,0),e.location=t.location,t.source.container.dispatchEvent(e)}),t.on("find",function(t){if(t.source!==window){var e=document.createEvent("CustomEvent");e.initCustomEvent("find"+t.type,!0,!0,{query:t.query,phraseSearch:t.phraseSearch,caseSensitive:t.caseSensitive,highlightAll:t.highlightAll,findPrevious:t.findPrevious}),window.dispatchEvent(e)}}),t.on("attachmentsloaded",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t.attachmentsCount}),t.source.container.dispatchEvent(e)}),t.on("sidebarviewchanged",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("sidebarviewchanged",!0,!0,{view:t.view}),t.source.outerContainer.dispatchEvent(e)}),t.on("pagemode",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("pagemode",!0,!0,{mode:t.mode}),t.source.pdfViewer.container.dispatchEvent(e)}),t.on("namedaction",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("namedaction",!0,!0,{action:t.action}),t.source.pdfViewer.container.dispatchEvent(e)}),t.on("presentationmodechanged",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("presentationmodechanged",!0,!0,{active:t.active,switchInProgress:t.switchInProgress}),window.dispatchEvent(e)}),t.on("outlineloaded",function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t.outlineCount}),t.source.container.dispatchEvent(e)})}function n(){return a||(a=new o.EventBus,i(a),a)}Object.defineProperty(e,"__esModule",{value:!0}),e.getGlobalEventBus=e.attachDOMEventsToEventBus=void 0;var o=r(1),a=null;e.attachDOMEventsToEventBus=i,e.getGlobalEventBus=n},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){if(!(t instanceof Array))return!1;var e=t.length,r=!0;if(e<2)return!1;var i=t[0];if(!("object"===(void 0===i?"undefined":o(i))&&"number"==typeof i.num&&(0|i.num)===i.num&&"number"==typeof i.gen&&(0|i.gen)===i.gen||"number"==typeof i&&(0|i)===i&&i>=0))return!1;var n=t[1];if("object"!==(void 0===n?"undefined":o(n))||"string"!=typeof n.name)return!1;switch(n.name){case"XYZ":if(5!==e)return!1;break;case"Fit":case"FitB":return 2===e;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==e)return!1;break;case"FitR":if(6!==e)return!1;r=!1;break;default:return!1}for(var a=2;a<e;a++){var s=t[a];if(!("number"==typeof s||r&&null===s))return!1}return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleLinkService=e.PDFLinkService=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=r(2),c=r(1),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.eventBus;i(this,t),this.eventBus=r||(0,s.getGlobalEventBus)(),this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return a(t,[{key:"setDocument",value:function t(e,r){this.baseUrl=r,this.pdfDocument=e,this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function t(e){this.pdfViewer=e}},{key:"setHistory",value:function t(e){this.pdfHistory=e}},{key:"navigateTo",value:function t(e){var r=this,i=function t(i){var n=i.namedDest,o=i.explicitDest,a=o[0],s=void 0;if(a instanceof Object){if(null===(s=r._cachedPageNumber(a)))return void r.pdfDocument.getPageIndex(a).then(function(e){r.cachePageRef(e+1,a),t({namedDest:n,explicitDest:o})}).catch(function(){console.error('PDFLinkService.navigateTo: "'+a+'" is not a valid page reference, for dest="'+e+'".')})}else{if((0|a)!==a)return void console.error('PDFLinkService.navigateTo: "'+a+'" is not a valid destination reference, for dest="'+e+'".');s=a+1}if(!s||s<1||s>r.pagesCount)return void console.error('PDFLinkService.navigateTo: "'+s+'" is not a valid page number, for dest="'+e+'".');r.pdfViewer.scrollPageIntoView({pageNumber:s,destArray:o}),r.pdfHistory&&r.pdfHistory.push({dest:o,hash:n,page:s})};new Promise(function(t,i){if("string"==typeof e)return void r.pdfDocument.getDestination(e).then(function(r){t({namedDest:e,explicitDest:r})});t({namedDest:"",explicitDest:e})}).then(function(t){if(!(t.explicitDest instanceof Array))return void console.error('PDFLinkService.navigateTo: "'+t.explicitDest+'" is not a valid destination array, for dest="'+e+'".');i(t)})}},{key:"getDestinationHash",value:function t(e){if("string"==typeof e)return this.getAnchorUrl("#"+escape(e));if(e instanceof Array){var r=JSON.stringify(e);return this.getAnchorUrl("#"+escape(r))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function t(e){return(this.baseUrl||"")+e}},{key:"setHash",value:function t(e){var r=void 0,i=void 0;if(e.indexOf("=")>=0){var o=(0,c.parseQueryString)(e);if("search"in o&&this.eventBus.dispatch("findfromurlhash",{source:this,query:o.search.replace(/"/g,""),phraseSearch:"true"===o.phrase}),"nameddest"in o)return this.pdfHistory&&this.pdfHistory.updateNextHashParam(o.nameddest),void this.navigateTo(o.nameddest);if("page"in o&&(r=0|o.page||1),"zoom"in o){var a=o.zoom.split(","),s=a[0],l=parseFloat(s);-1===s.indexOf("Fit")?i=[null,{name:"XYZ"},a.length>1?0|a[1]:null,a.length>2?0|a[2]:null,l?l/100:s]:"Fit"===s||"FitB"===s?i=[null,{name:s}]:"FitH"===s||"FitBH"===s||"FitV"===s||"FitBV"===s?i=[null,{name:s},a.length>1?0|a[1]:null]:"FitR"===s?5!==a.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:s},0|a[1],0|a[2],0|a[3],0|a[4]]:console.error('PDFLinkService.setHash: "'+s+'" is not a valid zoom value.')}i?this.pdfViewer.scrollPageIntoView({pageNumber:r||this.page,destArray:i,allowNegativeOffset:!0}):r&&(this.page=r),"pagemode"in o&&this.eventBus.dispatch("pagemode",{source:this,mode:o.pagemode})}else{/^\d+$/.test(e)&&e<=this.pagesCount&&(console.warn('PDFLinkService_setHash: specifying a page number directly after the hash symbol (#) is deprecated, please use the "#page='+e+'" form instead.'),this.page=0|e),i=unescape(e);try{i=JSON.parse(i),i instanceof Array||(i=i.toString())}catch(t){}if("string"==typeof i||n(i))return this.pdfHistory&&this.pdfHistory.updateNextHashParam(i),void this.navigateTo(i);console.error('PDFLinkService.setHash: "'+unescape(e)+'" is not a valid destination.')}}},{key:"executeNamedAction",value:function t(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":this.page>1&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}},{key:"onFileAttachmentAnnotation",value:function t(e){var r=e.id,i=e.filename,n=e.content;this.eventBus.dispatch("fileattachmentannotation",{source:this,id:r,filename:i,content:n})}},{key:"cachePageRef",value:function t(e,r){var i=r.num+" "+r.gen+" R";this._pagesRefCache[i]=e}},{key:"_cachedPageNumber",value:function t(e){var r=e.num+" "+e.gen+" R";return this._pagesRefCache&&this._pagesRefCache[r]||null}},{key:"pagesCount",get:function t(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function t(){return this.pdfViewer.currentPageNumber},set:function t(e){this.pdfViewer.currentPageNumber=e}}]),t}(),h=function(){function t(){i(this,t)}return a(t,[{key:"navigateTo",value:function t(e){}},{key:"getDestinationHash",value:function t(e){return"#"}},{key:"getAnchorUrl",value:function t(e){return"#"}},{key:"setHash",value:function t(e){}},{key:"executeNamedAction",value:function t(e){}},{key:"onFileAttachmentAnnotation",value:function t(e){var r=e.id,i=e.filename,n=e.content}},{key:"cachePageRef",value:function t(e,r){}},{key:"page",get:function t(){return 0},set:function t(e){}}]),t}();e.PDFLinkService=l,e.SimpleLinkService=h},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultAnnotationLayerFactory=e.AnnotationLayerBuilder=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=r(0),a=r(1),s=r(3),c=function(){function t(e){var r=e.pageDiv,n=e.pdfPage,o=e.linkService,s=e.downloadManager,c=e.renderInteractiveForms,l=void 0!==c&&c,h=e.l10n,u=void 0===h?a.NullL10n:h;i(this,t),this.pageDiv=r,this.pdfPage=n,this.linkService=o,this.downloadManager=s,this.renderInteractiveForms=l,this.l10n=u,this.div=null}return n(t,[{key:"render",value:function t(e){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";this.pdfPage.getAnnotations({intent:i}).then(function(t){var i={viewport:e.clone({dontFlip:!0}),div:r.div,annotations:t,page:r.pdfPage,renderInteractiveForms:r.renderInteractiveForms,linkService:r.linkService,downloadManager:r.downloadManager};if(r.div)o.AnnotationLayer.update(i);else{if(0===t.length)return;r.div=document.createElement("div"),r.div.className="annotationLayer",r.pageDiv.appendChild(r.div),i.div=r.div,o.AnnotationLayer.render(i),r.l10n.translate(r.div)}})}},{key:"hide",value:function t(){this.div&&this.div.setAttribute("hidden","true")}}]),t}(),l=function(){function t(){i(this,t)}return n(t,[{key:"createAnnotationLayerBuilder",value:function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.NullL10n;return new c({pageDiv:e,pdfPage:r,renderInteractiveForms:i,linkService:new s.SimpleLinkService,l10n:n})}}]),t}();e.AnnotationLayerBuilder=c,e.DefaultAnnotationLayerFactory=l},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFPageView=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=r(1),a=r(0),s=r(2),c=r(7),l=function(){function t(e){i(this,t);var r=e.container,n=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.pageLabel=null,this.rotation=0,this.scale=e.scale||o.DEFAULT_SCALE,this.viewport=n,this.pdfPageRotate=n.rotation,this.hasRestrictedScaling=!1,this.enhanceTextSelection=e.enhanceTextSelection||!1,this.renderInteractiveForms=e.renderInteractiveForms||!1,this.eventBus=e.eventBus||(0,s.getGlobalEventBus)(),this.renderingQueue=e.renderingQueue,this.textLayerFactory=e.textLayerFactory,this.annotationLayerFactory=e.annotationLayerFactory,this.renderer=e.renderer||o.RendererType.CANVAS,this.l10n=e.l10n||o.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=c.RenderingStates.INITIAL,this.resume=null,this.error=null,this.onBeforeDraw=null,this.onAfterDraw=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null;var a=document.createElement("div");a.className="page",a.style.width=Math.floor(this.viewport.width)+"px",a.style.height=Math.floor(this.viewport.height)+"px",a.setAttribute("data-page-number",this.id),this.div=a,r.appendChild(a)}return n(t,[{key:"setPdfPage",value:function t(e){this.pdfPage=e,this.pdfPageRotate=e.rotate;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport(this.scale*o.CSS_UNITS,r),this.stats=e.stats,this.reset()}},{key:"destroy",value:function t(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}},{key:"_resetZoomLayer",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var r=this.zoomLayer.firstChild;this.paintedViewportMap.delete(r),r.width=0,r.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.cancelRendering();var i=this.div;i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px";for(var n=i.childNodes,o=e&&this.zoomLayer||null,a=r&&this.annotationLayer&&this.annotationLayer.div||null,s=n.length-1;s>=0;s--){var c=n[s];o!==c&&a!==c&&i.removeChild(c)}i.removeAttribute("data-loaded"),a?this.annotationLayer.hide():this.annotationLayer=null,o||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",i.appendChild(this.loadingIconDiv)}},{key:"update",value:function t(e,r){this.scale=e||this.scale,void 0!==r&&(this.rotation=r);var i=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*o.CSS_UNITS,rotation:i}),this.svg)return this.cssTransform(this.svg,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0});var n=!1;if(this.canvas&&a.PDFJS.maxCanvasPixels>0){var s=this.outputScale;(Math.floor(this.viewport.width)*s.sx|0)*(Math.floor(this.viewport.height)*s.sy|0)>a.PDFJS.maxCanvasPixels&&(n=!0)}if(this.canvas){if(a.PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&n)return this.cssTransform(this.canvas,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0});this.zoomLayer||this.canvas.hasAttribute("hidden")||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)}},{key:"cancelRendering",value:function t(){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.renderingState=c.RenderingStates.INITIAL,this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null)}},{key:"cssTransform",value:function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.viewport.width,n=this.viewport.height,o=this.div;e.style.width=e.parentNode.style.width=o.style.width=Math.floor(i)+"px",e.style.height=e.parentNode.style.height=o.style.height=Math.floor(n)+"px";var s=this.viewport.rotation-this.paintedViewportMap.get(e).rotation,c=Math.abs(s),l=1,h=1;90!==c&&270!==c||(l=n/i,h=i/n);var t="rotate("+s+"deg) scale("+l+","+h+")";if(a.CustomStyle.setProp("transform",e,t),this.textLayer){var u=this.textLayer.viewport,f=this.viewport.rotation-u.rotation,d=Math.abs(f),p=i/u.width;90!==d&&270!==d||(p=i/u.height);var g=this.textLayer.textLayerDiv,v=void 0,m=void 0;switch(d){case 0:v=m=0;break;case 90:v=0,m="-"+g.style.height;break;case 180:v="-"+g.style.width,m="-"+g.style.height;break;case 270:v="-"+g.style.width,m=0;break;default:console.error("Bad rotation value.")}a.CustomStyle.setProp("transform",g,"rotate("+d+"deg) scale("+p+", "+p+") translate("+v+", "+m+")"),a.CustomStyle.setProp("transformOrigin",g,"0% 0%")}r&&this.annotationLayer&&this.annotationLayer.render(this.viewport,"display")}},{key:"getPagePoint",value:function t(e,r){return this.viewport.convertToPdfPoint(e,r)}},{key:"draw",value:function t(){var e=this;this.renderingState!==c.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset()),this.renderingState=c.RenderingStates.RUNNING;var r=this.pdfPage,i=this.div,n=document.createElement("div");n.style.width=i.style.width,n.style.height=i.style.height,n.classList.add("canvasWrapper"),this.annotationLayer&&this.annotationLayer.div?i.insertBefore(n,this.annotationLayer.div):i.appendChild(n);var s=null;if(this.textLayerFactory){var l=document.createElement("div");l.className="textLayer",l.style.width=n.style.width,l.style.height=n.style.height,this.annotationLayer&&this.annotationLayer.div?i.insertBefore(l,this.annotationLayer.div):i.appendChild(l),s=this.textLayerFactory.createTextLayerBuilder(l,this.id-1,this.viewport,this.enhanceTextSelection)}this.textLayer=s;var h=null;this.renderingQueue&&(h=function t(r){if(!e.renderingQueue.isHighestPriority(e))return e.renderingState=c.RenderingStates.PAUSED,void(e.resume=function(){e.renderingState=c.RenderingStates.RUNNING,r()});r()});var u=function t(n){return f===e.paintTask&&(e.paintTask=null),"cancelled"===n||n instanceof a.RenderingCancelledException?(e.error=null,Promise.resolve(void 0)):(e.renderingState=c.RenderingStates.FINISHED,e.loadingIconDiv&&(i.removeChild(e.loadingIconDiv),delete e.loadingIconDiv),e._resetZoomLayer(!0),e.error=n,e.stats=r.stats,e.onAfterDraw&&e.onAfterDraw(),e.eventBus.dispatch("pagerendered",{source:e,pageNumber:e.id,cssTransform:!1}),n?Promise.reject(n):Promise.resolve(void 0))},f=this.renderer===o.RendererType.SVG?this.paintOnSvg(n):this.paintOnCanvas(n);f.onRenderContinue=h,this.paintTask=f;var d=f.promise.then(function(){return u(null).then(function(){if(s){var t=r.streamTextContent({normalizeWhitespace:!0});s.setTextContentStream(t),s.render()}})},function(t){return u(t)});return this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(i,r,this.renderInteractiveForms,this.l10n)),this.annotationLayer.render(this.viewport,"display")),i.setAttribute("data-loaded",!0),this.onBeforeDraw&&this.onBeforeDraw(),d}},{key:"paintOnCanvas",value:function t(e){var r=(0,a.createPromiseCapability)(),i={promise:r.promise,onRenderContinue:function t(e){e()},cancel:function t(){y.cancel()}},n=this.viewport,s=document.createElement("canvas");s.id=this.renderingId,s.setAttribute("hidden","hidden");var c=!0,l=function t(){c&&(s.removeAttribute("hidden"),c=!1)};e.appendChild(s),this.canvas=s,s.mozOpaque=!0;var h=s.getContext("2d",{alpha:!1}),u=(0,o.getOutputScale)(h);if(this.outputScale=u,a.PDFJS.useOnlyCssZoom){var f=n.clone({scale:o.CSS_UNITS});u.sx*=f.width/n.width,u.sy*=f.height/n.height,u.scaled=!0}if(a.PDFJS.maxCanvasPixels>0){var d=n.width*n.height,p=Math.sqrt(a.PDFJS.maxCanvasPixels/d);u.sx>p||u.sy>p?(u.sx=p,u.sy=p,u.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}var g=(0,o.approximateFraction)(u.sx),v=(0,o.approximateFraction)(u.sy);s.width=(0,o.roundToDivide)(n.width*u.sx,g[0]),s.height=(0,o.roundToDivide)(n.height*u.sy,v[0]),s.style.width=(0,o.roundToDivide)(n.width,g[1])+"px",s.style.height=(0,o.roundToDivide)(n.height,v[1])+"px",this.paintedViewportMap.set(s,n);var m=u.scaled?[u.sx,0,0,u.sy,0,0]:null,b={canvasContext:h,transform:m,viewport:this.viewport,renderInteractiveForms:this.renderInteractiveForms},y=this.pdfPage.render(b);return y.onContinue=function(t){l(),i.onRenderContinue?i.onRenderContinue(t):t()},y.promise.then(function(){l(),r.resolve(void 0)},function(t){l(),r.reject(t)}),i}},{key:"paintOnSvg",value:function t(e){var r=this,i=!1,n=function t(){if(i)throw a.PDFJS.pdfjsNext?new a.RenderingCancelledException("Rendering cancelled, page "+r.id,"svg"):"cancelled"},s=this.pdfPage,l=this.viewport.clone({scale:o.CSS_UNITS});return{promise:s.getOperatorList().then(function(t){return n(),new a.SVGGraphics(s.commonObjs,s.objs).getSVG(t,l).then(function(t){n(),r.svg=t,r.paintedViewportMap.set(t,l),t.style.width=e.style.width,t.style.height=e.style.height,r.renderingState=c.RenderingStates.FINISHED,e.appendChild(t)})}),onRenderContinue:function t(e){e()},cancel:function t(){i=!0}}}},{key:"setPageLabel",value:function t(e){this.pageLabel="string"==typeof e?e:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"width",get:function t(){return this.viewport.width}},{key:"height",get:function t(){return this.viewport.height}}]),t}();e.PDFPageView=l},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultTextLayerFactory=e.TextLayerBuilder=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=r(2),a=r(0),s=300,c=function(){function t(e){var r=e.textLayerDiv,n=e.eventBus,a=e.pageIndex,s=e.viewport,c=e.findController,l=void 0===c?null:c,h=e.enhanceTextSelection,u=void 0!==h&&h;i(this,t),this.textLayerDiv=r,this.eventBus=n||(0,o.getGlobalEventBus)(),this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageIdx=a,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=s,this.textDivs=[],this.findController=l,this.textLayerRenderTask=null,this.enhanceTextSelection=u,this._bindMouse()}return n(t,[{key:"_finishRendering",value:function t(){if(this.renderingDone=!0,!this.enhanceTextSelection){var e=document.createElement("div");e.className="endOfContent",this.textLayerDiv.appendChild(e)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel(),this.textDivs=[];var i=document.createDocumentFragment();this.textLayerRenderTask=(0,a.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:i,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:r,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(function(){e.textLayerDiv.appendChild(i),e._finishRendering(),e.updateMatches()},function(t){})}}},{key:"cancel",value:function t(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null)}},{key:"setTextContentStream",value:function t(e){this.cancel(),this.textContentStream=e}},{key:"setTextContent",value:function t(e){this.cancel(),this.textContent=e}},{key:"convertMatches",value:function t(e,r){var i=0,n=0,o=this.textContentItemsStr,a=o.length-1,s=null===this.findController?0:this.findController.state.query.length,c=[];if(!e)return c;for(var l=0,h=e.length;l<h;l++){for(var u=e[l];i!==a&&u>=n+o[i].length;)n+=o[i].length,i++;i===o.length&&console.error("Could not find a matching mapping");var f={begin:{divIdx:i,offset:u-n}};for(u+=r?r[l]:s;i!==a&&u>n+o[i].length;)n+=o[i].length,i++;f.end={divIdx:i,offset:u-n},c.push(f)}return c}},{key:"renderMatches",value:function t(e){function r(t,e){var r=t.divIdx;o[r].textContent="",i(r,0,t.offset,e)}function i(t,e,r,i){var a=o[t],s=n[t].substring(e,r),c=document.createTextNode(s);if(i){var l=document.createElement("span");return l.className=i,l.appendChild(c),void a.appendChild(l)}a.appendChild(c)}if(0!==e.length){var n=this.textContentItemsStr,o=this.textDivs,a=null,s=this.pageIdx,c=null!==this.findController&&s===this.findController.selected.pageIdx,l=null===this.findController?-1:this.findController.selected.matchIdx,h=null!==this.findController&&this.findController.state.highlightAll,u={divIdx:-1,offset:void 0},f=l,d=f+1;if(h)f=0,d=e.length;else if(!c)return;for(var p=f;p<d;p++){var g=e[p],v=g.begin,m=g.end,b=c&&p===l,y=b?" selected":"";if(this.findController&&this.findController.updateMatchPosition(s,p,o,v.divIdx),a&&v.divIdx===a.divIdx?i(a.divIdx,a.offset,v.offset):(null!==a&&i(a.divIdx,a.offset,u.offset),r(v)),v.divIdx===m.divIdx)i(v.divIdx,v.offset,m.offset,"highlight"+y);else{i(v.divIdx,v.offset,u.offset,"highlight begin"+y);for(var _=v.divIdx+1,w=m.divIdx;_<w;_++)o[_].className="highlight middle"+y;r(m,"highlight end"+y)}a=m}a&&i(a.divIdx,a.offset,u.offset)}}},{key:"updateMatches",value:function t(){if(this.renderingDone){for(var e=this.matches,r=this.textDivs,i=this.textContentItemsStr,n=-1,o=0,a=e.length;o<a;o++){for(var s=e[o],c=Math.max(n,s.begin.divIdx),l=c,h=s.end.divIdx;l<=h;l++){var u=r[l];u.textContent=i[l],u.className=""}n=s.end.divIdx+1}if(null!==this.findController&&this.findController.active){var f=void 0,d=void 0;null!==this.findController&&(f=this.findController.pageMatches[this.pageIdx]||null,d=this.findController.pageMatchesLength?this.findController.pageMatchesLength[this.pageIdx]||null:null),this.matches=this.convertMatches(f,d),this.renderMatches(this.matches)}}}},{key:"_bindMouse",value:function t(){var e=this,r=this.textLayerDiv,i=null;r.addEventListener("mousedown",function(t){if(e.enhanceTextSelection&&e.textLayerRenderTask)return e.textLayerRenderTask.expandTextDivs(!0),void(i&&(clearTimeout(i),i=null));var n=r.querySelector(".endOfContent");if(n){var o=t.target!==r;if(o=o&&"none"!==window.getComputedStyle(n).getPropertyValue("-moz-user-select")){var a=r.getBoundingClientRect(),s=Math.max(0,(t.pageY-a.top)/a.height);n.style.top=(100*s).toFixed(2)+"%"}n.classList.add("active")}}),r.addEventListener("mouseup",function(){if(e.enhanceTextSelection&&e.textLayerRenderTask)return void(i=setTimeout(function(){e.textLayerRenderTask&&e.textLayerRenderTask.expandTextDivs(!1),i=null},300));var t=r.querySelector(".endOfContent");t&&(t.style.top="",t.classList.remove("active"))})}}]),t}(),l=function(){function t(){i(this,t)}return n(t,[{key:"createTextLayerBuilder",value:function t(e,r,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new c({textLayerDiv:e,pageIndex:r,viewport:i,enhanceTextSelection:n})}}]),t}();e.TextLayerBuilder=c,e.DefaultTextLayerFactory=l},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=3e4,a={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},s=function(){function t(){i(this,t),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return n(t,[{key:"setViewer",value:function t(e){this.pdfViewer=e}},{key:"setThumbnailViewer",value:function t(e){this.pdfThumbnailViewer=e}},{key:"isHighestPriority",value:function t(e){return this.highestPriorityPage===e.renderingId}},{key:"renderHighestPriority",value:function t(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(e)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function t(e,r,i){var n=e.views,o=n.length;if(0===o)return!1;for(var a=0;a<o;++a){var s=n[a].view;if(!this.isViewFinished(s))return s}if(i){var c=e.last.id;if(r[c]&&!this.isViewFinished(r[c]))return r[c]}else{var l=e.first.id-2;if(r[l]&&!this.isViewFinished(r[l]))return r[l]}return null}},{key:"isViewFinished",value:function t(e){return e.renderingState===a.FINISHED}},{key:"renderView",value:function t(e){var r=this;switch(e.renderingState){case a.FINISHED:return!1;case a.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case a.RUNNING:this.highestPriorityPage=e.renderingId;break;case a.INITIAL:this.highestPriorityPage=e.renderingId;var i=function t(){r.renderHighestPriority()};e.draw().then(i,i)}return!0}}]),t}();e.RenderingStates=a,e.PDFRenderingQueue=s},function(t,e,r){"use strict";function i(t,e){var r=document.createElement("a");if(r.click)r.href=t,r.target="_parent","download"in r&&(r.download=e),(document.body||document.documentElement).appendChild(r),r.click(),r.parentNode.removeChild(r);else{if(window.top===window&&t.split("#")[0]===window.location.href.split("#")[0]){var i=-1===t.indexOf("?")?"?":"&";t=t.replace(/#|$/,i+"$&")}window.open(t,"_parent")}}function n(){}Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadManager=void 0;var o=r(0);n.prototype={downloadUrl:function t(e,r){(0,o.createValidAbsoluteUrl)(e,"http://example.com")&&i(e+"#pdfjs.action=download",r)},downloadData:function t(e,r,n){if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([e],{type:n}),r);i((0,o.createObjectURL)(e,n,o.PDFJS.disableCreateObjectURL),r)},download:function t(e,r,n){return navigator.msSaveBlob?void(navigator.msSaveBlob(e,n)||this.downloadUrl(r,n)):o.PDFJS.disableCreateObjectURL?void this.downloadUrl(r,n):void i(URL.createObjectURL(e),n)}},e.DownloadManager=n},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.GenericL10n=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();r(13);var o=document.webL10n,a=function(){function t(e){i(this,t),this._lang=e,this._ready=new Promise(function(t,r){o.setLanguage(e,function(){t(o)})})}return n(t,[{key:"getDirection",value:function t(){return this._ready.then(function(t){return t.getDirection()})}},{key:"get",value:function t(e,r,i){return this._ready.then(function(t){return t.get(e,r,i)})}},{key:"translate",value:function t(e){return this._ready.then(function(t){return t.translate(e)})}}]),t}();e.GenericL10n=a},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFindController=e.FindState=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=r(0),a=r(1),s={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},c=-50,l=-400,h=250,u={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},f=function(){function t(e){var r=e.pdfViewer;i(this,t),this.pdfViewer=r,this.onUpdateResultsCount=null,this.onUpdateState=null,this.reset();var n=Object.keys(u).join("");this.normalizationRegex=new RegExp("["+n+"]","g")}return n(t,[{key:"reset",value:function t(){var e=this;this.startedTextExtraction=!1,this.extractTextPromises=[],this.pendingFindMatches=Object.create(null),this.active=!1,this.pageContents=[],this.pageMatches=[],this.pageMatchesLength=null,this.matchCount=0,this.selected={pageIdx:-1,matchIdx:-1},this.offset={pageIdx:null,matchIdx:null},this.pagesToSearch=null,this.resumePageIdx=null,this.state=null,this.dirtyMatch=!1,this.findTimeout=null,this._firstPagePromise=new Promise(function(t){e.resolveFirstPage=t})}},{key:"normalize",value:function t(e){return e.replace(this.normalizationRegex,function(t){return u[t]})}},{key:"_prepareMatches",value:function t(e,r,i){function n(t,e){var r=t[e],i=t[e+1];if(e<t.length-1&&r.match===i.match)return r.skipped=!0,!0;for(var n=e-1;n>=0;n--){var o=t[n];if(!o.skipped){if(o.match+o.matchLength<r.match)break;if(o.match+o.matchLength>=r.match+r.matchLength)return r.skipped=!0,!0}}return!1}e.sort(function(t,e){return t.match===e.match?t.matchLength-e.matchLength:t.match-e.match});for(var o=0,a=e.length;o<a;o++)n(e,o)||(r.push(e[o].match),i.push(e[o].matchLength))}},{key:"calcFindPhraseMatch",value:function t(e,r,i){for(var n=[],o=e.length,a=-o;;){if(-1===(a=i.indexOf(e,a+o)))break;n.push(a)}this.pageMatches[r]=n}},{key:"calcFindWordMatch",value:function t(e,r,i){for(var n=[],o=e.match(/\S+/g),a=0,s=o.length;a<s;a++)for(var c=o[a],l=c.length,h=-l;;){if(-1===(h=i.indexOf(c,h+l)))break;n.push({match:h,matchLength:l,skipped:!1})}this.pageMatchesLength||(this.pageMatchesLength=[]),this.pageMatchesLength[r]=[],this.pageMatches[r]=[],this._prepareMatches(n,this.pageMatches[r],this.pageMatchesLength[r])}},{key:"calcFindMatch",value:function t(e){var r=this.normalize(this.pageContents[e]),i=this.normalize(this.state.query),n=this.state.caseSensitive,o=this.state.phraseSearch;0!==i.length&&(n||(r=r.toLowerCase(),i=i.toLowerCase()),o?this.calcFindPhraseMatch(i,e,r):this.calcFindWordMatch(i,e,r),this.updatePage(e),this.resumePageIdx===e&&(this.resumePageIdx=null,this.nextPageMatch()),this.pageMatches[e].length>0&&(this.matchCount+=this.pageMatches[e].length,this.updateUIResultsCount()))}},{key:"extractText",value:function t(){var e=this;if(!this.startedTextExtraction){this.startedTextExtraction=!0,this.pageContents.length=0;for(var r=Promise.resolve(),i=function t(i,n){var a=(0,o.createPromiseCapability)();e.extractTextPromises[i]=a.promise,r=r.then(function(){return e.pdfViewer.getPageTextContent(i).then(function(t){for(var r=t.items,n=[],o=0,s=r.length;o<s;o++)n.push(r[o].str);e.pageContents[i]=n.join(""),a.resolve(i)})})},n=0,a=this.pdfViewer.pagesCount;n<a;n++)i(n,a)}}},{key:"executeCommand",value:function t(e,r){var i=this;null!==this.state&&"findagain"===e||(this.dirtyMatch=!0),this.state=r,this.updateUIState(s.PENDING),this._firstPagePromise.then(function(){i.extractText(),clearTimeout(i.findTimeout),"find"===e?i.findTimeout=setTimeout(i.nextMatch.bind(i),250):i.nextMatch()})}},{key:"updatePage",value:function t(e){this.selected.pageIdx===e&&(this.pdfViewer.currentPageNumber=e+1);var r=this.pdfViewer.getPageView(e);r.textLayer&&r.textLayer.updateMatches()}},{key:"nextMatch",value:function t(){var e=this,r=this.state.findPrevious,i=this.pdfViewer.currentPageNumber-1,n=this.pdfViewer.pagesCount;if(this.active=!0,this.dirtyMatch){this.dirtyMatch=!1,this.selected.pageIdx=this.selected.matchIdx=-1,this.offset.pageIdx=i,this.offset.matchIdx=null,this.hadMatch=!1,this.resumePageIdx=null,this.pageMatches=[],this.matchCount=0,this.pageMatchesLength=null;for(var o=0;o<n;o++)this.updatePage(o),o in this.pendingFindMatches||(this.pendingFindMatches[o]=!0,this.extractTextPromises[o].then(function(t){delete e.pendingFindMatches[t],e.calcFindMatch(t)}))}if(""===this.state.query)return void this.updateUIState(s.FOUND);if(!this.resumePageIdx){var a=this.offset;if(this.pagesToSearch=n,null!==a.matchIdx){var c=this.pageMatches[a.pageIdx].length;if(!r&&a.matchIdx+1<c||r&&a.matchIdx>0)return this.hadMatch=!0,a.matchIdx=r?a.matchIdx-1:a.matchIdx+1,void this.updateMatch(!0);this.advanceOffsetPage(r)}this.nextPageMatch()}}},{key:"matchesReady",value:function t(e){var r=this.offset,i=e.length,n=this.state.findPrevious;return i?(this.hadMatch=!0,r.matchIdx=n?i-1:0,this.updateMatch(!0),!0):(this.advanceOffsetPage(n),!!(r.wrapped&&(r.matchIdx=null,this.pagesToSearch<0))&&(this.updateMatch(!1),!0))}},{key:"updateMatchPosition",value:function t(e,r,i,n){if(this.selected.matchIdx===r&&this.selected.pageIdx===e){var o={top:-50,left:-400};(0,a.scrollIntoView)(i[n],o,!0)}}},{key:"nextPageMatch",value:function t(){null!==this.resumePageIdx&&console.error("There can only be one pending page.");var e=null;do{var r=this.offset.pageIdx;if(!(e=this.pageMatches[r])){this.resumePageIdx=r;break}}while(!this.matchesReady(e))}},{key:"advanceOffsetPage",value:function t(e){var r=this.offset,i=this.extractTextPromises.length;r.pageIdx=e?r.pageIdx-1:r.pageIdx+1,r.matchIdx=null,this.pagesToSearch--,(r.pageIdx>=i||r.pageIdx<0)&&(r.pageIdx=e?i-1:0,r.wrapped=!0)}},{key:"updateMatch",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=s.NOT_FOUND,i=this.offset.wrapped;if(this.offset.wrapped=!1,e){var n=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx,this.selected.matchIdx=this.offset.matchIdx,r=i?s.WRAPPED:s.FOUND,-1!==n&&n!==this.selected.pageIdx&&this.updatePage(n)}this.updateUIState(r,this.state.findPrevious),-1!==this.selected.pageIdx&&this.updatePage(this.selected.pageIdx)}},{key:"updateUIResultsCount",value:function t(){this.onUpdateResultsCount&&this.onUpdateResultsCount(this.matchCount)}},{key:"updateUIState",value:function t(e,r){this.onUpdateState&&this.onUpdateState(e,r,this.matchCount)}}]),t}();e.FindState=s,e.PDFFindController=f},function(t,e,r){"use strict";function i(t){this.linkService=t.linkService,this.eventBus=t.eventBus||(0,n.getGlobalEventBus)(),this.initialized=!1,this.initialDestination=null,this.initialBookmark=null}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFHistory=void 0;var n=r(2);i.prototype={initialize:function t(e){function r(){a.previousHash=window.location.hash.slice(1),a._pushToHistory({hash:a.previousHash},!1,!0),a._updatePreviousBookmark()}function i(t,e){function r(){window.removeEventListener("popstate",r),window.addEventListener("popstate",i),a._pushToHistory(t,!1,!0),history.forward()}function i(){window.removeEventListener("popstate",i),a.allowHashChange=!0,a.historyUnlocked=!0,e()}a.historyUnlocked=!1,a.allowHashChange=!1,window.addEventListener("popstate",r),history.back()}function n(){var t=a._getPreviousParams(null,!0);if(t){var e=!a.current.dest&&a.current.hash!==a.previousHash;a._pushToHistory(t,!1,e),a._updatePreviousBookmark()}window.removeEventListener("beforeunload",n)}this.initialized=!0,this.reInitialized=!1,this.allowHashChange=!0,this.historyUnlocked=!0,this.isViewerInPresentationMode=!1,this.previousHash=window.location.hash.substring(1),this.currentBookmark="",this.currentPage=0,this.updatePreviousBookmark=!1,this.previousBookmark="",this.previousPage=0,this.nextHashParam="",this.fingerprint=e,this.currentUid=this.uid=0,this.current={};var o=window.history.state;this._isStateObjectDefined(o)?(o.target.dest?this.initialDestination=o.target.dest:this.initialBookmark=o.target.hash,this.currentUid=o.uid,this.uid=o.uid+1,this.current=o.target):(o&&o.fingerprint&&this.fingerprint!==o.fingerprint&&(this.reInitialized=!0),this._pushOrReplaceState({fingerprint:this.fingerprint},!0));var a=this;window.addEventListener("popstate",function t(e){if(a.historyUnlocked){if(e.state)return void a._goTo(e.state);if(0===a.uid){i(a.previousHash&&a.currentBookmark&&a.previousHash!==a.currentBookmark?{hash:a.currentBookmark,page:a.currentPage}:{page:1},function(){r()})}else r()}}),window.addEventListener("beforeunload",n),window.addEventListener("pageshow",function t(e){window.addEventListener("beforeunload",n)}),a.eventBus.on("presentationmodechanged",function(t){a.isViewerInPresentationMode=t.active})},clearHistoryState:function t(){this._pushOrReplaceState(null,!0)},_isStateObjectDefined:function t(e){return!!(e&&e.uid>=0&&e.fingerprint&&this.fingerprint===e.fingerprint&&e.target&&e.target.hash)},_pushOrReplaceState:function t(e,r){r?window.history.replaceState(e,"",document.URL):window.history.pushState(e,"",document.URL)},get isHashChangeUnlocked(){return!this.initialized||this.allowHashChange},_updatePreviousBookmark:function t(){this.updatePreviousBookmark&&this.currentBookmark&&this.currentPage&&(this.previousBookmark=this.currentBookmark,this.previousPage=this.currentPage,this.updatePreviousBookmark=!1)},updateCurrentBookmark:function t(e,r){this.initialized&&(this.currentBookmark=e.substring(1),this.currentPage=0|r,this._updatePreviousBookmark())},updateNextHashParam:function t(e){this.initialized&&(this.nextHashParam=e)},push:function t(e,r){if(this.initialized&&this.historyUnlocked){if(e.dest&&!e.hash&&(e.hash=this.current.hash&&this.current.dest&&this.current.dest===e.dest?this.current.hash:this.linkService.getDestinationHash(e.dest).split("#")[1]),e.page&&(e.page|=0),r){var i=window.history.state.target;return i||(this._pushToHistory(e,!1),this.previousHash=window.location.hash.substring(1)),this.updatePreviousBookmark=!this.nextHashParam,void(i&&this._updatePreviousBookmark())}if(this.nextHashParam){if(this.nextHashParam===e.hash)return this.nextHashParam=null,void(this.updatePreviousBookmark=!0);this.nextHashParam=null}e.hash?this.current.hash?this.current.hash!==e.hash?this._pushToHistory(e,!0):(!this.current.page&&e.page&&this._pushToHistory(e,!1,!0),this.updatePreviousBookmark=!0):this._pushToHistory(e,!0):this.current.page&&e.page&&this.current.page!==e.page&&this._pushToHistory(e,!0)}},_getPreviousParams:function t(e,r){if(!this.currentBookmark||!this.currentPage)return null;if(this.updatePreviousBookmark&&(this.updatePreviousBookmark=!1),this.uid>0&&(!this.previousBookmark||!this.previousPage))return null;if(!this.current.dest&&!e||r){if(this.previousBookmark===this.currentBookmark)return null}else{if(!this.current.page&&!e)return null;if(this.previousPage===this.currentPage)return null}var i={hash:this.currentBookmark,page:this.currentPage};return this.isViewerInPresentationMode&&(i.hash=null),i},_stateObj:function t(e){return{fingerprint:this.fingerprint,uid:this.uid,target:e}},_pushToHistory:function t(e,r,i){if(this.initialized){if(!e.hash&&e.page&&(e.hash="page="+e.page),r&&!i){var n=this._getPreviousParams();if(n){var o=!this.current.dest&&this.current.hash!==this.previousHash;this._pushToHistory(n,!1,o)}}this._pushOrReplaceState(this._stateObj(e),i||0===this.uid),this.currentUid=this.uid++,this.current=e,this.updatePreviousBookmark=!0}},_goTo:function t(e){if(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(e)){if(!this.reInitialized&&e.uid<this.currentUid){var r=this._getPreviousParams(!0);if(r)return this._pushToHistory(this.current,!1),this._pushToHistory(r,!1),this.currentUid=e.uid,void window.history.back()}this.historyUnlocked=!1,e.target.dest?this.linkService.navigateTo(e.target.dest):this.linkService.setHash(e.target.hash),this.currentUid=e.uid,e.uid>this.uid&&(this.uid=e.uid),this.current=e.target,this.updatePreviousBookmark=!0;var i=window.location.hash.substring(1);this.previousHash!==i&&(this.allowHashChange=!1),this.previousHash=i,this.historyUnlocked=!0}},back:function t(){this.go(-1)},forward:function t(){this.go(1)},go:function t(e){if(this.initialized&&this.historyUnlocked){var r=window.history.state;-1===e&&r&&r.uid>0?window.history.back():1===e&&r&&r.uid<this.uid-1&&window.history.forward()}}},e.PDFHistory=i},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){var e=[];this.push=function r(i){var n=e.indexOf(i);n>=0&&e.splice(n,1),e.push(i),e.length>t&&e.shift().destroy()},this.resize=function(r){for(t=r;e.length>t;)e.shift().destroy()}}function o(t,e){return e===t||Math.abs(e-t)<1e-15}function a(t){return t.width<=t.height}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFViewer=e.PresentationModeState=void 0;var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),c=r(0),l=r(1),h=r(7),u=r(4),f=r(2),d=r(5),p=r(3),g=r(6),v={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},m=10,b=function(){function t(e){i(this,t),this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,this.eventBus=e.eventBus||(0,f.getGlobalEventBus)(),this.linkService=e.linkService||new p.SimpleLinkService,this.downloadManager=e.downloadManager||null,this.removePageBorders=e.removePageBorders||!1,this.enhanceTextSelection=e.enhanceTextSelection||!1,this.renderInteractiveForms=e.renderInteractiveForms||!1,this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.renderer=e.renderer||l.RendererType.CANVAS,this.l10n=e.l10n||l.NullL10n,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new h.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue,this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=v.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders")}return s(t,[{key:"getPageView",value:function t(e){return this._pages[e]}},{key:"_setCurrentPageNumber",value:function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===e)return void(r&&this._resetCurrentPageView());if(!(0<e&&e<=this.pagesCount))return void console.error('PDFViewer._setCurrentPageNumber: "'+e+'" is out of bounds.');var i={source:this,pageNumber:e,pageLabel:this._pageLabels&&this._pageLabels[e-1]};this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",i),this.eventBus.dispatch("pagechange",i),r&&this._resetCurrentPageView()}},{key:"setDocument",value:function t(e){var r=this;if(this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=e,e){var i=e.numPages,n=(0,c.createPromiseCapability)();this.pagesPromise=n.promise,n.promise.then(function(){r._pageViewsReady=!0,r.eventBus.dispatch("pagesloaded",{source:r,pagesCount:i})});var o=!1,a=(0,c.createPromiseCapability)();this.onePageRendered=a.promise;var s=function t(e){e.onBeforeDraw=function(){r._buffer.push(e)},e.onAfterDraw=function(){o||(o=!0,a.resolve())}},h=e.getPage(1);return this.firstPagePromise=h,h.then(function(t){for(var o=r.currentScale,h=t.getViewport(o*l.CSS_UNITS),u=1;u<=i;++u){var f=null;c.PDFJS.disableTextLayer||(f=r);var p=new d.PDFPageView({container:r.viewer,eventBus:r.eventBus,id:u,scale:o,defaultViewport:h.clone(),renderingQueue:r.renderingQueue,textLayerFactory:f,annotationLayerFactory:r,enhanceTextSelection:r.enhanceTextSelection,renderInteractiveForms:r.renderInteractiveForms,renderer:r.renderer,l10n:r.l10n});s(p),r._pages.push(p)}a.promise.then(function(){if(c.PDFJS.disableAutoFetch)return void n.resolve();for(var t=i,o=function i(o){e.getPage(o).then(function(e){var i=r._pages[o-1];i.pdfPage||i.setPdfPage(e),r.linkService.cachePageRef(o,e.ref),0==--t&&n.resolve()})},a=1;a<=i;++a)o(a)}),r.eventBus.dispatch("pagesinit",{source:r}),r.defaultRenderingQueue&&r.update(),r.findController&&r.findController.resolveFirstPage()})}}},{key:"setPageLabels",value:function t(e){if(this.pdfDocument){e?e instanceof Array&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("PDFViewer.setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var r=0,i=this._pages.length;r<i;r++){var n=this._pages[r],o=this._pageLabels&&this._pageLabels[r];n.setPageLabel(o)}}}},{key:"_resetView",value:function t(){this._pages=[],this._currentPageNumber=1,this._currentScale=l.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this._buffer=new n(10),this._location=null,this._pagesRotation=0,this._pagesRequests=[],this._pageViewsReady=!1,this.viewer.textContent=""}},{key:"_scrollUpdate",value:function t(){0!==this.pagesCount&&this.update()}},{key:"_setScaleDispatchEvent",value:function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={source:this,scale:e,presetValue:i?r:void 0};this.eventBus.dispatch("scalechanging",n),this.eventBus.dispatch("scalechange",n)}},{key:"_setScaleUpdatePages",value:function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._currentScaleValue=r.toString(),o(this._currentScale,e))return void(n&&this._setScaleDispatchEvent(e,r,!0));for(var a=0,s=this._pages.length;a<s;a++)this._pages[a].update(e);if(this._currentScale=e,!i){var l=this._currentPageNumber,h=void 0;!this._location||c.PDFJS.ignoreCurrentPositionOnZoom||this.isInPresentationMode||this.isChangingPresentationMode||(l=this._location.pageNumber,h=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:l,destArray:h,allowNegativeOffset:!0})}this._setScaleDispatchEvent(e,r,n),this.defaultRenderingQueue&&this.update()}},{key:"_setScale",value:function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=parseFloat(e);if(i>0)this._setScaleUpdatePages(i,e,r,!1);else{var n=this._pages[this._currentPageNumber-1];if(!n)return;var o=this.isInPresentationMode||this.removePageBorders?0:l.SCROLLBAR_PADDING,a=this.isInPresentationMode||this.removePageBorders?0:l.VERTICAL_PADDING,s=(this.container.clientWidth-o)/n.width*n.scale,c=(this.container.clientHeight-a)/n.height*n.scale;switch(e){case"page-actual":i=1;break;case"page-width":i=s;break;case"page-height":i=c;break;case"page-fit":i=Math.min(s,c);break;case"auto":var h=n.width>n.height,u=h?Math.min(c,s):s;i=Math.min(l.MAX_AUTO_SCALE,u);break;default:return void console.error('PDFViewer._setScale: "'+e+'" is an unknown zoom value.')}this._setScaleUpdatePages(i,e,r,!0)}}},{key:"_resetCurrentPageView",value:function t(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var e=this._pages[this._currentPageNumber-1];(0,l.scrollIntoView)(e.div)}},{key:"scrollPageIntoView",value:function t(e){if(this.pdfDocument){if(arguments.length>1||"number"==typeof e){console.warn("Call of scrollPageIntoView() with obsolete signature.");var r={};"number"==typeof e&&(r.pageNumber=e),arguments[1]instanceof Array&&(r.destArray=arguments[1]),e=r}var i=e.pageNumber||0,n=e.destArray||null,o=e.allowNegativeOffset||!1;if(this.isInPresentationMode||!n)return void this._setCurrentPageNumber(i,!0);var a=this._pages[i-1];if(!a)return void console.error('PDFViewer.scrollPageIntoView: Invalid "pageNumber" parameter.');var s=0,c=0,h=0,u=0,f=void 0,d=void 0,p=a.rotation%180!=0,g=(p?a.height:a.width)/a.scale/l.CSS_UNITS,v=(p?a.width:a.height)/a.scale/l.CSS_UNITS,m=0;switch(n[1].name){case"XYZ":s=n[2],c=n[3],m=n[4],s=null!==s?s:0,c=null!==c?c:v;break;case"Fit":case"FitB":m="page-fit";break;case"FitH":case"FitBH":c=n[2],m="page-width",null===c&&this._location&&(s=this._location.left,c=this._location.top);break;case"FitV":case"FitBV":s=n[2],h=g,u=v,m="page-height";break;case"FitR":s=n[2],c=n[3],h=n[4]-s,u=n[5]-c;var b=this.removePageBorders?0:l.SCROLLBAR_PADDING,y=this.removePageBorders?0:l.VERTICAL_PADDING;f=(this.container.clientWidth-b)/h/l.CSS_UNITS,d=(this.container.clientHeight-y)/u/l.CSS_UNITS,m=Math.min(Math.abs(f),Math.abs(d));break;default:return void console.error('PDFViewer.scrollPageIntoView: "'+n[1].name+'" is not a valid destination type.')}if(m&&m!==this._currentScale?this.currentScaleValue=m:this._currentScale===l.UNKNOWN_SCALE&&(this.currentScaleValue=l.DEFAULT_SCALE_VALUE),"page-fit"===m&&!n[4])return void(0,l.scrollIntoView)(a.div);var _=[a.viewport.convertToViewportPoint(s,c),a.viewport.convertToViewportPoint(s+h,c+u)],w=Math.min(_[0][0],_[1][0]),S=Math.min(_[0][1],_[1][1]);o||(w=Math.max(w,0),S=Math.max(S,0)),(0,l.scrollIntoView)(a.div,{left:w,top:S})}}},{key:"_updateLocation",value:function t(e){var r=this._currentScale,i=this._currentScaleValue,n=parseFloat(i)===r?Math.round(1e4*r)/100:i,o=e.id,a="#page="+o;a+="&zoom="+n;var s=this._pages[o-1],c=this.container,l=s.getPagePoint(c.scrollLeft-e.x,c.scrollTop-e.y),h=Math.round(l[0]),u=Math.round(l[1]);a+=","+h+","+u,this._location={pageNumber:o,scale:n,top:u,left:h,pdfOpenParams:a}}},{key:"update",value:function t(){var e=this._getVisiblePages(),r=e.views;if(0!==r.length){var i=Math.max(10,2*r.length+1);this._buffer.resize(i),this.renderingQueue.renderHighestPriority(e);for(var n=this._currentPageNumber,o=e.first,a=!1,s=0,c=r.length;s<c;++s){var l=r[s];if(l.percent<100)break;if(l.id===n){a=!0;break}}a||(n=r[0].id),this.isInPresentationMode||this._setCurrentPageNumber(n),this._updateLocation(o),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"containsElement",value:function t(e){return this.container.contains(e)}},{key:"focus",value:function t(){this.container.focus()}},{key:"_getVisiblePages",value:function t(){if(!this.isInPresentationMode)return(0,l.getVisibleElements)(this.container,this._pages,!0);var e=[],r=this._pages[this._currentPageNumber-1];return e.push({id:r.id,view:r}),{first:r,last:r,views:e}}},{key:"cleanup",value:function t(){for(var e=0,r=this._pages.length;e<r;e++)this._pages[e]&&this._pages[e].renderingState!==h.RenderingStates.FINISHED&&this._pages[e].reset()}},{key:"_cancelRendering",value:function t(){for(var e=0,r=this._pages.length;e<r;e++)this._pages[e]&&this._pages[e].cancelRendering()}},{key:"_ensurePdfPageLoaded",value:function t(e){var r=this;if(e.pdfPage)return Promise.resolve(e.pdfPage);var i=e.id;if(this._pagesRequests[i])return this._pagesRequests[i];var n=this.pdfDocument.getPage(i).then(function(t){return e.pdfPage||e.setPdfPage(t),r._pagesRequests[i]=null,t});return this._pagesRequests[i]=n,n}},{key:"forceRendering",value:function t(e){var r=this,i=e||this._getVisiblePages(),n=this.renderingQueue.getHighestPriority(i,this._pages,this.scroll.down);return!!n&&(this._ensurePdfPageLoaded(n).then(function(){r.renderingQueue.renderView(n)}),!0)}},{key:"getPageTextContent",value:function t(e){return this.pdfDocument.getPage(e+1).then(function(t){return t.getTextContent({normalizeWhitespace:!0})})}},{key:"createTextLayerBuilder",value:function t(e,r,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new g.TextLayerBuilder({textLayerDiv:e,eventBus:this.eventBus,pageIndex:r,viewport:i,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&n})}},{key:"createAnnotationLayerBuilder",value:function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.NullL10n;return new u.AnnotationLayerBuilder({pageDiv:e,pdfPage:r,renderInteractiveForms:i,linkService:this.linkService,downloadManager:this.downloadManager,l10n:n})}},{key:"setFindController",value:function t(e){this.findController=e}},{key:"getPagesOverview",value:function t(){var e=this._pages.map(function(t){var e=t.pdfPage.getViewport(1);return{width:e.width,height:e.height,rotation:e.rotation}});if(!this.enablePrintAutoRotate)return e;var r=a(e[0]);return e.map(function(t){return r===a(t)?t:{width:t.height,height:t.width,rotation:(t.rotation+90)%360}})}},{key:"pagesCount",get:function t(){return this._pages.length}},{key:"pageViewsReady",get:function t(){return this._pageViewsReady}},{key:"currentPageNumber",get:function t(){return this._currentPageNumber},set:function t(e){if((0|e)!==e)throw new Error("Invalid page number.");this.pdfDocument&&this._setCurrentPageNumber(e,!0)}},{key:"currentPageLabel",get:function t(){return this._pageLabels&&this._pageLabels[this._currentPageNumber-1]},set:function t(e){var r=0|e;if(this._pageLabels){var i=this._pageLabels.indexOf(e);i>=0&&(r=i+1)}this.currentPageNumber=r}},{key:"currentScale",get:function t(){return this._currentScale!==l.UNKNOWN_SCALE?this._currentScale:l.DEFAULT_SCALE},set:function t(e){if(isNaN(e))throw new Error("Invalid numeric scale");this.pdfDocument&&this._setScale(e,!1)}},{key:"currentScaleValue",get:function t(){return this._currentScaleValue},set:function t(e){this.pdfDocument&&this._setScale(e,!1)}},{key:"pagesRotation",get:function t(){return this._pagesRotation},set:function t(e){if("number"!=typeof e||e%90!=0)throw new Error("Invalid pages rotation angle.");if(this.pdfDocument){this._pagesRotation=e;for(var r=0,i=this._pages.length;r<i;r++){var n=this._pages[r];n.update(n.scale,e)}this._setScale(this._currentScaleValue,!0),this.defaultRenderingQueue&&this.update()}}},{key:"isInPresentationMode",get:function t(){return this.presentationModeState===v.FULLSCREEN}},{key:"isChangingPresentationMode",get:function t(){return this.presentationModeState===v.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function t(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"hasEqualPageSizes",get:function t(){for(var e=this._pages[0],r=1,i=this._pages.length;r<i;++r){var n=this._pages[r];if(n.width!==e.width||n.height!==e.height)return!1}return!0}}]),t}();e.PresentationModeState=v,e.PDFViewer=b},function(t,e,r){"use strict";document.webL10n=function(t,e,r){function i(){return e.querySelectorAll('link[type="application/l10n"]')}function n(){var t=e.querySelector('script[type="application/l10n"]');return t?JSON.parse(t.innerHTML):null}function o(t){return t?t.querySelectorAll("*[data-l10n-id]"):[]}function a(t){if(!t)return{};var e=t.getAttribute("data-l10n-id"),r=t.getAttribute("data-l10n-args"),i={};if(r)try{i=JSON.parse(r)}catch(t){console.warn("could not parse arguments for #"+e)}return{id:e,args:i}}function s(t){var r=e.createEvent("Event");r.initEvent("localized",!0,!1),r.language=t,e.dispatchEvent(r)}function c(t,e,r){e=e||function t(e){},r=r||function t(){};var i=new XMLHttpRequest;i.open("GET",t,A),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=utf-8"),i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0===i.status?e(i.responseText):r())},i.onerror=r,i.ontimeout=r;try{i.send(null)}catch(t){r()}}function l(t,e,r,i){function n(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function o(t,r){function i(t,r,i){function c(){for(;;){if(!p.length)return void i();var t=p.shift();if(!h.test(t)){if(r){if(b=u.exec(t)){g=b[1].toLowerCase(),m="*"!==g&&g!==e&&g!==v;continue}if(m)continue;if(b=f.exec(t))return void o(a+b[1],c)}var l=t.match(d);l&&3==l.length&&(s[l[1]]=n(l[2]))}}}var p=t.replace(l,"").split(/[\r\n]+/),g="*",v=e.split("-",1)[0],m=!1,b="";c()}function o(t,e){c(t,function(t){i(t,!1,e)},function(){console.warn(t+" not found."),e()})}var s={},l=/^\s*|\s*$/,h=/^\s*#|^\s*$/,u=/^\s*\[(.*)\]\s*$/,f=/^\s*@import\s+url\((.*)\)\s*$/i,d=/^([^=\s]*)\s*=\s*(.+)$/;i(t,!0,function(){r(s)})}var a=t.replace(/[^\/]*$/,"")||"./";c(t,function(t){_+=t,o(t,function(t){for(var e in t){var i,n,o=e.lastIndexOf(".");o>0?(i=e.substring(0,o),n=e.substr(o+1)):(i=e,n=w),y[i]||(y[i]={}),y[i][n]=t[e]}r&&r()})},i)}function h(t,e){function r(t){var e=t.href;this.load=function(t,r){l(e,t,r,function(){console.warn(e+" not found."),console.warn('"'+t+'" resource not found'),S="",r()})}}t&&(t=t.toLowerCase()),e=e||function t(){},u(),S=t;var o=i(),a=o.length;if(0===a){var c=n();if(c&&c.locales&&c.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(y=c.locales[t])){var h=c.default_locale.toLowerCase();for(var f in c.locales){if((f=f.toLowerCase())===t){y=c.locales[t];break}f===h&&(y=c.locales[h])}}e()}else console.log("no resource to load, early way out");return s(t),void(C="complete")}var d=null,p=0;d=function r(){++p>=a&&(e(),s(t),C="complete")};for(var g=0;g<a;g++){new r(o[g]).load(t,d)}}function u(){y={},_="",S=""}function f(t){function e(t,e){return-1!==e.indexOf(t)}function r(t,e,r){return e<=t&&t<=r}var i={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3},n={0:function t(e){return"other"},1:function t(e){return r(e%100,3,10)?"few":0===e?"zero":r(e%100,11,99)?"many":2==e?"two":1==e?"one":"other"},2:function t(e){return 0!==e&&e%10==0?"many":2==e?"two":1==e?"one":"other"},3:function t(e){return 1==e?"one":"other"},4:function t(e){return r(e,0,1)?"one":"other"},5:function t(e){return r(e,0,2)&&2!=e?"one":"other"},6:function t(e){return 0===e?"zero":e%10==1&&e%100!=11?"one":"other"},7:function t(e){return 2==e?"two":1==e?"one":"other"},8:function t(e){return r(e,3,6)?"few":r(e,7,10)?"many":2==e?"two":1==e?"one":"other"},9:function t(e){return 0===e||1!=e&&r(e%100,1,19)?"few":1==e?"one":"other"},10:function t(e){return r(e%10,2,9)&&!r(e%100,11,19)?"few":e%10!=1||r(e%100,11,19)?"other":"one"},11:function t(e){return r(e%10,2,4)&&!r(e%100,12,14)?"few":e%10==0||r(e%10,5,9)||r(e%100,11,14)?"many":e%10==1&&e%100!=11?"one":"other"},12:function t(e){return r(e,2,4)?"few":1==e?"one":"other"},13:function t(e){return r(e%10,2,4)&&!r(e%100,12,14)?"few":1!=e&&r(e%10,0,1)||r(e%10,5,9)||r(e%100,12,14)?"many":1==e?"one":"other"},14:function t(e){return r(e%100,3,4)?"few":e%100==2?"two":e%100==1?"one":"other"},15:function t(e){return 0===e||r(e%100,2,10)?"few":r(e%100,11,19)?"many":1==e?"one":"other"},16:function t(e){return e%10==1&&11!=e?"one":"other"},17:function t(e){return 3==e?"few":0===e?"zero":6==e?"many":2==e?"two":1==e?"one":"other"},18:function t(e){return 0===e?"zero":r(e,0,2)&&0!==e&&2!=e?"one":"other"},19:function t(e){return r(e,2,10)?"few":r(e,0,1)?"one":"other"},20:function t(i){return!r(i%10,3,4)&&i%10!=9||r(i%100,10,19)||r(i%100,70,79)||r(i%100,90,99)?i%1e6==0&&0!==i?"many":i%10!=2||e(i%100,[12,72,92])?i%10!=1||e(i%100,[11,71,91])?"other":"one":"two":"few"},21:function t(e){return 0===e?"zero":1==e?"one":"other"},22:function t(e){return r(e,0,1)||r(e,11,99)?"one":"other"},23:function t(e){return r(e%10,1,2)||e%20==0?"one":"other"},24:function t(i){return r(i,3,10)||r(i,13,19)?"few":e(i,[2,12])?"two":e(i,[1,11])?"one":"other"}},o=i[t.replace(/-.*$/,"")];return o in n?n[o]:(console.warn("plural form unknown for ["+t+"]"),function(){return"other"})}function d(t,e,r){var i=y[t];if(!i){if(console.warn("#"+t+" is undefined."),!r)return null;i=r}var n={};for(var o in i){var a=i[o];a=p(a,e,t,o),a=g(a,e,t),n[o]=a}return n}function p(t,e,r,i){var n=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,o=n.exec(t);if(!o||!o.length)return t;var a=o[1],s=o[2],c;if(e&&s in e?c=e[s]:s in y&&(c=y[s]),a in x){t=(0,x[a])(t,c,r,i)}return t}function g(t,e,r){var i=/\{\{\s*(.+?)\s*\}\}/g;return t.replace(i,function(t,i){return e&&i in e?e[i]:i in y?y[i]:(console.log("argument {{"+i+"}} for #"+r+" is undefined."),t)})}function v(t){var r=a(t);if(r.id){var i=d(r.id,r.args);if(!i)return void console.warn("#"+r.id+" is undefined.");if(i[w]){if(0===m(t))t[w]=i[w];else{for(var n=t.childNodes,o=!1,s=0,c=n.length;s<c;s++)3===n[s].nodeType&&/\S/.test(n[s].nodeValue)&&(o?n[s].nodeValue="":(n[s].nodeValue=i[w],o=!0));if(!o){var l=e.createTextNode(i[w]);t.insertBefore(l,t.firstChild)}}delete i[w]}for(var h in i)t[h]=i[h]}}function m(t){if(t.children)return t.children.length;if(void 0!==t.childElementCount)return t.childElementCount;for(var e=0,r=0;r<t.childNodes.length;r++)e+=1===t.nodeType?1:0;return e}function b(t){t=t||e.documentElement;for(var r=o(t),i=r.length,n=0;n<i;n++)v(r[n]);v(t)}var y={},_="",w="textContent",S="",x={},C="loading",A=!0;return x.plural=function(t,e,r,i){var n=parseFloat(e);if(isNaN(n))return t;if(i!=w)return t;x._pluralRules||(x._pluralRules=f(S));var o="["+x._pluralRules(n)+"]";return 0===n&&r+"[zero]"in y?t=y[r+"[zero]"][i]:1==n&&r+"[one]"in y?t=y[r+"[one]"][i]:2==n&&r+"[two]"in y?t=y[r+"[two]"][i]:r+o in y?t=y[r+o][i]:r+"[other]"in y&&(t=y[r+"[other]"][i]),t},{get:function t(e,r,i){var n=e.lastIndexOf("."),o=w;n>0&&(o=e.substr(n+1),e=e.substring(0,n));var a;i&&(a={},a[o]=i);var s=d(e,r,a);return s&&o in s?s[o]:"{{"+e+"}}"},getData:function t(){return y},getText:function t(){return _},getLanguage:function t(){return S},setLanguage:function t(e,r){h(e,function(){r&&r()})},getDirection:function t(){var e=["ar","he","fa","ps","ur"],r=S.split("-",1)[0];return e.indexOf(r)>=0?"rtl":"ltr"},translate:b,getReadyState:function t(){return C},ready:function r(i){i&&("complete"==C||"interactive"==C?t.setTimeout(function(){i()}):e.addEventListener&&e.addEventListener("localized",function t(){e.removeEventListener("localized",t),i()}))}}}(window,document)},function(t,e,r){"use strict";var i=r(0),n=r(12),o=r(5),a=r(3),s=r(6),c=r(4),l=r(11),h=r(10),u=r(1),f=r(8),d=r(9),p=i.PDFJS;p.PDFViewer=n.PDFViewer,p.PDFPageView=o.PDFPageView,p.PDFLinkService=a.PDFLinkService,p.TextLayerBuilder=s.TextLayerBuilder,p.DefaultTextLayerFactory=s.DefaultTextLayerFactory,p.AnnotationLayerBuilder=c.AnnotationLayerBuilder,p.DefaultAnnotationLayerFactory=c.DefaultAnnotationLayerFactory,p.PDFHistory=l.PDFHistory,p.PDFFindController=h.PDFFindController,p.EventBus=u.EventBus,p.DownloadManager=f.DownloadManager,p.ProgressBar=u.ProgressBar,p.GenericL10n=d.GenericL10n,p.NullL10n=u.NullL10n,e.PDFJS=p}])})},function(t,e,r){"use strict";function i(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function n(t){return 3*t.length/4-i(t)}function o(t){var e,r,n,o,a,s=t.length;o=i(t),a=new u(3*s/4-o),r=o>0?s-4:s;var c=0;for(e=0;e<r;e+=4)n=h[t.charCodeAt(e)]<<18|h[t.charCodeAt(e+1)]<<12|h[t.charCodeAt(e+2)]<<6|h[t.charCodeAt(e+3)],a[c++]=n>>16&255,a[c++]=n>>8&255,a[c++]=255&n;return 2===o?(n=h[t.charCodeAt(e)]<<2|h[t.charCodeAt(e+1)]>>4,a[c++]=255&n):1===o&&(n=h[t.charCodeAt(e)]<<10|h[t.charCodeAt(e+1)]<<4|h[t.charCodeAt(e+2)]>>2,a[c++]=n>>8&255,a[c++]=255&n),a}function a(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function s(t,e,r){for(var i,n=[],o=e;o<r;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],n.push(a(i));return n.join("")}function c(t){for(var e,r=t.length,i=r%3,n="",o=[],a=16383,c=0,h=r-i;c<h;c+=16383)o.push(s(t,c,c+16383>h?h:c+16383));return 1===i?(e=t[r-1],n+=l[e>>2],n+=l[e<<4&63],n+="=="):2===i&&(e=(t[r-2]<<8)+t[r-1],n+=l[e>>10],n+=l[e>>4&63],n+=l[e<<2&63],n+="="),o.push(n),o.join("")}e.byteLength=n,e.toByteArray=o,e.fromByteArray=c;for(var l=[],h=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=f.length;d<p;++d)l[d]=f[d],h[f.charCodeAt(d)]=d;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,i,n){var o,a,s=8*n-i-1,c=(1<<s)-1,l=c>>1,h=-7,u=r?n-1:0,f=r?-1:1,d=t[e+u];for(u+=f,o=d&(1<<-h)-1,d>>=-h,h+=s;h>0;o=256*o+t[e+u],u+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=i;h>0;a=256*a+t[e+u],u+=f,h-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,i),o-=l}return(d?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,r,i,n,o){var a,s,c,l=8*o-n-1,h=(1<<l)-1,u=h>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),e+=a+u>=1?f/c:f*Math.pow(2,1-u),e*c>=2&&(a++,c/=2),a+u>=h?(s=0,a=h):a+u>=1?(s=(e*c-1)*Math.pow(2,n),a+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,n),a=0));n>=8;t[r+d]=255&s,d+=p,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;t[r+d]=255&a,d+=p,a/=256,l-=8);t[r+d-p]|=128*g}},function(t,e,r){(function(t,i){function n(e,r,i){function n(){for(var t;null!==(t=e.read());)s.push(t),c+=t.length;e.once("readable",n)}function o(t){e.removeListener("end",a),e.removeListener("readable",n),i(t)}function a(){var r=t.concat(s,c);s=[],i(null,r),e.close()}var s=[],c=0;e.on("error",o),e.on("end",a),e.end(r),n()}function o(e,r){if("string"==typeof r&&(r=new t(r)),!t.isBuffer(r))throw new TypeError("Not a string or buffer");var i=g.Z_FINISH;return e._processChunk(r,i)}function a(t){if(!(this instanceof a))return new a(t);d.call(this,t,g.DEFLATE)}function s(t){if(!(this instanceof s))return new s(t);d.call(this,t,g.INFLATE)}function c(t){if(!(this instanceof c))return new c(t);d.call(this,t,g.GZIP)}function l(t){if(!(this instanceof l))return new l(t);d.call(this,t,g.GUNZIP)}function h(t){if(!(this instanceof h))return new h(t);d.call(this,t,g.DEFLATERAW)}function u(t){if(!(this instanceof u))return new u(t);d.call(this,t,g.INFLATERAW)}function f(t){if(!(this instanceof f))return new f(t);d.call(this,t,g.UNZIP)}function d(r,i){if(this._opts=r=r||{},this._chunkSize=r.chunkSize||e.Z_DEFAULT_CHUNK,p.call(this,r),r.flush&&r.flush!==g.Z_NO_FLUSH&&r.flush!==g.Z_PARTIAL_FLUSH&&r.flush!==g.Z_SYNC_FLUSH&&r.flush!==g.Z_FULL_FLUSH&&r.flush!==g.Z_FINISH&&r.flush!==g.Z_BLOCK)throw new Error("Invalid flush flag: "+r.flush);if(this._flushFlag=r.flush||g.Z_NO_FLUSH,r.chunkSize&&(r.chunkSize<e.Z_MIN_CHUNK||r.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+r.chunkSize);if(r.windowBits&&(r.windowBits<e.Z_MIN_WINDOWBITS||r.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+r.windowBits);if(r.level&&(r.level<e.Z_MIN_LEVEL||r.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+r.level);if(r.memLevel&&(r.memLevel<e.Z_MIN_MEMLEVEL||r.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+r.memLevel);if(r.strategy&&r.strategy!=e.Z_FILTERED&&r.strategy!=e.Z_HUFFMAN_ONLY&&r.strategy!=e.Z_RLE&&r.strategy!=e.Z_FIXED&&r.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+r.strategy);if(r.dictionary&&!t.isBuffer(r.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new g.Zlib(i);var n=this;this._hadError=!1,this._binding.onerror=function(t,r){n._binding=null,n._hadError=!0;var i=new Error(t);i.errno=r,i.code=e.codes[r],n.emit("error",i)};var o=e.Z_DEFAULT_COMPRESSION;"number"==typeof r.level&&(o=r.level);var a=e.Z_DEFAULT_STRATEGY;"number"==typeof r.strategy&&(a=r.strategy),this._binding.init(r.windowBits||e.Z_DEFAULT_WINDOWBITS,o,r.memLevel||e.Z_DEFAULT_MEMLEVEL,a,r.dictionary),this._buffer=new t(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=a,this.once("end",this.close)}var p=r(43),g=r(50),v=r(24),m=r(60).ok;g.Z_MIN_WINDOWBITS=8,g.Z_MAX_WINDOWBITS=15,g.Z_DEFAULT_WINDOWBITS=15,g.Z_MIN_CHUNK=64,g.Z_MAX_CHUNK=1/0,g.Z_DEFAULT_CHUNK=16384,g.Z_MIN_MEMLEVEL=1,g.Z_MAX_MEMLEVEL=9,g.Z_DEFAULT_MEMLEVEL=8,g.Z_MIN_LEVEL=-1,g.Z_MAX_LEVEL=9,g.Z_DEFAULT_LEVEL=g.Z_DEFAULT_COMPRESSION,Object.keys(g).forEach(function(t){t.match(/^Z/)&&(e[t]=g[t])}),e.codes={Z_OK:g.Z_OK,Z_STREAM_END:g.Z_STREAM_END,Z_NEED_DICT:g.Z_NEED_DICT,Z_ERRNO:g.Z_ERRNO,Z_STREAM_ERROR:g.Z_STREAM_ERROR,Z_DATA_ERROR:g.Z_DATA_ERROR,Z_MEM_ERROR:g.Z_MEM_ERROR,Z_BUF_ERROR:g.Z_BUF_ERROR,Z_VERSION_ERROR:g.Z_VERSION_ERROR},Object.keys(e.codes).forEach(function(t){e.codes[e.codes[t]]=t}),e.Deflate=a,e.Inflate=s,e.Gzip=c,e.Gunzip=l,e.DeflateRaw=h,e.InflateRaw=u,e.Unzip=f,e.createDeflate=function(t){return new a(t)},e.createInflate=function(t){return new s(t)},e.createDeflateRaw=function(t){return new h(t)},e.createInflateRaw=function(t){return new u(t)},e.createGzip=function(t){return new c(t)},e.createGunzip=function(t){return new l(t)},e.createUnzip=function(t){return new f(t)},e.deflate=function(t,e,r){return"function"==typeof e&&(r=e,e={}),n(new a(e),t,r)},e.deflateSync=function(t,e){return o(new a(e),t)},e.gzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),n(new c(e),t,r)},e.gzipSync=function(t,e){return o(new c(e),t)},e.deflateRaw=function(t,e,r){return"function"==typeof e&&(r=e,e={}),n(new h(e),t,r)},e.deflateRawSync=function(t,e){return o(new h(e),t)},e.unzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),n(new f(e),t,r)},e.unzipSync=function(t,e){return o(new f(e),t)},e.inflate=function(t,e,r){return"function"==typeof e&&(r=e,e={}),n(new s(e),t,r)},e.inflateSync=function(t,e){return o(new s(e),t)},e.gunzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),n(new l(e),t,r)},e.gunzipSync=function(t,e){return o(new l(e),t)},e.inflateRaw=function(t,e,r){return"function"==typeof e&&(r=e,e={}),n(new u(e),t,r)},e.inflateRawSync=function(t,e){return o(new u(e),t)},v.inherits(d,p),d.prototype.params=function(t,r,n){if(t<e.Z_MIN_LEVEL||t>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(r!=e.Z_FILTERED&&r!=e.Z_HUFFMAN_ONLY&&r!=e.Z_RLE&&r!=e.Z_FIXED&&r!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==t||this._strategy!==r){var o=this;this.flush(g.Z_SYNC_FLUSH,function(){o._binding.params(t,r),o._hadError||(o._level=t,o._strategy=r,n&&n())})}else i.nextTick(n)},d.prototype.reset=function(){return this._binding.reset()},d.prototype._flush=function(e){this._transform(new t(0),"",e)},d.prototype.flush=function(e,r){var n=this._writableState;if(("function"==typeof e||void 0===e&&!r)&&(r=e,e=g.Z_FULL_FLUSH),n.ended)r&&i.nextTick(r);else if(n.ending)r&&this.once("end",r);else if(n.needDrain){var o=this;this.once("drain",function(){o.flush(r)})}else this._flushFlag=e,this.write(new t(0),"",r)},d.prototype.close=function(t){if(t&&i.nextTick(t),!this._closed){this._closed=!0,this._binding.close();var e=this;i.nextTick(function(){e.emit("close")})}},d.prototype._transform=function(e,r,i){var n,o=this._writableState,a=o.ending||o.ended,s=a&&(!e||o.length===e.length);if(null===!e&&!t.isBuffer(e))return i(new Error("invalid input"));s?n=g.Z_FINISH:(n=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||g.Z_NO_FLUSH));var c=this;this._processChunk(e,n,i)},d.prototype._processChunk=function(e,r,i){function n(f,d){if(!c._hadError){var p=a-d;if(m(p>=0,"have should not go down"),p>0){var g=c._buffer.slice(c._offset,c._offset+p);c._offset+=p,l?c.push(g):(h.push(g),u+=g.length)}if((0===d||c._offset>=c._chunkSize)&&(a=c._chunkSize,c._offset=0,c._buffer=new t(c._chunkSize)),0===d){if(s+=o-f,o=f,!l)return!0;var v=c._binding.write(r,e,s,o,c._buffer,c._offset,c._chunkSize);return v.callback=n,void(v.buffer=e)}if(!l)return!1;i()}}var o=e&&e.length,a=this._chunkSize-this._offset,s=0,c=this,l="function"==typeof i;if(!l){var h=[],u=0,f;this.on("error",function(t){f=t});do{var d=this._binding.writeSync(r,e,s,o,this._buffer,this._offset,a)}while(!this._hadError&&n(d[0],d[1]));if(this._hadError)throw f;var p=t.concat(h,u);return this.close(),p}var g=this._binding.write(r,e,s,o,this._buffer,this._offset,a);g.buffer=e,g.callback=n},v.inherits(a,d),v.inherits(s,d),v.inherits(c,d),v.inherits(l,d),v.inherits(h,d),v.inherits(u,d),v.inherits(f,d)}).call(e,r(2).Buffer,r(1))},function(t,e,r){t.exports=r(9).Transform},function(t,e){},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e,r){t.copy(e,r)}var o=r(10).Buffer;t.exports=function(){function t(){i(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function t(e){var r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length},t.prototype.unshift=function t(e){var r={data:e,next:this.head};0===this.length&&(this.tail=r),this.head=r,++this.length},t.prototype.shift=function t(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.prototype.clear=function t(){this.head=this.tail=null,this.length=0},t.prototype.join=function t(e){if(0===this.length)return"";for(var r=this.head,i=""+r.data;r=r.next;)i+=e+r.data;return i},t.prototype.concat=function t(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var r=o.allocUnsafe(e>>>0),i=this.head,a=0;i;)n(i.data,r,a),a+=i.data.length,i=i.next;return r},t}()},function(t,e,r){function i(t,e){this._id=t,this._clearFn=e}var n=Function.prototype.apply;e.setTimeout=function(){return new i(n.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(n.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function e(){t._onTimeout&&t._onTimeout()},e))},r(47),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,r){(function(t,e){!function(t,r){"use strict";function i(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return p[d]=i,m(d),d++}function n(t){delete p[t]}function o(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(r,i)}}function a(t){if(g)setTimeout(a,0,t);else{var e=p[t];if(e){g=!0;try{o(e)}finally{n(t),g=!1}}}}function s(){m=function(t){e.nextTick(function(){a(t)})}}function c(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}function l(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&a(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),m=function(r){t.postMessage(e+r,"*")}}function h(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},m=function(e){t.port2.postMessage(e)}}function u(){var t=v.documentElement;m=function(e){var r=v.createElement("script");r.onreadystatechange=function(){a(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}function f(){m=function(t){setTimeout(a,0,t)}}if(!t.setImmediate){var d=1,p={},g=!1,v=t.document,m,b=Object.getPrototypeOf&&Object.getPrototypeOf(t);b=b&&b.setTimeout?b:t,"[object process]"==={}.toString.call(t.process)?s():c()?l():t.MessageChannel?h():v&&"onreadystatechange"in v.createElement("script")?u():f(),b.setImmediate=i,b.clearImmediate=n}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,r(0),r(1))},function(t,e,r){(function(e){function r(t,e){function r(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}if(i("noDeprecation"))return t;var n=!1;return r}function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=r}).call(e,r(0))},function(t,e,r){"use strict";function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}t.exports=i;var n=r(20),o=r(5);o.inherits=r(3),o.inherits(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){(function(t,i){function n(t){if(t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.mode=t,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function o(t,e){for(var r=0;r<t.length;r++)this[e+r]=t[r]}var a=r(21),s=r(51),c=r(52),l=r(54),h=r(57);for(var u in h)e[u]=h[u];e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7,n.prototype.init=function(t,r,i,n,o){switch(this.windowBits=t,this.level=r,this.memLevel=i,this.strategy=n,this.mode!==e.GZIP&&this.mode!==e.GUNZIP||(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),this.mode!==e.DEFLATERAW&&this.mode!==e.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new s,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:var a=c.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:var a=l.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(a!==e.Z_OK)return void this._error(a);this.write_in_progress=!1,this.init_done=!0},n.prototype.params=function(){throw new Error("deflateParams Not supported")},n.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===e.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},n.prototype.write=function(e,r,i,n,o,a,s){this._writeCheck(),this.write_in_progress=!0;var c=this;return t.nextTick(function(){c.write_in_progress=!1;var t=c._write(e,r,i,n,o,a,s);c.callback(t[0],t[1]),c.pending_close&&c.close()}),this},n.prototype.writeSync=function(t,e,r,i,n,o,a){return this._writeCheck(),this._write(t,e,r,i,n,o,a)},n.prototype._write=function(t,r,n,a,s,h,u){if(this.write_in_progress=!0,t!==e.Z_NO_FLUSH&&t!==e.Z_PARTIAL_FLUSH&&t!==e.Z_SYNC_FLUSH&&t!==e.Z_FULL_FLUSH&&t!==e.Z_FINISH&&t!==e.Z_BLOCK)throw new Error("Invalid flush value");null==r&&(r=new i(0),a=0,n=0),s._set?s.set=s._set:s.set=o;var f=this.strm;switch(f.avail_in=a,f.input=r,f.next_in=n,f.avail_out=u,f.output=s,f.next_out=h,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:var d=c.deflate(f,t);break;case e.UNZIP:case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:var d=l.inflate(f,t);break;default:throw new Error("Unknown mode "+this.mode)}return d!==e.Z_STREAM_END&&d!==e.Z_OK&&this._error(d),this.write_in_progress=!1,[f.avail_in,f.avail_out]},n.prototype.close=function(){if(this.write_in_progress)return void(this.pending_close=!0);this.pending_close=!1,this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?c.deflateEnd(this.strm):l.inflateEnd(this.strm),this.mode=e.NONE},n.prototype.reset=function(){switch(this.mode){case e.DEFLATE:case e.DEFLATERAW:var t=c.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:var t=l.inflateReset(this.strm)}t!==e.Z_OK&&this._error(t)},n.prototype._error=function(t){this.onerror(a[t]+": "+this.strm.msg,t),this.write_in_progress=!1,this.pending_close&&this.close()},e.Zlib=n}).call(e,r(1),r(2).Buffer)},function(t,e,r){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=i},function(t,e,r){"use strict";function i(t,e){return t.msg=D[e],e}function n(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(E.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function s(t,e){O._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function c(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function h(t,e,r,i){var n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,E.arraySet(e,t.input,t.next_in,n,r),1===t.state.wrap?t.adler=R(t.adler,e,n,r):2===t.state.wrap&&(t.adler=L(t.adler,e,n,r)),t.next_in+=n,t.total_in+=n,n)}function u(t,e){var r=t.max_chain_length,i=t.strstart,n,o,a=t.prev_length,s=t.nice_match,c=t.strstart>t.w_size-ht?t.strstart-(t.w_size-ht):0,l=t.window,h=t.w_mask,u=t.prev,f=t.strstart+lt,d=l[i+a-1],p=l[i+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,l[n+a]===p&&l[n+a-1]===d&&l[n]===l[i]&&l[++n]===l[i+1]){i+=2,n++;do{}while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<f);if(o=lt-(f-i),i=f-lt,o>a){if(t.match_start=e,a=o,o>=s)break;d=l[i+a-1],p=l[i+a]}}}while((e=u[e&h])>c&&0!=--r);return a<=t.lookahead?a:t.lookahead}function f(t){var e=t.w_size,r,i,n,o,a;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-ht)){E.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,i=t.hash_size,r=i;do{n=t.head[--r],t.head[r]=n>=e?n-e:0}while(--i);i=e,r=i;do{n=t.prev[--r],t.prev[r]=n>=e?n-e:0}while(--i);o+=e}if(0===t.strm.avail_in)break;if(i=h(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=i,t.lookahead+t.insert>=ct)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+ct-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<ct)););}while(t.lookahead<ht&&0!==t.strm.avail_in)}function d(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(f(t),0===t.lookahead&&e===I)return yt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,s(t,!1),0===t.strm.avail_out))return yt;if(t.strstart-t.block_start>=t.w_size-ht&&(s(t,!1),0===t.strm.avail_out))return yt}return t.insert=0,e===F?(s(t,!0),0===t.strm.avail_out?wt:St):(t.strstart>t.block_start&&(s(t,!1),t.strm.avail_out),yt)}function p(t,e){for(var r,i;;){if(t.lookahead<ht){if(f(t),t.lookahead<ht&&e===I)return yt;if(0===t.lookahead)break}if(r=0,t.lookahead>=ct&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ct-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-ht&&(t.match_length=u(t,r)),t.match_length>=ct)if(i=O._tr_tally(t,t.strstart-t.match_start,t.match_length-ct),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ct){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ct-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=O._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(s(t,!1),0===t.strm.avail_out))return yt}return t.insert=t.strstart<ct-1?t.strstart:ct-1,e===F?(s(t,!0),0===t.strm.avail_out?wt:St):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?yt:_t}function g(t,e){for(var r,i,n;;){if(t.lookahead<ht){if(f(t),t.lookahead<ht&&e===I)return yt;if(0===t.lookahead)break}if(r=0,t.lookahead>=ct&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ct-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ct-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-ht&&(t.match_length=u(t,r),t.match_length<=5&&(t.strategy===G||t.match_length===ct&&t.strstart-t.match_start>4096)&&(t.match_length=ct-1)),t.prev_length>=ct&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-ct,i=O._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ct),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ct-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=ct-1,t.strstart++,i&&(s(t,!1),0===t.strm.avail_out))return yt}else if(t.match_available){if(i=O._tr_tally(t,0,t.window[t.strstart-1]),i&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return yt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=O._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ct-1?t.strstart:ct-1,e===F?(s(t,!0),0===t.strm.avail_out?wt:St):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?yt:_t}function v(t,e){for(var r,i,n,o,a=t.window;;){if(t.lookahead<=lt){if(f(t),t.lookahead<=lt&&e===I)return yt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ct&&t.strstart>0&&(n=t.strstart-1,(i=a[n])===a[++n]&&i===a[++n]&&i===a[++n])){o=t.strstart+lt;do{}while(i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&n<o);t.match_length=lt-(o-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ct?(r=O._tr_tally(t,1,t.match_length-ct),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=O._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(s(t,!1),0===t.strm.avail_out))return yt}return t.insert=0,e===F?(s(t,!0),0===t.strm.avail_out?wt:St):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?yt:_t}function m(t,e){for(var r;;){if(0===t.lookahead&&(f(t),0===t.lookahead)){if(e===I)return yt;break}if(t.match_length=0,r=O._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(s(t,!1),0===t.strm.avail_out))return yt}return t.insert=0,e===F?(s(t,!0),0===t.strm.avail_out?wt:St):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?yt:_t}function b(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}function y(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=Ct[t.level].max_lazy,t.good_match=Ct[t.level].good_length,t.nice_match=Ct[t.level].nice_length,t.max_chain_length=Ct[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ct-1,t.match_available=0,t.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*at),this.dyn_dtree=new E.Buf16(2*(2*nt+1)),this.bl_tree=new E.Buf16(2*(2*ot+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(st+1),this.heap=new E.Buf16(2*it+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*it+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=J,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ft:mt,t.adler=2===e.wrap?0:1,e.last_flush=I,O._tr_init(e),B):i(t,z)}function S(t){var e=w(t);return e===B&&y(t.state),e}function x(t,e){return t&&t.state?2!==t.state.wrap?z:(t.state.gzhead=e,B):z}function C(t,e,r,n,o,a){if(!t)return z;var s=1;if(e===X&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>Q||r!==K||n<8||n>15||e<0||e>9||a<0||a>V)return i(t,z);8===n&&(n=9);var c=new _;return t.state=c,c.strm=t,c.wrap=s,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+ct-1)/ct),c.window=new E.Buf8(2*c.w_size),c.head=new E.Buf16(c.hash_size),c.prev=new E.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new E.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=a,c.method=r,S(t)}function A(t,e){return C(t,e,K,$,tt,Z)}function T(t,e){var r,s,h,u;if(!t||!t.state||e>N||e<0)return t?i(t,z):z;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||s.status===bt&&e!==F)return i(t,0===t.avail_out?q:z);if(s.strm=t,r=s.last_flush,s.last_flush=e,s.status===ft)if(2===s.wrap)t.adler=0,c(s,31),c(s,139),c(s,8),s.gzhead?(c(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),c(s,255&s.gzhead.time),c(s,s.gzhead.time>>8&255),c(s,s.gzhead.time>>16&255),c(s,s.gzhead.time>>24&255),c(s,9===s.level?2:s.strategy>=H||s.level<2?4:0),c(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(c(s,255&s.gzhead.extra.length),c(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=L(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=dt):(c(s,0),c(s,0),c(s,0),c(s,0),c(s,0),c(s,9===s.level?2:s.strategy>=H||s.level<2?4:0),c(s,xt),s.status=mt);else{var f=K+(s.w_bits-8<<4)<<8,d=-1;d=s.strategy>=H||s.level<2?0:s.level<6?1:6===s.level?2:3,f|=d<<6,0!==s.strstart&&(f|=ut),f+=31-f%31,s.status=mt,l(s,f),0!==s.strstart&&(l(s,t.adler>>>16),l(s,65535&t.adler)),t.adler=1}if(s.status===dt)if(s.gzhead.extra){for(h=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>h&&(t.adler=L(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending!==s.pending_buf_size));)c(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>h&&(t.adler=L(t.adler,s.pending_buf,s.pending-h,h)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=pt)}else s.status=pt;if(s.status===pt)if(s.gzhead.name){h=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>h&&(t.adler=L(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending===s.pending_buf_size)){u=1;break}u=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,c(s,u)}while(0!==u);s.gzhead.hcrc&&s.pending>h&&(t.adler=L(t.adler,s.pending_buf,s.pending-h,h)),0===u&&(s.gzindex=0,s.status=gt)}else s.status=gt;if(s.status===gt)if(s.gzhead.comment){h=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>h&&(t.adler=L(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending===s.pending_buf_size)){u=1;break}u=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,c(s,u)}while(0!==u);s.gzhead.hcrc&&s.pending>h&&(t.adler=L(t.adler,s.pending_buf,s.pending-h,h)),0===u&&(s.status=vt)}else s.status=vt;if(s.status===vt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(t),s.pending+2<=s.pending_buf_size&&(c(s,255&t.adler),c(s,t.adler>>8&255),t.adler=0,s.status=mt)):s.status=mt),0!==s.pending){if(a(t),0===t.avail_out)return s.last_flush=-1,B}else if(0===t.avail_in&&n(e)<=n(r)&&e!==F)return i(t,q);if(s.status===bt&&0!==t.avail_in)return i(t,q);if(0!==t.avail_in||0!==s.lookahead||e!==I&&s.status!==bt){var p=s.strategy===H?m(s,e):s.strategy===Y?v(s,e):Ct[s.level].func(s,e);if(p!==wt&&p!==St||(s.status=bt),p===yt||p===wt)return 0===t.avail_out&&(s.last_flush=-1),B;if(p===_t&&(e===j?O._tr_align(s):e!==N&&(O._tr_stored_block(s,0,0,!1),e===M&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(t),0===t.avail_out))return s.last_flush=-1,B}return e!==F?B:s.wrap<=0?U:(2===s.wrap?(c(s,255&t.adler),c(s,t.adler>>8&255),c(s,t.adler>>16&255),c(s,t.adler>>24&255),c(s,255&t.total_in),c(s,t.total_in>>8&255),c(s,t.total_in>>16&255),c(s,t.total_in>>24&255)):(l(s,t.adler>>>16),l(s,65535&t.adler)),a(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?B:U)}function k(t){var e;return t&&t.state?(e=t.state.status)!==ft&&e!==dt&&e!==pt&&e!==gt&&e!==vt&&e!==mt&&e!==bt?i(t,z):(t.state=null,e===mt?i(t,W):B):z}function P(t,e){var r=e.length,i,n,a,s,c,l,h,u;if(!t||!t.state)return z;if(i=t.state,2===(s=i.wrap)||1===s&&i.status!==ft||i.lookahead)return z;for(1===s&&(t.adler=R(t.adler,e,r,0)),i.wrap=0,r>=i.w_size&&(0===s&&(o(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new E.Buf8(i.w_size),E.arraySet(u,e,r-i.w_size,i.w_size,0),e=u,r=i.w_size),c=t.avail_in,l=t.next_in,h=t.input,t.avail_in=r,t.next_in=0,t.input=e,f(i);i.lookahead>=ct;){n=i.strstart,a=i.lookahead-(ct-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+ct-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--a);i.strstart=n,i.lookahead=ct-1,f(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=ct-1,i.match_available=0,t.next_in=l,t.input=h,t.avail_in=c,i.wrap=s,B}var E=r(8),O=r(53),R=r(22),L=r(23),D=r(21),I=0,j=1,M=3,F=4,N=5,B=0,U=1,z=-2,W=-3,q=-5,X=-1,G=1,H=2,Y=3,V=4,Z=0,J=2,K=8,Q=9,$=15,tt=8,et=29,rt=256,it=286,nt=30,ot=19,at=2*it+1,st=15,ct=3,lt=258,ht=lt+ct+1,ut=32,ft=42,dt=69,pt=73,gt=91,vt=103,mt=113,bt=666,yt=1,_t=2,wt=3,St=4,xt=3,Ct;Ct=[new b(0,0,0,0,d),new b(4,4,8,4,p),new b(4,5,16,8,p),new b(4,6,32,32,p),new b(4,4,16,16,g),new b(8,16,32,32,g),new b(8,16,128,128,g),new b(8,32,128,256,g),new b(32,128,258,1024,g),new b(32,258,258,4096,g)],e.deflateInit=A,e.deflateInit2=C,e.deflateReset=S,e.deflateResetKeep=w,e.deflateSetHeader=x,e.deflate=T,e.deflateEnd=k,e.deflateSetDictionary=P,e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,r){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function n(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return t<256?ct[t]:ct[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function c(t,e,r){t.bi_valid>Z-r?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>Z-t.bi_valid,t.bi_valid+=r-Z):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function l(t,e,r){c(t,r[2*e],r[2*e+1])}function h(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function u(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function f(t,e){var r=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,o=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,s=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,h,u,f,d,p,g=0;for(f=0;f<=V;f++)t.bl_count[f]=0;for(r[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<Y;l++)h=t.heap[l],f=r[2*r[2*h+1]+1]+1,f>c&&(f=c,g++),r[2*h+1]=f,h>i||(t.bl_count[f]++,d=0,h>=s&&(d=a[h-s]),p=r[2*h],t.opt_len+=p*(f+d),o&&(t.static_len+=p*(n[2*h+1]+d)));if(0!==g){do{for(f=c-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(f=c;0!==f;f--)for(h=t.bl_count[f];0!==h;)(u=t.heap[--l])>i||(r[2*u+1]!==f&&(t.opt_len+=(f-r[2*u+1])*r[2*u],r[2*u+1]=f),h--)}}function d(t,e,r){var i=new Array(V+1),n=0,o,a;for(o=1;o<=V;o++)i[o]=n=n+r[o-1]<<1;for(a=0;a<=e;a++){var s=t[2*a+1];0!==s&&(t[2*a]=h(i[s]++,s))}}function p(){var t,e,r,i,o,a=new Array(V+1);for(r=0,i=0;i<W-1;i++)for(ht[i]=r,t=0;t<1<<et[i];t++)lt[r++]=i;for(lt[r-1]=i,o=0,i=0;i<16;i++)for(ut[i]=o,t=0;t<1<<rt[i];t++)ct[o++]=i;for(o>>=7;i<G;i++)for(ut[i]=o<<7,t=0;t<1<<rt[i]-7;t++)ct[256+o++]=i;for(e=0;e<=V;e++)a[e]=0;for(t=0;t<=143;)at[2*t+1]=8,t++,a[8]++;for(;t<=255;)at[2*t+1]=9,t++,a[9]++;for(;t<=279;)at[2*t+1]=7,t++,a[7]++;for(;t<=287;)at[2*t+1]=8,t++,a[8]++;for(d(at,X+1,a),t=0;t<G;t++)st[2*t+1]=5,st[2*t]=h(t,5);ft=new n(at,et,q+1,X,V),dt=new n(st,rt,0,G,V),pt=new n(new Array(0),it,0,H,J)}function g(t){var e;for(e=0;e<X;e++)t.dyn_ltree[2*e]=0;for(e=0;e<G;e++)t.dyn_dtree[2*e]=0;for(e=0;e<H;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*K]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function v(t){t.bi_valid>8?s(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function m(t,e,r,i){v(t),i&&(s(t,r),s(t,~r)),L.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function b(t,e,r,i){var n=2*e,o=2*r;return t[n]<t[o]||t[n]===t[o]&&i[e]<=i[r]}function y(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&b(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!b(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function _(t,e,r){var i,n,o=0,s,h;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?l(t,n,e):(s=lt[n],l(t,s+q+1,e),h=et[s],0!==h&&(n-=ht[s],c(t,n,h)),i--,s=a(i),l(t,s,r),0!==(h=rt[s])&&(i-=ut[s],c(t,i,h)))}while(o<t.last_lit);l(t,K,e)}function w(t,e){var r=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,o=e.stat_desc.elems,a,s,c=-1,l;for(t.heap_len=0,t.heap_max=Y,a=0;a<o;a++)0!==r[2*a]?(t.heap[++t.heap_len]=c=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,r[2*l]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[2*l+1]);for(e.max_code=c,a=t.heap_len>>1;a>=1;a--)y(t,r,a);l=o;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],y(t,r,1),s=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=s,r[2*l]=r[2*a]+r[2*s],t.depth[l]=(t.depth[a]>=t.depth[s]?t.depth[a]:t.depth[s])+1,r[2*a+1]=r[2*s+1]=l,t.heap[1]=l++,y(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],f(t,e),d(r,c,t.bl_count)}function S(t,e,r){var i,n=-1,o,a=e[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)o=a,a=e[2*(i+1)+1],++s<c&&o===a||(s<l?t.bl_tree[2*o]+=s:0!==o?(o!==n&&t.bl_tree[2*o]++,t.bl_tree[2*Q]++):s<=10?t.bl_tree[2*$]++:t.bl_tree[2*tt]++,s=0,n=o,0===a?(c=138,l=3):o===a?(c=6,l=3):(c=7,l=4))}function x(t,e,r){var i,n=-1,o,a=e[1],s=0,h=7,u=4;for(0===a&&(h=138,u=3),i=0;i<=r;i++)if(o=a,a=e[2*(i+1)+1],!(++s<h&&o===a)){if(s<u)do{l(t,o,t.bl_tree)}while(0!=--s);else 0!==o?(o!==n&&(l(t,o,t.bl_tree),s--),l(t,Q,t.bl_tree),c(t,s-3,2)):s<=10?(l(t,$,t.bl_tree),c(t,s-3,3)):(l(t,tt,t.bl_tree),c(t,s-11,7));s=0,n=o,0===a?(h=138,u=3):o===a?(h=6,u=3):(h=7,u=4)}}function C(t){var e;for(S(t,t.dyn_ltree,t.l_desc.max_code),S(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=H-1;e>=3&&0===t.bl_tree[2*nt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function A(t,e,r,i){var n;for(c(t,e-257,5),c(t,r-1,5),c(t,i-4,4),n=0;n<i;n++)c(t,t.bl_tree[2*nt[n]+1],3);x(t,t.dyn_ltree,e-1),x(t,t.dyn_dtree,r-1)}function T(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(1&e&&0!==t.dyn_ltree[2*r])return I;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return j;for(r=32;r<q;r++)if(0!==t.dyn_ltree[2*r])return j;return I}function k(t){gt||(p(),gt=!0),t.l_desc=new o(t.dyn_ltree,ft),t.d_desc=new o(t.dyn_dtree,dt),t.bl_desc=new o(t.bl_tree,pt),t.bi_buf=0,t.bi_valid=0,g(t)}function P(t,e,r,i){c(t,(F<<1)+(i?1:0),3),m(t,e,r,!0)}function E(t){c(t,N<<1,3),l(t,K,at),u(t)}function O(t,e,r,i){var n,o,a=0;t.level>0?(t.strm.data_type===M&&(t.strm.data_type=T(t)),w(t,t.l_desc),w(t,t.d_desc),a=C(t),n=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=n&&(n=o)):n=o=r+5,r+4<=n&&-1!==e?P(t,e,r,i):t.strategy===D||o===n?(c(t,(N<<1)+(i?1:0),3),_(t,at,st)):(c(t,(B<<1)+(i?1:0),3),A(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),_(t,t.dyn_ltree,t.dyn_dtree)),g(t),i&&v(t)}function R(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(lt[r]+q+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1}var L=r(8),D=4,I=0,j=1,M=2,F=0,N=1,B=2,U=3,z=258,W=29,q=256,X=q+1+W,G=30,H=19,Y=2*X+1,V=15,Z=16,J=7,K=256,Q=16,$=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],rt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ot=512,at=new Array(2*(X+2));i(at);var st=new Array(2*G);i(st);var ct=new Array(512);i(ct);var lt=new Array(256);i(lt);var ht=new Array(W);i(ht);var ut=new Array(G);i(ut);var ft,dt,pt,gt=!1;e._tr_init=k,e._tr_stored_block=P,e._tr_flush_block=O,e._tr_tally=R,e._tr_align=E},function(t,e,r){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=j,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new v.Buf32(dt),e.distcode=e.distdyn=new v.Buf32(pt),e.sane=1,e.back=-1,k):O}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):O}function s(t,e){var r,i;return t&&t.state?(i=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?O:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,a(t))):O}function c(t,e){var r,i;return t?(i=new n,t.state=i,i.window=null,r=s(t,e),r!==k&&(t.state=null),r):O}function l(t){return c(t,vt)}function h(t){if(mt){var e;for(bt=new v.Buf32(512),yt=new v.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(_(S,t.lens,0,288,bt,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;_(x,t.lens,0,32,yt,0,t.work,{bits:5}),mt=!1}t.lencode=bt,t.lenbits=9,t.distcode=yt,t.distbits=5}function u(t,e,r,i){var n,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new v.Buf8(o.wsize)),i>=o.wsize?(v.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(n=o.wsize-o.wnext,n>i&&(n=i),v.arraySet(o.window,e,r-i,n,o.wnext),i-=n,i?(v.arraySet(o.window,e,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=n,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=n))),0}function f(t,e){var r,n,o,a,s,c,l,f,d,p,g,dt,pt,gt,vt=0,mt,bt,yt,_t,wt,St,xt,Ct,At=new v.Buf8(4),Tt,kt,Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return O;r=t.state,r.mode===H&&(r.mode=Y),s=t.next_out,o=t.output,l=t.avail_out,a=t.next_in,n=t.input,c=t.avail_in,f=r.hold,d=r.bits,p=c,g=l,Ct=k;t:for(;;)switch(r.mode){case j:if(0===r.wrap){r.mode=Y;break}for(;d<16;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}if(2&r.wrap&&35615===f){r.check=0,At[0]=255&f,At[1]=f>>>8&255,r.check=b(r.check,At,2,0),f=0,d=0,r.mode=M;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&f)<<8)+(f>>8))%31){t.msg="incorrect header check",r.mode=ht;break}if((15&f)!==I){t.msg="unknown compression method",r.mode=ht;break}if(f>>>=4,d-=4,xt=8+(15&f),0===r.wbits)r.wbits=xt;else if(xt>r.wbits){t.msg="invalid window size",r.mode=ht;break}r.dmax=1<<xt,t.adler=r.check=1,r.mode=512&f?X:H,f=0,d=0;break;case M:for(;d<16;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}if(r.flags=f,(255&r.flags)!==I){t.msg="unknown compression method",r.mode=ht;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=ht;break}r.head&&(r.head.text=f>>8&1),512&r.flags&&(At[0]=255&f,At[1]=f>>>8&255,r.check=b(r.check,At,2,0)),f=0,d=0,r.mode=F;case F:for(;d<32;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}r.head&&(r.head.time=f),512&r.flags&&(At[0]=255&f,At[1]=f>>>8&255,At[2]=f>>>16&255,At[3]=f>>>24&255,r.check=b(r.check,At,4,0)),f=0,d=0,r.mode=N;case N:for(;d<16;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}r.head&&(r.head.xflags=255&f,r.head.os=f>>8),512&r.flags&&(At[0]=255&f,At[1]=f>>>8&255,r.check=b(r.check,At,2,0)),f=0,d=0,r.mode=B;case B:if(1024&r.flags){for(;d<16;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}r.length=f,r.head&&(r.head.extra_len=f),512&r.flags&&(At[0]=255&f,At[1]=f>>>8&255,r.check=b(r.check,At,2,0)),f=0,d=0}else r.head&&(r.head.extra=null);r.mode=U;case U:if(1024&r.flags&&(dt=r.length,dt>c&&(dt=c),dt&&(r.head&&(xt=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),v.arraySet(r.head.extra,n,a,dt,xt)),512&r.flags&&(r.check=b(r.check,n,dt,a)),c-=dt,a+=dt,r.length-=dt),r.length))break t;r.length=0,r.mode=z;case z:if(2048&r.flags){if(0===c)break t;dt=0;do{xt=n[a+dt++],r.head&&xt&&r.length<65536&&(r.head.name+=String.fromCharCode(xt))}while(xt&&dt<c);if(512&r.flags&&(r.check=b(r.check,n,dt,a)),c-=dt,a+=dt,xt)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=W;case W:if(4096&r.flags){if(0===c)break t;dt=0;do{xt=n[a+dt++],r.head&&xt&&r.length<65536&&(r.head.comment+=String.fromCharCode(xt))}while(xt&&dt<c);if(512&r.flags&&(r.check=b(r.check,n,dt,a)),c-=dt,a+=dt,xt)break t}else r.head&&(r.head.comment=null);r.mode=q;case q:if(512&r.flags){for(;d<16;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}if(f!==(65535&r.check)){t.msg="header crc mismatch",r.mode=ht;break}f=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=H;break;case X:for(;d<32;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}t.adler=r.check=i(f),f=0,d=0,r.mode=G;case G:if(0===r.havedict)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=c,r.hold=f,r.bits=d,E;t.adler=r.check=1,r.mode=H;case H:if(e===A||e===T)break t;case Y:if(r.last){f>>>=7&d,d-=7&d,r.mode=st;break}for(;d<3;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}switch(r.last=1&f,f>>>=1,d-=1,3&f){case 0:r.mode=V;break;case 1:if(h(r),r.mode=tt,e===T){f>>>=2,d-=2;break t}break;case 2:r.mode=K;break;case 3:t.msg="invalid block type",r.mode=ht}f>>>=2,d-=2;break;case V:for(f>>>=7&d,d-=7&d;d<32;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}if((65535&f)!=(f>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ht;break}if(r.length=65535&f,f=0,d=0,r.mode=Z,e===T)break t;case Z:r.mode=J;case J:if(dt=r.length){if(dt>c&&(dt=c),dt>l&&(dt=l),0===dt)break t;v.arraySet(o,n,a,dt,s),c-=dt,a+=dt,l-=dt,s+=dt,r.length-=dt;break}r.mode=H;break;case K:for(;d<14;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}if(r.nlen=257+(31&f),f>>>=5,d-=5,r.ndist=1+(31&f),f>>>=5,d-=5,r.ncode=4+(15&f),f>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ht;break}r.have=0,r.mode=Q;case Q:for(;r.have<r.ncode;){for(;d<3;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}r.lens[Pt[r.have++]]=7&f,f>>>=3,d-=3}for(;r.have<19;)r.lens[Pt[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Tt={bits:r.lenbits},Ct=_(w,r.lens,0,19,r.lencode,0,r.work,Tt),r.lenbits=Tt.bits,Ct){t.msg="invalid code lengths set",r.mode=ht;break}r.have=0,r.mode=$;case $:for(;r.have<r.nlen+r.ndist;){for(;vt=r.lencode[f&(1<<r.lenbits)-1],mt=vt>>>24,bt=vt>>>16&255,yt=65535&vt,!(mt<=d);){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}if(yt<16)f>>>=mt,d-=mt,r.lens[r.have++]=yt;else{if(16===yt){for(kt=mt+2;d<kt;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}if(f>>>=mt,d-=mt,0===r.have){t.msg="invalid bit length repeat",r.mode=ht;break}xt=r.lens[r.have-1],dt=3+(3&f),f>>>=2,d-=2}else if(17===yt){for(kt=mt+3;d<kt;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}f>>>=mt,d-=mt,xt=0,dt=3+(7&f),f>>>=3,d-=3}else{for(kt=mt+7;d<kt;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}f>>>=mt,d-=mt,xt=0,dt=11+(127&f),f>>>=7,d-=7}if(r.have+dt>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ht;break}for(;dt--;)r.lens[r.have++]=xt}}if(r.mode===ht)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=ht;break}if(r.lenbits=9,Tt={bits:r.lenbits},Ct=_(S,r.lens,0,r.nlen,r.lencode,0,r.work,Tt),r.lenbits=Tt.bits,Ct){t.msg="invalid literal/lengths set",r.mode=ht;break}if(r.distbits=6,r.distcode=r.distdyn,Tt={bits:r.distbits},Ct=_(x,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Tt),r.distbits=Tt.bits,Ct){t.msg="invalid distances set",r.mode=ht;break}if(r.mode=tt,e===T)break t;case tt:r.mode=et;case et:if(c>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=c,r.hold=f,r.bits=d,y(t,g),s=t.next_out,o=t.output,l=t.avail_out,a=t.next_in,n=t.input,c=t.avail_in,f=r.hold,d=r.bits,r.mode===H&&(r.back=-1);break}for(r.back=0;vt=r.lencode[f&(1<<r.lenbits)-1],mt=vt>>>24,bt=vt>>>16&255,yt=65535&vt,!(mt<=d);){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}if(bt&&0==(240&bt)){for(_t=mt,wt=bt,St=yt;vt=r.lencode[St+((f&(1<<_t+wt)-1)>>_t)],mt=vt>>>24,bt=vt>>>16&255,yt=65535&vt,!(_t+mt<=d);){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}f>>>=_t,d-=_t,r.back+=_t}if(f>>>=mt,d-=mt,r.back+=mt,r.length=yt,0===bt){r.mode=at;break}if(32&bt){r.back=-1,r.mode=H;break}if(64&bt){t.msg="invalid literal/length code",r.mode=ht;break}r.extra=15&bt,r.mode=rt;case rt:if(r.extra){for(kt=r.extra;d<kt;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=it;case it:for(;vt=r.distcode[f&(1<<r.distbits)-1],mt=vt>>>24,bt=vt>>>16&255,yt=65535&vt,!(mt<=d);){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}if(0==(240&bt)){for(_t=mt,wt=bt,St=yt;vt=r.distcode[St+((f&(1<<_t+wt)-1)>>_t)],mt=vt>>>24,bt=vt>>>16&255,yt=65535&vt,!(_t+mt<=d);){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}f>>>=_t,d-=_t,r.back+=_t}if(f>>>=mt,d-=mt,r.back+=mt,64&bt){t.msg="invalid distance code",r.mode=ht;break}r.offset=yt,r.extra=15&bt,r.mode=nt;case nt:if(r.extra){for(kt=r.extra;d<kt;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ht;break}r.mode=ot;case ot:if(0===l)break t;if(dt=g-l,r.offset>dt){if((dt=r.offset-dt)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ht;break}dt>r.wnext?(dt-=r.wnext,pt=r.wsize-dt):pt=r.wnext-dt,dt>r.length&&(dt=r.length),gt=r.window}else gt=o,pt=s-r.offset,dt=r.length;dt>l&&(dt=l),l-=dt,r.length-=dt;do{o[s++]=gt[pt++]}while(--dt);0===r.length&&(r.mode=et);break;case at:if(0===l)break t;o[s++]=r.length,l--,r.mode=et;break;case st:if(r.wrap){for(;d<32;){if(0===c)break t;c--,f|=n[a++]<<d,d+=8}if(g-=l,t.total_out+=g,r.total+=g,g&&(t.adler=r.check=r.flags?b(r.check,o,g,s-g):m(r.check,o,g,s-g)),g=l,(r.flags?f:i(f))!==r.check){t.msg="incorrect data check",r.mode=ht;break}f=0,d=0}r.mode=ct;case ct:if(r.wrap&&r.flags){for(;d<32;){if(0===c)break t;c--,f+=n[a++]<<d,d+=8}if(f!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=ht;break}f=0,d=0}r.mode=lt;case lt:Ct=P;break t;case ht:Ct=R;break t;case ut:return L;case ft:default:return O}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=c,r.hold=f,r.bits=d,(r.wsize||g!==t.avail_out&&r.mode<ht&&(r.mode<st||e!==C))&&u(t,t.output,t.next_out,g-t.avail_out)?(r.mode=ut,L):(p-=t.avail_in,g-=t.avail_out,t.total_in+=p,t.total_out+=g,r.total+=g,r.wrap&&g&&(t.adler=r.check=r.flags?b(r.check,o,g,t.next_out-g):m(r.check,o,g,t.next_out-g)),t.data_type=r.bits+(r.last?64:0)+(r.mode===H?128:0)+(r.mode===tt||r.mode===Z?256:0),(0===p&&0===g||e===C)&&Ct===k&&(Ct=D),Ct)}function d(t){if(!t||!t.state)return O;var e=t.state;return e.window&&(e.window=null),t.state=null,k}function p(t,e){var r;return t&&t.state?(r=t.state,0==(2&r.wrap)?O:(r.head=e,e.done=!1,k)):O}function g(t,e){var r=e.length,i,n,o;return t&&t.state?(i=t.state,0!==i.wrap&&i.mode!==G?O:i.mode===G&&(n=1,(n=m(n,e,r,0))!==i.check)?R:(o=u(t,e,r,r))?(i.mode=ut,L):(i.havedict=1,k)):O}var v=r(8),m=r(22),b=r(23),y=r(55),_=r(56),w=0,S=1,x=2,C=4,A=5,T=6,k=0,P=1,E=2,O=-2,R=-3,L=-4,D=-5,I=8,j=1,M=2,F=3,N=4,B=5,U=6,z=7,W=8,q=9,X=10,G=11,H=12,Y=13,V=14,Z=15,J=16,K=17,Q=18,$=19,tt=20,et=21,rt=22,it=23,nt=24,ot=25,at=26,st=27,ct=28,lt=29,ht=30,ut=31,ft=32,dt=852,pt=592,gt=15,vt=15,mt=!0,bt,yt;e.inflateReset=a,e.inflateReset2=s,e.inflateResetKeep=o,e.inflateInit=l,e.inflateInit2=c,e.inflate=f,e.inflateEnd=d,e.inflateGetHeader=p,e.inflateSetDictionary=g,e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,r){"use strict";var i=30,n=12;t.exports=function t(e,r){var i,n,o,a,s,c,l,h,u,f,d,p,g,v,m,b,y,_,w,S,x,C,A,T,k;i=e.state,n=e.next_in,T=e.input,o=n+(e.avail_in-5),a=e.next_out,k=e.output,s=a-(r-e.avail_out),c=a+(e.avail_out-257),l=i.dmax,h=i.wsize,u=i.whave,f=i.wnext,d=i.window,p=i.hold,g=i.bits,v=i.lencode,m=i.distcode,b=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{g<15&&(p+=T[n++]<<g,g+=8,p+=T[n++]<<g,g+=8),_=v[p&b];e:for(;;){if(w=_>>>24,p>>>=w,g-=w,0===(w=_>>>16&255))k[a++]=65535&_;else{if(!(16&w)){if(0==(64&w)){_=v[(65535&_)+(p&(1<<w)-1)];continue e}if(32&w){i.mode=12;break t}e.msg="invalid literal/length code",i.mode=30;break t}S=65535&_,w&=15,w&&(g<w&&(p+=T[n++]<<g,g+=8),S+=p&(1<<w)-1,p>>>=w,g-=w),g<15&&(p+=T[n++]<<g,g+=8,p+=T[n++]<<g,g+=8),_=m[p&y];r:for(;;){if(w=_>>>24,p>>>=w,g-=w,!(16&(w=_>>>16&255))){if(0==(64&w)){_=m[(65535&_)+(p&(1<<w)-1)];continue r}e.msg="invalid distance code",i.mode=30;break t}if(x=65535&_,w&=15,g<w&&(p+=T[n++]<<g,(g+=8)<w&&(p+=T[n++]<<g,g+=8)),(x+=p&(1<<w)-1)>l){e.msg="invalid distance too far back",i.mode=30;break t}if(p>>>=w,g-=w,w=a-s,x>w){if((w=x-w)>u&&i.sane){e.msg="invalid distance too far back",i.mode=30;break t}if(C=0,A=d,0===f){if(C+=h-w,w<S){S-=w;do{k[a++]=d[C++]}while(--w);C=a-x,A=k}}else if(f<w){if(C+=h+f-w,(w-=f)<S){S-=w;do{k[a++]=d[C++]}while(--w);if(C=0,f<S){w=f,S-=w;do{k[a++]=d[C++]}while(--w);C=a-x,A=k}}}else if(C+=f-w,w<S){S-=w;do{k[a++]=d[C++]}while(--w);C=a-x,A=k}for(;S>2;)k[a++]=A[C++],k[a++]=A[C++],k[a++]=A[C++],S-=3;S&&(k[a++]=A[C++],S>1&&(k[a++]=A[C++]))}else{C=a-x;do{k[a++]=k[C++],k[a++]=k[C++],k[a++]=k[C++],S-=3}while(S>2);S&&(k[a++]=k[C++],S>1&&(k[a++]=k[C++]))}break}}break}}while(n<o&&a<c);S=g>>3,n-=S,g-=S<<3,p&=(1<<g)-1,e.next_in=n,e.next_out=a,e.avail_in=n<o?o-n+5:5-(n-o),e.avail_out=a<c?c-a+257:257-(a-c),i.hold=p,i.bits=g}},function(t,e,r){"use strict";var i=r(8),n=15,o=852,a=592,s=0,c=1,l=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function t(e,r,n,o,a,s,c,l){var p=l.bits,g=0,v=0,m=0,b=0,y=0,_=0,w=0,S=0,x=0,C=0,A,T,k,P,E,O=null,R=0,L,D=new i.Buf16(16),I=new i.Buf16(16),j=null,M=0,F,N,B;for(g=0;g<=15;g++)D[g]=0;for(v=0;v<o;v++)D[r[n+v]]++;for(y=p,b=15;b>=1&&0===D[b];b--);if(y>b&&(y=b),0===b)return a[s++]=20971520,a[s++]=20971520,l.bits=1,0;for(m=1;m<b&&0===D[m];m++);for(y<m&&(y=m),S=1,g=1;g<=15;g++)if(S<<=1,(S-=D[g])<0)return-1;if(S>0&&(0===e||1!==b))return-1;for(I[1]=0,g=1;g<15;g++)I[g+1]=I[g]+D[g];for(v=0;v<o;v++)0!==r[n+v]&&(c[I[r[n+v]]++]=v);if(0===e?(O=j=c,L=19):1===e?(O=h,R-=257,j=u,M-=257,L=256):(O=f,j=d,L=-1),C=0,v=0,g=m,E=s,_=y,w=0,k=-1,x=1<<y,P=x-1,1===e&&x>852||2===e&&x>592)return 1;for(var U=0;;){U++,F=g-w,c[v]<L?(N=0,B=c[v]):c[v]>L?(N=j[M+c[v]],B=O[R+c[v]]):(N=96,B=0),A=1<<g-w,T=1<<_,m=T;do{T-=A,a[E+(C>>w)+T]=F<<24|N<<16|B|0}while(0!==T);for(A=1<<g-1;C&A;)A>>=1;if(0!==A?(C&=A-1,C+=A):C=0,v++,0==--D[g]){if(g===b)break;g=r[n+c[v]]}if(g>y&&(C&P)!==k){for(0===w&&(w=y),E+=m,_=g-w,S=1<<_;_+w<b&&!((S-=D[_+w])<=0);)_++,S<<=1;if(x+=1<<_,1===e&&x>852||2===e&&x>592)return 1;k=C&P,a[k]=y<<24|_<<16|E-s|0}}return 0!==C&&(a[E+C]=g-w<<24|64<<16|0),l.bits=y,0}},function(t,e,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){t.exports=function t(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function t(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function t(e,r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}},function(t,e,r){"use strict";(function(e){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function i(t,e){if(t===e)return 0;for(var r=t.length,i=e.length,n=0,o=Math.min(r,i);n<o;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0}function n(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function a(t){return!n(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function s(t){if(_.isFunction(t)){if(x)return t.name;var e=t.toString(),r=e.match(A);return r&&r[1]}}function c(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function l(t){if(x||!_.isFunction(t))return _.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function h(t){return c(l(t.actual),128)+" "+t.operator+" "+c(l(t.expected),128)}function u(t,e,r,i,n){throw new C.AssertionError({message:r,actual:t,expected:e,operator:i,stackStartFunction:n})}function f(t,e){t||u(t,!0,e,"==",C.ok)}function d(t,e,r,s){if(t===e)return!0;if(n(t)&&n(e))return 0===i(t,e);if(_.isDate(t)&&_.isDate(e))return t.getTime()===e.getTime();if(_.isRegExp(t)&&_.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(a(t)&&a(e)&&o(t)===o(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;s=s||{actual:[],expected:[]};var c=s.actual.indexOf(t);return-1!==c&&c===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),g(t,e,r,s))}return r?t===e:t==e}function p(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function g(t,e,r,i){if(null===t||void 0===t||null===e||void 0===e)return!1;if(_.isPrimitive(t)||_.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var n=p(t),o=p(e);if(n&&!o||!n&&o)return!1;if(n)return t=S.call(t),e=S.call(e),d(t,e,r);var a=T(t),s=T(e),c,l;if(a.length!==s.length)return!1;for(a.sort(),s.sort(),l=a.length-1;l>=0;l--)if(a[l]!==s[l])return!1;for(l=a.length-1;l>=0;l--)if(c=a[l],!d(t[c],e[c],r,i))return!1;return!0}function v(t,e,r){d(t,e,!0)&&u(t,e,r,"notDeepStrictEqual",v)}function m(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function b(t){var e;try{t()}catch(t){e=t}return e}function y(t,e,r,i){var n;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(i=r,r=null),n=b(e),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!n&&u(n,r,"Missing expected exception"+i);var o="string"==typeof i,a=!t&&_.isError(n),s=!t&&n&&!r;if((a&&o&&m(n,r)||s)&&u(n,r,"Got unwanted exception"+i),t&&n&&r&&!m(n,r)||!t&&n)throw n}var _=r(24),w=Object.prototype.hasOwnProperty,S=Array.prototype.slice,x=function(){return"foo"===function t(){}.name}(),C=t.exports=f,A=/\s*function\s+([^\(\s]*)\s*/;C.AssertionError=function t(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var r=e.stackStartFunction||u;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var i=new Error;if(i.stack){var n=i.stack,o=s(r),a=n.indexOf("\n"+o);if(a>=0){var c=n.indexOf("\n",a+1);n=n.substring(c+1)}this.stack=n}}},_.inherits(C.AssertionError,Error),C.fail=u,C.ok=f,C.equal=function t(e,r,i){e!=r&&u(e,r,i,"==",C.equal)},C.notEqual=function t(e,r,i){e==r&&u(e,r,i,"!=",C.notEqual)},C.deepEqual=function t(e,r,i){d(e,r,!1)||u(e,r,i,"deepEqual",C.deepEqual)},C.deepStrictEqual=function t(e,r,i){d(e,r,!0)||u(e,r,i,"deepStrictEqual",C.deepStrictEqual)},C.notDeepEqual=function t(e,r,i){d(e,r,!1)&&u(e,r,i,"notDeepEqual",C.notDeepEqual)},C.notDeepStrictEqual=v,C.strictEqual=function t(e,r,i){e!==r&&u(e,r,i,"===",C.strictEqual)},C.notStrictEqual=function t(e,r,i){e===r&&u(e,r,i,"!==",C.notStrictEqual)},C.throws=function(t,e,r){y(!0,t,e,r)},C.doesNotThrow=function(t,e,r){y(!1,t,e,r)},C.ifError=function(t){if(t)throw t};var T=Object.keys||function(t){var e=[];for(var r in t)w.call(t,r)&&e.push(r);return e}}).call(e,r(0))},function(t,e,r){"use strict";var i=r(12),n=r(62);"undefined"!=typeof window&&"Worker"in window?i.PDFJS.workerPort=new n:i.PDFJS.disableWorker=!0,t.exports=i},function(t,e,r){t.exports=function(){return new Worker(r.p+"cdd3fcf50f101cabb45a.worker.js")}},function(module,exports,__webpack_require__){(function(Buffer,process){function copyGLTo2DDrawImage(t,e){var r=t.canvas,i=e.getContext("2d");i.translate(0,e.height),i.scale(1,-1);var n=r.height-e.height;i.drawImage(r,0,n,e.width,e.height,0,0,e.width,e.height)}function copyGLTo2DPutImageData(t,e){var r=e.getContext("2d"),i=e.width,n=e.height,o=i*n*4,a=new Uint8Array(this.imageBuffer,0,o),s=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,i,n,t.RGBA,t.UNSIGNED_BYTE,a);var c=new ImageData(s,i);r.putImageData(c,0,0)}/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
var fabric=fabric||{version:"2.0.0-beta4"};exports.fabric=fabric,"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=__webpack_require__(64).jsdom(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]}}),fabric.window=fabric.document.defaultView),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode=void 0!==Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.canvasModule="canvas",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.textureSize=2048,fabric.enableGLFiltering=!0,fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,fabric.initFilterBackend=function(){return fabric.isWebglSupported&&fabric.isWebglSupported(fabric.textureSize)&&fabric.enableGLFiltering?(console.log("max texture size: "+fabric.maxTextureSize),new fabric.WebglFilterBackend({tileSize:fabric.textureSize})):fabric.Canvas2dFilterBackend?new fabric.Canvas2dFilterBackend:void 0},function(){function t(t,e){if(this.__eventListeners[t]){var r=this.__eventListeners[t];e?r[r.indexOf(e)]=!1:fabric.util.array.fill(r,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var r in t)this.on(r,t[r]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function r(e,r){if(this.__eventListeners){if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var i in e)t.call(this,i,e[i]);else t.call(this,e,r);return this}}function i(t,e){if(this.__eventListeners){var r=this.__eventListeners[t];if(r){for(var i=0,n=r.length;i<n;i++)r[i]&&r[i].call(this,e||{});return this.__eventListeners[t]=r.filter(function(t){return!1!==t}),this}}}fabric.Observable={observe:e,stopObserving:r,fire:i,on:e,off:r,trigger:i}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,r){var i=this.getObjects();return r?i[e]=t:i.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t=this.getObjects(),e,r=!1,i=0,n=arguments.length;i<n;i++)-1!==(e=t.indexOf(arguments[i]))&&(r=!0,t.splice(e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&r&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var r=this.getObjects(),i=0,n=r.length;i<n;i++)t.call(e,r[i],i,r);return this},getObjects:function(t){return void 0===t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},fabric.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof fabric.Gradient||this.set(e,new fabric.Gradient(t))},_initPattern:function(t,e,r){!t||!t.source||t instanceof fabric.Pattern?r&&r():this.set(e,new fabric.Pattern(t,r))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var e=fabric.util.getFunctionBody(t.clipTo);void 0!==e&&(this.clipTo=new Function("ctx",e))}},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,r=Math.atan2,i=Math.pow,n=Math.abs,o=Math.PI/180;fabric.util={removeFromArray:function(t,e){var r=t.indexOf(e);return-1!==r&&t.splice(r,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*o},radiansToDegrees:function(t){return t/o},rotatePoint:function(t,e,r){t.subtractEquals(e);var i=fabric.util.rotateVector(t,r);return new fabric.Point(i.x,i.y).addEquals(e)},rotateVector:function(t,e){var r=Math.sin(e),i=Math.cos(e);return{x:t.x*i-t.y*r,y:t.x*r+t.y*i}},transformPoint:function(t,e,r){return r?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t){var e=[t[0].x,t[1].x,t[2].x,t[3].x],r=fabric.util.array.min(e),i=fabric.util.array.max(e),n=Math.abs(r-i),o=[t[0].y,t[1].y,t[2].y,t[3].y],a=fabric.util.array.min(o),s=fabric.util.array.max(o);return{left:r,top:a,width:n,height:Math.abs(a-s)}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),r=[e*t[3],-e*t[1],-e*t[2],e*t[0]],i=fabric.util.transformPoint({x:t[4],y:t[5]},r,!0);return r[4]=-i.x,r[5]=-i.y,r},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var r=/\D{0,2}$/.exec(t),i=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),r[0]){case"mm":return i*fabric.DPI/25.4;case"cm":return i*fabric.DPI/2.54;case"in":return i*fabric.DPI;case"pt":return i*fabric.DPI/72;case"pc":return i*fabric.DPI/72*12;case"em":return i*e;default:return i}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(e){if(!e)return fabric;var r=e.split("."),i=r.length,n,o=t||fabric.window;for(n=0;n<i;++n)o=o[r[n]];return o},loadImage:function(t,e,r,i){if(!t)return void(e&&e.call(r,t));var n=fabric.util.createImage();n.onload=function(){e&&e.call(r,n),n=n.onload=n.onerror=null},n.onerror=function(){fabric.log("Error loading "+n.src),e&&e.call(r,null,!0),n=n.onload=n.onerror=null},0!==t.indexOf("data")&&i&&(n.crossOrigin=i),n.src=t},enlivenObjects:function(t,e,r,i){function n(){++a===s&&e&&e(o)}t=t||[];var o=[],a=0,s=t.length;if(!s)return void(e&&e(o));t.forEach(function(t,e){if(!t||!t.type)return void n();fabric.util.getKlass(t.type,r).fromObject(t,function(r,a){a||(o[e]=r),i&&i(t,r,a),n()})})},enlivenPatterns:function(t,e){function r(){++n===o&&e&&e(i)}t=t||[];var i=[],n=0,o=t.length;if(!o)return void(e&&e(i));t.forEach(function(t,e){t&&t.source?new fabric.Pattern(t,function(t){i[e]=t,r()}):(i[e]=t,r())})},groupSVGElements:function(t,e,r){var i;return 1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),i=new fabric.Group(t,e),void 0!==r&&(i.sourcePath=r),i)},populateWithProperties:function(t,e,r){if(r&&"[object Array]"===Object.prototype.toString.call(r))for(var i=0,n=r.length;i<n;i++)r[i]in t&&(e[r[i]]=t[r[i]])},drawDashedLine:function(t,i,n,o,a,s){var c=o-i,l=a-n,h=e(c*c+l*l),u=r(l,c),f=s.length,d=0,p=!0;for(t.save(),t.translate(i,n),t.moveTo(0,0),t.rotate(u),i=0;h>i;)i+=s[d++%f],i>h&&(i=h),t[p?"lineTo":"moveTo"](i,0),p=!p;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t},createImage:function(){return fabric.document.createElement("img")},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,r){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],r?0:t[0]*e[4]+t[2]*e[5]+t[4],r?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var n=r(t[1],t[0]),a=i(t[0],2)+i(t[1],2),s=e(a),c=(t[0]*t[3]-t[2]*t[1])/s,l=r(t[0]*t[2]+t[1]*t[3],a);return{angle:n/o,scaleX:s,scaleY:c,skewX:l/o,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,r){var i=[1,0,n(Math.tan(r*o)),1],a=[n(t),0,0,n(e)];return fabric.util.multiplyTransformMatrices(a,i,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.setAngle(0)},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,r,i){i>0&&(e>i?e-=i:e=0,r>i?r-=i:r=0);var n=!0,o,a,s=t.getImageData(e,r,2*i||1,2*i||1),c=s.data.length;for(o=3;o<c&&(a=s.data[o],!1!==(n=a<=0));o+=4);return s=null,n},parsePreserveAspectRatioAttribute:function(t){var e="meet",r="Mid",i="Mid",n=t.split(" "),o;return n&&n.length&&(e=n.pop(),"meet"!==e&&"slice"!==e?(o=e,e="meet"):n.length&&(o=n.pop())),r="none"!==o?o.slice(1,4):"none",i="none"!==o?o.slice(5,8):"none",{meetOrSlice:e,alignX:r,alignY:i}},clearFabricFontCache:function(t){t?fabric.charWidthsCache[t]&&delete fabric.charWidthsCache[t]:fabric.charWidthsCache={}},limitDimsByArea:function(t,e){var r=Math.sqrt(e*t),i=Math.floor(e/r);return{x:Math.floor(r),y:i}},capValue:function(t,e,r){return Math.max(t,Math.min(e,r))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)}}}(exports),function(){function t(t,i,o,a,c,l,h){var u=s.call(arguments);if(n[u])return n[u];var f=Math.PI,d=h*f/180,p=Math.sin(d),g=Math.cos(d),v=0,m=0;o=Math.abs(o),a=Math.abs(a);var b=-g*t*.5-p*i*.5,y=-g*i*.5+p*t*.5,_=o*o,w=a*a,S=y*y,x=b*b,C=_*w-_*S-w*x,A=0;if(C<0){var T=Math.sqrt(1-C/(_*w));o*=T,a*=T}else A=(c===l?-1:1)*Math.sqrt(C/(_*S+w*x));var k=A*o*y/a,P=-A*a*b/o,E=g*k-p*P+.5*t,O=p*k+g*P+.5*i,R=r(1,0,(b-k)/o,(y-P)/a),L=r((b-k)/o,(y-P)/a,(-b-k)/o,(-y-P)/a);0===l&&L>0?L-=2*f:1===l&&L<0&&(L+=2*f);for(var D=Math.ceil(Math.abs(L/f*2)),I=[],j=L/D,M=8/3*Math.sin(j/4)*Math.sin(j/4)/Math.sin(j/2),F=R+j,N=0;N<D;N++)I[N]=e(R,F,g,p,o,a,E,O,M,v,m),v=I[N][4],m=I[N][5],R=F,F+=j;return n[u]=I,I}function e(t,e,r,i,n,a,c,l,h,u,f){var d=s.call(arguments);if(o[d])return o[d];var p=Math.cos(t),g=Math.sin(t),v=Math.cos(e),m=Math.sin(e),b=r*n*v-i*a*m+c,y=i*n*v+r*a*m+l,_=u+h*(-r*n*g-i*a*p),w=f+h*(-i*n*g+r*a*p),S=b+h*(r*n*m+i*a*v),x=y+h*(i*n*m-r*a*v);return o[d]=[_,w,S,x,b,y],o[d]}function r(t,e,r,i){var n=Math.atan2(e,t),o=Math.atan2(i,r);return o>=n?o-n:2*Math.PI-(n-o)}function i(t,e,r,i,n,o,c,l){var h=s.call(arguments);if(a[h])return a[h];var u=Math.sqrt,f=Math.min,d=Math.max,p=Math.abs,g=[],v=[[],[]],m,b,y,_,w,S,x,C;b=6*t-12*r+6*n,m=-3*t+9*r-9*n+3*c,y=3*r-3*t;for(var A=0;A<2;++A)if(A>0&&(b=6*e-12*i+6*o,m=-3*e+9*i-9*o+3*l,y=3*i-3*e),p(m)<1e-12){if(p(b)<1e-12)continue;0<(_=-y/b)&&_<1&&g.push(_)}else(x=b*b-4*y*m)<0||(C=u(x),w=(-b+C)/(2*m),0<w&&w<1&&g.push(w),0<(S=(-b-C)/(2*m))&&S<1&&g.push(S));for(var T,k,P=g.length,E=P,O;P--;)_=g[P],O=1-_,T=O*O*O*t+3*O*O*_*r+3*O*_*_*n+_*_*_*c,v[0][P]=T,k=O*O*O*e+3*O*O*_*i+3*O*_*_*o+_*_*_*l,v[1][P]=k;v[0][E]=t,v[1][E]=e,v[0][E+1]=c,v[1][E+1]=l;var R=[{x:f.apply(null,v[0]),y:f.apply(null,v[1])},{x:d.apply(null,v[0]),y:d.apply(null,v[1])}];return a[h]=R,R}var n={},o={},a={},s=Array.prototype.join;fabric.util.drawArc=function(e,r,i,n){for(var o=n[0],a=n[1],s=n[2],c=n[3],l=n[4],h=n[5],u=n[6],f=[[],[],[],[]],d=t(h-r,u-i,o,a,c,l,s),p=0,g=d.length;p<g;p++)f[p][0]=d[p][0]+r,f[p][1]=d[p][1]+i,f[p][2]=d[p][2]+r,f[p][3]=d[p][3]+i,f[p][4]=d[p][4]+r,f[p][5]=d[p][5]+i,e.bezierCurveTo.apply(e,f[p])},fabric.util.getBoundsOfArc=function(e,r,n,o,a,s,c,l,h){for(var u=0,f=0,d,p=[],g=t(l-e,h-r,n,o,s,c,a),v=0,m=g.length;v<m;v++)d=i(u,f,g[v][0],g[v][1],g[v][2],g[v][3],g[v][4],g[v][5]),p.push({x:d[0].x+e,y:d[0].y+r}),p.push({x:d[1].x+e,y:d[1].y+r}),u=g[v][4],f=g[v][5];return p},fabric.util.getBoundsOfCurve=i}(),function(){function t(t,e){for(var r=o.call(arguments,2),i=[],n=0,a=t.length;n<a;n++)i[n]=r.length?t[n][e].apply(t[n],r):t[n][e].call(t[n]);return i}function e(t,e){return n(t,e,function(t,e){return t>=e})}function r(t,e){return n(t,e,function(t,e){return t<e})}function i(t,e){for(var r=t.length;r--;)t[r]=e;return t}function n(t,e,r){if(t&&0!==t.length){var i=t.length-1,n=e?t[i][e]:t[i];if(e)for(;i--;)r(t[i][e],n)&&(n=t[i][e]);else for(;i--;)r(t[i],n)&&(n=t[i]);return n}}var o=Array.prototype.slice;fabric.util.array={fill:i,invoke:t,min:r,max:e}}(),function(){function t(e,r,i){if(i)if(!fabric.isLikelyNode&&r instanceof Element)e=r;else if(r instanceof Array){e=[];for(var n=0,o=r.length;n<o;n++)e[n]=t({},r[n],i)}else if(r&&"object"==typeof r)for(var a in r)r.hasOwnProperty(a)&&(e[a]=t({},r[a],i));else e=r;else for(var a in r)e[a]=r[a];return e}function e(e,r){return t({},e,r)}fabric.util.object={extend:t,clone:e}}(),function(){function t(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function r(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(t){for(var e=0,r=[],e=0,i;e<t.length;e++)!1!==(i=n(t,e))&&r.push(i);return r}function n(t,e){var r=t.charCodeAt(e);if(isNaN(r))return"";if(r<55296||r>57343)return t.charAt(e);if(55296<=r&&r<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var i=t.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var n=t.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1}fabric.util.string={camelize:t,capitalize:e,escapeXml:r,graphemeSplit:i}}(),function(){function t(){}function e(t){for(var e=null,r=this;r.constructor.superclass;){var n=r.constructor.superclass.prototype[t];if(r[t]!==n){e=n;break}r=r.constructor.superclass.prototype}return e?arguments.length>1?e.apply(this,i.call(arguments,1)):e.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}function r(){function r(){this.initialize.apply(this,arguments)}var o=null,s=i.call(arguments,0);"function"==typeof s[0]&&(o=s.shift()),r.superclass=o,r.subclasses=[],o&&(t.prototype=o.prototype,r.prototype=new t,o.subclasses.push(r));for(var c=0,l=s.length;c<l;c++)a(r,s[c],o);return r.prototype.initialize||(r.prototype.initialize=n),r.prototype.constructor=r,r.prototype.callSuper=e,r}var i=Array.prototype.slice,n=function(){},o=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),a=function(t,e,r){for(var i in e)i in t.prototype&&"function"==typeof t.prototype[i]&&(e[i]+"").indexOf("callSuper")>-1?t.prototype[i]=function(t){return function(){var i=this.constructor.superclass;this.constructor.superclass=r;var n=e[t].apply(this,arguments);if(this.constructor.superclass=i,"initialize"!==t)return n}}(i):t.prototype[i]=e[i],o&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=r}(),function(){function t(t){var e=Array.prototype.slice.call(arguments,1),r,i,n=e.length;for(i=0;i<n;i++)if(r=typeof t[e[i]],!/^(?:function|object|unknown)$/.test(r))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:r(t,e)}}function r(t,e){return function(r){e.call(s(t),r||fabric.window.event)}}function i(t,e){return function(r){if(d[t]&&d[t][e])for(var i=d[t][e],n=0,o=i.length;n<o;n++)i[n].call(this,r||fabric.window.event)}}function n(t){t||(t=fabric.window.event);var e=t.target||(typeof t.srcElement!==a?t.srcElement:null),r=fabric.util.getScrollLeftTop(e);return{x:v(t)+r.left,y:m(t)+r.top}}function o(t,e,r){var i="touchend"===t.type?"changedTouches":"touches";return t[i]&&t[i][0]?t[i][0][e]-(t[i][0][e]-t[i][0][r])||t[r]:t[r]}var a="unknown",s,c,l=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};s=function(e){return t[e]},c=function(e,r){t[e]=r}}();var h=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),u=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),f={},d={},p,g;h?(p=function(t,e,r,i){t&&t.addEventListener(e,r,!u&&i)},g=function(t,e,r,i){t&&t.removeEventListener(e,r,!u&&i)}):u?(p=function(t,r,i){if(t){var n=l(t);c(n,t),f[n]||(f[n]={}),f[n][r]||(f[n][r]=[]);var o=e(n,i);f[n][r].push(o),t.attachEvent("on"+r,o.wrappedHandler)}},g=function(t,e,r){if(t){var i=l(t),n;if(f[i]&&f[i][e])for(var o=0,a=f[i][e].length;o<a;o++)(n=f[i][e][o])&&n.handler===r&&(t.detachEvent("on"+e,n.wrappedHandler),f[i][e][o]=null)}}):(p=function(t,e,r){if(t){var n=l(t);if(d[n]||(d[n]={}),!d[n][e]){d[n][e]=[];var o=t["on"+e];o&&d[n][e].push(o),t["on"+e]=i(n,e)}d[n][e].push(r)}},g=function(t,e,r){if(t){var i=l(t);if(d[i]&&d[i][e])for(var n=d[i][e],o=0,a=n.length;o<a;o++)n[o]===r&&n.splice(o,1)}}),fabric.util.addListener=p,fabric.util.removeListener=g;var v=function(t){return t.clientX},m=function(t){return t.clientY};fabric.isTouchSupported&&(v=function(t){return o(t,"pageX","clientX")},m=function(t){return o(t,"pageY","clientY")}),fabric.util.getPointer=n,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function t(t,e){var r=t.style;if(!r)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?o(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var i in e)if("opacity"===i)o(t,e[i]);else{var n="float"===i||"cssFloat"===i?void 0===r.styleFloat?"cssFloat":"styleFloat":i;r[n]=e[i]}return t}var e=fabric.document.createElement("div"),r="string"==typeof e.style.opacity,i="string"==typeof e.style.filter,n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(t){return t};r?o=function(t,e){return t.style.opacity=e,t}:i&&(o=function(t,e){var r=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(r.zoom=1),n.test(r.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",r.filter=r.filter.replace(n,e)):r.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=t}(),function(){function t(t){return"string"==typeof t?fabric.document.getElementById(t):t}function e(t,e){var r=fabric.document.createElement(t);for(var i in e)"class"===i?r.className=e[i]:"for"===i?r.htmlFor=e[i]:r.setAttribute(i,e[i]);return r}function r(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function i(t,r,i){return"string"==typeof r&&(r=e(r,i)),t.parentNode&&t.parentNode.replaceChild(r,t),r.appendChild(t),r}function n(t){for(var e=0,r=0,i=fabric.document.documentElement,n=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&(t=t.parentNode||t.host,t===fabric.document?(e=n.scrollLeft||i.scrollLeft||0,r=n.scrollTop||i.scrollTop||0):(e+=t.scrollLeft||0,r+=t.scrollTop||0),1!==t.nodeType||"fixed"!==fabric.util.getElementStyle(t,"position")););return{left:e,top:r}}function o(t){var e,r=t&&t.ownerDocument,i={left:0,top:0},o={left:0,top:0},a,s={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return o;for(var c in s)o[s[c]]+=parseInt(l(t,c),10)||0;return e=r.documentElement,void 0!==t.getBoundingClientRect&&(i=t.getBoundingClientRect()),a=n(t),{left:i.left+a.left-(e.clientLeft||0)+o.left,top:i.top+a.top-(e.clientTop||0)+o.top}}var a=Array.prototype.slice,s,c=function(t){return a.call(t,0)};try{s=c(fabric.document.childNodes)instanceof Array}catch(t){}s||(c=function(t){for(var e=new Array(t.length),r=t.length;r--;)e[r]=t[r];return e});var l;l=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var r=fabric.document.defaultView.getComputedStyle(t,null);return r?r[e]:void 0}:function(t,e){var r=t.style[e];return!r&&t.currentStyle&&(r=t.currentStyle[e]),r},function(){function t(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),i?t.style[i]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t}function e(t){return void 0!==t.onselectstart&&(t.onselectstart=null),i?t.style[i]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}var r=fabric.document.documentElement.style,i="userSelect"in r?"userSelect":"MozUserSelect"in r?"MozUserSelect":"WebkitUserSelect"in r?"WebkitUserSelect":"KhtmlUserSelect"in r?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=t,fabric.util.makeElementSelectable=e}(),function(){function t(t,e){var r=fabric.document.getElementsByTagName("head")[0],i=fabric.document.createElement("script"),n=!0;i.onload=i.onreadystatechange=function(t){if(n){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;n=!1,e(t||fabric.window.event),i=i.onload=i.onreadystatechange=null}},i.src=t,r.appendChild(i)}fabric.util.getScript=t}(),fabric.util.getById=t,fabric.util.toArray=c,fabric.util.makeElement=e,fabric.util.addClass=r,fabric.util.wrapElement=i,fabric.util.getScrollLeftTop=n,fabric.util.getElementOffset=o,fabric.util.getElementStyle=l}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function r(r,n){n||(n={});var o=n.method?n.method.toUpperCase():"GET",a=n.onComplete||function(){},s=i(),c=n.body||n.parameters;return s.onreadystatechange=function(){4===s.readyState&&(a(s),s.onreadystatechange=e)},"GET"===o&&(c=null,"string"==typeof n.parameters&&(r=t(r,n.parameters))),s.open(o,r,!0),"POST"!==o&&"PUT"!==o||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(c),s}var i=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{if(t[e]())return t[e]}catch(t){}}();fabric.util.request=r}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){void 0!==console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(){return!1}function e(e){r(function(i){e||(e={});var n=i||+new Date,o=e.duration||500,a=n+o,s,c=e.onChange||t,l=e.abort||t,h=e.onComplete||t,u=e.easing||function(t,e,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+e},f="startValue"in e?e.startValue:0,d="endValue"in e?e.endValue:100,p=e.byValue||d-f;e.onStart&&e.onStart(),function t(i){if(l())return void h(d,1,1);s=i||+new Date;var g=s>a?o:s-n,v=g/o,m=u(g,f,p,o),b=Math.abs((m-f)/p);if(c(m,b,v),s>a)return void(e.onComplete&&e.onComplete());r(t)}(n)})}function r(){return i.apply(fabric.window,arguments)}var i=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};fabric.util.animate=e,fabric.util.requestAnimFrame=r}(),function(){function t(t,e,r){var i="rgba("+parseInt(t[0]+r*(e[0]-t[0]),10)+","+parseInt(t[1]+r*(e[1]-t[1]),10)+","+parseInt(t[2]+r*(e[2]-t[2]),10);return i+=","+(t&&e?parseFloat(t[3]+r*(e[3]-t[3])):1),i+=")"}function e(e,r,i,n){var o=new fabric.Color(e).getSource(),a=new fabric.Color(r).getSource();n=n||{},fabric.util.animate(fabric.util.object.extend(n,{duration:i||500,startValue:o,endValue:a,byValue:a,easing:function(e,r,i,o){return t(r,i,n.colorEasing?n.colorEasing(e,o):1-Math.cos(e/o*(Math.PI/2)))}}))}fabric.util.animateColor=e}(),function(){function t(t,e,r,i){return t<Math.abs(e)?(t=e,i=r/4):i=0===e&&0===t?r/(2*Math.PI)*Math.asin(1):r/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:r,s:i}}function e(t,e,r){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*r-t.s)*(2*Math.PI)/t.p)}function r(t,e,r,i){return r*((t=t/i-1)*t*t+1)+e}function i(t,e,r,i){return t/=i/2,t<1?r/2*t*t*t+e:r/2*((t-=2)*t*t+2)+e}function n(t,e,r,i){return r*(t/=i)*t*t*t+e}function o(t,e,r,i){return-r*((t=t/i-1)*t*t*t-1)+e}function a(t,e,r,i){return t/=i/2,t<1?r/2*t*t*t*t+e:-r/2*((t-=2)*t*t*t-2)+e}function s(t,e,r,i){return r*(t/=i)*t*t*t*t+e}function c(t,e,r,i){return r*((t=t/i-1)*t*t*t*t+1)+e}function l(t,e,r,i){return t/=i/2,t<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e}function h(t,e,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+e}function u(t,e,r,i){return r*Math.sin(t/i*(Math.PI/2))+e}function f(t,e,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+e}function d(t,e,r,i){return 0===t?e:r*Math.pow(2,10*(t/i-1))+e}function p(t,e,r,i){return t===i?e+r:r*(1-Math.pow(2,-10*t/i))+e}function g(t,e,r,i){return 0===t?e:t===i?e+r:(t/=i/2,t<1?r/2*Math.pow(2,10*(t-1))+e:r/2*(2-Math.pow(2,-10*--t))+e)}function v(t,e,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+e}function m(t,e,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+e}function b(t,e,r,i){return t/=i/2,t<1?-r/2*(Math.sqrt(1-t*t)-1)+e:r/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function y(r,i,n,o){var a=0,s=n;return 0===r?i:1==(r/=o)?i+n:(a||(a=.3*o),-e(t(s,n,a,1.70158),r,o)+i)}function _(e,r,i,n){var o=1.70158,a=0,s=i;if(0===e)return r;if(1===(e/=n))return r+i;a||(a=.3*n);var c=t(s,i,a,o);return c.a*Math.pow(2,-10*e)*Math.sin((e*n-c.s)*(2*Math.PI)/c.p)+c.c+r}function w(r,i,n,o){var a=1.70158,s=0,c=n;if(0===r)return i;if(2===(r/=o/2))return i+n;s||(s=o*(.3*1.5));var l=t(c,n,s,a);return r<1?-.5*e(l,r,o)+i:l.a*Math.pow(2,-10*(r-=1))*Math.sin((r*o-l.s)*(2*Math.PI)/l.p)*.5+l.c+i}function S(t,e,r,i,n){return void 0===n&&(n=1.70158),r*(t/=i)*t*((n+1)*t-n)+e}function x(t,e,r,i,n){return void 0===n&&(n=1.70158),r*((t=t/i-1)*t*((n+1)*t+n)+1)+e}function C(t,e,r,i,n){return void 0===n&&(n=1.70158),t/=i/2,t<1?r/2*(t*t*((1+(n*=1.525))*t-n))+e:r/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e}function A(t,e,r,i){return r-T(i-t,0,r,i)+e}function T(t,e,r,i){return(t/=i)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function k(t,e,r,i){return t<i/2?.5*A(2*t,0,r,i)+e:.5*T(2*t-i,0,r,i)+.5*r+e}fabric.util.ease={easeInQuad:function(t,e,r,i){return r*(t/=i)*t+e},easeOutQuad:function(t,e,r,i){return-r*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,r,i){return t/=i/2,t<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,r,i){return r*(t/=i)*t*t+e},easeOutCubic:r,easeInOutCubic:i,easeInQuart:n,easeOutQuart:o,easeInOutQuart:a,easeInQuint:s,easeOutQuint:c,easeInOutQuint:l,easeInSine:h,easeOutSine:u,easeInOutSine:f,easeInExpo:d,easeOutExpo:p,easeInOutExpo:g,easeInCirc:v,easeOutCirc:m,easeInOutCirc:b,easeInElastic:y,easeOutElastic:_,easeInOutElastic:w,easeInBack:S,easeOutBack:x,easeInOutBack:C,easeInBounce:A,easeOutBounce:T,easeInOutBounce:k}}(),function(t){"use strict";function e(t){return t in A?A[t]:t}function r(t,e,r,i){var n="[object Array]"===Object.prototype.toString.call(e),o;return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e="none"===e?null:e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=r&&r.transformMatrix?_(r.transformMatrix,g.parseTransformAttribute(e)):g.parseTransformAttribute(e):"visible"===t?(e="none"!==e&&"hidden"!==e,r&&!1===r.visible&&(e=!1)):"opacity"===t?(e=parseFloat(e),r&&void 0!==r.opacity&&(e*=r.opacity)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":o=n?e.map(y):y(e,i):e="",!n&&isNaN(o)?e:o}function i(t){for(var e in T)if(void 0!==t[T[e]]&&""!==t[e]){if(void 0===t[e]){if(!g.Object.prototype[e])continue;t[e]=g.Object.prototype[e]}if(0!==t[e].indexOf("url(")){var r=new g.Color(t[e]);t[e]=r.setAlpha(b(r.getAlpha()*t[T[e]],2)).toRgba()}}return t}function n(t,e){for(var r,i=[],n,o=0;o<e.length;o++)r=e[o],n=t.getElementsByTagName(r),i=i.concat(Array.prototype.slice.call(n));return i}function o(t,e){var r,i;t.replace(/;\s*$/,"").split(";").forEach(function(t){var n=t.split(":");r=n[0].trim().toLowerCase(),i=n[1].trim(),e[r]=i})}function a(t,e){var r,i;for(var n in t)void 0!==t[n]&&(r=n.toLowerCase(),i=t[n],e[r]=i)}function s(t,e){var r={};for(var i in g.cssRules[e])if(c(t,i.split(" ")))for(var n in g.cssRules[e][i])r[n]=g.cssRules[e][i][n];return r}function c(t,e){var r,i=!0;return r=h(t,e.pop()),r&&e.length&&(i=l(t,e)),r&&i&&0===e.length}function l(t,e){for(var r,i=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)i&&(r=e.pop()),t=t.parentNode,i=h(t,r);return 0===e.length}function h(t,e){var r=t.nodeName,i=t.getAttribute("class"),n=t.getAttribute("id"),o;if(o=new RegExp("^"+r,"i"),e=e.replace(o,""),n&&e.length&&(o=new RegExp("#"+n+"(?![a-zA-Z\\-]+)","i"),e=e.replace(o,"")),i&&e.length){i=i.split(" ");for(var a=i.length;a--;)o=new RegExp("\\."+i[a]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(o,"")}return 0===e.length}function u(t,e){var r;if(t.getElementById&&(r=t.getElementById(e)),r)return r;var i,n,o=t.getElementsByTagName("*");for(n=0;n<o.length;n++)if(i=o[n],e===i.getAttribute("id"))return i}function f(t){for(var e=n(t,["use","svg:use"]),r=0;e.length&&r<e.length;){var i=e[r],o=i.getAttribute("xlink:href").substr(1),a=i.getAttribute("x")||0,s=i.getAttribute("y")||0,c=u(t,o).cloneNode(!0),l=(c.getAttribute("transform")||"")+" translate("+a+", "+s+")",h,f=e.length,p,g,v,m;if(d(c),/^svg$/i.test(c.nodeName)){var b=c.ownerDocument.createElement("g");for(g=0,v=c.attributes,m=v.length;g<m;g++)p=v.item(g),b.setAttribute(p.nodeName,p.nodeValue);for(;c.firstChild;)b.appendChild(c.firstChild);c=b}for(g=0,v=i.attributes,m=v.length;g<m;g++)p=v.item(g),"x"!==p.nodeName&&"y"!==p.nodeName&&"xlink:href"!==p.nodeName&&("transform"===p.nodeName?l=p.nodeValue+" "+l:c.setAttribute(p.nodeName,p.nodeValue));c.setAttribute("transform",l),c.setAttribute("instantiated_by_use","1"),c.removeAttribute("id"),h=i.parentNode,h.replaceChild(c,i),e.length===f&&r++}}function d(t){var e=t.getAttribute("viewBox"),r=1,i=1,n=0,o=0,a,s,c,l,h=t.getAttribute("width"),u=t.getAttribute("height"),f=t.getAttribute("x")||0,d=t.getAttribute("y")||0,p=t.getAttribute("preserveAspectRatio")||"",v=!e||!S.test(t.nodeName)||!(e=e.match(k)),m=!h||!u||"100%"===h||"100%"===u,b=v&&m,_={},w="";if(_.width=0,_.height=0,_.toBeParsed=b,b)return _;if(v)return _.width=y(h),_.height=y(u),_;if(n=-parseFloat(e[1]),o=-parseFloat(e[2]),a=parseFloat(e[3]),s=parseFloat(e[4]),m?(_.width=a,_.height=s):(_.width=y(h),_.height=y(u),r=_.width/a,i=_.height/s),p=g.util.parsePreserveAspectRatioAttribute(p),"none"!==p.alignX&&(i=r=r>i?i:r),1===r&&1===i&&0===n&&0===o&&0===f&&0===d)return _;if((f||d)&&(w=" translate("+y(f)+" "+y(d)+") "),c=w+" matrix("+r+" 0 0 "+i+" "+n*r+" "+o*i+") ","svg"===t.nodeName){for(l=t.ownerDocument.createElement("g");t.firstChild;)l.appendChild(t.firstChild);t.appendChild(l)}else l=t,c=l.getAttribute("transform")+c;return l.setAttribute("transform",c),_}function p(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}var g=t.fabric||(t.fabric={}),v=g.util.object.extend,m=g.util.object.clone,b=g.util.toFixed,y=g.util.parseUnit,_=g.util.multiplyTransformMatrices,w=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/i,S=/^(symbol|image|marker|pattern|view|svg)$/i,x=/^(?:pattern|defs|symbol|metadata|clipPath|mask)$/i,C=/^(symbol|g|a|svg)$/i,A={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX",opacity:"opacity"},T={stroke:"strokeOpacity",fill:"fillOpacity"};g.cssRules={},g.gradientDefs={},g.parseTransformAttribute=function(){function t(t,e){var r=Math.cos(e[0]),i=Math.sin(e[0]),n=0,o=0;3===e.length&&(n=e[1],o=e[2]),t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=n-(r*n-i*o),t[5]=o-(i*n+r*o)}function e(t,e){var r=e[0],i=2===e.length?e[1]:e[0];t[0]=r,t[3]=i}function r(t,e,r){t[r]=Math.tan(g.util.degreesToRadians(e[0]))}function i(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var n=[1,0,0,1,0,0],o=g.reNum,a="(?:\\s+,?\\s*|,\\s*)",s="(?:(skewX)\\s*\\(\\s*("+o+")\\s*\\))",c="(?:(skewY)\\s*\\(\\s*("+o+")\\s*\\))",l="(?:(rotate)\\s*\\(\\s*("+o+")(?:"+a+"("+o+")"+a+"("+o+"))?\\s*\\))",h="(?:(scale)\\s*\\(\\s*("+o+")(?:"+a+"("+o+"))?\\s*\\))",u="(?:(translate)\\s*\\(\\s*("+o+")(?:"+a+"("+o+"))?\\s*\\))",f="(?:(matrix)\\s*\\(\\s*("+o+")"+a+"("+o+")"+a+"("+o+")"+a+"("+o+")"+a+"("+o+")"+a+"("+o+")\\s*\\))",d="(?:"+f+"|"+u+"|"+h+"|"+l+"|"+s+"|"+c+")",p="(?:"+d+"(?:"+a+"*"+d+")*)",v="^\\s*(?:"+p+"?)\\s*$",m=new RegExp(v),b=new RegExp(d,"g");return function(o){var a=n.concat(),s=[];if(!o||o&&!m.test(o))return a;o.replace(b,function(o){var c=new RegExp(d).exec(o).filter(function(t){return!!t}),l=c[1],h=c.slice(2).map(parseFloat);switch(l){case"translate":i(a,h);break;case"rotate":h[0]=g.util.degreesToRadians(h[0]),t(a,h);break;case"scale":e(a,h);break;case"skewX":r(a,h,2);break;case"skewY":r(a,h,1);break;case"matrix":a=h}s.push(a.concat()),a=n.concat()});for(var c=s[0];s.length>1;)s.shift(),c=g.util.multiplyTransformMatrices(c,s[0]);return c}}();var k=new RegExp("^\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*,?\\s*("+g.reNum+"+)\\s*$");g.parseSVGDocument=function(t,e,r,i){if(t){f(t);var n=g.Object.__uid++,o=d(t),a=g.util.toArray(t.getElementsByTagName("*"));if(o.crossOrigin=i&&i.crossOrigin,o.svgUid=n,0===a.length&&g.isLikelyNode){a=t.selectNodes('//*[name(.)!="svg"]');for(var s=[],c=0,l=a.length;c<l;c++)s[c]=a[c];a=s}var h=a.filter(function(t){return d(t),w.test(t.nodeName.replace("svg:",""))&&!p(t,x)});if(!h||h&&!h.length)return void(e&&e([],{}));g.gradientDefs[n]=g.getGradientDefs(t),g.cssRules[n]=g.getCSSRules(t),g.parseElements(h,function(t,r){e&&e(t,o,r,a)},m(o),r,i)}};var P=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+g.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+g.reNum+"))?\\s+(.*)");v(g,{parseFontDeclaration:function(t,e){var r=t.match(P);if(r){var i=r[1],n=r[3],o=r[4],a=r[5],s=r[6];i&&(e.fontStyle=i),n&&(e.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),o&&(e.fontSize=y(o)),s&&(e.fontFamily=s),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],r=n(t,e),i,o=0,a,s,c={},l={};for(o=r.length;o--;)i=r[o],s=i.getAttribute("xlink:href"),a=i.getAttribute("id"),s&&(l[a]=s.substr(1)),c[a]=i;for(a in l){var h=c[l[a]].cloneNode(!0);for(i=c[a];h.firstChild;)i.appendChild(h.firstChild)}return c},parseAttributes:function(t,n,o){if(t){var a,c={},l;void 0===o&&(o=t.getAttribute("svgUid")),t.parentNode&&C.test(t.parentNode.nodeName)&&(c=g.parseAttributes(t.parentNode,n,o)),l=c&&c.fontSize||t.getAttribute("font-size")||g.Text.DEFAULT_SVG_FONT_SIZE;var h=n.reduce(function(e,r){return a=t.getAttribute(r),a&&(e[r]=a),e},{});h=v(h,v(s(t,o),g.parseStyleAttribute(t)));var u,f,d={};for(var p in h)u=e(p),f=r(u,h[p],c,l),d[u]=f;d&&d.font&&g.parseFontDeclaration(d.font,d);var m=v(c,d);return C.test(t.nodeName)?m:i(m)}},parseElements:function(t,e,r,i,n){new g.ElementsParser(t,e,r,i,n).parse()},parseStyleAttribute:function(t){var e={},r=t.getAttribute("style");return r?("string"==typeof r?o(r,e):a(r,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e=[],r,i;for(r=0,i=t.length;r<i;r+=2)e.push({x:parseFloat(t[r]),y:parseFloat(t[r+1])});return e},getCSSRules:function(t){for(var e=t.getElementsByTagName("style"),r={},i,n=0,o=e.length;n<o;n++){var a=e[n].textContent||e[n].text;a=a.replace(/\/\*[\s\S]*?\*\//g,""),""!==a.trim()&&(i=a.match(/[^{]*\{[\s\S]*?\}/g),i=i.map(function(t){return t.trim()}),i.forEach(function(t){for(var e=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),i={},n=e[2].trim(),o=n.replace(/;$/,"").split(/\s*;\s*/),a=0,s=o.length;a<s;a++){var c=o[a].split(/\s*:\s*/),l=c[0],h=c[1];i[l]=h}t=e[1],t.split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(r[t]?g.util.object.extend(r[t],i):r[t]=g.util.object.clone(i))})}))}return r},loadSVGFromURL:function(t,e,r,i){function n(t){var n=t.responseXML;n&&!n.documentElement&&g.window.ActiveXObject&&t.responseText&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),n&&n.documentElement||e&&e(null),g.parseSVGDocument(n.documentElement,function(t,r,i,n){e&&e(t,r,i,n)},r,i)}t=t.replace(/^\n\s*/,"").trim(),new g.util.request(t,{method:"get",onComplete:n})},loadSVGFromString:function(t,e,r,i){t=t.trim();var n;if("undefined"!=typeof DOMParser){var o=new DOMParser;o&&o.parseFromString&&(n=o.parseFromString(t,"text/xml"))}else g.window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));g.parseSVGDocument(n.documentElement,function(t,r,i,n){e(t,r,i,n)},r,i)}})}(exports),fabric.ElementsParser=function(t,e,r,i,n){this.elements=t,this.callback=e,this.options=r,this.reviver=i,this.svgUid=r&&r.svgUid||0,this.parsingOptions=n},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var r=fabric[fabric.util.string.capitalize(t.tagName.replace("svg:",""))];if(r&&r.fromElement)try{this._createObject(r,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,r){t.fromElement(e,this.createCallback(r,e),this.options)},fabric.ElementsParser.prototype.createCallback=function(t,e){var r=this;return function(i){r.resolveGradient(i,"fill"),r.resolveGradient(i,"stroke"),i._removeTransformMatrix(),i instanceof fabric.Image&&i.parsePreserveAspectRatioAttribute(e),r.reviver&&r.reviver(e,i),r.instances[t]=i,r.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var r=t.get(e);if(/^url\(/.test(r)){var i=r.slice(5,r.length-1);fabric.gradientDefs[this.svgUid][i]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][i],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances,this.elements))},function(t){"use strict";function e(t,e){this.x=t,this.y=e}var r=t.fabric||(t.fabric={});if(r.Point)return void r.warn("fabric.Point is already defined");r.Point=e,e.prototype={type:"point",constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,r){return void 0===r&&(r=.5),r=Math.max(Math.min(1,r),0),new e(this.x+(t.x-this.x)*r,this.y+(t.y-this.y)*r)},distanceFrom:function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,r=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=r},clone:function(){return new e(this.x,this.y)}}}(exports),function(t){"use strict";function e(t){this.status=t,this.points=[]}var r=t.fabric||(t.fabric={});if(r.Intersection)return void r.warn("fabric.Intersection is already defined");r.Intersection=e,r.Intersection.prototype={constructor:e,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},r.Intersection.intersectLineLine=function(t,i,n,o){var a,s=(o.x-n.x)*(t.y-n.y)-(o.y-n.y)*(t.x-n.x),c=(i.x-t.x)*(t.y-n.y)-(i.y-t.y)*(t.x-n.x),l=(o.y-n.y)*(i.x-t.x)-(o.x-n.x)*(i.y-t.y);if(0!==l){var h=s/l,u=c/l;0<=h&&h<=1&&0<=u&&u<=1?(a=new e("Intersection"),a.appendPoint(new r.Point(t.x+h*(i.x-t.x),t.y+h*(i.y-t.y)))):a=new e}else a=new e(0===s||0===c?"Coincident":"Parallel");return a},r.Intersection.intersectLinePolygon=function(t,r,i){for(var n=new e,o=i.length,a,s,c,l=0;l<o;l++)a=i[l],s=i[(l+1)%o],c=e.intersectLineLine(t,r,a,s),n.appendPoints(c.points);return n.points.length>0&&(n.status="Intersection"),n},r.Intersection.intersectPolygonPolygon=function(t,r){for(var i=new e,n=t.length,o=0;o<n;o++){var a=t[o],s=t[(o+1)%n],c=e.intersectLinePolygon(a,s,r);i.appendPoints(c.points)}return i.points.length>0&&(i.status="Intersection"),i},r.Intersection.intersectPolygonRectangle=function(t,i,n){var o=i.min(n),a=i.max(n),s=new r.Point(a.x,o.y),c=new r.Point(o.x,a.y),l=e.intersectLinePolygon(o,s,t),h=e.intersectLinePolygon(s,a,t),u=e.intersectLinePolygon(a,c,t),f=e.intersectLinePolygon(c,o,t),d=new e;return d.appendPoints(l.points),d.appendPoints(h.points),d.appendPoints(u.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d}}(exports),function(t){"use strict";function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function r(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}var i=t.fabric||(t.fabric={});if(i.Color)return void i.warn("fabric.Color is already defined.");i.Color=e,i.Color.prototype={_tryParsingColor:function(t){var r;t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t&&(r=[255,255,255,0]),r||(r=e.sourceFromHex(t)),r||(r=e.sourceFromRgb(t)),r||(r=e.sourceFromHsl(t)),r||(r=[0,0,0,1]),r&&this.setSource(r)},_rgbToHsl:function(t,e,r){t/=255,e/=255,r/=255;var n,o,a,s=i.util.array.max([t,e,r]),c=i.util.array.min([t,e,r]);if(a=(s+c)/2,s===c)n=o=0;else{var l=s-c;switch(o=a>.5?l/(2-s-c):l/(s+c),s){case t:n=(e-r)/l+(e<r?6:0);break;case e:n=(r-t)/l+2;break;case r:n=(t-e)/l+4}n/=6}return[Math.round(360*n),Math.round(100*o),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t=this.getSource(),e,r,i;return e=t[0].toString(16),e=1===e.length?"0"+e:e,r=t[1].toString(16),r=1===r.length?"0"+r:r,i=t[2].toString(16),i=1===i.length?"0"+i:i,e.toUpperCase()+r.toUpperCase()+i.toUpperCase()},toHexa:function(){var t=this.getSource(),e;return e=255*t[3],e=e.toString(16),e=1===e.length?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),r=t[3];return this.setSource([e,e,e,r]),this},toBlackWhite:function(t){var e=this.getSource(),r=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),i=e[3];return t=t||127,r=Number(r)<Number(t)?0:255,this.setSource([r,r,r,i]),this},overlayWith:function(t){t instanceof e||(t=new e(t));for(var r=[],i=this.getAlpha(),n=.5,o=this.getSource(),a=t.getSource(),s=0;s<3;s++)r.push(Math.round(.5*o[s]+.5*a[s]));return r[3]=i,this.setSource(r),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",grey:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},i.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},i.Color.sourceFromRgb=function(t){var r=t.match(e.reRGBa);if(r){var i=parseInt(r[1],10)/(/%$/.test(r[1])?100:1)*(/%$/.test(r[1])?255:1),n=parseInt(r[2],10)/(/%$/.test(r[2])?100:1)*(/%$/.test(r[2])?255:1),o=parseInt(r[3],10)/(/%$/.test(r[3])?100:1)*(/%$/.test(r[3])?255:1);return[parseInt(i,10),parseInt(n,10),parseInt(o,10),r[4]?parseFloat(r[4]):1]}},i.Color.fromRgba=e.fromRgb,i.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},i.Color.sourceFromHsl=function(t){var i=t.match(e.reHSLa);if(i){var n=(parseFloat(i[1])%360+360)%360/360,o=parseFloat(i[2])/(/%$/.test(i[2])?100:1),a=parseFloat(i[3])/(/%$/.test(i[3])?100:1),s,c,l;if(0===o)s=c=l=a;else{var h=a<=.5?a*(o+1):a+o-a*o,u=2*a-h;s=r(u,h,n+1/3),c=r(u,h,n),l=r(u,h,n-1/3)}return[Math.round(255*s),Math.round(255*c),Math.round(255*l),i[4]?parseFloat(i[4]):1]}},i.Color.fromHsla=e.fromHsl,i.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},i.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var r=t.slice(t.indexOf("#")+1),i=3===r.length||4===r.length,n=8===r.length||4===r.length,o=i?r.charAt(0)+r.charAt(0):r.substring(0,2),a=i?r.charAt(1)+r.charAt(1):r.substring(2,4),s=i?r.charAt(2)+r.charAt(2):r.substring(4,6),c=n?i?r.charAt(3)+r.charAt(3):r.substring(6,8):"FF";return[parseInt(o,16),parseInt(a,16),parseInt(s,16),parseFloat((parseInt(c,16)/255).toFixed(2))]}},i.Color.fromSource=function(t){var r=new e;return r.setSource(t),r}}(exports),function(){function t(t){var e=t.getAttribute("style"),r=t.getAttribute("offset")||0,i,n,o;if(r=parseFloat(r)/(/%$/.test(r)?100:1),r=r<0?0:r>1?1:r,e){var a=e.split(/\s*;\s*/);""===a[a.length-1]&&a.pop();for(var s=a.length;s--;){var c=a[s].split(/\s*:\s*/),l=c[0].trim(),h=c[1].trim();"stop-color"===l?i=h:"stop-opacity"===l&&(o=h)}}return i||(i=t.getAttribute("stop-color")||"rgb(0,0,0)"),o||(o=t.getAttribute("stop-opacity")),i=new fabric.Color(i),n=i.getAlpha(),o=isNaN(parseFloat(o))?1:parseFloat(o),o*=n,{offset:r,color:i.toRgb(),opacity:o}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function r(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}function i(t,e,r){var i,n=0,o=1,a="";for(var s in e)"Infinity"===e[s]?e[s]=1:"-Infinity"===e[s]&&(e[s]=0),i=parseFloat(e[s],10),o="string"==typeof e[s]&&/^\d+%$/.test(e[s])?.01:1,"x1"===s||"x2"===s||"r2"===s?(o*="objectBoundingBox"===r?t.width:1,n="objectBoundingBox"===r?t.left||0:0):"y1"!==s&&"y2"!==s||(o*="objectBoundingBox"===r?t.height:1,n="objectBoundingBox"===r?t.top||0:0),e[s]=i*o+n;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===r&&t.rx!==t.ry){var c=t.ry/t.rx;a=" scale(1, "+c+")",e.y1&&(e.y1/=c),e.y2&&(e.y2/=c)}return a}var n=fabric.util.object.clone;fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var r=new fabric.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:r.toRgb(),opacity:r.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t){var e=n(this.coords,!0),r,i,o=n(this.colorStops,!0),a=e.r1>e.r2;o.sort(function(t,e){return t.offset-e.offset});for(var s in e)"x1"===s||"x2"===s?e[s]+=this.offsetX-t.width/2:"y1"!==s&&"y2"!==s||(e[s]+=this.offsetY-t.height/2);if(i='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(i+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?r=["<linearGradient ",i,' x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'">\n']:"radial"===this.type&&(r=["<radialGradient ",i,' cx="',a?e.x1:e.x2,'" cy="',a?e.y1:e.y2,'" r="',a?e.r1:e.r2,'" fx="',a?e.x2:e.x1,'" fy="',a?e.y2:e.y1,'">\n']),"radial"===this.type){if(a){o=o.concat(),o.reverse();for(var c=0;c<o.length;c++)o[c].offset=1-o[c].offset}var l=Math.min(e.r1,e.r2);if(l>0)for(var h=Math.max(e.r1,e.r2),u=l/h,c=0;c<o.length;c++)o[c].offset+=u*(1-o[c].offset)}for(var c=0;c<o.length;c++){var f=o[c];r.push("<stop ",'offset="',100*f.offset+"%",'" style="stop-color:',f.color,null!==f.opacity?";stop-opacity: "+f.opacity:";",'"/>\n')}return r.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),r.join("")},toLive:function(t){var e,r=fabric.util.object.clone(this.coords);if(this.type){"linear"===this.type?e=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(e=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2));for(var i=0,n=this.colorStops.length;i<n;i++){var o=this.colorStops[i].color,a=this.colorStops[i].opacity,s=this.colorStops[i].offset;void 0!==a&&(o=new fabric.Color(o).setAlpha(a).toRgba()),e.addColorStop(s,o)}return e}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(n,o){var a=n.getElementsByTagName("stop"),s,c=n.getAttribute("gradientUnits")||"objectBoundingBox",l=n.getAttribute("gradientTransform"),h=[],u,f;s="linearGradient"===n.nodeName||"LINEARGRADIENT"===n.nodeName?"linear":"radial","linear"===s?u=e(n):"radial"===s&&(u=r(n));for(var d=a.length;d--;)h.push(t(a[d]));f=i(o,u,c);var p=new fabric.Gradient({type:s,coords:u,colorStops:h,offsetX:-o.left,offsetY:-o.top});return(l||""!==f)&&(p.gradientTransform=fabric.parseTransformAttribute((l||"")+f)),p},forObject:function(t,e){return e||(e={}),i(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),function(){"use strict";var t=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t,e){if(t||(t={}),this.id=fabric.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source)return void(e&&e(this));if(void 0!==fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source)),e&&e(this);else{var r=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){r.source=t,e&&e(r)})}},toObject:function(e){var r=fabric.Object.NUM_FRACTION_DIGITS,i,n;return"function"==typeof this.source?i=String(this.source):"string"==typeof this.source.src?i=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(i=this.source.toDataURL()),n={type:"pattern",source:i,repeat:this.repeat,offsetX:t(this.offsetX,r),offsetY:t(this.offsetY,r)},fabric.util.populateWithProperties(this,n,e),n},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,r=e.width/t.width,i=e.height/t.height,n=this.offsetX/t.width,o=this.offsetY/t.height,a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(r=1),e.src?a=e.src:e.toDataURL&&(a=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+n+'" y="'+o+'" width="'+r+'" height="'+i+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.toFixed;if(e.Shadow)return void e.warn("fabric.Shadow is already defined.");e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var r in t)this[r]=t[r];this.id=e.Object.__uid++},_parseShadow:function(t){var r=t.trim(),i=e.Shadow.reOffsetsAndBlur.exec(r)||[];return{color:(r.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(i[1],10)||0,offsetY:parseInt(i[2],10)||0,blur:parseInt(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var i=40,n=40,o=e.Object.NUM_FRACTION_DIGITS,a=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),s=20;return t.width&&t.height&&(i=100*r((Math.abs(a.x)+this.blur)/t.width,o)+20,n=100*r((Math.abs(a.y)+this.blur)/t.height,o)+20),t.flipX&&(a.x*=-1),t.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+n+'%" height="'+(100+2*n)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+r(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+r(a.x,o)+'" dy="'+r(a.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+this.color+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke};var t={},r=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke"].forEach(function(e){this[e]!==r[e]&&(t[e]=this[e])},this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/}(exports),function(){"use strict";if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var t=fabric.util.object.extend,e=fabric.util.getElementOffset,r=fabric.util.removeFromArray,i=fabric.util.toFixed,n=fabric.util.transformPoint,o=fabric.util.invertTransform,a=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,_initStatic:function(t,e){var r=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,r),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,r),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,r),e.overlayColor&&this.setOverlayColor(e.overlayColor,r),this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?fabric.devicePixelRatio:1},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio))},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,r){return this.__setBgOverlayImage("overlayImage",t,e,r)},setBackgroundImage:function(t,e,r){return this.__setBgOverlayImage("backgroundImage",t,e,r)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,r,i){return"string"==typeof e?fabric.util.loadImage(e,function(e){e&&(this[t]=new fabric.Image(e,i)),r&&r(e)},this,i&&i.crossOrigin):(i&&e.setOptions(i),this[t]=e,r&&r(e)),this},__setBgOverlayColor:function(t,e,r){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,r),this},_createCanvasElement:function(t){var e=fabric.util.createCanvasElement(t);if(e.style||(e.style={}),!e)throw a;if(void 0===e.getContext)throw a;return e},_initOptions:function(t){this._setOptions(t),this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(t),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var r;e=e||{};for(var i in t)r=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),r+="px"),e.backstoreOnly||this._setCssDimension(i,r);return this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e=this._activeObject,r,i=!1,n=!0;this.viewportTransform=t;for(var o=0,a=this._objects.length;o<a;o++)r=this._objects[o],r.group||r.setCoords(!1,!0);return e&&"activeSelection"===e.type&&e.setCoords(!1,!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var r=t,i=this.viewportTransform.slice(0);t=n(t,o(this.viewportTransform)),i[0]=e,i[3]=e;var a=n(t,i);return i[4]+=r.x-a.x,i[5]+=r.y-a.y,this.setViewportTransform(i)},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.renderAll(),this.isRendering=!1},requestRenderAll:function(){return this.isRendering||(this.isRendering=!0,fabric.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,r=this.height,i=o(this.viewportTransform);return t.tl=n({x:0,y:0},i),t.br=n({x:e,y:r},i),t.tr=new fabric.Point(t.br.x,t.tl.y),t.bl=new fabric.Point(t.tl.x,t.br.y),this.vptCoords=t,t},renderCanvas:function(t,e){this.calcViewportBoundaries(),this.clearContext(t),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,t),this._renderBackground(t),t.save(),t.transform.apply(t,this.viewportTransform),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.clipTo&&t.restore(),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render")},_renderObjects:function(t,e){for(var r=0,i=e.length;r<i;++r)e[r]&&e[r].render(t)},_renderBackgroundOrOverlay:function(t,e){var r=this[e+"Color"];r&&(t.fillStyle=r.toLive?r.toLive(t,this):r,t.fillRect(r.offsetX||0,r.offsetY||0,this.width,this.height)),(r=this[e+"Image"])&&(this[e+"Vpt"]&&(t.save(),t.transform.apply(t,this.viewportTransform)),r.render(t),this[e+"Vpt"]&&t.restore())},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=o(this.viewportTransform);return n({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,r){var i={objects:this._toObjects(e,r)};return t(i,this.__serializeBgOverlay(e,r)),fabric.util.populateWithProperties(this,i,r),i},_toObjects:function(t,e){return this.getObjects().filter(function(t){return!t.excludeFromExport}).map(function(r){return this._toObject(r,t,e)},this)},_toObject:function(t,e,r){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var n=t[e](r);return this.includeDefaultValues||(t.includeDefaultValues=i),n},__serializeBgOverlay:function(t,e){var r={},i=this.backgroundImage,n=this.overlayImage;return this.backgroundColor&&(r.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(r.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),i&&!i.excludeFromExport&&(r.backgroundImage=this._toObject(i,t,e)),n&&!n.excludeFromExport&&(r.overlayImage=this._toObject(n,t,e)),r},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var r=[];return this._setSVGPreamble(r,t),this._setSVGHeader(r,t),this._setSVGBgOverlayColor(r,"backgroundColor"),this._setSVGBgOverlayImage(r,"backgroundImage",e),this._setSVGObjects(r,e),this._setSVGBgOverlayColor(r,"overlayColor"),this._setSVGBgOverlayImage(r,"overlayImage",e),r.push("</svg>"),r.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var r=e.width||this.width,n=e.height||this.height,o,a='viewBox="0 0 '+this.width+" "+this.height+'" ',s=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?a='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(o=this.viewportTransform,a='viewBox="'+i(-o[4]/o[0],s)+" "+i(-o[5]/o[3],s)+" "+i(this.width/o[0],s)+" "+i(this.height/o[3],s)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',n,'" ',a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),"</defs>\n")},createSVGRefElementsMarkup:function(){var t=this;return["backgroundColor","overlayColor"].map(function(e){var r=t[e];if(r&&r.toLive)return r.toSVG(t,!1)}).join("")},createSVGFontFacesMarkup:function(){for(var t="",e={},r,i,n,o,a,s,c,l=fabric.fontPaths,h=this.getObjects(),u=0,f=h.length;u<f;u++)if(r=h[u],i=r.fontFamily,-1!==r.type.indexOf("text")&&!e[i]&&l[i]&&(e[i]=!0,r.styles)){n=r.styles;for(a in n){o=n[a];for(c in o)s=o[c],i=s.fontFamily,!e[i]&&l[i]&&(e[i]=!0)}}for(var d in e)t+=["\t\t@font-face {\n","\t\t\tfont-family: '",d,"';\n","\t\t\tsrc: url('",l[d],"');\n","\t\t}\n"].join("");return t&&(t=['\t<style type="text/css">',"<![CDATA[\n",t,"]]>","</style>\n"].join("")),t},_setSVGObjects:function(t,e){for(var r,i=0,n=this.getObjects(),o=n.length;i<o;i++)r=n[i],r.excludeFromExport||this._setSVGObject(t,r,e)},_setSVGObject:function(t,e,r){t.push(e.toSVG(r))},_setSVGBgOverlayImage:function(t,e,r){this[e]&&this[e].toSVG&&t.push(this[e].toSVG(r))},_setSVGBgOverlayColor:function(t,e){var r=this[e];if(r)if(r.toLive){var i=r.repeat;t.push('<rect transform="translate(',this.width/2,",",this.height/2,')"',' x="',r.offsetX-this.width/2,'" y="',r.offsetY-this.height/2,'" ','width="',"repeat-y"===i||"no-repeat"===i?r.source.width:this.width,'" height="',"repeat-x"===i||"no-repeat"===i?r.source.height:this.height,'" fill="url(#SVGID_'+r.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e=this._activeObject,i,n,o;if(t===e&&"activeSelection"===t.type)for(o=e._objects,i=o.length;i--;)n=o[i],r(this._objects,n),this._objects.unshift(n);else r(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e=this._activeObject,i,n,o;if(t===e&&"activeSelection"===t.type)for(o=e._objects,i=0;i<o.length;i++)n=o[i],r(this._objects,n),this._objects.push(n);else r(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i=this._activeObject,n,o,a,s,c,l=0;if(t===i&&"activeSelection"===t.type)for(c=i._objects,n=0;n<c.length;n++)o=c[n],a=this._objects.indexOf(o),a>0+l&&(s=a-1,r(this._objects,o),this._objects.splice(s,0,o)),l++;else 0!==(a=this._objects.indexOf(t))&&(s=this._findNewLowerIndex(t,a,e),r(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,r){var i;if(r){i=e;for(var n=e-1;n>=0;--n){if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){i=n;break}}}else i=e-1;return i},bringForward:function(t,e){if(!t)return this;var i=this._activeObject,n,o,a,s,c,l=0;if(t===i&&"activeSelection"===t.type)for(c=i._objects,n=c.length;n--;)o=c[n],a=this._objects.indexOf(o),a<this._objects.length-1-l&&(s=a+1,r(this._objects,o),this._objects.splice(s,0,o)),l++;else(a=this._objects.indexOf(t))!==this._objects.length-1&&(s=this._findNewUpperIndex(t,a,e),r(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,r){var i;if(r){i=e;for(var n=e+1;n<this._objects.length;++n){if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){i=n;break}}}else i=e+1;return i},moveTo:function(t,e){return r(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.clear(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var r=e.getContext("2d");if(!r)return null;switch(t){case"getImageData":return void 0!==r.getImageData;case"setLineDash":return void 0!==r.setLineDash;case"toDataURL":return void 0!==e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop,e=this.canvas.getZoom();t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*e,t.shadowOffsetX=this.shadow.offsetX*e,t.shadowOffsetY=this.shadow.offsetY*e}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,r=this._points[0],i=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&r.x===i.x&&r.y===i.y&&(r.x-=.5,i.x+=.5),t.moveTo(r.x,r.y);for(var n=1,o=this._points.length;n<o;n++){var a=r.midPointFrom(i);t.quadraticCurveTo(r.x,r.y,a.x,a.y),r=this._points[n],i=this._points[n+1]}t.lineTo(r.x,r.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],r=new fabric.Point(t[0].x,t[0].y),i=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var n=1,o=t.length;n<o;n++){var a=r.midPointFrom(i);e.push("Q ",r.x," ",r.y," ",a.x," ",a.y," "),r=new fabric.Point(t[n].x,t[n].y),n+1<t.length&&(i=new fabric.Point(t[n+1].x,t[n+1].y))}return e.push("L ",r.x," ",r.y," "),e},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"===t)return void this.canvas.requestRenderAll();var e=this.createPath(t);this.canvas.add(e),e.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.requestRenderAll(),this.canvas.fire("path:created",{path:e})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),r=this.canvas.contextTop,i=this.canvas.viewportTransform;r.save(),r.transform(i[0],i[1],i[2],i[3],i[4],i[5]),r.fillStyle=e.fill,r.beginPath(),r.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),r.closePath(),r.fill(),r.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],r=0,i=this.points.length;r<i;r++){var n=this.points[r],o=new fabric.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&o.setShadow(this.shadow),e.push(o)}var a=new fabric.Group(e,{originX:"center",originY:"center"});a.canvas=this.canvas,this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),r=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=r,e.fill=i,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],r=0,i=this.sprayChunks.length;r<i;r++)for(var n=this.sprayChunks[r],o=0,a=n.length;o<a;o++){var s=new fabric.Rect({width:n[o].width,height:n[o].width,left:n[o].x+1,top:n[o].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&s.setShadow(this.shadow),e.push(s)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var c=new fabric.Group(e,{originX:"center",originY:"center"});c.canvas=this.canvas,this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){for(var e={},r,i=0,n=t.length;i<n;i++)r=t[i].left+""+t[i].top,e[r]||(e[r]=t[i]);var o=[];for(r in e)o.push(e[r]);return o},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var r=0,i=this.sprayChunkPoints.length;r<i;r++){var n=this.sprayChunkPoints[r];void 0!==n.opacity&&(t.globalAlpha=n.opacity),t.fillRect(n.x,n.y,n.width,n.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,r,i,n=this.width/2,o=0;o<this.density;o++){e=fabric.util.getRandomInt(t.x-n,t.x+n),r=fabric.util.getRandomInt(t.y-n,t.y+n),i=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new fabric.Point(e,r);a.width=i,this.randomOpacity&&(a.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=20,e=5,r=fabric.document.createElement("canvas"),i=r.getContext("2d");return r.width=r.height=25,i.fillStyle=this.color,i.beginPath(),i.arc(10,10,10,0,2*Math.PI,!1),i.closePath(),i.fill(),r},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),r=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-r.x,offsetY:-r.y}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,r=fabric.util.radiansToDegrees,i=Math.atan2,n=Math.abs,o=fabric.StaticCanvas.supports("setLineDash"),a=.5;fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t=this.getActiveObjects(),e,r,i;if(t.length>0&&!this.preserveObjectStacking){r=[],i=[];for(var n=0,o=this._objects.length;n<o;n++)e=this._objects[n],-1===t.indexOf(e)?r.push(e):i.push(e);t.length>1&&(this._activeObject._objects=i),r.push.apply(r,i)}else r=this._objects;return r},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection(t),this.fire("after:render"),this.contextTopDirty=!0,this},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?"rotate"===t.action?this._setOriginToCenter(t.target):("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,r){var i=!0,n=r||this.getPointer(t,!0),o;return o=e.group&&e.group===this._activeObject&&"activeSelection"===e.group.type?this._normalizePointer(e.group,n):{x:n.x,y:n.y},e.containsPoint(o)||e._findTargetCorner(n)},_normalizePointer:function(t,e){var r=t.calcTransformMatrix(),i=fabric.util.invertTransform(r),n=this.restorePointerVpt(e);return fabric.util.transformPoint(n,i)},isTargetTransparent:function(t,e,r){var i=t.hasBorders,n=t.transparentCorners,o=this.contextCache,a=t.selectionBackgroundColor;t.hasBorders=t.transparentCorners=!1,t.selectionBackgroundColor="",o.save(),o.transform.apply(o,this.viewportTransform),t.render(o),o.restore(),t.active&&t._renderControls(o),t.hasBorders=i,t.transparentCorners=n,t.selectionBackgroundColor=a;var s=fabric.util.isTransparent(o,e,r,this.targetFindTolerance);return this.clearContext(o),s},_shouldClearSelection:function(t,e){var r=this.getActiveObjects(),i=this._activeObject;return!e||e&&i&&r.length>1&&-1===r.indexOf(e)&&i!==e&&!t[this.selectionKey]||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t){if(t){var e=this._currentTransform,r;return"scale"===e.action||"scaleX"===e.action||"scaleY"===e.action?r=this.centeredScaling||t.centeredScaling:"rotate"===e.action&&(r=this.centeredRotation||t.centeredRotation),r?!e.altKey:e.altKey}},_getOriginFromCorner:function(t,e){var r={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?r.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(r.x="left"),"tl"===e||"mt"===e||"tr"===e?r.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(r.y="top"),r},_getActionFromCorner:function(t,e,r){if(!e)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return r[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return r[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,r){if(r){var i=this.getPointer(t),n=r._findTargetCorner(this.getPointer(t,!0)),o=this._getActionFromCorner(r,n,t),a=this._getOriginFromCorner(r,n);this._currentTransform={target:r,action:o,corner:n,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,offsetX:i.x-r.left,offsetY:i.y-r.top,originX:a.x,originY:a.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,left:r.left,top:r.top,theta:e(r.angle),width:r.width*r.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey]},this._currentTransform.original={left:r.left,top:r.top,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,originX:a.x,originY:a.y},this._resetCurrentTransform()}},_translateObject:function(t,e){var r=this._currentTransform,i=r.target,n=t-r.offsetX,o=e-r.offsetY,a=!i.get("lockMovementX")&&i.left!==n,s=!i.get("lockMovementY")&&i.top!==o;return a&&i.set("left",n),s&&i.set("top",o),a||s},_changeSkewTransformOrigin:function(t,e,r){var i="originX",n={0:"center"},o=e.target.skewX,a="left",s="right",c="mt"===e.corner||"ml"===e.corner?1:-1,l=1;t=t>0?1:-1,"y"===r&&(o=e.target.skewY,a="top",s="bottom",i="originY"),n[-1]=a,n[1]=s,e.target.flipX&&(l*=-1),e.target.flipY&&(l*=-1),0===o?(e.skewSign=-c*t*l,e[i]=n[-t]):(o=o>0?1:-1,e.skewSign=o,e[i]=n[o*c*l])},_skewObject:function(t,e,r){var i=this._currentTransform,n=i.target,o=!1,a=n.get("lockSkewingX"),s=n.get("lockSkewingY");if(a&&"x"===r||s&&"y"===r)return!1;var c=n.getCenterPoint(),l=n.toLocalPoint(new fabric.Point(t,e),"center","center")[r],h=n.toLocalPoint(new fabric.Point(i.lastX,i.lastY),"center","center")[r],u,f,d=n._getTransformedDimensions();return this._changeSkewTransformOrigin(l-h,i,r),u=n.toLocalPoint(new fabric.Point(t,e),i.originX,i.originY)[r],f=n.translateToOriginPoint(c,i.originX,i.originY),o=this._setObjectSkew(u,i,r,d),i.lastX=t,i.lastY=e,n.setPositionByOrigin(f,i.originX,i.originY),o},_setObjectSkew:function(t,e,r,i){var n=e.target,o,a=!1,s=e.skewSign,c,l,h,u,f,d,p,g;return"x"===r?(h="y",u="Y",f="X",p=0,g=n.skewY):(h="x",u="X",f="Y",p=n.skewX,g=0),l=n._getTransformedDimensions(p,g),d=2*Math.abs(t)-l[r],d<=2?o=0:(o=s*Math.atan(d/n["scale"+f]/(l[h]/n["scale"+u])),o=fabric.util.radiansToDegrees(o)),a=n["skew"+f]!==o,n.set("skew"+f,o),0!==n["skew"+u]&&(c=n._getTransformedDimensions(),o=i[h]/c[h]*n["scale"+u],n.set("scale"+u,o)),a},_scaleObject:function(t,e,r){var i=this._currentTransform,n=i.target,o=n.get("lockScalingX"),a=n.get("lockScalingY"),s=n.get("lockScalingFlip");if(o&&a)return!1;var c=n.translateToOriginPoint(n.getCenterPoint(),i.originX,i.originY),l=n.toLocalPoint(new fabric.Point(t,e),i.originX,i.originY),h=n._getTransformedDimensions(),u=!1;return this._setLocalMouse(l,i),u=this._setObjectScale(l,i,o,a,r,s,h),n.setPositionByOrigin(c,i.originX,i.originY),u},_setObjectScale:function(t,e,r,i,n,o,a){var s=e.target,c=!1,l=!1,h=!1,u,f,d,p;return d=t.x*s.scaleX/a.x,p=t.y*s.scaleY/a.y,u=s.scaleX!==d,f=s.scaleY!==p,o&&d<=0&&d<s.scaleX&&(c=!0),o&&p<=0&&p<s.scaleY&&(l=!0),"equally"!==n||r||i?n?"x"!==n||s.get("lockUniScaling")?"y"!==n||s.get("lockUniScaling")||l||i||s.set("scaleY",p)&&(h=h||f):c||r||s.set("scaleX",d)&&(h=h||u):(c||r||s.set("scaleX",d)&&(h=h||u),l||i||s.set("scaleY",p)&&(h=h||f)):c||l||(h=this._scaleObjectEqually(t,s,e,a)),e.newScaleX=d,e.newScaleY=p,c||l||this._flipObject(e,n),h},_scaleObjectEqually:function(t,e,r,i){var n=t.y+t.x,o=i.y*r.original.scaleY/e.scaleY+i.x*r.original.scaleX/e.scaleX,a;return r.newScaleX=r.original.scaleX*n/o,r.newScaleY=r.original.scaleY*n/o,a=r.newScaleX!==e.scaleX||r.newScaleY!==e.scaleY,e.set("scaleX",r.newScaleX),e.set("scaleY",r.newScaleY),a},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var r=e.target,i=this.getZoom(),o=r.padding/i;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),n(t.x)>o?t.x<0?t.x+=o:t.x-=o:t.x=0,n(t.y)>o?t.y<0?t.y+=o:t.y-=o:t.y=0},_rotateObject:function(t,e){var n=this._currentTransform;if(n.target.get("lockRotation"))return!1;var o=i(n.ey-n.top,n.ex-n.left),a=i(e-n.top,t-n.left),s=r(a-o+n.theta),c=!0;if(n.target.snapAngle>0){var l=n.target.snapAngle,h=n.target.snapThreshold||l,u=Math.ceil(s/l)*l,f=Math.floor(s/l)*l;Math.abs(s-f)<h?s=f:Math.abs(s-u)<h&&(s=u)}return s<0&&(s=360+s),s%=360,n.target.angle===s?c=!1:n.target.angle=s,c},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.setAngle(0)},_drawSelection:function(t){var e=this._groupSelector,r=e.left,i=e.top,a=n(r),s=n(i);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(r>0?0:-r),e.ey-(i>0?0:-i),a,s)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!o){var c=e.ex+.5-(r>0?0:a),l=e.ey+.5-(i>0?0:s);t.beginPath(),fabric.util.drawDashedLine(t,c,l,c+a,l,this.selectionDashArray),fabric.util.drawDashedLine(t,c,l+s-1,c+a,l+s-1,this.selectionDashArray),fabric.util.drawDashedLine(t,c,l,c,l+s,this.selectionDashArray),fabric.util.drawDashedLine(t,c+a-1,l,c+a-1,l+s,this.selectionDashArray),t.closePath(),t.stroke()}else fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+.5-(r>0?0:a),e.ey+.5-(i>0?0:s),a,s)},findTarget:function(t,e){if(!this.skipTargetFind){var r=!0,i=this.getPointer(t,!0),n=this._activeObject,o=this.getActiveObjects(),a;if(this.targets=[],o.length>1&&!e&&n===this._searchPossibleTargets([n],i))return this._fireOverOutEvents(n,t),n;if(1===o.length&&n._findTargetCorner(i))return this._fireOverOutEvents(n,t),n;if(1===o.length&&n===this._searchPossibleTargets([n],i)){if(!this.preserveObjectStacking)return this._fireOverOutEvents(n,t),n;a=n}var s=this._searchPossibleTargets(this._objects,i);return t[this.altSelectionKey]&&s&&a&&s!==a&&(s=a),this._fireOverOutEvents(s,t),s}},_fireOverOutEvents:function(t,e){var r,i,n=this._hoveredTarget;n!==t&&(r={e:e,target:t,previousTarget:this._hoveredTarget},i={e:e,target:this._hoveredTarget,nextTarget:t},this._hoveredTarget=t),t?n!==t&&(n&&(this.fire("mouse:out",i),n.fire("mouseout",i)),this.fire("mouse:over",r),t.fire("mouseover",r)):n&&(this.fire("mouse:out",i),n.fire("mouseout",i))},_checkTarget:function(t,e){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,t.x,t.y))return!0}},_searchPossibleTargets:function(t,e){for(var r,i=t.length,n,o;i--;)if(this._checkTarget(e,t[i])){r=t[i],"group"===r.type&&r.subTargetCheck&&(n=this._normalizePointer(r,e),(o=this._searchPossibleTargets(r._objects,n))&&this.targets.push(o));break}return r},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(e,r,i){i||(i=this.upperCanvasEl);var n=t(e),o=i.getBoundingClientRect(),a=o.width||0,s=o.height||0,c;return a&&s||("top"in o&&"bottom"in o&&(s=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(a=Math.abs(o.right-o.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,r||(n=this.restorePointerVpt(n)),c=0===a||0===s?{width:1,height:1}:{width:i.width/a,height:i.height/s},{x:n.x*c.width,y:n.y*c.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl?this.upperCanvasEl.className="":this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,r=this.height||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:r+"px",left:0,top:0,"touch-action":"none"}),t.width=e,t.height=r,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects:[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),this._hoveredTarget===t&&(this._hoveredTarget=null),this.callSuper("_onObjectRemoved",t)},setActiveObject:function(t,e){var r=this._activeObject;return t===r?this:(this._setActiveObject(t)&&(r&&r.fire("deselected",{e:e}),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this)},_setActiveObject:function(t){return this._activeObject!==t&&!!this._discardActiveObject()&&(this._activeObject=t,t.set("active",!0),!0)},_discardActiveObject:function(){var t=this._activeObject;if(t&&t.onDeselect&&"function"==typeof t.onDeselect){if(t.onDeselect())return!1;t.set("active",!1),this._activeObject=null}return!0},discardActiveObject:function(t){var e=this._activeObject;return e&&(this.fire("before:selection:cleared",{target:e,e:t}),this._discardActiveObject()&&(this.fire("selection:cleared",{e:t}),e.fire("deselected",{e:t}))),this},dispose:function(){fabric.StaticCanvas.prototype.dispose.call(this);var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),delete this.upperCanvasEl,t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,r){var i=this._realizeGroupTransformOnObject(t),n=this.callSuper("_toObject",t,e,r);return this._unwindGroupTransformOnObject(t,i),n},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],r={};return e.forEach(function(e){r[e]=t[e]}),this._activeObject.realizeTransform(t),r}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,r){var i=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,r),this._unwindGroupTransformOnObject(e,i)}});for(var s in fabric.StaticCanvas)"prototype"!==s&&(fabric.Canvas[s]=fabric.StaticCanvas[s]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){})}(),function(){function t(t,e){return"which"in t?t.which===e:t.button===e-1}var e={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},r=fabric.util.addListener,i=fabric.util.removeListener,n=3,o=2,a=1;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this.removeListeners(),this._bindEvents(),r(fabric.window,"resize",this._onResize),r(this.upperCanvasEl,"mousedown",this._onMouseDown),r(this.upperCanvasEl,"dblclick",this._onDoubleClick),r(this.upperCanvasEl,"mousemove",this._onMouseMove),r(this.upperCanvasEl,"mouseout",this._onMouseOut),r(this.upperCanvasEl,"mouseenter",this._onMouseEnter),r(this.upperCanvasEl,"wheel",this._onMouseWheel),r(this.upperCanvasEl,"contextmenu",this._onContextMenu),r(this.upperCanvasEl,"touchstart",this._onMouseDown,{passive:!1}),r(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this.eventsBinded||(this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this.eventsBinded=!0)},removeListeners:function(){i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mouseout",this._onMouseOut),i(this.upperCanvasEl,"mouseenter",this._onMouseEnter),i(this.upperCanvasEl,"wheel",this._onMouseWheel),i(this.upperCanvasEl,"contextmenu",this._onContextMenu),i(this.upperCanvasEl,"doubleclick",this._onDoubleClick),i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t}),this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){var e;this._handleEvent(t,"dblclick",void 0)},_onMouseDown:function(t){this.__onMouseDown(t),r(fabric.document,"touchend",this._onMouseUp,{passive:!1}),r(fabric.document,"touchmove",this._onMouseMove,{passive:!1}),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?i(this.upperCanvasEl,"mousedown",this._onMouseDown):(r(fabric.document,"mouseup",this._onMouseUp),r(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"touchend",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove),i(fabric.document,"touchmove",this._onMouseMove),r(this.upperCanvasEl,"mousemove",this._onMouseMove),r(this.upperCanvasEl,"touchmove",this._onMouseMove,{passive:!1}),"touchend"===t.type){var e=this;setTimeout(function(){r(e.upperCanvasEl,"mousedown",e._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var r=this._activeObject;return(!r||!r.isEditing||t!==r)&&!!(t&&(t.isMoving||t!==r)||!t&&r||!t&&!r&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(e){var r;if(t(e,3))return void(this.fireRightClick&&this._handleEvent(e,"up",r,3));if(t(e,2))return void(this.fireMiddleClick&&this._handleEvent(e,"up",r,2));if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);var i=!0,n=this._currentTransform,o=this._groupSelector,a=!o||0===o.left&&0===o.top;n&&(this._finalizeCurrentTransform(e),i=!n.actionPerformed),r=i?this.findTarget(e,!0):n.target;var s=this._shouldRender(r,this.getPointer(e));r||!a?this._maybeGroupObjects(e):(this._groupSelector=null,this._currentTransform=null),r&&(r.isMoving=!1),this._setCursorFromEvent(e,r),this._handleEvent(e,"up",r||null,1,a),r&&(r.__corner=0),s&&this.requestRenderAll()},_handleEvent:function(t,e,r,i,n){var o=void 0===r?this.findTarget(t):r,a=this.targets||[],s={e:t,target:o,subTargets:a,button:i||1,isClick:n||!1};this.fire("mouse:"+e,s),o&&o.fire("mouse"+e,s);for(var c=0;c<a.length;c++)a[c].fire("mouse"+e,s)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,r=e.target;r._scaling&&(r._scaling=!1),r.setCoords(),this._restoreOriginXY(r),(e.actionPerformed||this.stateful&&r.hasStateChanged())&&(this.fire("object:modified",{target:r,e:t}),r.fire("modified",{e:t}))},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).requestRenderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e)}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(t,"up")},__onMouseDown:function(e){var r=this.findTarget(e);if(t(e,3))return void(this.fireRightClick&&this._handleEvent(e,"down",r||null,3));if(t(e,2))return void(this.fireMiddleClick&&this._handleEvent(e,"down",r||null,2));if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._currentTransform){var i=this.getPointer(e,!0);this._previousPointer=i;var n=this._shouldRender(r,i),o=this._shouldGroup(e,r);this._shouldClearSelection(e,r)?this.discardActiveObject(e):o&&(this._handleGrouping(e,r),r=this._activeObject),!this.selection||r&&(r.selectable||r.isEditing)||(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0}),r&&(!r.selectable||!r.__corner&&o||(this._beforeTransform(e,r),this._setupCurrentTransform(e,r)),r.selectable?this.setActiveObject(r,e):this.discardActiveObject()),this._handleEvent(e,"down",r||null),n&&this.requestRenderAll()}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e)},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,r;if(this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!(void 0!==t.touches&&t.touches.length>1)){var i=this._groupSelector;i?(r=this.getPointer(t,!0),i.left=r.x-i.ex,i.top=r.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),this._setCursorFromEvent(t,e)),this._handleEvent(t,"move",e||null)}},__onMouseWheel:function(t){this._handleEvent(t,"wheel")},_transformObject:function(t){var e=this.getPointer(t),r=this._currentTransform;r.reset=!1,r.target.isMoving=!0,r.shiftKey=t.shiftKey,r.altKey=t[this.centeredKey],this._beforeScaleTransform(t,r),this._performTransformAction(t,r,e),r.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,r){var i=r.x,n=r.y,o=e.target,a=e.action,s=!1;"rotate"===a?(s=this._rotateObject(i,n))&&this._fire("rotating",o,t):"scale"===a?(s=this._onScale(t,e,i,n))&&this._fire("scaling",o,t):"scaleX"===a?(s=this._scaleObject(i,n,"x"))&&this._fire("scaling",o,t):"scaleY"===a?(s=this._scaleObject(i,n,"y"))&&this._fire("scaling",o,t):"skewX"===a?(s=this._skewObject(i,n,"x"))&&this._fire("skewing",o,t):"skewY"===a?(s=this._skewObject(i,n,"y"))&&this._fire("skewing",o,t):(s=this._translateObject(i,n))&&(this._fire("moving",o,t),this.setCursor(o.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s},_fire:function(t,e,r){this.fire("object:"+t,{target:e,e:r}),e.fire(t,{e:r})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var r=this._shouldCenterTransform(e.target);(r&&("center"!==e.originX||"center"!==e.originY)||!r&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,r,i){return this._isUniscalePossible(t,e.target)?(e.currentAction="scale",this._scaleObject(r,i)):(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(r,i,"equally"))},_isUniscalePossible:function(t,e){return(t[this.uniScaleKey]||this.uniScaleTransform)&&!e.get("lockUniScaling")},_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var r=e.hoverCursor||this.hoverCursor,i=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,n=(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));n?this.setCursor(this.getCornerCursor(n,e,t)):this.setCursor(r)},getCornerCursor:function(t,r,i){return this.actionIsDisabled(t,r,i)?this.notAllowedCursor:t in e?this._getRotatedCornerCursor(t,r,i):"mtr"===t&&r.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(t,e,r){return"mt"===t||"mb"===t?r[this.altActionKey]?e.lockSkewingX:e.lockScalingY:"ml"===t||"mr"===t?r[this.altActionKey]?e.lockSkewingY:e.lockScalingX:"mtr"===t?e.lockRotation:this._isUniscalePossible(r,e)?e.lockScalingX&&e.lockScalingY:e.lockScalingX||e.lockScalingY},_getRotatedCornerCursor:function(t,r,i){var n=Math.round(r.angle%360/45);return n<0&&(n+=8),n+=e[t],i[this.altActionKey]&&e[t]%2==0&&(n+=2),n%=8,this.cursorMap[n]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var r=this._activeObject;return t[this.selectionKey]&&e&&e.selectable&&this.selection&&(r!==e||"activeSelection"===r.type)},_handleGrouping:function(t,e){var r=this._activeObject;0===r.__corner&&(e!==r||(e=this.findTarget(t,!0)))&&(r&&"activeSelection"===r.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var r=this._activeObject;if(r.contains(t)){if(r.removeWithUpdate(t),1===r.size())return void this.setActiveObject(r.item(0),e)}else r.addWithUpdate(t);this.fire("selection:created",{target:r,e:e})},_createActiveSelection:function(t,e){var r=this._createGroup(t);this.setActiveObject(r,e),this.fire("selection:created",{target:r,e:e})},_createGroup:function(t){var e=this.getObjects(),r=e.indexOf(this._activeObject)<e.indexOf(t),i=r?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.ActiveSelection(i,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):e.length>1&&(e=new fabric.ActiveSelection(e.reverse(),{canvas:this}),this.setActiveObject(e,t),this.fire("selection:created",{target:e,e:t}),this.requestRenderAll())},_collectObjects:function(){for(var r=[],i,n=this._groupSelector.ex,o=this._groupSelector.ey,a=n+this._groupSelector.left,s=o+this._groupSelector.top,c=new fabric.Point(t(n,a),t(o,s)),l=new fabric.Point(e(n,a),e(o,s)),h=n===a&&o===s,u=this._objects.length;u--&&!((i=this._objects[u])&&i.selectable&&i.visible&&(i.intersectsWithRect(c,l)||i.isContainedWithinRect(c,l)||i.containsPoint(c)||i.containsPoint(l))&&(r.push(i),h)););return r},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null,this._currentTransform=null}})}(),function(){var t=fabric.StaticCanvas.supports("toDataURLWithQuality");fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",r=t.quality||1,i=t.multiplier||1,n={left:t.left||0,top:t.top||0,width:t.width||0,height:t.height||0};return this.__toDataURLWithMultiplier(e,r,n,i)},__toDataURLWithMultiplier:function(t,e,r,i){var n=this.width,o=this.height,a=(r.width||this.width)*i,s=(r.height||this.height)*i,c=this.getZoom(),l=c*i,h=this.viewportTransform,u=(h[4]-r.left)*i,f=(h[5]-r.top)*i,d=[l,0,0,l,u,f],p=this.interactive;this.viewportTransform=d,this.interactive&&(this.interactive=!1),n!==a||o!==s?this.setDimensions({width:a,height:s}):this.renderAll();var g=this.__toDataURL(t,e,r);return p&&(this.interactive=p),this.viewportTransform=h,this.setDimensions({width:n,height:o}),g},__toDataURL:function(e,r){var i=this.contextContainer.canvas;return"jpg"===e&&(e="jpeg"),t?i.toDataURL("image/"+e,r):i.toDataURL("image/"+e)},toDataURLWithMultiplier:function(t,e,r){return this.toDataURL({format:t,multiplier:e,quality:r})}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,r){return this.loadFromJSON(t,e,r)},loadFromJSON:function(t,e,r){if(t){var i="string"==typeof t?JSON.parse(t):fabric.util.object.clone(t),n=this,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,this._enlivenObjects(i.objects,function(t){n.clear(),n._setBgOverlay(i,function(){t.forEach(function(t,e){n.insertAt(t,e)}),n.renderOnAddRemove=o,delete i.objects,delete i.backgroundImage,delete i.overlayImage,delete i.background,delete i.overlay,n._setOptions(i),n.renderAll(),e&&e()})},r),this}},_setBgOverlay:function(t,e){var r={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(t.backgroundImage||t.overlayImage||t.background||t.overlay))return void(e&&e());var i=function(){r.backgroundImage&&r.overlayImage&&r.backgroundColor&&r.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,r,i),this.__setBgOverlay("overlayImage",t.overlayImage,r,i),this.__setBgOverlay("backgroundColor",t.background,r,i),this.__setBgOverlay("overlayColor",t.overlay,r,i)},__setBgOverlay:function(t,e,r,i){var n=this;if(!e)return r[t]=!0,void(i&&i());"backgroundImage"===t||"overlayImage"===t?fabric.util.enlivenObjects([e],function(e){n[t]=e[0],r[t]=!0,i&&i()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){r[t]=!0,i&&i()})},_enlivenObjects:function(t,e,r){if(!t||0===t.length)return void(e&&e([]));fabric.util.enlivenObjects(t,function(t){e&&e(t)},null,r)},_toDataURL:function(t,e){this.clone(function(r){e(r.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,r){this.clone(function(i){r(i.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var r=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(r,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.width,e.height=this.height;var r=new fabric.Canvas(e);r.clipTo=this.clipTo,this.backgroundImage?(r.setBackgroundImage(this.backgroundImage.src,function(){r.renderAll(),t&&t(r)}),r.backgroundImageOpacity=this.backgroundImageOpacity,r.backgroundImageStretch=this.backgroundImageStretch):t&&t(r)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.object.extend,i=e.util.object.clone,n=e.util.toFixed,o=e.util.string.capitalize,a=e.util.degreesToRadians,s=e.StaticCanvas.supports("setLineDash"),c=!e.isLikelyNode,l=2;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:c,statefullCache:!1,noScaleCache:!0,dirty:!0,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height strokeLineCap strokeLineJoin strokeMiterLimit backgroundColor".split(" "),initialize:function(t){(t=t||{})&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.document.createElement("canvas"),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas()},_limitCacheSize:function(t){var r=e.perfLimitSizeTotal,i=e.cacheSideLimit,n=t.width,o=t.height,a=n/o,s=e.util.limitDimsByArea(a,r,i),c=e.util.capValue,l=e.maxCacheSideLimit,h=e.minCacheSideLimit,u=c(h,s.x,l),f=c(h,s.y,l);return n>u?(t.zoomX/=n/u,t.width=u):n<h&&(t.width=h),o>f?(t.zoomY/=o/f,t.height=f):o<h&&(t.height=h),t},_getCacheCanvasDimensions:function(){var t=this.canvas&&this.canvas.getZoom()||1,r=this.getObjectScaling(),i=this._getNonTransformedDimensions(),n=this.canvas&&this.canvas._isRetinaScaling()?e.devicePixelRatio:1,o=r.scaleX*t*n,a=r.scaleY*t*n;return{width:i.x*o+2,height:i.y*a+2,zoomX:o,zoomY:a}},_updateCacheCanvas:function(){if(this.noScaleCache&&this.canvas&&this.canvas._currentTransform){var t=this.canvas._currentTransform.action;if(t.slice&&"scale"===t.slice(0,5))return!1}var r=this._limitCacheSize(this._getCacheCanvasDimensions()),i=e.minCacheSideLimit,n=r.width,o=r.height,a=r.zoomX,s=r.zoomY,c=n!==this.cacheWidth||o!==this.cacheHeight,l=this.zoomX!==a||this.zoomY!==s,h=c||l,u=0,f=0,d=!1;if(c){var p=this._cacheCanvas.width,g=this._cacheCanvas.height,v=n>p||o>g,m=(n<.9*p||o<.9*g)&&p>i&&g>i;d=v||m,v&&(u=.1*n&-2,f=.1*o&-2)}return!!h&&(d?(this._cacheCanvas.width=Math.max(Math.ceil(n)+u,i),this._cacheCanvas.height=Math.max(Math.ceil(o)+f,i),this.cacheTranslationX=(n+u)/2,this.cacheTranslationY=(o+f)/2):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,this._cacheCanvas.width,this._cacheCanvas.height)),this.cacheWidth=n,this.cacheHeight=o,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(a,s),this.zoomX=a,this.zoomY=s,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initClipping(t),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t,e){this.group&&!this.group._transformDone&&this.group.transform(t);var r=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(r.x,r.y),this.angle&&t.rotate(a(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1)),this.skewX&&t.transform(1,0,Math.tan(a(this.skewX)),1,0,0),this.skewY&&t.transform(1,Math.tan(a(this.skewY)),0,1,0,0)},toObject:function(t){var r=e.Object.NUM_FRACTION_DIGITS,i={type:this.type,originX:this.originX,originY:this.originY,left:n(this.left,r),top:n(this.top,r),width:n(this.width,r),height:n(this.height,r),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,r),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,r),scaleX:n(this.scaleX,r),scaleY:n(this.scaleY,r),angle:n(this.angle,r),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,r),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:n(this.skewX,r),skewY:n(this.skewY,r)};return e.util.populateWithProperties(this,i,t),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var r=e.util.getKlass(t.type).prototype;return r.stateProperties.forEach(function(e){t[e]===r[e]&&delete t[e],"[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(r[e])&&0===t[e].length&&0===r[e].length&&delete t[e]}),t},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){var t=this.scaleX,e=this.scaleY;if(this.group){var r=this.group.getObjectScaling();t*=r.scaleX,e*=r.scaleY}return{scaleX:t,scaleY:e}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,r){return("scaleX"===t||"scaleY"===t)&&(r=this._constrainScale(r)),"scaleX"===t&&r<0?(this.flipX=!this.flipX,r*=-1):"scaleY"===t&&r<0?(this.flipY=!this.flipY,r*=-1):"shadow"!==t||!r||r instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",r):r=new e.Shadow(r),this[t]=r,this.cacheProperties.indexOf(t)>-1&&(this.group&&this.group.set("dirty",!0),this.dirty=!0),this.group&&this.stateProperties.indexOf(t)>-1&&this.group.isOnACache()&&this.group.set("dirty",!0),"width"!==t&&"height"!==t||(this.minScaleLimit=Math.min(.1,1/Math.max(this.width,this.height))),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.clipTo&&e.util.clipContext(this,t),this.shouldCache()?(this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext),this.dirty=!1),this.drawCacheOnCanvas(t)):(this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&t.restore(),t.restore())},needsItsOwnCache:function(){return!1},shouldCache:function(){return this.ownCaching=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawObject:function(t){this._renderBackground(t),this._setStrokeStyles(t,this),this._setFillStyles(t,this),this._render(t)},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-r/2,e,r)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group.transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){e.stroke&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,t.strokeStyle=e.stroke.toLive?e.stroke.toLive(t,this):e.stroke)},_setFillStyles:function(t,e){e.fill&&(t.fillStyle=e.fill.toLive?e.fill.toLive(t,this):e.fill)},_setLineDash:function(t,e,r){e&&(1&e.length&&e.push.apply(e,e),s?t.setLineDash(e):r&&r(t))},_renderControls:function(t,r){var i=this.getViewportTransform(),n=this.calcTransformMatrix(),o,s,c;r=r||{},s=void 0!==r.hasBorders?r.hasBorders:this.hasBorders,c=void 0!==r.hasControls?r.hasControls:this.hasControls,n=e.util.multiplyTransformMatrices(i,n),o=e.util.qrDecompose(n),t.save(),t.translate(o.translateX,o.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),r.forActiveSelection?(t.rotate(a(o.angle)),s&&this.drawBordersInGroup(t,o,r)):(t.rotate(a(this.angle)),s&&this.drawBorders(t,r)),c&&this.drawControls(t,r),t.restore()},_setShadow:function(t){if(this.shadow){var r=this.canvas&&this.canvas.viewportTransform[0]||1,i=this.canvas&&this.canvas.viewportTransform[3]||1,n=this.getObjectScaling();this.canvas&&this.canvas._isRetinaScaling()&&(r*=e.devicePixelRatio,i*=e.devicePixelRatio),t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(r+i)*(n.scaleX+n.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*r*n.scaleX,t.shadowOffsetY=this.shadow.offsetY*i*n.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(e.toLive){var r=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,n=-this.height/2+e.offsetY||0;t.translate(i,n),r&&t.transform.apply(t,r)}},_renderFill:function(t){this.fill&&(t.save(),this._applyPatternGradientTransform(t,this.fill),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(t,this.stroke),t.stroke(),t.restore())},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_removeTransformMatrix:function(){var t=this._findCenterFromElement();if(this.transformMatrix){var r=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",r.scaleX),this.set("scaleY",r.scaleY),this.angle=r.angle,this.skewX=r.skewX,this.skewY=0,t=e.util.transformPoint(t,this.transformMatrix)}this.transformMatrix=null,this.setPositionByOrigin(t,"center","center")},clone:function(t,r){var i=this.toObject(r);this.constructor.fromObject?this.constructor.fromObject(i,t):e.Object._fromObject("Object",i,t)},cloneAsImage:function(t,r){var i=this.toDataURL(r);return e.util.loadImage(i,function(r){t&&t(new e.Image(r))}),this},toDataURL:function(t){t||(t={});var r=e.util.createCanvasElement(),i=this.getBoundingRect();r.width=i.width,r.height=i.height,e.util.wrapElement(r,"div");var n=new e.StaticCanvas(r,{enableRetinaScaling:t.enableRetinaScaling});"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(n.backgroundColor="#fff");var o={active:this.active,left:this.left,top:this.top};this.set("active",!1),this.setPositionByOrigin(new e.Point(n.width/2,n.height/2),"center","center");var a=this.canvas;n.add(this);var s=n.toDataURL(t);return this.set(o).setCoords(),this.canvas=a,n.dispose(),n=null,s},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},setGradient:function(t,r){r||(r={});var i={colorStops:[]};return i.type=r.type||(r.r1||r.r2?"radial":"linear"),i.coords={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},(r.r1||r.r2)&&(i.coords.r1=r.r1,i.coords.r2=r.r2),i.gradientTransform=r.gradientTransform,e.Gradient.prototype.addColorStop.call(i,r.colorStops),this.set(t,e.Gradient.forObject(this,i))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},remove:function(){return this.canvas&&this.canvas.remove(this),this},getLocalPointer:function(t,r){r=r||this.canvas.getPointer(t);var i=new e.Point(r.x,r.y),n=this._getLeftTopCoords();return this.angle&&(i=e.util.rotatePoint(i,n,a(-this.angle))),{x:i.x-n.x,y:i.y-n.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,r(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,r,n,o){var a=e[t];r=i(r,!0),e.util.enlivenPatterns([r.fill,r.stroke],function(t){void 0!==t[0]&&(r.fill=t[0]),void 0!==t[1]&&(r.stroke=t[1]);var e=o?new a(r[o],r):new a(r);n&&n(e)})},e.Object.__uid=0)}(exports),function(){var t=fabric.util.degreesToRadians,e={left:-.5,center:0,right:.5},r={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,i,n,o,a){var s=t.x,c=t.y,l,h,u;return"string"==typeof i?i=e[i]:i-=.5,"string"==typeof o?o=e[o]:o-=.5,l=o-i,"string"==typeof n?n=r[n]:n-=.5,"string"==typeof a?a=r[a]:a-=.5,h=a-n,(l||h)&&(u=this._getTransformedDimensions(),s=t.x+l*u.x,c=t.y+h*u.y),new fabric.Point(s,c)},translateToCenterPoint:function(e,r,i){var n=this.translateToGivenOrigin(e,r,i,"center","center");return this.angle?fabric.util.rotatePoint(n,e,t(this.angle)):n},translateToOriginPoint:function(e,r,i){var n=this.translateToGivenOrigin(e,"center","center",r,i);return this.angle?fabric.util.rotatePoint(n,e,t(this.angle)):n},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var r=this.getCenterPoint();return this.translateToOriginPoint(r,t,e)},toLocalPoint:function(e,r,i){var n=this.getCenterPoint(),o,a;return o=void 0!==r&&void 0!==i?this.translateToGivenOrigin(n,"center","center",r,i):new fabric.Point(this.left,this.top),a=new fabric.Point(e.x,e.y),this.angle&&(a=fabric.util.rotatePoint(a,n,-t(this.angle))),a.subtractEquals(o)},setPositionByOrigin:function(t,e,r){var i=this.translateToCenterPoint(t,e,r),n=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",n.x),this.set("top",n.y)},adjustPosition:function(r){var i=t(this.angle),n=this.getScaledWidth(),o=Math.cos(i)*n,a=Math.sin(i)*n,s,c;s="string"==typeof this.originX?e[this.originX]:this.originX-.5,c="string"==typeof r?e[r]:r-.5,this.left+=o*(c-s),this.top+=a*(c-s),this.setCoords(),this.originX=r},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")},onDeselect:function(){}})}(),function(){function t(t){return[new fabric.Point(t.tl.x,t.tl.y),new fabric.Point(t.tr.x,t.tr.y),new fabric.Point(t.br.x,t.br.y),new fabric.Point(t.bl.x,t.bl.y)]}var e=fabric.util.degreesToRadians,r=fabric.util.multiplyTransformMatrices;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,getCoords:function(e,r){this.oCoords||this.setCoords();var i=e?this.aCoords:this.oCoords;return t(r?this.calcCoords(e):i)},intersectsWithRect:function(t,e,r,i){var n=this.getCoords(r,i);return"Intersection"===fabric.Intersection.intersectPolygonRectangle(n,t,e).status},intersectsWithObject:function(t,e,r){return"Intersection"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,r),t.getCoords(e,r)).status||t.isContainedWithinObject(this,e,r)||this.isContainedWithinObject(t,e,r)},isContainedWithinObject:function(t,e,r){for(var i=this.getCoords(e,r),n=0,o=t._getImageLines(r?t.calcCoords(e):e?t.aCoords:t.oCoords);n<4;n++)if(!t.containsPoint(i[n],o))return!1;return!0},isContainedWithinRect:function(t,e,r,i){var n=this.getBoundingRect(r,i);return n.left>=t.x&&n.left+n.width<=e.x&&n.top>=t.y&&n.top+n.height<=e.y},containsPoint:function(t,e,r,i){var e=e||this._getImageLines(i?this.calcCoords(r):r?this.aCoords:this.oCoords),n=this._findCrossPoints(t,e);return 0!==n&&n%2==1},isOnScreen:function(t){if(!this.canvas)return!1;for(var e=this.canvas.vptCoords.tl,r=this.canvas.vptCoords.br,i=this.getCoords(!0,t),n,o=0;o<4;o++)if(n=i[o],n.x<=r.x&&n.x>=e.x&&n.y<=r.y&&n.y>=e.y)return!0;if(this.intersectsWithRect(e,r,!0))return!0;var a={x:(e.x+r.x)/2,y:(e.y+r.y)/2};return!!this.containsPoint(a,null,!0)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var r,i,n,o,a,s=0,c;for(var l in e)if(c=e[l],!(c.o.y<t.y&&c.d.y<t.y||c.o.y>=t.y&&c.d.y>=t.y||(c.o.x===c.d.x&&c.o.x>=t.x?a=c.o.x:(r=0,i=(c.d.y-c.o.y)/(c.d.x-c.o.x),n=t.y-r*t.x,o=c.o.y-i*c.o.x,a=-(n-o)/(r-i)),a>=t.x&&(s+=1),2!==s)))break;return s},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(t,e){var r=this.getCoords(t,e);return fabric.util.makeBoundingBoxFromPoints(r)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return t=this._constrainScale(t),t<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords()},scaleToWidth:function(t){var e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)},calcCoords:function(t){var r=e(this.angle),i=this.getViewportTransform(),n=t?this._getTransformedDimensions():this._calculateCurrentDimensions(),o=n.x,a=n.y,s=Math.sin(r),c=Math.cos(r),l=o>0?Math.atan(a/o):0,h=o/Math.cos(l)/2,u=Math.cos(l+r)*h,f=Math.sin(l+r)*h,d=this.getCenterPoint(),p=t?d:fabric.util.transformPoint(d,i),g=new fabric.Point(p.x-u,p.y-f),v=new fabric.Point(g.x+o*c,g.y+o*s),m=new fabric.Point(g.x-a*s,g.y+a*c),b=new fabric.Point(p.x+u,p.y+f);if(!t)var y=new fabric.Point((g.x+m.x)/2,(g.y+m.y)/2),_=new fabric.Point((v.x+g.x)/2,(v.y+g.y)/2),w=new fabric.Point((b.x+v.x)/2,(b.y+v.y)/2),S=new fabric.Point((b.x+m.x)/2,(b.y+m.y)/2),x=new fabric.Point(_.x+s*this.rotatingPointOffset,_.y-c*this.rotatingPointOffset);var p={tl:g,tr:v,br:b,bl:m};return t||(p.ml=y,p.mt=_,p.mr=w,p.mb=S,p.mtr=x),p},setCoords:function(t,e){return this.oCoords=this.calcCoords(t),e||(this.aCoords=this.calcCoords(!0)),t||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var t=e(this.angle),r=Math.cos(t),i=Math.sin(t);return 6.123233995736766e-17!==r&&-1.8369701987210297e-16!==r||(r=0),[r,i,-i,r,0,0]}return fabric.iMatrix.concat()},calcTransformMatrix:function(t){var e=this.getCenterPoint(),i=[1,0,0,1,e.x,e.y],n,o=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0),a;return a=this.group&&!t?r(this.group.calcTransformMatrix(),i):i,this.angle&&(n=this._calcRotateMatrix(),a=r(a,n)),a=r(a,o)},_calcDimensionsTransformMatrix:function(t,i,n){var o,a=this.scaleX*(n&&this.flipX?-1:1),s=this.scaleY*(n&&this.flipY?-1:1),c=[a,0,0,s,0,0];return t&&(o=[1,0,Math.tan(e(t)),1],c=r(c,o,!0)),i&&(o=[1,Math.tan(e(i)),0,1],c=r(c,o,!0)),c},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var r=this._getNonTransformedDimensions(),i=r.x/2,n=r.y/2,o=[{x:-i,y:-n},{x:i,y:-n},{x:-i,y:n},{x:i,y:n}],a,s=this._calcDimensionsTransformMatrix(t,e,!1),c;for(a=0;a<o.length;a++)o[a]=fabric.util.transformPoint(o[a],s);return c=fabric.util.makeBoundingBoxFromPoints(o),{x:c.width,y:c.height}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return fabric.util.transformPoint(e,t,!0).scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var r=new fabric.Color(e),i=t+": "+r.toRgb()+"; ",n=r.getAlpha();return 1!==n&&(i+=t+"-opacity: "+n.toString()+"; "),i}return t+": none; "}var e=fabric.Object.NUM_FRACTION_DIGITS,r=fabric.util.toFixed;fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(e){var r=this.fillRule,i=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=void 0!==this.opacity?this.opacity:"1",l=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),u=t("fill",this.fill);return[t("stroke",this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",o,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",s,"; ",u,"fill-rule: ",r,"; ","opacity: ",c,";",h,l].join("")},getSvgSpanStyles:function(e){var r=e.strokeWidth?"stroke-width: "+e.strokeWidth+"; ":"",i=e.fontFamily?"font-family: "+e.fontFamily.replace(/"/g,"'")+"; ":"",n=e.fontSize?"font-size: "+e.fontSize+"; ":"",o=e.fontStyle?"font-style: "+e.fontStyle+"; ":"",a=e.fontWeight?"font-weight: "+e.fontWeight+"; ":"",s=e.fill?t("fill",e.fill):"";return[e.stroke?t("stroke",e.stroke):"",r,i,n,o,a,this.getSvgTextDecoration(e),s].join("")},getSvgTextDecoration:function(t){return"overline"in t||"underline"in t||"linethrough"in t?"text-decoration: "+(t.overline?"overline ":"")+(t.underline?"underline ":"")+(t.linethrough?"line-through ":"")+";":""},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgId:function(){return this.id?'id="'+this.id+'" ':""},getSvgTransform:function(){var t=this.angle,e=this.skewX%360,i=this.skewY%360,n=this.getCenterPoint(),o=fabric.Object.NUM_FRACTION_DIGITS,a="translate("+r(n.x,o)+" "+r(n.y,o)+")",s=0!==t?" rotate("+r(t,o)+")":"",c=1===this.scaleX&&1===this.scaleY?"":" scale("+r(this.scaleX,o)+" "+r(this.scaleY,o)+")",l=0!==e?" skewX("+r(e,o)+")":"",h=0!==i?" skewY("+r(i,o)+")":"";return[a,s,c,this.flipX?" matrix(-1 0 0 1 0 0) ":"",this.flipY?" matrix(1 0 0 -1 0 0)":"",l,h].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_setSVGBg:function(t){this.backgroundColor&&t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,e),'" y="',r(-this.height/2,e),'" width="',r(this.width,e),'" height="',r(this.height,e),'"></rect>\n')},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}})}(),function(){function t(t,e,i){var n={},o=!0;i.forEach(function(e){n[e]=t[e]}),r(t[e],n,!0)}function e(t,r,i){if(t===r)return!0;if(Array.isArray(t)){if(t.length!==r.length)return!1;for(var n=0,o=t.length;n<o;n++)if(!e(t[n],r[n]))return!1;return!0}if(t&&"object"==typeof t){var a=Object.keys(t),s;if(!i&&a.length!==Object.keys(r).length)return!1;for(var n=0,o=a.length;n<o;n++)if(s=a[n],!e(t[s],r[s]))return!1;return!0}}var r=fabric.util.object.extend,i="stateProperties";fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(t){t=t||i;var r="_"+t;return Object.keys(this[r]).length<this[t].length||!e(this[r],this,!0)},saveState:function(e){var r=e&&e.propertySet||i,n="_"+r;return this[n]?(t(this,n,this[r]),e&&e.stateProperties&&t(this,n,e.stateProperties),this):this.setupState(e)},setupState:function(t){t=t||{};var e=t.propertySet||i;return t.propertySet=e,this["_"+e]={},this.saveState(t),this}})}(),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active||this.group)return!1;var e=t.x,r=t.y,i,n;this.__corner=0;for(var o in this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(n=this._getImageLines(this.oCoords[o].corner),0!==(i=this._findCrossPoints({x:e,y:r},n))&&i%2==1))return this.__corner=o,o;return!1},_setCornerCoords:function(){var e=this.oCoords,r=t(45-this.angle),i=.707106*this.cornerSize,n=i*Math.cos(r),o=i*Math.sin(r),a,s;for(var c in e)a=e[c].x,s=e[c].y,e[c].corner={tl:{x:a-o,y:s-n},tr:{x:a+n,y:s-o},bl:{x:a-n,y:s+o},br:{x:a+o,y:s+n}}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||!this.active||this.canvas&&!this.canvas.interactive)return this;e.save();var r=this.getCenterPoint(),i=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return e.translate(r.x,r.y),e.scale(1/n[0],1/n[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-i.x/2,-i.y/2,i.x,i.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var r=this._calculateCurrentDimensions(),i=1/this.borderScaleFactor,n=r.x+i,o=r.y+i,a=void 0!==e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,s=void 0!==e.hasControls?e.hasControls:this.hasControls,c=void 0!==e.rotatingPointOffset?e.rotatingPointOffset:this.rotatingPointOffset;if(t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray,null),t.strokeRect(-n/2,-o/2,n,o),a&&this.isControlVisible("mtr")&&s){var l=-o/2;t.beginPath(),t.moveTo(0,l),t.lineTo(0,l-c),t.closePath(),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e,r){r=r||{};var i=this._getNonTransformedDimensions(),n=fabric.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),o=fabric.util.transformPoint(i,n),a=1/this.borderScaleFactor,s=o.x+a,c=o.y+a;return t.save(),this._setLineDash(t,r.borderDashArray||this.borderDashArray,null),t.strokeStyle=r.borderColor||this.borderColor,t.strokeRect(-s/2,-c/2,s,c),t.restore(),this},drawControls:function(t,e){e=e||{};var r=this._calculateCurrentDimensions(),i=r.x,n=r.y,o=e.cornerSize||this.cornerSize,a=-(i+o)/2,s=-(n+o)/2,c=void 0!==e.transparentCorners?e.transparentCorners:this.transparentCorners,l=void 0!==e.hasRotatingPoint?e.hasRotatingPoint:this.hasRotatingPoint,h=c?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray,null),this._drawControl("tl",t,h,a,s,e),this._drawControl("tr",t,h,a+i,s,e),this._drawControl("bl",t,h,a,s+n,e),this._drawControl("br",t,h,a+i,s+n,e),this.get("lockUniScaling")||(this._drawControl("mt",t,h,a+i/2,s,e),this._drawControl("mb",t,h,a+i/2,s+n,e),this._drawControl("mr",t,h,a+i,s+n/2,e),this._drawControl("ml",t,h,a,s+n/2,e)),l&&this._drawControl("mtr",t,h,a+i/2,s-this.rotatingPointOffset,e),t.restore(),this},_drawControl:function(t,e,r,i,n,o){if(o=o||{},this.isControlVisible(t)){var a=this.cornerSize,s=!this.transparentCorners&&this.cornerStrokeColor;switch(o.cornerStyle||this.cornerStyle){case"circle":e.beginPath(),e.arc(i+a/2,n+a/2,a/2,0,2*Math.PI,!1),e[r](),s&&e.stroke();break;default:this.transparentCorners||e.clearRect(i,n,a,a),e[r+"Rect"](i,n,a,a),s&&e.strokeRect(i,n,a,a)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){t||(t={});for(var e in t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var r=function(){},i=e.onComplete||r,n=e.onChange||r,o=this;return fabric.util.animate({startValue:t.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),o.requestRenderAll(),n()},onComplete:function(){t.setCoords(),i()}}),this},fxCenterObjectV:function(t,e){e=e||{};var r=function(){},i=e.onComplete||r,n=e.onChange||r,o=this;return fabric.util.animate({startValue:t.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),o.requestRenderAll(),n()},onComplete:function(){t.setCoords(),i()}}),this},fxRemove:function(t,e){e=e||{};var r=function(){},i=e.onComplete||r,n=e.onChange||r,o=this;return fabric.util.animate({startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),o.requestRenderAll(),n()},onComplete:function(){o.remove(t),i()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t=[],e,r;for(e in arguments[0])t.push(e);for(var i=0,n=t.length;i<n;i++)e=t[i],r=i!==n-1,this._animate(e,arguments[0][e],arguments[1],r)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,r,i){var n=this,o;e=e.toString(),r=r?fabric.util.object.clone(r):{},~t.indexOf(".")&&(o=t.split("."));var a=o?this.get(o[0])[o[1]]:this.get(t);"from"in r||(r.from=a),e=~e.indexOf("=")?a+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:r.from,endValue:e,byValue:r.by,easing:r.easing,duration:r.duration,abort:r.abort&&function(){return r.abort.call(n)},onChange:function(e,a,s){o?n[o[0]][o[1]]=e:n.set(t,e),i||r.onChange&&r.onChange(e,a,s)},onComplete:function(t,e,o){i||(n.setCoords(),r.onComplete&&r.onComplete(t,e,o))}})}}),function(t){"use strict";function e(t,e){var r=t.origin,i=t.axis1,n=t.axis2,o=t.dimension,a=e.nearest,s=e.center,c=e.farthest;return function(){switch(this.get(r)){case a:return Math.min(this.get(i),this.get(n));case s:return Math.min(this.get(i),this.get(n))+.5*this.get(o);case c:return Math.max(this.get(i),this.get(n))}}}var r=t.fabric||(t.fabric={}),i=r.util.object.extend,n=r.util.object.clone,o={x1:1,x2:1,y1:1,y2:1},a=r.StaticCanvas.supports("setLineDash");if(r.Line)return void r.warn("fabric.Line is already defined");var s=r.Object.prototype.cacheProperties.concat();s.push("x1","x2","y1","y2"),r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s,initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==o[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){if(t.beginPath(),!this.strokeDashArray||this.strokeDashArray&&a){var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2)}t.lineWidth=this.strokeWidth;var r=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=r},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),r.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return i(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,r=t*this.width*.5,i=e*this.height*.5;return{x1:r,x2:t*this.width*-.5,y1:i,y2:e*this.height*-.5}},toSVG:function(t){var e=this._createBaseSVGMarkup(),r=this.calcLinePoints();return e.push("<line ",this.getSvgId(),'x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(t,e,n){n=n||{};var o=r.parseAttributes(t,r.Line.ATTRIBUTE_NAMES),a=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];n.originX="left",n.originY="top",e(new r.Line(a,i(o,n)))},r.Line.fromObject=function(t,e){function i(t){delete t.points,e&&e(t)}var o=n(t,!0);o.points=[t.x1,t.y1,t.x2,t.y2],r.Object._fromObject("Line",o,i,"points")}}(exports),function(t){"use strict";function e(t){return"radius"in t&&t.radius>=0}var r=t.fabric||(t.fabric={}),i=Math.PI,n=r.util.object.extend;if(r.Circle)return void r.warn("fabric.Circle is already defined.");var o=r.Object.prototype.cacheProperties.concat();o.push("radius"),r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*i,cacheProperties:o,initialize:function(t){this.callSuper("initialize",t),this.set("radius",t&&t.radius||0)},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),r=0,n=0,o=(this.endAngle-this.startAngle)%(2*i);if(0===o)e.push("<circle ",this.getSvgId(),'cx="0" cy="0" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var a=Math.cos(this.startAngle)*this.radius,s=Math.sin(this.startAngle)*this.radius,c=Math.cos(this.endAngle)*this.radius,l=Math.sin(this.endAngle)*this.radius,h=o>i?"1":"0";e.push('<path d="M '+a+" "+s," A "+this.radius+" "+this.radius," 0 ",+h+" 1"," "+c+" "+l,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(t,i,o){o||(o={});var a=r.parseAttributes(t,r.Circle.ATTRIBUTE_NAMES);if(!e(a))throw new Error("value of `r` attribute is required and can not be negative");a.left=(a.left||0)-a.radius,a.top=(a.top||0)-a.radius,a.originX="left",a.originY="top",i(new r.Circle(n(a,o)))},r.Circle.fromObject=function(t,e){return r.Object._fromObject("Circle",t,e)}}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={});if(e.Triangle)return void e.warn("fabric.Triangle is already defined");e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){this.callSuper("initialize",t),this.set("width",t&&t.width||100).set("height",t&&t.height||100)},_render:function(t){var e=this.width/2,r=this.height/2;t.beginPath(),t.moveTo(-e,r),t.lineTo(0,-r),t.lineTo(e,r),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var r=this.width/2,i=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-r,i,0,-i,this.strokeDashArray),e.util.drawDashedLine(t,0,-i,r,i,this.strokeDashArray),e.util.drawDashedLine(t,r,i,-r,i,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),r=this.width/2,i=this.height/2,n=[-r+" "+i,"0 "+-i,r+" "+i].join(",");return e.push("<polygon ",this.getSvgId(),'points="',n,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")}}),e.Triangle.fromObject=function(t,r){return e.Object._fromObject("Triangle",t,r)}}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=2*Math.PI,i=e.util.object.extend;if(e.Ellipse)return void e.warn("fabric.Ellipse is already defined.");var n=e.Object.prototype.cacheProperties.concat();n.push("rx","ry"),e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n,initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),r=0,i=0;return e.push("<ellipse ",this.getSvgId(),'cx="',0,'" cy="',0,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,r,!1),t.restore(),this._renderFill(t),this._renderStroke(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,r,n){n||(n={});var o=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,o.originX="left",o.originY="top",r(new e.Ellipse(i(o,n)))},e.Ellipse.fromObject=function(t,r){return e.Object._fromObject("Ellipse",t,r)}}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.object.extend;if(e.Rect)return void e.warn("fabric.Rect is already defined");var i=e.Object.prototype.stateProperties.concat();i.push("rx","ry");var n=e.Object.prototype.cacheProperties.concat();n.push("rx","ry"),e.Rect=e.util.createClass(e.Object,{stateProperties:i,type:"rect",rx:0,ry:0,cacheProperties:n,initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){if(1===this.width&&1===this.height)return void t.fillRect(-.5,-.5,1,1);var e=this.rx?Math.min(this.rx,this.width/2):0,r=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,n=this.height,o=-this.width/2,a=-this.height/2,s=0!==e||0!==r,c=.4477152502;t.beginPath(),t.moveTo(o+e,a),t.lineTo(o+i-e,a),s&&t.bezierCurveTo(o+i-c*e,a,o+i,a+c*r,o+i,a+r),t.lineTo(o+i,a+n-r),s&&t.bezierCurveTo(o+i,a+n-c*r,o+i-c*e,a+n,o+i-e,a+n),t.lineTo(o+e,a+n),s&&t.bezierCurveTo(o+c*e,a+n,o,a+n-c*r,o,a+n-r),t.lineTo(o,a+r),s&&t.bezierCurveTo(o,a+c*r,o+c*e,a,o+e,a),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var r=-this.width/2,i=-this.height/2,n=this.width,o=this.height;t.beginPath(),e.util.drawDashedLine(t,r,i,r+n,i,this.strokeDashArray),e.util.drawDashedLine(t,r+n,i,r+n,i+o,this.strokeDashArray),e.util.drawDashedLine(t,r+n,i+o,r,i+o,this.strokeDashArray),e.util.drawDashedLine(t,r,i+o,r,i,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},toSVG:function(t){var e=this._createBaseSVGMarkup(),r=-this.width/2,i=-this.height/2;return e.push("<rect ",this.getSvgId(),'x="',r,'" y="',i,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,i,n){if(!t)return i(null);n=n||{};var o=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.originX="left",o.originY="top";var a=new e.Rect(r(n?e.util.object.clone(n):{},o));a.visible=a.visible&&a.width>0&&a.height>0,i(a)},e.Rect.fromObject=function(t,r){return e.Object._fromObject("Rect",t,r)}}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.object.extend,i=e.util.array.min,n=e.util.array.max,o=e.util.toFixed,a=e.Object.NUM_FRACTION_DIGITS;if(e.Polyline)return void e.warn("fabric.Polyline is already defined");var s=e.Object.prototype.cacheProperties.concat();s.push("points"),e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,cacheProperties:s,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX),this.pathOffset={x:this.minX+this.width/2,y:this.minY+this.height/2}},_calcDimensions:function(){var t=this.points,e=i(t,"x"),r=i(t,"y"),o=n(t,"x"),a=n(t,"y");this.width=o-e||0,this.height=a-r||0,this.minX=e||0,this.minY=r||0},toObject:function(t){return r(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e=[],r=this.pathOffset.x,i=this.pathOffset.y,n=this._createBaseSVGMarkup(),s=0,c=this.points.length;s<c;s++)e.push(o(this.points[s].x-r,a),",",o(this.points[s].y-i,a)," ");return n.push("<",this.type," ",this.getSvgId(),'points="',e.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(n.join("")):n.join("")},commonRender:function(t){var e,r=this.points.length,i=this.pathOffset.x,n=this.pathOffset.y;if(!r||isNaN(this.points[r-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-n);for(var o=0;o<r;o++)e=this.points[o],t.lineTo(e.x-i,e.y-n);return!0},_render:function(t){this.commonRender(t)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var r,i;t.beginPath();for(var n=0,o=this.points.length;n<o;n++)r=this.points[n],i=this.points[n+1]||r,e.util.drawDashedLine(t,r.x,r.y,i.x,i.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,r,i){if(!t)return r(null);i||(i={});var n=e.parsePointsAttribute(t.getAttribute("points")),o=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);r(new e.Polyline(n,e.util.object.extend(o,i)))},e.Polyline.fromObject=function(t,r){return e.Object._fromObject("Polyline",t,r,"points")}}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.object.extend;if(e.Polygon)return void e.warn("fabric.Polygon is already defined");e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,i,n){if(!t)return i(null);n||(n={});var o=e.parsePointsAttribute(t.getAttribute("points")),a=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);i(new e.Polygon(o,r(a,n)))},e.Polygon.fromObject=function(t,r){return e.Object._fromObject("Polygon",t,r,"points")}}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.array.min,i=e.util.array.max,n=e.util.object.extend,o=Object.prototype.toString,a=e.util.drawArc,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};if(e.Path)return void e.warn("fabric.Path is already defined");var l=e.Object.prototype.stateProperties.concat();l.push("path");var h=e.Object.prototype.cacheProperties.concat();h.push("path","fillRule"),e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,cacheProperties:h,stateProperties:l,initialize:function(t,e){e=e||{},this.callSuper("initialize",e),t||(t=[]);var r="[object Array]"===o.call(t);this.path=r?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(r||(this.path=this._parsePath()),this._setPositionDimensions(e))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.minX=e.left,this.minY=e.top,this.width=e.width,this.height=e.height,void 0===t.left&&(this.left=e.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),void 0===t.top&&(this.top=e.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_renderPathCommands:function(t){var e,r=null,i=0,n=0,o=0,s=0,c=0,l=0,h,u,f=-this.pathOffset.x,d=-this.pathOffset.y;t.beginPath();for(var p=0,g=this.path.length;p<g;++p){switch(e=this.path[p],e[0]){case"l":o+=e[1],s+=e[2],t.lineTo(o+f,s+d);break;case"L":o=e[1],s=e[2],t.lineTo(o+f,s+d);break;case"h":o+=e[1],t.lineTo(o+f,s+d);break;case"H":o=e[1],t.lineTo(o+f,s+d);break;case"v":s+=e[1],t.lineTo(o+f,s+d);break;case"V":s=e[1],t.lineTo(o+f,s+d);break;case"m":o+=e[1],s+=e[2],i=o,n=s,t.moveTo(o+f,s+d);break;case"M":o=e[1],s=e[2],i=o,n=s,t.moveTo(o+f,s+d);break;case"c":h=o+e[5],u=s+e[6],c=o+e[3],l=s+e[4],t.bezierCurveTo(o+e[1]+f,s+e[2]+d,c+f,l+d,h+f,u+d),o=h,s=u;break;case"C":o=e[5],s=e[6],c=e[3],l=e[4],t.bezierCurveTo(e[1]+f,e[2]+d,c+f,l+d,o+f,s+d);break;case"s":h=o+e[3],u=s+e[4],null===r[0].match(/[CcSs]/)?(c=o,l=s):(c=2*o-c,l=2*s-l),t.bezierCurveTo(c+f,l+d,o+e[1]+f,s+e[2]+d,h+f,u+d),c=o+e[1],l=s+e[2],o=h,s=u;break;case"S":h=e[3],u=e[4],null===r[0].match(/[CcSs]/)?(c=o,l=s):(c=2*o-c,l=2*s-l),t.bezierCurveTo(c+f,l+d,e[1]+f,e[2]+d,h+f,u+d),o=h,s=u,c=e[1],l=e[2];break;case"q":h=o+e[3],u=s+e[4],c=o+e[1],l=s+e[2],t.quadraticCurveTo(c+f,l+d,h+f,u+d),o=h,s=u;break;case"Q":h=e[3],u=e[4],t.quadraticCurveTo(e[1]+f,e[2]+d,h+f,u+d),o=h,s=u,c=e[1],l=e[2];break;case"t":h=o+e[1],u=s+e[2],null===r[0].match(/[QqTt]/)?(c=o,l=s):(c=2*o-c,l=2*s-l),t.quadraticCurveTo(c+f,l+d,h+f,u+d),o=h,s=u;break;case"T":h=e[1],u=e[2],null===r[0].match(/[QqTt]/)?(c=o,l=s):(c=2*o-c,l=2*s-l),t.quadraticCurveTo(c+f,l+d,h+f,u+d),o=h,s=u;break;case"a":a(t,o+f,s+d,[e[1],e[2],e[3],e[4],e[5],e[6]+o+f,e[7]+s+d]),o+=e[6],s+=e[7];break;case"A":a(t,o+f,s+d,[e[1],e[2],e[3],e[4],e[5],e[6]+f,e[7]+d]),o=e[6],s=e[7];break;case"z":case"Z":o=i,s=n,t.closePath()}r=e}},_render:function(t){this._renderPathCommands(t),this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return n(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()}),top:this.top,left:this.left})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},toSVG:function(t){for(var e=[],r=this._createBaseSVGMarkup(),i="",n=0,o=this.path.length;n<o;n++)e.push(this.path[n].join(" "));var a=e.join(" ");return i=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") ",r.push("<path ",this.getSvgId(),'d="',a,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),i,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(r.join("")):r.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t=[],e=[],r,i,n=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,o,a,l=0,h,u=this.path.length;l<u;l++){for(r=this.path[l],a=r.slice(1).trim(),e.length=0;o=n.exec(a);)e.push(o[0]);h=[r.charAt(0)];for(var f=0,d=e.length;f<d;f++)i=parseFloat(e[f]),isNaN(i)||h.push(i);var p=h[0],g=s[p.toLowerCase()],v=c[p]||p;if(h.length-1>g)for(var m=1,b=h.length;m<b;m+=g)t.push([p].concat(h.slice(m,m+g))),p=v;else t.push(h)}return t},_parseDimensions:function(){for(var t=[],n=[],o,a=null,s=0,c=0,l=0,h=0,u=0,f=0,d,p,g,v=0,m=this.path.length;v<m;++v){switch(o=this.path[v],o[0]){case"l":l+=o[1],h+=o[2],g=[];break;case"L":l=o[1],h=o[2],g=[];break;case"h":l+=o[1],g=[];break;case"H":l=o[1],g=[];break;case"v":h+=o[1],g=[];break;case"V":h=o[1],g=[];break;case"m":l+=o[1],h+=o[2],s=l,c=h,g=[];break;case"M":l=o[1],h=o[2],s=l,c=h,g=[];break;case"c":d=l+o[5],p=h+o[6],u=l+o[3],f=h+o[4],g=e.util.getBoundsOfCurve(l,h,l+o[1],h+o[2],u,f,d,p),l=d,h=p;break;case"C":u=o[3],f=o[4],g=e.util.getBoundsOfCurve(l,h,o[1],o[2],u,f,o[5],o[6]),l=o[5],h=o[6];break;case"s":d=l+o[3],p=h+o[4],null===a[0].match(/[CcSs]/)?(u=l,f=h):(u=2*l-u,f=2*h-f),g=e.util.getBoundsOfCurve(l,h,u,f,l+o[1],h+o[2],d,p),u=l+o[1],f=h+o[2],l=d,h=p;break;case"S":d=o[3],p=o[4],null===a[0].match(/[CcSs]/)?(u=l,f=h):(u=2*l-u,f=2*h-f),g=e.util.getBoundsOfCurve(l,h,u,f,o[1],o[2],d,p),l=d,h=p,u=o[1],f=o[2];break;case"q":d=l+o[3],p=h+o[4],u=l+o[1],f=h+o[2],g=e.util.getBoundsOfCurve(l,h,u,f,u,f,d,p),l=d,h=p;break;case"Q":u=o[1],f=o[2],g=e.util.getBoundsOfCurve(l,h,u,f,u,f,o[3],o[4]),l=o[3],h=o[4];break;case"t":d=l+o[1],p=h+o[2],null===a[0].match(/[QqTt]/)?(u=l,f=h):(u=2*l-u,f=2*h-f),g=e.util.getBoundsOfCurve(l,h,u,f,u,f,d,p),l=d,h=p;break;case"T":d=o[1],p=o[2],null===a[0].match(/[QqTt]/)?(u=l,f=h):(u=2*l-u,f=2*h-f),g=e.util.getBoundsOfCurve(l,h,u,f,u,f,d,p),l=d,h=p;break;case"a":g=e.util.getBoundsOfArc(l,h,o[1],o[2],o[3],o[4],o[5],o[6]+l,o[7]+h),l+=o[6],h+=o[7];break;case"A":g=e.util.getBoundsOfArc(l,h,o[1],o[2],o[3],o[4],o[5],o[6],o[7]),l=o[6],h=o[7];break;case"z":case"Z":l=s,h=c}a=o,g.forEach(function(e){t.push(e.x),n.push(e.y)}),t.push(l),n.push(h)}var b=r(t)||0,y=r(n)||0;return{left:b,top:y,width:(i(t)||0)-b,height:(i(n)||0)-y}}}),e.Path.fromObject=function(t,r){if("string"==typeof t.sourcePath){var i=t.sourcePath;e.loadSVGFromURL(i,function(e){var i=e[0];i.setOptions(t),r&&r(i)})}else e.Object._fromObject("Path",t,r,"path")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,r,i){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);o.originX="left",o.originY="top",r(new e.Path(o.d,n(o,i)))}}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.object.extend,i=e.util.array.min,n=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,r){e=e||{},this._objects=[],r&&this.callSuper("initialize",e),this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;if(e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),!r){var n=e&&e.centerPoint;n||this._calcBounds(),this._updateObjectsCoords(n),delete e.centerPont,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsCoords:function(t){for(var t=t||this.getCenterPoint(),e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var r=t.left,i=t.top,n=!0,o=!0;t.set({left:r-e.x,top:i-e.y}),t.group=this,t.setCoords(!0,!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(t,e);this.callSuper("_set",t,e)},toObject:function(t){var e=this.getObjects().map(function(e){var r=e.includeDefaultValues;e.includeDefaultValues=e.group.includeDefaultValues;var i=e.toObject(t);return e.includeDefaultValues=r,i});return r(this.callSuper("toObject",t),{objects:e})},toDatalessObject:function(t){var e,i=this.sourcePath;return e=i||this.getObjects().map(function(e){var r=e.includeDefaultValues;e.includeDefaultValues=e.group.includeDefaultValues;var i=e.toDatalessObject(t);return e.includeDefaultValues=r,i}),r(this.callSuper("toDatalessObject",t),{objects:e})},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isOnACache());if(this.ownCaching=t,t)for(var e=0,r=this._objects.length;e<r;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(this.shadow)return this.callSuper("willDrawShadow");for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,r=this._objects.length;e<r;e++)this._objects[e].render(t)},isCacheDirty:function(){if(this.callSuper("isCacheDirty"))return!0;if(!this.statefullCache)return!1;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var r=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-r/2,-i/2,r,i)}return!0}return!1},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var r=t.calcTransformMatrix(),i=e.util.qrDecompose(r),n=new e.Point(i.translateX,i.translateY);return t.flipX=!1,t.flipY=!1,t.set("scaleX",i.scaleX),t.set("scaleY",i.scaleY),t.skewX=i.skewX,t.skewY=i.skewY,t.angle=i.angle,t.setPositionByOrigin(n,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),delete t.group,this},destroy:function(){return this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,r=this.canvas;this._objects=[];var i=this.toObject(),n=new e.ActiveSelection([]);return n.set(i),n.type="activeSelection",r.remove(this),t.forEach(function(t){t.group=n,t.dirty=!0,r.add(t)}),n._objects=t,r._activeObject=n,n.setCoords(),n}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=!0,e=!0;return this.forEachObject(function(t){t.setCoords(!0,!0)}),this},_calcBounds:function(t){for(var e=[],r=[],i,n,o=["tr","br","bl","tl"],a=0,s=this._objects.length,c,l=o.length,h=!0;a<s;++a)for(i=this._objects[a],i.setCoords(!0),c=0;c<l;c++)n=o[c],e.push(i.oCoords[n].x),r.push(i.oCoords[n].y);this.set(this._getBounds(e,r,t))},_getBounds:function(t,r,o){var a=new e.Point(i(t),i(r)),s=new e.Point(n(t),n(r)),c={width:s.x-a.x||0,height:s.y-a.y||0};return o||(c.left=a.x||0,c.top=a.y||0,"center"===this.originX&&(c.left+=c.width/2),"right"===this.originX&&(c.left+=c.width),"center"===this.originY&&(c.top+=c.height/2),"bottom"===this.originY&&(c.top+=c.height)),c},toSVG:function(t){var e=this._createBaseSVGMarkup();e.push("<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" style="',this.getSvgFilter(),'">\n');for(var r=0,i=this._objects.length;r<i;r++)e.push("\t",this._objects[r].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")}}),e.Group.fromObject=function(t,r){e.util.enlivenObjects(t.objects,function(i){var n=e.util.object.clone(t,!0);delete n.objects,r&&r(new e.Group(i,n,!0))})})}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,r){r=r||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;r.originX&&(this.originX=r.originX),r.originY&&(this.originY=r.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,r),this.setCoords()},toGroup:function(){var t=this._objects;this._objects=[];var r=this.toObject(),i=new e.Group([]);if(i.set(r),i.type="group",t.forEach(function(t){t.group=i,t.canvas.remove(t)}),i._objects=t,!this.canvas)return i;var n=this.canvas;return n._activeObject=i,n.add(i),i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},_set:function(t,r){var i=this._objects.length;if("canvas"===t)for(;i--;)this._objects[i].set(t,r);if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,r);e.Object.prototype._set.call(this,t,r)},shouldCache:function(){return!1},willDrawShadow:function(){if(this.shadow)return this.callSuper("willDrawShadow");for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return!1},_renderControls:function(t,e,r){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),r=r||{},void 0===r.hasControls&&(r.hasControls=!1),void 0===r.hasRotatingPoint&&(r.hasRotatingPoint=!1),r.forActiveSelection=!0;for(var i=0,n=this._objects.length;i<n;i++)this._objects[i]._renderControls(t,r);t.restore()}}),e.ActiveSelection.fromObject=function(t,r){e.util.enlivenObjects(t.objects,function(i){delete t.objects,r&&r(new e.ActiveSelection(i,t,!0))})})}(exports),function(t){"use strict";var e=fabric.util.object.extend;if(t.fabric||(t.fabric={}),t.fabric.Image)return void fabric.warn("fabric.Image is already defined.");var r=fabric.Object.prototype.stateProperties.concat();r.push("cropX","cropY"),fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:r,objectCaching:!1,cacheKey:"",cropX:0,cropY:0,initialize:function(t,e){e||(e={}),this.filters=[],this.callSuper("initialize",e),this._initElement(t,e),this.cacheKey="texture"+fabric.Object.__uid++},getElement:function(){return this._element},setElement:function(t,e){return this._element=t,this._originalElement=t,this._initConfig(e),this.resizeFilter&&this.applyResizeFilters(),0!==this.filters.length&&this.applyFilters(),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,r=this.height/2;t.beginPath(),t.moveTo(-e,-r),t.lineTo(e,-r),t.lineTo(e,r),t.lineTo(-e,r),t.lineTo(-e,-r),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,r=-this.height/2,i=this.width,n=this.height;t.save(),this._setStrokeStyles(t,this),t.beginPath(),fabric.util.drawDashedLine(t,e,r,e+i,r,this.strokeDashArray),fabric.util.drawDashedLine(t,e+i,r,e+i,r+n,this.strokeDashArray),fabric.util.drawDashedLine(t,e+i,r+n,e,r+n,this.strokeDashArray),fabric.util.drawDashedLine(t,e,r+n,e,r,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var r=[];this.filters.forEach(function(t){t&&r.push(t.toObject())});var i=e(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(t)),{src:this.getSrc(),filters:r});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i.width/=this._filterScalingX,i.height/=this._filterScalingY,i},toSVG:function(t){var e=this._createBaseSVGMarkup(),r=-this.width/2,i=-this.height/2,n=!0;if(e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',"\t<image ",this.getSvgId(),'xlink:href="',this.getSvgSrc(!0),'" x="',r,'" y="',i,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'"></image>\n'),this.stroke||this.strokeDashArray){var o=this.fill;this.fill=null,e.push("<rect ",'x="',r,'" y="',i,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=o}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(t){var e=t?this._element:this._originalElement;return e?fabric.isLikelyNode?e._src:e.src:this.src||""},setSrc:function(t,e,r){return fabric.util.loadImage(t,function(t){this.setElement(t,r),e(this)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.canvas?this.canvas.getRetinaScaling():1,r=this.minimumScaleTrigger,i=this.scaleX<r?this.scaleX:1,n=this.scaleY<r?this.scaleY:1;if(i*e<1&&(i*=e),n*e<1&&(n*=e),!t||i>=1&&n>=1)return void(this._element=this._filteredEl);fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend());var o=this._filteredEl||this._originalElement,a;if(this._element===this._originalElement){var s=fabric.util.createCanvasElement();s.width=o.width,s.height=o.height,this._element=s}var c=this._element.getContext("2d");o.getContext?a=o.getContext("2d").getImageData(0,0,o.width,o.height):(c.drawImage(o,0,0),a=c.getImageData(0,0,o.width,o.height));var l={imageData:a,scaleX:i,scaleY:n};t.applyTo2d(l),this.width=this._element.width=l.imageData.width,this.height=this._element.height=l.imageData.height,c.putImageData(l.imageData,0,0)},applyFilters:function(t){if(t=t||this.filters||[],t=t.filter(function(t){return t}),0===t.length)return this._element=this._originalElement,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,r=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){var n=fabric.util.createCanvasElement();n.width=e.width,n.height=e.height,this._element=n}else this._element.getContext("2d").clearRect(0,0,r,i);return fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend()),fabric.filterBackend.applyFilters(t,this._originalElement,r,i,this._element,this.cacheKey),this.width===this._element.width&&this.height===this._element.height||(this._filterScalingX=this._element.width/this.width,this._filterScalingY=this._element.height/this.height,this.width=this._element.width,this.height=this._element.height),this},_render:function(t){var e=-this.width/2,r=-this.height/2,i;!1===this.isMoving&&this.resizeFilter&&this._needsResize()&&(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,this.applyResizeFilters()),i=this._element,i&&t.drawImage(i,this.cropX,this.cropY,this.width,this.height,e,r,this.width,this.height),this._stroke(t),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t,e){this.setElement(fabric.util.getById(t),e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()?this.getElement().width||0:0,this.height="height"in t?t.height:this.getElement()?this.getElement().height||0:0},parsePreserveAspectRatioAttribute:function(){if(this.preserveAspectRatio){var t=fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio),e=this._element.width,r=this._element.height,i,n=this.width,o=this.height,a={width:n,height:o};!t||"none"===t.alignX&&"none"===t.alignY?(this.scaleX=n/e,this.scaleY=o/r):("meet"===t.meetOrSlice&&(this.width=e,this.height=r,this.scaleX=this.scaleY=i=fabric.util.findScaleToFit(this._element,a),"Mid"===t.alignX&&(this.left+=(n-e*i)/2),"Max"===t.alignX&&(this.left+=n-e*i),"Mid"===t.alignY&&(this.top+=(o-r*i)/2),"Max"===t.alignY&&(this.top+=o-r*i)),"slice"===t.meetOrSlice&&(this.scaleX=this.scaleY=i=fabric.util.findScaleToCover(this._element,a),this.width=n/i,this.height=o/i,"Mid"===t.alignX&&(this.cropX=(e-this.width)/2),"Max"===t.alignX&&(this.cropX=e-this.width),"Mid"===t.alignY&&(this.cropY=(r-this.height)/2),"Max"===t.alignY&&(this.cropY=r-this.height)))}}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(r,i){if(i)return void(e&&e(null,i));fabric.Image.prototype._initFilters.call(t,t.filters,function(i){t.filters=i||[],fabric.Image.prototype._initFilters.call(t,[t.resizeFilter],function(i){t.resizeFilter=i[0];var n=new fabric.Image(r,t);e(n)})})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,r){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,r))},null,r&&r.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),fabric.Image.fromElement=function(t,r,i){var n=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(n["xlink:href"],r,e(i?fabric.util.object.clone(i):{},n))}}(exports),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},r=t.onComplete||e,i=t.onChange||e,n=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){n.setAngle(t),i()},onComplete:function(){n.setCoords(),r()},onStart:function(){n.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function t(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}fabric.isWebglSupported=function(t){if(fabric.isLikelyNode)return!1;t=t||fabric.WebglFilterBackend.prototype.tileSize;var e=document.createElement("canvas"),r=e.getContext("webgl")||e.getContext("experimental-webgl"),i=!1;return r&&(fabric.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),i=fabric.maxTextureSize>=t),this.isSupported=i,i},fabric.WebglFilterBackend=t,t.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.squareVertices=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var r=void 0!==window.performance,i;try{new ImageData(1,1),i=!0}catch(t){i=!1}var n="undefined"!=typeof ArrayBuffer,o="undefined"!=typeof Uint8ClampedArray;if(r&&i&&n&&o){var a=fabric.util.createCanvasElement(),s=new ArrayBuffer(t*e*4),c={imageBuffer:s},l,h,u;a.width=t,a.height=e,l=window.performance.now(),copyGLTo2DDrawImage.call(c,this.gl,a),h=window.performance.now()-l,l=window.performance.now(),copyGLTo2DPutImageData.call(c,this.gl,a),u=window.performance.now()-l,h>u?(this.imageBuffer=s,this.copyGLTo2D=copyGLTo2DPutImageData):this.copyGLTo2D=copyGLTo2DDrawImage}},createWebGLCanvas:function(t,e){var r=fabric.util.createCanvasElement();r.width=t,r.height=e;var i={premultipliedAlpha:!1},n=r.getContext("webgl",i);n||(n=r.getContext("experimental-webgl",i)),n&&(n.clearColor(0,0,0,0),this.canvas=r,this.gl=n)},applyFilters:function(t,e,r,i,n,o){var a=this.gl,s;o&&(s=this.getCachedTexture(o,e));var c={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:r,sourceHeight:i,context:a,sourceTexture:this.createTexture(a,r,i,!s&&e),targetTexture:this.createTexture(a,r,i),originalTexture:s||this.createTexture(a,r,i,!s&&e),passes:t.length,webgl:!0,squareVertices:this.squareVertices,programCache:this.programCache,pass:0,filterBackend:this},l=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,l),t.forEach(function(t){t&&t.applyTo(c)}),this.copyGLTo2D(a,n),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(c.sourceTexture),a.deleteTexture(c.targetTexture),a.deleteFramebuffer(l),n.getContext("2d").setTransform(1,0,0,1,0,0),c},applyFiltersDebug:function(t,e,r,i,n,o){var a=this.gl,s=this.applyFilters(t,e,r,i,n,o),c=a.getError();if(c!==a.NO_ERROR){var l=this.glErrorToString(a,c),h=new Error("WebGL Error "+l);throw h.glErrorCode=c,h}return s},glErrorToString:function(t,e){if(!t)return"Context undefined for error code: "+e;if("number"!=typeof e)return"Error code is not a number";switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"UNKNOWN_ERROR"}},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,r,i){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,r,0,t.RGBA,t.UNSIGNED_BYTE,null),n},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var r=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=r,r},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:copyGLTo2DDrawImage,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e=t.getExtension("WEBGL_debug_renderer_info"),r={renderer:"",vendor:""};if(e){var i=t.getParameter(e.UNMASKED_RENDERER_WEBGL),n=t.getParameter(e.UNMASKED_VENDOR_WEBGL);i&&(r.renderer=i.toLowerCase()),n&&(r.vendor=n.toLowerCase())}return this.gpuInfo=r,r}}}(),function(){"use strict";function t(){}var e=function(){};fabric.Canvas2dFilterBackend=t,t.prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(t,e,r,i,n){var o=n.getContext("2d");o.drawImage(e,0,0,r,i);var a=o.getImageData(0,0,r,i),s=o.getImageData(0,0,r,i),c={sourceWidth:r,sourceHeight:i,imageData:a,originalEl:e,originalImageData:s,canvasEl:n,ctx:o,filterBackend:this};return t.forEach(function(t){t.applyTo(c)}),c.imageData.width===r&&c.imageData.height===i||(n.width=c.imageData.width,n.height=c.imageData.height),o.putImageData(c.imageData,0,0),c}}}(),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aTexCoord;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2d uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,r){if(this.vertexSource&&this.fragmentSource){var i=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(i,r||this.vertexSource),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error('Vertex shader compile error for "${this.type}": '+t.getShaderInfoLog(i));var n=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(n,e||this.fragmentSource),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error('Fragment shader compile error for "${this.type}": '+t.getShaderInfoLog(n));var o=t.createProgram();if(t.attachShader(o,i),t.attachShader(o,n),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(o));var a=this.getAttributeLocations(t,o),s=this.getUniformLocations(t,o)||{};return s.uStepW=t.getUniformLocation(o,"uStepW"),s.uStepH=t.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:a,uniformLocations:s}}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition"),aTexCoord:t.getAttribLocation(e,"aTexCoord")}},getUniformLocations:function(){},sendAttributeData:function(t,e,r){["aPosition","aTexCoord"].forEach(function(i){var n=e[i],o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)})},_setupFrameBuffer:function(t){var e=t.context;t.passes>1?e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0):(e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){return!1},applyTo:function(t){if(t.webgl){if(t.passes>1&&this.isNeutralState(t))return;this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)}else this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,r=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(r.program),this.sendAttributeData(e,r.attributeLocations,t.squareVertices),e.uniform1f(r.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(r.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,r.uniformLocations),e.viewport(0,0,t.sourceWidth,t.sourceHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,r){t.activeTexture(r),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(t,e){var r=new fabric.Image.filters[t.type](t);return e&&e(r),r},function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass;r.ColorMatrix=i(r.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e=t.imageData,r=e.data,i=r.length,n=this.matrix,o,a,s,c,l,h=this.colorsOnly;for(l=0;l<i;l+=4)o=r[l],a=r[l+1],s=r[l+2],h?(r[l]=o*n[0]+a*n[1]+s*n[2]+255*n[4],r[l+1]=o*n[5]+a*n[6]+s*n[7]+255*n[9],r[l+2]=o*n[10]+a*n[11]+s*n[12]+255*n[14]):(c=r[l+3],r[l]=o*n[0]+a*n[1]+s*n[2]+c*n[3]+255*n[4],r[l+1]=o*n[5]+a*n[6]+s*n[7]+c*n[8]+255*n[9],r[l+2]=o*n[10]+a*n[11]+s*n[12]+c*n[13]+255*n[14],r[l+3]=o*n[15]+a*n[16]+s*n[17]+c*n[18]+255*n[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var r=this.matrix,i=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],n=[r[4],r[9],r[14],r[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,i),t.uniform4fv(e.uConstants,n)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass;r.Brightness=i(r.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e=t.imageData,r=e.data,i,n=r.length,o=Math.round(255*this.brightness);for(i=0;i<n;i+=4)r[i]=r[i]+o,r[i+1]=r[i+1]+o,r[i+2]=r[i+2]+o}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.object.extend,i=e.Image.filters,n=e.util.createClass;i.Convolute=n(i.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),r=this.type+"_"+e+"_"+this.opaque?1:0,i=this.fragmentSource[r];return t.programCache.hasOwnProperty(r)||(t.programCache[r]=this.createProgram(t.context,i)),t.programCache[r]},applyTo2d:function(t){var e=t.imageData,r=e.data,i=this.matrix,n=Math.round(Math.sqrt(i.length)),o=Math.floor(n/2),a=e.width,s=e.height,c=t.ctx.createImageData(a,s),l=c.data,h=this.opaque?1:0,u,f,d,p,g,v,m,b,y,_,w,S,x;for(w=0;w<s;w++)for(_=0;_<a;_++){for(g=4*(w*a+_),u=0,f=0,d=0,p=0,x=0;x<n;x++)for(S=0;S<n;S++)m=w+x-o,v=_+S-o,m<0||m>s||v<0||v>a||(b=4*(m*a+v),y=i[x*n+S],u+=r[b]*y,f+=r[b+1]*y,d+=r[b+2]*y,h||(p+=r[b+3]*y));l[g]=u,l[g+1]=f,l[g+2]=d,l[g+3]=h?r[g+3]:p}t.imageData=c},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return r(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass;r.Grayscale=i(r.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e=t.imageData,r=e.data,i,n=r.length,o,a=this.mode;for(i=0;i<n;i+=4)"average"===a?o=(r[i]+r[i+1]+r[i+2])/3:"lightness"===a?o=(Math.min(r[i],r[i+1],r[i+2])+Math.max(r[i],r[i+1],r[i+2]))/2:"luminosity"===a&&(o=.21*r[i]+.72*r[i+1]+.07*r[i+2]),r[i]=o,r[i+1]=o,r[i+2]=o},retrieveShader:function(t){var e=this.type+"_"+this.mode,r=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,r)),t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){var r=1;t.uniform1i(e.uMode,1)}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass;r.Invert=i(r.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){if(this.invert){var e=t.imageData,r=e.data,i,n=r.length;for(i=0;i<n;i+=4)r[i]=255-r[i],r[i+1]=255-r[i+1],r[i+2]=255-r[i+2]}},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.object.extend,i=e.Image.filters,n=e.util.createClass;i.Noise=n(i.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise)for(var e=t.imageData,r=e.data,i,n=r.length,o=this.noise,a,i=0,n=r.length;i<n;i+=4)a=(.5-Math.random())*o,r[i]+=a,r[i+1]+=a,r[i+2]+=a},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return r(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass;r.Pixelate=i(r.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){if(1!==this.blocksize){var e=t.imageData,r=e.data,i=e.height,n=e.width,o,a,s,c,l,h,u,f,d,p,g;for(a=0;a<i;a+=this.blocksize)for(s=0;s<n;s+=this.blocksize)for(o=4*a*n+4*s,c=r[o],l=r[o+1],h=r[o+2],u=r[o+3],p=Math.min(a+this.blocksize,i),g=Math.min(s+this.blocksize,n),f=a;f<p;f++)for(d=s;d<g;d++)o=4*f*n+4*d,r[o]=c,r[o+1]=l,r[o+2]=h,r[o+3]=u}},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.object.extend,i=e.Image.filters,n=e.util.createClass;i.RemoveColor=n(i.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var r=t.imageData,i=r.data,n,o=255*this.distance,a,s,c,l=new e.Color(this.color).getSource(),h=[l[0]-o,l[1]-o,l[2]-o],u=[l[0]+o,l[1]+o,l[2]+o];for(n=0;n<i.length;n+=4)a=i[n],s=i[n+1],c=i[n+2],a>h[0]&&s>h[1]&&c>h[2]&&a<u[0]&&s<u[1]&&c<u[2]&&(i[n+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,r){var i=new e.Color(this.color).getSource(),n=parseFloat(this.distance),o=[0+i[0]/255-n,0+i[1]/255-n,0+i[2]/255-n,1],a=[i[0]/255+n,i[1]/255+n,i[2]/255+n,1];t.uniform4fv(r.uLow,o),t.uniform4fv(r.uHigh,a)},toObject:function(){return r(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in n)r[o]=i(r.ColorMatrix,{type:o,matrix:n[o],mainParameter:!1,colorsOnly:!0}),e.Image.filters[o].fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric,r=e.Image.filters,i=e.util.createClass;r.BlendColor=i(r.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb *= uColor.rgb;\ngl_FragColor = color;\n}",screen:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb = 1.0 - (1.0 - color.rgb) * (1.0 - uColor.rgb);\ngl_FragColor = color;\n}",add:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb += uColor.rgb;\n}",diff:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n}",subtract:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb -= uColor.rgb;\n}",lighten:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n}",darken:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n}",exclusion:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n}",overlay:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n}",tint:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\ngl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,r=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,r)),t.programCache[e]},applyTo2d:function(t){var r=t.imageData,i=r.data,n=i.length,o,a,s,c,l,h,u,f=1-this.alpha;u=new e.Color(this.color).getSource(),o=u[0]*this.alpha,a=u[1]*this.alpha,s=u[2]*this.alpha;for(var d=0;d<n;d+=4)switch(c=i[d],l=i[d+1],h=i[d+2],this.mode){case"multiply":i[d]=c*o/255,i[d+1]=l*a/255,i[d+2]=h*s/255;break;case"screen":i[d]=255-(255-c)*(255-o)/255,i[d+1]=255-(255-l)*(255-a)/255,i[d+2]=255-(255-h)*(255-s)/255;break;case"add":i[d]=c+o,i[d+1]=l+a,i[d+2]=h+s;break;case"diff":case"difference":i[d]=Math.abs(c-o),i[d+1]=Math.abs(l-a),i[d+2]=Math.abs(h-s);break;case"subtract":i[d]=c-o,i[d+1]=l-a,i[d+2]=h-s;break;case"darken":i[d]=Math.min(c,o),i[d+1]=Math.min(l,a),i[d+2]=Math.min(h,s);break;case"lighten":i[d]=Math.max(c,o),i[d+1]=Math.max(l,a),i[d+2]=Math.max(h,s);break;case"overlay":i[d]=o<128?2*c*o/255:255-2*(255-c)*(255-o)/255,i[d+1]=a<128?2*l*a/255:255-2*(255-l)*(255-a)/255,i[d+2]=s<128?2*h*s/255:255-2*(255-h)*(255-s)/255;break;case"exclusion":i[d]=o+c-2*o*c/255,i[d+1]=a+l-2*a*l/255,i[d+2]=s+h-2*s*h/255;break;case"tint":i[d]=o+c*f,i[d+1]=a+l*f,i[d+2]=s+h*f}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,r){var i=new e.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(r.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric,r=e.Image.filters,i=e.util.createClass;r.BlendImage=i(r.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aTexCoord;\nvTexCoord2 = (uTransformMatrix * vec3(aTexCoord, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,r=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,r)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,r=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,r,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,r=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/r,1]},applyTo2d:function(t){var e=t.imageData,r=t.filterBackend.resources,i=e.data,n=i.length,o=t.imageData.width,a=t.imageData.height,s,c,l,h,u,f,d,p,g,v,m=this.image,b;r.blendImage||(r.blendImage=document.createElement("canvas")),g=r.blendImage,g.width===o&&g.height===a||(g.width=o,g.height=a),v=g.getContext("2d"),v.setTransform(m.scaleX,0,0,m.scaleY,m.left,m.top),v.drawImage(m._element,0,0,o,a),b=v.getImageData(0,0,o,a).data;for(var y=0;y<n;y+=4)switch(u=i[y],f=i[y+1],d=i[y+2],p=i[y+3],s=b[y],c=b[y+1],l=b[y+2],h=b[y+3],this.mode){case"multiply":i[y]=u*s/255,i[y+1]=f*c/255,i[y+2]=d*l/255,i[y+3]=p*h/255;break;case"mask":i[y+3]=h}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var r=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,r)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,r){e.Image.fromObject(t.image,function(i){var n=e.util.object.clone(t);n.image=i,r(new e.Image.filters.BlendImage(n))})}}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=Math.pow,i=Math.floor,n=Math.sqrt,o=Math.abs,a=Math.round,s=Math.sin,c=Math.ceil,l=e.Image.filters,h=e.util.createClass;l.Resize=h(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo2d:function(t){var e=t.imageData,r=t.scaleX||this.scaleX,i=t.scaleY||this.scaleY;if(1!==r||1!==i){this.rcpScaleX=1/r,this.rcpScaleY=1/i;var n=e.width,o=e.height,s=a(n*r),c=a(o*i),l;"sliceHack"===this.resizeType?l=this.sliceByTwo(t,n,o,s,c):"hermite"===this.resizeType?l=this.hermiteFastResize(t,n,o,s,c):"bilinear"===this.resizeType?l=this.bilinearFiltering(t,n,o,s,c):"lanczos"===this.resizeType&&(l=this.lanczosResize(t,n,o,s,c)),t.imageData=l}},sliceByTwo:function(t,r,n,o,a){var s=t.imageData,c=.5,l=!1,h=!1,u=.5*r,f=.5*n,d=e.filterBackend.resources,p,g,v=0,m=0,b=r,y=0;for(d.sliceByTwo||(d.sliceByTwo=document.createElement("canvas")),p=d.sliceByTwo,(p.width<1.5*r||p.height<n)&&(p.width=1.5*r,p.height=n),g=p.getContext("2d"),g.clearRect(0,0,1.5*r,n),g.putImageData(s,0,0),o=i(o),a=i(a);!l||!h;)r=u,n=f,o<i(.5*u)?u=i(.5*u):(u=o,l=!0),a<i(.5*f)?f=i(.5*f):(f=a,h=!0),g.drawImage(p,v,m,r,n,b,y,u,f),v=b,m=y,y+=f;return g.getImageData(v,m,o,a)},lanczosResize:function(t,e,a,l,h){function u(t){return function(e){if(e>t)return 0;if(e*=Math.PI,o(e)<1e-16)return 1;var r=e/t;return s(e)*s(r)/e/r}}function f(t){var s,c,u,T,k,P,E,O,R,L,D;for(C.x=(t+.5)*m,A.x=i(C.x),s=0;s<h;s++){for(C.y=(s+.5)*b,A.y=i(C.y),k=0,P=0,E=0,O=0,R=0,c=A.x-w;c<=A.x+w;c++)if(!(c<0||c>=e)){L=i(1e3*o(c-C.x)),x[L]||(x[L]={});for(var I=A.y-S;I<=A.y+S;I++)I<0||I>=a||(D=i(1e3*o(I-C.y)),x[L][D]||(x[L][D]=v(n(r(L*y,2)+r(D*_,2))/1e3)),(u=x[L][D])>0&&(T=4*(I*e+c),k+=u,P+=u*d[T],E+=u*d[T+1],O+=u*d[T+2],R+=u*d[T+3]))}T=4*(s*l+t),g[T]=P/k,g[T+1]=E/k,g[T+2]=O/k,g[T+3]=R/k}return++t<l?f(t):p}var d=t.imageData.data,p=t.ctx.creteImageData(l,h),g=p.data,v=u(this.lanczosLobes),m=this.rcpScaleX,b=this.rcpScaleY,y=2/this.rcpScaleX,_=2/this.rcpScaleY,w=c(m*this.lanczosLobes/2),S=c(b*this.lanczosLobes/2),x={},C={},A={};return f(0)},bilinearFiltering:function(t,e,r,n,o){var a,s,c,l,h,u,f,d,p,g,v,m,b=0,y,_=this.rcpScaleX,w=this.rcpScaleY,S=4*(e-1),x=t.imageData,C=x.data,A=t.ctx.createImageData(n,o),T=A.data;for(f=0;f<o;f++)for(d=0;d<n;d++)for(h=i(_*d),u=i(w*f),p=_*d-h,g=w*f-u,y=4*(u*e+h),v=0;v<4;v++)a=C[y+v],s=C[y+4+v],c=C[y+S+v],l=C[y+S+4+v],m=a*(1-p)*(1-g)+s*p*(1-g)+c*g*(1-p)+l*p*g,T[b++]=m;return A},hermiteFastResize:function(t,e,r,a,s){for(var l=this.rcpScaleX,h=this.rcpScaleY,u=c(l/2),f=c(h/2),d=t.imageData,p=d.data,g=t.ctx.createImageData(a,s),v=g.data,m=0;m<s;m++)for(var b=0;b<a;b++){for(var y=4*(b+m*a),_=0,w=0,S=0,x=0,C=0,A=0,T=0,k=(m+.5)*h,P=i(m*h);P<(m+1)*h;P++)for(var E=o(k-(P+.5))/f,O=(b+.5)*l,R=E*E,L=i(b*l);L<(b+1)*l;L++){var D=o(O-(L+.5))/u,I=n(R+D*D);I>1&&I<-1||(_=2*I*I*I-3*I*I+1)>0&&(D=4*(L+P*e),T+=_*p[D+3],S+=_,p[D+3]<255&&(_=_*p[D+3]/250),x+=_*p[D],C+=_*p[D+1],A+=_*p[D+2],w+=_)}v[y]=x/w,v[y+1]=C/w,v[y+2]=A/w,v[y+3]=T/S}return g},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass;r.Contrast=i(r.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e=t.imageData,r,i,n=e.data,i=n.length,o=Math.floor(255*this.contrast),a=259*(o+255)/(255*(259-o));for(r=0;r<i;r+=4)n[r]=a*(n[r]-128)+128,n[r+1]=a*(n[r+1]-128)+128,n[r+2]=a*(n[r+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass;r.Saturation=i(r.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e=t.imageData,r=e.data,i=r.length,n=-this.saturation,o,a;for(o=0;o<i;o+=4)a=Math.max(r[o],r[o+1],r[o+2]),r[o]+=a!==r[o]?(a-r[o])*n:0,r[o+1]+=a!==r[o+1]?(a-r[o+1])*n:0,r[o+2]+=a!==r[o+2]?(a-r[o+2])*n:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass;r.Blur=i(r.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e=t.filterBackend.resources,r,i,n=t.imageData.width,o=t.imageData.height;e.blurLayer1||(e.blurLayer1=document.createElement("canvas"),e.blurLayer2=document.createElement("canvas")),r=e.blurLayer1,i=e.blurLayer2,r.width===n&&r.height===o||(i.width=r.width=n,i.height=r.height=o);var a=r.getContext("2d"),s=i.getContext("2d"),c=15,l,h,u,f,d=.06*this.blur*.5;for(a.putImageData(t.imageData,0,0),s.clearRect(0,0,n,o),f=-15;f<=15;f++)l=(Math.random()-.5)/4,h=f/15,u=d*h*n+l,s.globalAlpha=1-Math.abs(h),s.drawImage(r,u,l),a.drawImage(i,0,0),s.globalAlpha=1,s.clearRect(0,0,i.width,i.height);for(f=-15;f<=15;f++)l=(Math.random()-.5)/4,h=f/15,u=d*h*o+l,s.globalAlpha=1-Math.abs(h),s.drawImage(r,l,u),a.drawImage(i,0,0),s.globalAlpha=1,s.clearRect(0,0,i.width,i.height);t.ctx.drawImage(r,0,0);var p=t.ctx.getImageData(0,0,r.width,r.height);return a.globalAlpha=1,a.clearRect(0,0,r.width,r.height),p},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var r=this.chooseRightDelta();t.uniform2fv(e.delta,r)},chooseRightDelta:function(){var t=1,e=[0,0],r;return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),r=t*this.blur*.12,this.horizontal?e[0]=r:e[1]=r,e}}),r.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass;r.Gamma=i(r.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",applyTo2d:function(t){var e=t.imageData,r=e.data,i=this.gamma,n=r.length,o=1/i[0],a=1/i[1],s=1/i[2],c;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),c=0,n=256;c<n;c++)this.rVals[c]=255*Math.pow(c/255,o),this.gVals[c]=255*Math.pow(c/255,a),this.bVals[c]=255*Math.pow(c/255,s);for(c=0,n=r.length;c<n;c+=4)r[c]=this.rVals[r[c]],r[c+1]=this.gVals[r[c+1]],r[c+2]=this.bVals[r[c+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.Image.filters,i=e.util.createClass;r.Composed=i(r.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})}}),e.Image.filters.Composed.fromObject=function(t,r){var i=t.subFilters||[],n=i.map(function(t){return new e.Image.filters[t.type](t)}),o=new e.Image.filters.Composed({subFilters:n});return r&&r(o),o}}(exports),function(t){"use strict";var e=t.fabric||(t.fabric={}),r=e.util.object.clone,i=2,n=200;if(e.Text)return void e.warn("fabric.Text is already defined");var o=e.Object.prototype.stateProperties.concat();o.push("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles");var a=e.Object.prototype.cacheProperties.concat();a.push("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stateProperties:o,cacheProperties:a,stroke:null,shadow:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough"],__charBounds:[],initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},isEmptyStyles:function(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;var e=void 0===t?this.styles:{line:this.styles[t]};for(var r in e)for(var i in e[r])for(var n in e[r][i])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if(void 0!==e&&!this.styles[e])return!1;var r=void 0===e?this.styles:{line:this.styles[e]};for(var i in r)for(var n in r[i])if(void 0!==r[i][n][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e=this.styles,r=0,i,n=!1,o,a=!0,s=0;for(var c in e){i=0;for(var l in e[c])r++,n?e[c][l][t]!==o&&(a=!1):(o=e[c][l][t],n=!0),e[c][l][t]===this[t]&&delete e[c][l][t],0!==Object.keys(e[c][l]).length?i++:delete e[c][l];0===i&&delete e[c]}for(var h=0;h<this._textLines.length;h++)s+=this._textLines[h].length;a&&r===s&&(this[t]=o,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e=this.styles,r,i,n;for(i in e){var r=e[i];for(n in r)delete r[n][t],0===Object.keys(r[n]).length&&delete r[n];0===Object.keys(r).length&&delete e[i]}}},_extendStyles:function(t,r){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex,{}),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),r)},initDimensions:function(){if(!this.__skipDimension){var t=this._splitTextIntoLines(this.text);this.textLines=t.lines,this._unwrappedTextLines=t._unwrappedLines,this._textLines=t.graphemeLines,this._text=t.graphemeText,this._clearCache(),this.width=this.calcTextWidth()||this.cursorWidth||2,"justify"===this.textAlign&&this.enlargeSpaces(),this.height=this.calcTextHeight()}},enlargeSpaces:function(){for(var t,e,r,i,n,o,a,s=0,c=this._textLines.length;s<c;s++)if(i=0,n=this._textLines[s],(e=this.getLineWidth(s))<this.width&&(a=this.textLines[s].match(this._reSpacesAndTabs))){r=a.length,t=(this.width-e)/r;for(var l=0,h=n.length;l<=h;l++)o=this.__charBounds[s][l],this._reSpaceAndTab.test(n[l])?(o.width+=t,o.kernedWidth+=t,o.left+=i,i+=t):o.left+=i}},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){this._renderTextFill(t),this._renderTextStroke(t)},_setTextStyles:function(t,e,r){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,r)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,r=this._textLines.length;e<r;e++){var i=this.getLineWidth(e);i>t&&(t=i)}return t},_renderTextLine:function(t,e,r,i,n,o){this._renderChars(t,e,r,i,n,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e=0,r,i,n=t.fillStyle,o,a,s=this._getLeftOffset(),c=this._getTopOffset(),l=0,h=0,u,f,d=0,p=this._textLines.length;d<p;d++)if(r=this.getHeightOfLine(d),this.textBackgroundColor||this.styleHas("textBackgroundColor",d)){o=this._textLines[d],i=this._getLineLeftOffset(d),h=0,l=0,a=this.getValueOfPropertyAt(d,0,"textBackgroundColor");for(var g=0,v=o.length;g<v;g++)u=this.__charBounds[d][g],f=this.getValueOfPropertyAt(d,g,"textBackgroundColor"),f!==a?(t.fillStyle=a,a&&t.fillRect(s+i+l,c+e,h,r/this.lineHeight),l=u.left,h=u.width,a=f):h+=u.kernedWidth;f&&(t.fillStyle=f,t.fillRect(s+i+l,c+e,h,r/this.lineHeight)),e+=r}else e+=r;t.fillStyle=n,this._removeShadow(t)}},getFontCache:function(t){var r=t.fontFamily.toLowerCase();e.charWidthsCache[r]||(e.charWidthsCache[r]={});var i=e.charWidthsCache[r],n=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[n]||(i[n]={}),i[n]},_applyCharStyles:function(t,e,r,i,n){this._setFillStyles(e,n),this._setStrokeStyles(e,n),e.font=this._getFontDeclaration(n)},_getStyleDeclaration:function(t,e){var r=this.styles&&this.styles[t];return r?r[e]:null},getCompleteStyleDeclaration:function(t,e){for(var r=this._getStyleDeclaration(t,e)||{},i={},n,o=0;o<this._styleProperties.length;o++)n=this._styleProperties[o],i[n]=void 0===r[n]?this[n]:r[n];return i},_setStyleDeclaration:function(t,e,r){this.styles[t][e]=r},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return this.styles[t]},_setLineStyle:function(t,e){this.styles[t]=e},_deleteLineStyle:function(t){delete this.styles[t]},_measureChar:function(t,e,r,i){var n=this.getFontCache(e),o=this._getFontDeclaration(e),a=this._getFontDeclaration(i),s=r+t,c=o===a,l,h,u,f=e.fontSize/200,d;if(r&&n[r]&&(u=n[r]),n[t]&&(d=l=n[t]),c&&n[s]&&(h=n[s],d=h-u),!l||!u||!h){var p=this.getMeasuringContext();this._setTextStyles(p,e,!0)}if(l||(d=l=p.measureText(t).width,n[t]=l),!u&&c&&r&&(u=p.measureText(r).width,n[r]=u),c&&!h&&(h=p.measureText(s).width,n[s]=h,(d=h-u)>l)){var g=d-l;n[t]=d,n[s]+=g,l=d}return{width:l*f,kernedWidth:d*f}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e=0,r,i,n=this._textLines[t],o,a,s=0,c=new Array(n.length);for(this.__charBounds[t]=c,r=0;r<n.length;r++)i=n[r],a=this._getGraphemeBox(i,t,r,o),c[r]=a,e+=a.kernedWidth,o=i;return c[r]={left:a?a.left+a.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:e,numOfSpaces:0}},_getGraphemeBox:function(t,e,r,i,n){var o=this.getCompleteStyleDeclaration(e,r),a=i?this.getCompleteStyleDeclaration(e,r-1):{},s=this._measureChar(t,o,i,a),c=s.kernedWidth,l=s.width;0!==this.charSpacing&&(l+=this._getWidthOfCharSpacing(),c+=this._getWidthOfCharSpacing());var h={width:l,left:0,height:o.fontSize,kernedWidth:c};if(r>0&&!n){var u=this.__charBounds[e][r-1];h.left=u.left+u.width+s.kernedWidth-s.width}return h},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],r=this.getHeightOfChar(t,0),i=1,n=e.length;i<n;i++){var o=this.getHeightOfChar(t,i);o>r&&(r=o)}return this.__lineHeights[t]=r*this.lineHeight*this._fontSizeMult,this.__lineHeights[t]},calcTextHeight:function(){for(var t,e=0,r=0,i=this._textLines.length;r<i;r++)t=this.getHeightOfLine(r),e+=r===i-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){for(var r=0,i=this._getLeftOffset(),n=this._getTopOffset(),o=0,a=this._textLines.length;o<a;o++){var s=this.getHeightOfLine(o),c=s/this.lineHeight,l=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],i+l,n+r+c,o),r+=s}},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,r,i,n,o){var a=this.getHeightOfLine(o),s,c,l="",h,u=0,f;e.save(),n-=a*this._fontSizeFraction/this.lineHeight;for(var d=0,p=r.length-1;d<=p;d++)f=d===p||this.charSpacing,l+=r[d],h=this.__charBounds[o][d],0===u&&(i+=h.kernedWidth-h.width),u+=h.kernedWidth,"justify"!==this.textAlign||f||this._reSpaceAndTab.test(r[d])&&(f=!0),f||(s=s||this.getCompleteStyleDeclaration(o,d),c=this.getCompleteStyleDeclaration(o,d+1),f=this._hasStyleChanged(s,c)),f&&(this._renderChar(t,e,o,d,l,i,n,a),l="",s=c,i+=u,u=0);e.restore()},_renderChar:function(t,e,r,i,n,o,a){var s=this._getStyleDeclaration(r,i),c=this.getCompleteStyleDeclaration(r,i),l="fillText"===t&&c.fill,h="strokeText"===t&&c.stroke&&c.strokeWidth;(h||l)&&(s&&e.save(),this._applyCharStyles(t,e,r,i,c),s&&s.textBackgroundColor&&this._removeShadow(e),l&&e.fillText(n,o,a),h&&e.strokeText(n,o,a),s&&e.restore())},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle},_getLineLeftOffset:function(t){var e=this.getLineWidth(t);return"center"===this.textAlign?(this.width-e)/2:"right"===this.textAlign?this.width-e:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__numberOfSpaces=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.saveState({propertySet:"_dimensionAffectingProps"}),this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(this.__lineWidths[t])return this.__lineWidths[t];var e,r=this._textLines[t],i;return""===r?e=0:(i=this.measureLine(t),e=i.width),this.__lineWidths[t]=e,this.__numberOfSpaces[t]=i.numberOfSpaces,e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,r){var i=this._getStyleDeclaration(t,e);return i&&void 0!==i[r]?i[r]:this[r]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var r,i,n,o,a=this._getLeftOffset(),s=this._getTopOffset(),c,l,h,u,f,d,p,g=0,v=this._textLines.length;g<v;g++)if(r=this.getHeightOfLine(g),this[e]||this.styleHas(e,g)){n=this._textLines[g],f=r/this.lineHeight,i=this._getLineLeftOffset(g),c=0,l=0,o=this.getValueOfPropertyAt(g,0,e),p=this.getValueOfPropertyAt(g,0,"fill");for(var m=0,b=n.length;m<b;m++)h=this.__charBounds[g][m],u=this.getValueOfPropertyAt(g,m,e),d=this.getValueOfPropertyAt(g,m,"fill"),(u!==o||d!==p)&&l>0?(t.fillStyle=p,o&&p&&t.fillRect(a+i+c,s+f*(1-this._fontSizeFraction)+this.offsets[e]*this.fontSize,l,this.fontSize/15),c=h.left,l=h.width,o=u,p=d):l+=h.kernedWidth;t.fillStyle=d,u&&d&&t.fillRect(a+i+c,s+f*(1-this._fontSizeFraction)+this.offsets[e]*this.fontSize,l,this.fontSize/15),s+=r}else s+=r;this._removeShadow(t)}},_getFontDeclaration:function(t,r){var i=t||this;return[e.isLikelyNode?i.fontWeight:i.fontStyle,e.isLikelyNode?i.fontStyle:i.fontWeight,r?"200px":i.fontSize+"px",e.isLikelyNode?'"'+i.fontFamily+'"':i.fontFamily].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var r=t.split(this._reNewline),i=new Array(r.length),n=["\n"],o=[],a=0;a<r.length;a++)i[a]=e.util.string.graphemeSplit(r[a]),o=o.concat(i[a],n);return o.pop(),{_unwrappedLines:i,lines:r,graphemeText:o,graphemeLines:i}},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing"].concat(t),i=this.callSuper("toObject",e);return i.styles=r(this.styles,!0),i},_set:function(t,e){this.callSuper("_set",t,e),this._dimensionAffectingProps.indexOf(t)>-1&&(this.initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i,n){if(!t)return i(null);var o=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);if(n=e.util.object.extend(n?r(n):{},o),n.top=n.top||0,n.left=n.left||0,o.textDecoration){var a=o.textDecoration;-1!==a.indexOf("underline")&&(n.underline=!0),-1!==a.indexOf("overline")&&(n.overline=!0),-1!==a.indexOf("line-through")&&(n.linethrough=!0),delete n.textDecoration}"dx"in o&&(n.left+=o.dx),"dy"in o&&(n.top+=o.dy),"fontSize"in n||(n.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),n.originX||(n.originX="left");var s="";"textContent"in t?s=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(s=t.firstChild.data),s=s.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=new e.Text(s,n),l=c.getScaledHeight()/c.height,h=(c.height+c.strokeWidth)*c.lineHeight-c.height,u=h*l,f=c.getScaledHeight()+u,d=0;"center"===c.originX&&(d=c.getScaledWidth()/2),"right"===c.originX&&(d=c.getScaledWidth()),c.set({left:c.left-d,top:c.top-(f-c.fontSize*(.18+c._fontSizeFraction))/c.lineHeight}),c.originX="left",c.originY="top",i(c)},e.Text.fromObject=function(t,r){return e.Object._fromObject("Text",t,r,"text")},e.util.createAccessors&&e.util.createAccessors(e.Text)}(exports),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf("underline")>-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.styles=e?e.styles||{}:{},this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},getSelectionStyles:function(t,e){if(2===arguments.length){for(var r=[],i=t;i<e;i++)r.push(this.getSelectionStyles(i));return r}var n=this.get2DCursorLocation(t);return this._getStyleDeclaration(n.lineIndex,n.charIndex)||{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)return this;for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._forceClearCache=!0,this},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t),this.ctx=t},clearContextTop:function(t){if(this.active&&this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop;e.save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.active&&this.isEditing){var t=this._getCursorBoundaries(),e;this.canvas&&this.canvas.contextTop?(e=this.canvas.contextTop,this.clearContextTop(!0)):(e=this.ctx,e.save()),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,r=this.height+4;t.clearRect(-e/2,-r/2,e,r)},get2DCursorLocation:function(t,e){void 0===t&&(t=this.selectionStart);for(var r=e?this._unwrappedTextLines:this._textLines,i=r.length,n=0;n<i;n++){if(t<=r[n].length)return{lineIndex:n,charIndex:t};t-=r[n].length+1}return{lineIndex:n-1,charIndex:r[n-1].length<t?r[n-1].length:t}},_getCursorBoundaries:function(t){void 0===t&&(t=this.selectionStart);var e=this._getLeftOffset(),r=this._getTopOffset(),i=this._getCursorBoundariesOffsets(t);return{left:e,top:r,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var e,r=0,i=0,n=0,o=0,a,s=this.get2DCursorLocation(t),c=0;c<s.lineIndex;c++)n+=this.getHeightOfLine(c);e=this._getLineLeftOffset(s.lineIndex);var l=this.__charBounds[s.lineIndex][s.charIndex];return l&&(o=l.left),0!==this.charSpacing&&0===this._textLines[0].length&&(o-=this._getWidthOfCharSpacing()),a={top:n,left:e+(o>0?o:0)},this.cursorOffsetCache=a,this.cursorOffsetCache},renderCursor:function(t,e){var r=this.get2DCursorLocation(),i=r.lineIndex,n=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(i,n,"fontSize"),a=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/a,c=t.topOffset;c+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.getValueOfPropertyAt(i,n,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-s/2,c+t.top,s,o)},renderSelection:function(t,e){for(var r=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,n=this.get2DCursorLocation(r),o=this.get2DCursorLocation(i),a=n.lineIndex,s=o.lineIndex,c=n.charIndex<0?0:n.charIndex,l=o.charIndex<0?0:o.charIndex,h=a;h<=s;h++){var u=this._getLineLeftOffset(h)||0,f=this.getHeightOfLine(h),d=0,p=0,g=0;h===a&&(p=this.__charBounds[a][c].left),h>=a&&h<s?g=this.getLineWidth(h)||5:h===s&&(g=0===l?this.__charBounds[s][l].left:this.__charBounds[s][l-1].left+this.__charBounds[s][l-1].width),d=f,(this.lineHeight<1||h===s&&this.lineHeight>1)&&(f/=this.lineHeight),this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",e.fillRect(t.left+u+p,t.top+t.topOffset+f,g-p,1)):(e.fillStyle=this.selectionColor,e.fillRect(t.left+u+p,t.top+t.topOffset,g-p,f)),t.topOffset+=d}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),fabric.IText.fromObject=function(e,r){if(t(e),e.styles)for(var i in e.styles)for(var n in e.styles[i])t(e.styles[i][n]);fabric.Object._fromObject("IText",e,r,"text")}}(),function(){var t=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1,this.callSuper("onDeselect")},initAddedHandler:function(){var t=this;this.on("added",function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],fabric.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})}.bind(this),t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,r,i){var n;return n={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:r,onComplete:function(){n.isAborted||t[i]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,r=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},r)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea()},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,r=t-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)e++,r--;for(;/\S/.test(this._text[r])&&r>-1;)e++,r--;return t-e},findWordBoundaryRight:function(t){var e=0,r=t;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)e++,r++;for(;/\S/.test(this._text[r])&&r<this.text.length;)e++,r++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,r=t-1;!/\n/.test(this._text[r])&&r>-1;)e++,r--;return t-e},findLineBoundaryRight:function(t){for(var e=0,r=t;!/\n/.test(this._text[r])&&r<this.text.length;)e++,r++;return t+e},searchWordBoundary:function(t,e){for(var r=this._reSpace.test(this.text.charAt(t))?t-1:t,i=this.text.charAt(r),n=/[ \n\.,;!\?\-]/;!n.test(i)&&r>0&&r<this.text.length;)r+=e,i=this.text.charAt(r);return n.test(i)&&"\n"!==i&&(r+=1===e?0:1),r},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),r=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),r=this.findLineBoundaryRight(t);this.selectionStart=e,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea()},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),r=this.selectionStart,i=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&r!==i||r!==e&&i!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===r&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,r){var i=r.slice(0,t),n=fabric.util.string.graphemeSplit(i).length;if(t===e)return{selectionStart:n,selectionEnd:n};var o=r.slice(t,e);return{selectionStart:n,selectionEnd:n+fabric.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(t,e,r){var i=r.slice(0,t),n=i.join("").length;return t===e?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+r.slice(t,e).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value;var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),r=this.get2DCursorLocation(t),i=r.lineIndex,n=r.charIndex,o=this.getValueOfPropertyAt(i,n,"fontSize")*this.lineHeight,a=e.leftOffset,s=this.calcTransformMatrix(),c={x:e.left+a,y:e.top+e.topOffset+o},l=this.canvas.upperCanvasEl,h=l.width-o,u=l.height-o;return c=fabric.util.transformPoint(c,s),c=fabric.util.transformPoint(c,this.canvas.viewportTransform),c.x<0&&(c.x=0),c.x>h&&(c.x=h),c.y<0&&(c.y=0),c.y>u&&(c.y=u),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&(this.hiddenTextarea.blur&&this.hiddenTextarea.blur(),this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null),this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var r=this.get2DCursorLocation(t,!0),i=this.get2DCursorLocation(e,!0),n=r.lineIndex,o=r.charIndex,a=i.lineIndex,s=i.charIndex,c,l;if(n!==a){if(this.styles[n])for(c=o;c<this._textLines[n].length;c++)delete this.styles[n][c];if(this.styles[a])for(c=s;c<this._textLines[a].length;c++)(l=this.styles[a][c])&&(this.styles[n]||(this.styles[n]={}),this.styles[n][o+c-s]=l);for(c=n+1;c<=a;c++)delete this.styles[c];this.shiftLineStyles(a,n-a)}else if(this.styles[n]){l=this.styles[n];var h=s-o;for(c=o;c<s;c++)delete l[c];for(c=s;c<this._textLines[n].length;c++)l[c]&&(l[c-h]=l[c],delete l[c])}},shiftLineStyles:function(e,r){var i=t(this.styles);for(var n in this.styles){var o=parseInt(n,10);o>e&&(this.styles[o+r]=i[o],i[o-r]||delete this.styles[o])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,r,i,n){var o,a={},s=!1;i||(i=1),this.shiftLineStyles(e,i),this.styles[e]&&this.styles[e][r-1]&&(o=this.styles[e][r-1]);for(var c in this.styles[e]){var l=parseInt(c,10);l>=r&&(s=!0,a[l-r]=this.styles[e][c],delete this.styles[e][c])}for(s?this.styles[e+i]=a:delete this.styles[e+i];i>1;)i--,n[i]?this.styles[e+i]={0:t(n[i])}:o?this.styles[e+i]={0:t(o)}:delete this.styles[e+i];this._forceClearCache=!0},insertCharStyleObject:function(e,r,i,n){var o=this.styles[e],a=t(o);i||(i=1);for(var s in a){var c=parseInt(s,10);c>=r&&(o[c+i]=a[c],a[c-i]||delete o[c])}if(this._forceClearCache=!0,o)if(n)for(;i--;)this.styles[e][r+i]=t(n[i]);else for(var l=o[r?r-1:1];l&&i--;)this.styles[e][r+i]=t(l)},insertNewStyleBlock:function(t,e,r){for(var i=this.get2DCursorLocation(e,!0),n=0,o=0,a=0;a<t.length;a++)"\n"===t[a]?(o&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,o,r),r=r&&r.slice(o),o=0),n++):(n&&(this.insertNewlineStyleObject(i.lineIndex,i.charIndex,n,r),r=r&&r.slice(n),n=0),o++);o&&this.insertCharStyleObject(i.lineIndex,i.charIndex,o,r),n&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex,n,r)},setSelectionStartEndWithShift:function(t,e,r){r<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=r):r>t&&r<e?"right"===this._selectionDirection?this.selectionEnd=r:this.selectionStart=r:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=r)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e,t.e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("mousedblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){if(this.editable&&(!t.e.button||1===t.e.button)){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())}})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,!this.editable||this._isObjectMoved(t.e)||t.e.button&&1!==t.e.button||(this.__lastSelected&&!this.__corner&&(this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),r=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(r,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e=this.getLocalPointer(t),r=0,i=0,n=0,o=0,a=0,s,c,l=0,h=this._textLines.length;l<h&&n<=e.y;l++)n+=this.getHeightOfLine(l)*this.scaleY,a=l,l>0&&(o+=this._textLines[l-1].length+1);s=this._getLineLeftOffset(a),i=s*this.scaleX,c=this._textLines[a];for(var u=0,f=c.length;u<f&&(r=i,(i+=this.__charBounds[a][u].kernedWidth*this.scaleX)<=e.x);u++)o++;return this._getNewSelectionStartFromOffset(e,r,i,o,f)},_getNewSelectionStartFromOffset:function(t,e,r,i,n){var o=t.x-e,a=r-t.x,s=a>o?0:1,c=i+s;return this.flipX&&(c=n-c),c>this._text.length&&(c=this._text.length),c}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; line-height: 1px; paddingｰtop: "+t.fontSize+";",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing&&!this.inCompositionMode){if(t.keyCode in this.keysMap)this[this.keysMap[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){if(!this.isEditing||this._copyDone||this.inCompositionMode)return void(this._copyDone=!1);t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var r=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,i=this._text.length,n=r.length,o,a,s=n-i;""===this.hiddenTextarea.value&&(this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())),this.selectionStart!==this.selectionEnd?(o=this._text.slice(this.selectionStart,this.selectionEnd),s+=this.selectionEnd-this.selectionStart):n<i&&(o=this._text.slice(this.selectionEnd+s,this.selectionEnd));var c=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);a=r.slice(c.selectionEnd-s,c.selectionEnd),o&&o.length&&(this.selectionStart!==this.selectionEnd?this.removeStyleFromTo(this.selectionStart,this.selectionEnd):this.selectionStart>c.selectionStart?this.removeStyleFromTo(this.selectionEnd-o.length,this.selectionEnd):this.removeStyleFromTo(this.selectionEnd,this.selectionEnd+o.length)),a.length&&(e&&a.join("")===fabric.copiedText?this.insertNewStyleBlock(a,this.selectionStart,fabric.copiedTextStyle):this.insertNewStyleBlock(a,this.selectionStart)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){if(this.selectionStart!==this.selectionEnd){var t=this.getSelectedText();fabric.copiedText=t,fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd),this._copyDone=!0}},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(t,e){var r=this._getLineLeftOffset(t),i;return e>0&&(i=this.__charBounds[t][e-1],r+=i.left+i.width),r},getDownCursorOffset:function(t,e){var r=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(r),n=i.lineIndex;if(n===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-r;var o=i.charIndex,a=this._getWidthBeforeCursor(n,o),s=this._getIndexOnLine(n+1,a);return this._textLines[n].slice(o).length+s+2},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var r=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(r),n=i.lineIndex;if(0===n||t.metaKey||33===t.keyCode)return-r;var o=i.charIndex,a=this._getWidthBeforeCursor(n,o),s=this._getIndexOnLine(n-1,a),c=this._textLines[n].slice(0,o);return-this._textLines[n-1].length+s-c.length},_getIndexOnLine:function(t,e){for(var r=this._textLines[t],i=this._getLineLeftOffset(t),n=i,o=0,a,s,c=0,l=r.length;c<l;c++)if(a=this.__charBounds[t][c].width,(n+=a)>e){s=!0;var h=n-a,u=n,f=Math.abs(h-e),d=Math.abs(u-e);o=d<f?c:c-1;break}return s||(o=r.length-1),o},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var r="get"+t+"CursorOffset",i=this[r](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,r){var i;if(t.altKey)i=this["findWordBoundary"+r](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===r?-1:1,!0;i=this["findLineBoundary"+r](this[e])}if(void 0!==typeof i&&this[e]!==i)return this[e]=i,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var r="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?r+="Shift":r+="outShift",this[r](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.set("dirty",!0),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this.canvas&&this.canvas.requestRenderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var r=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(r,this.selectionStart),this.setSelectionStart(r)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),function(){var t=fabric.util.toFixed,e=fabric.Object.NUM_FRACTION_DIGITS;fabric.util.object.extend(fabric.Text.prototype,{toSVG:function(t){var e=this._createBaseSVGMarkup(),r=this._getSVGLeftTopOffsets(),i=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(e,i),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t,e){var r=!0,i=this.getSvgFilter(),n=""===i?"":' style="'+i+'"';t.push("\t<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',n,">\n",e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(!0),'" >\n',e.textSpans.join(""),"\t\t</text>\n","\t</g>\n")},_getSVGTextAndBg:function(t,e){var r=[],i=[],n=t,o;this._setSVGBg(i);for(var a=0,s=this._textLines.length;a<s;a++)o=this._getLineLeftOffset(a),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(i,a,e+o,n),this._setSVGTextLineText(r,a,e+o,n),n+=this.getHeightOfLine(a);return{textSpans:r,textBgRects:i}},_createTextCharSpan:function(r,i,n,o){var a=this.getSvgSpanStyles(i,!1),s=a?'style="'+a+'"':"";return['\t\t\t<tspan x="',t(n,e),'" y="',t(o,e),'" ',s,">",fabric.util.string.escapeXml(r),"</tspan>\n"].join("")},_setSVGTextLineText:function(t,e,r,i){var n=this.getHeightOfLine(e),o,a,s="",c,l,h=0,u=this._textLines[e],f;i+=n*(1-this._fontSizeFraction)/this.lineHeight;for(var d=0,p=u.length-1;d<=p;d++)f=d===p||this.charSpacing,s+=u[d],c=this.__charBounds[e][d],0===h&&(r+=c.kernedWidth-c.width),h+=c.kernedWidth,"justify"!==this.textAlign||f||this._reSpaceAndTab.test(u[d])&&(f=!0),f||(o=o||this.getCompleteStyleDeclaration(e,d),a=this.getCompleteStyleDeclaration(e,d+1),f=this._hasStyleChanged(o,a)),f&&(l=this._getStyleDeclaration(e,d)||{},t.push(this._createTextCharSpan(s,l,r,i)),s="",o=a,r+=h,h=0)},_pushTextBgRect:function(r,i,n,o,a,s){r.push("\t\t<rect ",this._getFillAttributes(i),' x="',t(n,e),'" y="',t(o,e),'" width="',t(a,e),'" height="',t(s,e),'"></rect>\n')},_setSVGTextLineBg:function(t,e,r,i){for(var n=this._textLines[e],o=this.getHeightOfLine(e)/this.lineHeight,a=0,s=0,c,l,h=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),u=0,f=n.length;u<f;u++)c=this.__charBounds[e][u],l=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),l!==h?(h&&this._pushTextBgRect(t,h,r+s,i,a,o),s=c.left,a=c.width,h=l):a+=c.kernedWidth;l&&this._pushTextBgRect(t,l,r+s,i,a,o)},_getFillAttributes:function(t){var e=t&&"string"==typeof t?new fabric.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e=0,r=0,i=0;i<t;i++)e+=this.getHeightOfLine(i);return r=this.getHeightOfLine(i),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return fabric.Object.prototype.getSvgStyles.call(this,t)+" white-space: pre;"}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,initialize:function(t,r){this.callSuper("initialize",t,r),this.ctx=this.objectCaching?this._cacheContext:e.util.createCanvasElement().getContext("2d"),this._dimensionAffectingProps.push("width")},initDimensions:function(){if(!this.__skipDimension){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0;var t=this._splitTextIntoLines(this.text);this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,this._styleMap=this._generateStyleMap(t),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),"justify"===this.textAlign&&this.enlargeSpaces(),this.height=this.calcTextHeight()}},_generateStyleMap:function(t){for(var e=0,r=0,i=0,n={},o=0;o<t.graphemeLines.length;o++)"\n"===t.graphemeText[i]&&o>0?(r=0,i++,e++):this._reSpaceAndTab.test(t.graphemeText[i])&&o>0&&(r++,i++),n[o]={line:e,offset:r},i+=t.graphemeLines[o].length,r+=t.graphemeLines[o].length;return n},styleHas:function(t,r){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[r];i&&(r=i.line)}return e.Text.prototype.styleHas.call(this,t,r)},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[t];if(!r)return null;t=r.line,e=r.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,r){var i=this._styleMap[t];t=i.line,e=i.offset+e,this.styles[t][e]=r},_deleteStyleDeclaration:function(t,e){var r=this._styleMap[t];t=r.line,e=r.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return this.styles[e.line]},_setLineStyle:function(t,e){var r=this._styleMap[t];this.styles[r.line]=e},_deleteLineStyle:function(t){var e=this._styleMap[t];delete this.styles[e.line]},_wrapText:function(t,e){var r=[],i;for(this.isWrapping=!0,i=0;i<t.length;i++)r=r.concat(this._wrapLine(t[i],i,e));return this.isWrapping=!1,r},_measureWord:function(t,e,r){var i=0,n,o=!0;r=r||0;for(var a=0,s=t.length;a<s;a++){i+=this._getGraphemeBox(t[a],e,a+r,n,!0).kernedWidth,n=t[a]}return i},_wrapLine:function(t,r,i){for(var n=0,o=[],a=[],s=t.split(this._reSpaceAndTab),c="",l=0,h=" ",u=0,f=0,d=0,p=!0,g=this._getWidthOfCharSpacing(),v=0;v<s.length;v++)c=e.util.string.graphemeSplit(s[v]),u=this._measureWord(c,r,l),l+=c.length,n+=f+u-g,n>=i&&!p&&(o.push(a),a=[],n=u,p=!0),p||a.push(" "),a=a.concat(c),f=this._measureWord([" "],r,l),l++,p=!1,u>d&&(d=u);return v&&o.push(a),d>this.dynamicMinWidth&&(this.dynamicMinWidth=d-g),o},_splitTextIntoLines:function(t){for(var r=e.Text.prototype._splitTextIntoLines.call(this,t),i=this._wrapText(r.lines,this.width),n=new Array(i.length),o=0;o<i.length;o++)n[o]=i[o].join("");return r.lines=n,r.graphemeLines=i,r},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},toObject:function(t){return this.callSuper("toObject",["minWidth"].concat(t))}}),e.Textbox.fromObject=function(t,r){return e.Object._fromObject("Textbox",t,r,"text")}}(exports),function(){var t=fabric.Canvas.prototype._setObjectScale;fabric.Canvas.prototype._setObjectScale=function(e,r,i,n,o,a,s){var c=r.target;if(!("x"===o&&c instanceof fabric.Textbox))return t.call(fabric.Canvas.prototype,e,r,i,n,o,a,s);var l=c._getTransformedDimensions().x,h=c.width*(e.x/l);return h>=c.getMinWidth()?(c.set("width",h),!0):void 0},fabric.util.object.extend(fabric.Textbox.prototype,{_removeExtraneousStyles:function(){for(var t in this._styleMap)this._textLines[t]||delete this.styles[this._styleMap[t].line]}})}(),function(){function request(t,e,r){var i=URL.parse(t);i.port||(i.port=0===i.protocol.indexOf("https:")?443:80);var n=0===i.protocol.indexOf("https:")?HTTPS:HTTP,o=n.request({hostname:i.hostname,port:i.port,path:i.path,method:"GET"},function(t){var i="";e&&t.setEncoding(e),t.on("end",function(){r(i)}),t.on("data",function(e){200===t.statusCode&&(i+=e)})});o.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+i.hostname+":"+i.port):fabric.log(t.message),r(null)}),o.end()}function requestFs(t,e){__webpack_require__(78).readFile(t,function(t,r){if(t)throw fabric.log(t),t;e(r)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=__webpack_require__(65).DOMParser,URL=__webpack_require__(25),HTTP=__webpack_require__(26),HTTPS=__webpack_require__(77),Canvas=!function t(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}(),Image=!function t(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}().Image;fabric.util.loadImage=function(t,e,r){function i(i){i?(n.src=new Buffer(i,"binary"),n._src=t,e&&e.call(r,n)):(n=null,e&&e.call(r,null,!0))}var n=new Image;t&&(t instanceof Buffer||0===t.indexOf("data"))?(n.src=n._src=t,e&&e.call(r,n)):t&&0!==t.indexOf("http")?requestFs(t,i):t?request(t,"binary",i):e&&e.call(r,t)},fabric.loadSVGFromURL=function(t,e,r){t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim(),0!==t.indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,r)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,r)})},fabric.loadSVGFromString=function(t,e,r){var i=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(i.documentElement,function(t,r){e&&e(t,r)},r)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.createCanvasForNode=function(t,e,r,i){i=i||r;var n=fabric.document.createElement("canvas"),o=new Canvas(t||600,e||600,i),a=new Canvas(t||600,e||600,i);n.width=o.width,n.height=o.height,r=r||{},r.nodeCanvas=o,r.nodeCacheCanvas=a;var s=fabric.Canvas||fabric.StaticCanvas,c=new s(n,r);return c.nodeCanvas=o,c.nodeCacheCanvas=a,c.contextContainer=o.getContext("2d"),c.contextCache=a.getContext("2d"),c.Font=Canvas.Font,c};var originaInitStatic=fabric.StaticCanvas.prototype._initStatic;fabric.StaticCanvas.prototype._initStatic=function(t,e){t=t||fabric.document.createElement("canvas"),this.nodeCanvas=new Canvas(t.width,t.height),this.nodeCacheCanvas=new Canvas(t.width,t.height),originaInitStatic.call(this,t,e),this.contextContainer=this.nodeCanvas.getContext("2d"),this.contextCache=this.nodeCacheCanvas.getContext("2d"),this.Font=Canvas.Font},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)},fabric.StaticCanvas.prototype._initRetinaScaling=function(){if(this._isRetinaScaling())return this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.nodeCanvas.width=this.width*fabric.devicePixelRatio,this.nodeCanvas.height=this.height*fabric.devicePixelRatio,this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio),this},fabric.Canvas&&(fabric.Canvas.prototype._initRetinaScaling=fabric.StaticCanvas.prototype._initRetinaScaling);var origSetBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension;fabric.StaticCanvas.prototype._setBackstoreDimension=function(t,e){return origSetBackstoreDimension.call(this,t,e),this.nodeCanvas[t]=e,this},fabric.Canvas&&(fabric.Canvas.prototype._setBackstoreDimension=fabric.StaticCanvas.prototype._setBackstoreDimension)}}()}).call(exports,__webpack_require__(2).Buffer,__webpack_require__(1))},function(t,e){},function(t,e){},function(t,e,r){(function(t,i){var n;!function(o){function a(t){throw new RangeError(I[t])}function s(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}function c(t,e){var r=t.split("@"),i="";return r.length>1&&(i=r[0]+"@",t=r[1]),t=t.replace(D,"."),i+s(t.split("."),e).join(".")}function l(t){for(var e=[],r=0,i=t.length,n,o;r<i;)n=t.charCodeAt(r++),n>=55296&&n<=56319&&r<i?(o=t.charCodeAt(r++),56320==(64512&o)?e.push(((1023&n)<<10)+(1023&o)+65536):(e.push(n),r--)):e.push(n);return e}function h(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=F(t>>>10&1023|55296),t=56320|1023&t),e+=F(t)}).join("")}function u(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:x}function f(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,r){var i=0;for(t=r?M(t/k):t>>1,t+=M(t/e);t>j*A>>1;i+=x)t=M(t/j);return M(i+(j+1)*t/(t+T))}function p(t){var e=[],r=t.length,i,n=0,o=E,s=P,c,l,f,p,g,v,m,b,y;for(c=t.lastIndexOf(O),c<0&&(c=0),l=0;l<c;++l)t.charCodeAt(l)>=128&&a("not-basic"),e.push(t.charCodeAt(l));for(f=c>0?c+1:0;f<r;){for(p=n,g=1,v=x;f>=r&&a("invalid-input"),m=u(t.charCodeAt(f++)),(m>=x||m>M((S-n)/g))&&a("overflow"),n+=m*g,b=v<=s?C:v>=s+A?A:v-s,!(m<b);v+=x)y=x-b,g>M(S/y)&&a("overflow"),g*=y;i=e.length+1,s=d(n-p,i,0==p),M(n/i)>S-o&&a("overflow"),o+=M(n/i),n%=i,e.splice(n++,0,o)}return h(e)}function g(t){var e,r,i,n,o,s,c,h,u,p,g,v=[],m,b,y,_;for(t=l(t),m=t.length,e=E,r=0,o=P,s=0;s<m;++s)(g=t[s])<128&&v.push(F(g));for(i=n=v.length,n&&v.push(O);i<m;){for(c=S,s=0;s<m;++s)(g=t[s])>=e&&g<c&&(c=g);for(b=i+1,c-e>M((S-r)/b)&&a("overflow"),r+=(c-e)*b,e=c,s=0;s<m;++s)if(g=t[s],g<e&&++r>S&&a("overflow"),g==e){for(h=r,u=x;p=u<=o?C:u>=o+A?A:u-o,!(h<p);u+=x)_=h-p,y=x-p,v.push(F(f(p+_%y,0))),h=M(_/y);v.push(F(f(h,0))),o=d(r,b,i==n),r=0,++i}++r,++e}return v.join("")}function v(t){return c(t,function(t){return R.test(t)?p(t.slice(4).toLowerCase()):t})}function m(t){return c(t,function(t){return L.test(t)?"xn--"+g(t):t})}var b="object"==typeof e&&e&&!e.nodeType&&e,y="object"==typeof t&&t&&!t.nodeType&&t,_="object"==typeof i&&i;_.global!==_&&_.window!==_&&_.self!==_||(o=_);var w,S=2147483647,x=36,C=1,A=26,T=38,k=700,P=72,E=128,O="-",R=/^xn--/,L=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=x-C,M=Math.floor,F=String.fromCharCode,N;w={version:"1.4.1",ucs2:{decode:l,encode:h},decode:p,encode:g,toASCII:m,toUnicode:v},void 0!==(n=function(){return w}.call(e,r,e,t))&&(t.exports=n)}(this)}).call(e,r(67)(t),r(0))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(70),e.encode=e.stringify=r(71)},function(t,e,r){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var l=t.length;c>0&&l>c&&(l=c);for(var h=0;h<l;++h){var u=t[h].replace(s,"%20"),f=u.indexOf(r),d,p,g,v;f>=0?(d=u.substr(0,f),p=u.substr(f+1)):(d=u,p=""),g=decodeURIComponent(d),v=decodeURIComponent(p),i(a,g)?n(a[g])?a[g].push(v):a[g]=[a[g],v]:a[g]=v}return a};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";function i(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?i(a(t),function(a){var s=encodeURIComponent(n(a))+r;return o(t[a])?i(t[a],function(t){return s+encodeURIComponent(n(t))}).join(e):s+encodeURIComponent(n(t[a]))}).join(e):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){(function(e,i,n){function o(t,e){return s.fetch&&e?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&t?"arraybuffer":s.vbArray&&t?"text:vbarray":"text"}function a(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}}var s=r(27),c=r(3),l=r(73),h=r(9),u=r(74),f=l.IncomingMessage,d=l.readyStates,p=t.exports=function(t){var r=this;h.Writable.call(r),r._opts=t,r._body=[],r._headers={},t.auth&&r.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){r.setHeader(e,t.headers[e])});var i,n=!0;if("disable-fetch"===t.mode||"timeout"in t)n=!1,i=!0;else if("prefer-streaming"===t.mode)i=!1;else if("allow-wrong-content-type"===t.mode)i=!s.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");i=!0}r._mode=o(i,n),r.on("finish",function(){r._onFinish()})};c(p,h.Writable),p.prototype.setHeader=function(t,e){var r=this,i=t.toLowerCase();-1===g.indexOf(i)&&(r._headers[i]={name:t,value:e})},p.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},p.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},p.prototype._onFinish=function(){var t=this;if(!t._destroyed){var r=t._opts,o=t._headers,a=null;"GET"!==r.method&&"HEAD"!==r.method&&(a=s.blobConstructor?new i.Blob(t._body.map(function(t){return u(t)}),{type:(o["content-type"]||{}).value||""}):e.concat(t._body).toString());var c=[];if(Object.keys(o).forEach(function(t){var e=o[t].name,r=o[t].value;Array.isArray(r)?r.forEach(function(t){c.push([e,t])}):c.push([e,r])}),"fetch"===t._mode)i.fetch(t._opts.url,{method:t._opts.method,headers:c,body:a||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin"}).then(function(e){t._fetchResponse=e,t._connect()},function(e){t.emit("error",e)});else{var l=t._xhr=new i.XMLHttpRequest;try{l.open(t._opts.method,t._opts.url,!0)}catch(e){return void n.nextTick(function(){t.emit("error",e)})}"responseType"in l&&(l.responseType=t._mode.split(":")[0]),"withCredentials"in l&&(l.withCredentials=!!r.withCredentials),"text"===t._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in r&&(l.timeout=r.timeout,l.ontimeout=function(){t.emit("timeout")}),c.forEach(function(t){l.setRequestHeader(t[0],t[1])}),t._response=null,l.onreadystatechange=function(){switch(l.readyState){case d.LOADING:case d.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(l.onprogress=function(){t._onXHRProgress()}),l.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{l.send(a)}catch(e){return void n.nextTick(function(){t.emit("error",e)})}}}},p.prototype._onXHRProgress=function(){var t=this;a(t._xhr)&&!t._destroyed&&(t._response||t._connect(),t._response._onXHRProgress())},p.prototype._connect=function(){var t=this;t._destroyed||(t._response=new f(t._xhr,t._fetchResponse,t._mode),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))},p.prototype._write=function(t,e,r){this._body.push(t),r()},p.prototype.abort=p.prototype.destroy=function(){var t=this;t._destroyed=!0,t._response&&(t._response._destroyed=!0),t._xhr&&t._xhr.abort()},p.prototype.end=function(t,e,r){var i=this;"function"==typeof t&&(r=t,t=void 0),h.Writable.prototype.end.call(i,t,e,r)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(e,r(2).Buffer,r(0),r(1))},function(t,e,r){(function(t,i,n){var o=r(27),a=r(3),s=r(9),c=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=e.IncomingMessage=function(e,r,n){function a(){l.read().then(function(t){if(!c._destroyed){if(t.done)return void c.push(null);c.push(new i(t.value)),a()}}).catch(function(t){c.emit("error",t)})}var c=this;if(s.Readable.call(c),c._mode=n,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){t.nextTick(function(){c.emit("close")})}),"fetch"===n){c._fetchResponse=r,c.url=r.url,c.statusCode=r.status,c.statusMessage=r.statusText,r.headers.forEach(function(t,e){c.headers[e.toLowerCase()]=t,c.rawHeaders.push(e,t)});var l=r.body.getReader();a()}else{c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText;if(e.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var r=e[1].toLowerCase();"set-cookie"===r?(void 0===c.headers[r]&&(c.headers[r]=[]),c.headers[r].push(e[2])):void 0!==c.headers[r]?c.headers[r]+=", "+e[2]:c.headers[r]=e[2],c.rawHeaders.push(e[1],e[2])}}),c._charset="x-user-defined",!o.overrideMimeType){var h=c.rawHeaders["mime-type"];if(h){var u=h.match(/;\s*charset=([^;])(;|$)/);u&&(c._charset=u[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(l,s.Readable),l.prototype._read=function(){},l.prototype._onXHRProgress=function(){var t=this,e=t._xhr,r=null;switch(t._mode){case"text:vbarray":if(e.readyState!==c.DONE)break;try{r=new n.VBArray(e.responseBody).toArray()}catch(t){}if(null!==r){t.push(new i(r));break}case"text":try{r=e.responseText}catch(e){t._mode="text:vbarray";break}if(r.length>t._pos){var o=r.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new i(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);t.push(a)}else t.push(o,t._charset);t._pos=r.length}break;case"arraybuffer":if(e.readyState!==c.DONE||!e.response)break;r=e.response,t.push(new i(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=e.response,e.readyState!==c.LOADING||!r)break;t.push(new i(new Uint8Array(r)));break;case"ms-stream":if(r=e.response,e.readyState!==c.LOADING)break;var l=new n.MSStreamReader;l.onprogress=function(){l.result.byteLength>t._pos&&(t.push(new i(new Uint8Array(l.result.slice(t._pos)))),t._pos=l.result.byteLength)},l.onload=function(){t.push(null)},l.readAsArrayBuffer(r)}t._xhr.readyState===c.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(e,r(1),r(2).Buffer,r(0))},function(t,e,r){var i=r(2).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(i.isBuffer(t)){for(var e=new Uint8Array(t.length),r=t.length,n=0;n<r;n++)e[n]=t[n];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){function r(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)i.call(r,n)&&(t[n]=r[n])}return t}t.exports=r;var i=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,r){var i=r(26),n=t.exports;for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);n.request=function(t,e){return t||(t={}),t.scheme="https",t.protocol="https:",i.request.call(this,t,e)}},function(t,e){},function(t,e,r){"use strict";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(){this._events=new i,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,s="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(s=!1)),o.prototype.eventNames=function t(){var e=[],r,i;if(0===this._eventsCount)return e;for(i in r=this._events)a.call(r,i)&&e.push(s?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e},o.prototype.listeners=function t(e,r){var i=s?s+e:e,n=this._events[i];if(r)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var o=0,a=n.length,c=new Array(a);o<a;o++)c[o]=n[o].fn;return c},o.prototype.emit=function t(e,r,i,n,o,a){var c=s?s+e:e;if(!this._events[c])return!1;var l=this._events[c],h=arguments.length,u,f;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,r),!0;case 3:return l.fn.call(l.context,r,i),!0;case 4:return l.fn.call(l.context,r,i,n),!0;case 5:return l.fn.call(l.context,r,i,n,o),!0;case 6:return l.fn.call(l.context,r,i,n,o,a),!0}for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];l.fn.apply(l.context,u)}else{var d=l.length,p;for(f=0;f<d;f++)switch(l[f].once&&this.removeListener(e,l[f].fn,void 0,!0),h){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,r);break;case 3:l[f].fn.call(l[f].context,r,i);break;case 4:l[f].fn.call(l[f].context,r,i,n);break;default:if(!u)for(p=1,u=new Array(h-1);p<h;p++)u[p-1]=arguments[p];l[f].fn.apply(l[f].context,u)}}return!0},o.prototype.on=function t(e,r,i){var o=new n(r,i||this),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},o.prototype.once=function t(e,r,i){var o=new n(r,i||this,!0),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},o.prototype.removeListener=function t(e,r,n,o){var a=s?s+e:e;if(!this._events[a])return this;if(!r)return 0==--this._eventsCount?this._events=new i:delete this._events[a],this;var c=this._events[a];if(c.fn)c.fn!==r||o&&!c.once||n&&c.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[a]);else{for(var l=0,h=[],u=c.length;l<u;l++)(c[l].fn!==r||o&&!c[l].once||n&&c[l].context!==n)&&h.push(c[l]);h.length?this._events[a]=1===h.length?h[0]:h:0==--this._eventsCount?this._events=new i:delete this._events[a]}return this},o.prototype.removeAllListeners=function t(e){var r;return e?(r=s?s+e:e,this._events[r]&&(0==--this._eventsCount?this._events=new i:delete this._events[r])):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function t(){return this},o.prefixed=s,o.EventEmitter=o,t.exports=o},function(t,e,r){"use strict";function i(t){var e=0,r=0,i=0,s=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),i=e*n,s=r*n,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||s)&&t.deltaMode&&(1==t.deltaMode?(i*=o,s*=o):(i*=a,s*=a)),i&&!e&&(e=i<1?-1:1),s&&!r&&(r=s<1?-1:1),{spinX:e,spinY:r,pixelX:i,pixelY:s}}var n=10,o=40,a=800;t.exports=i}])});